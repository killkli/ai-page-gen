import{r as i,j as e}from"./react-vendor-CKBOTALK.js";import{e as g,f as I}from"./app-services-2y2dLhqm.js";import{H as T,L as f}from"./interactive-components-Bz66s04f.js";import{C as A}from"./ConversationDisplay-C7WQRRHn.js";import"./vendor-D_G8XHYM.js";import"./ai-vendor-DJy2VIy7.js";const z=()=>{const[r,n]=i.useState({topic:"",scenario:"",difficulty:"normal",participantCount:2,duration:10,focusAreas:[],culturalContext:""}),[d,u]=i.useState(""),[h,b]=i.useState(!1),[p,l]=i.useState(null),[t,y]=i.useState(null),[v,j]=i.useState(!1),[c,N]=i.useState(""),[o,x]=i.useState(0),w=g.getConversationTemplates(),C=g.getDifficultyLevels();i.useEffect(()=>{const s=localStorage.getItem("gemini_api_key");s&&u(s)},[]);const k=s=>{n({...r,topic:s.title,scenario:s.scenario,difficulty:s.suggestedDifficulty,participantCount:s.participants.length})},S=async()=>{if(!d.trim()){l("Please enter your Gemini API key");return}if(!r.topic.trim()||!r.scenario.trim()){l("Please provide both topic and scenario");return}b(!0),l(null);try{localStorage.setItem("gemini_api_key",d);const s=await g.generateConversationPractice(r,d);y(s),x(0)}catch(s){console.error("Failed to generate conversation:",s),l("Failed to generate conversation. Please check your API key and try again.")}finally{b(!1)}},L=async()=>{if(t){j(!0),l(null);try{const s={practice:t,metadata:{createdBy:"AI Page Gen",generatedAt:new Date().toISOString()}},a=await I(s),m=`${window.location.origin}/ai-page-gen/conversation-practice/${a}`;N(m)}catch(s){console.error("Failed to share conversation:",s),l("Failed to create shareable link")}finally{j(!1)}}},P=()=>{navigator.clipboard.writeText(c)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"è‹±æ–‡å°è©±ç·´ç¿’ç”Ÿæˆå™¨"}),e.jsx("p",{className:"text-gray-600",children:"Create interactive English conversation practices for your students"})]}),e.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm",children:[e.jsx(T,{className:"w-4 h-4"}),"è¿”å›žé¦–é "]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gemini API Key"}),e.jsx("input",{type:"password",value:d,onChange:s=>u(s.target.value),placeholder:"Enter your Gemini API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Templates"}),e.jsx("div",{className:"space-y-4",children:w.map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:s.category}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.scenarios.slice(0,2).map((a,m)=>e.jsxs("button",{onClick:()=>k(a),className:"text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:a.title}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[a.scenario.substring(0,60),"..."]})]},m))})]},s.category))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conversation Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic *"}),e.jsx("input",{type:"text",value:r.topic,onChange:s=>n({...r,topic:s.target.value}),placeholder:"e.g., Ordering food at a restaurant",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scenario *"}),e.jsx("textarea",{value:r.scenario,onChange:s=>n({...r,scenario:s.target.value}),placeholder:"Detailed description of the conversation context",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(s=>e.jsxs("button",{onClick:()=>n({...r,difficulty:s.level}),className:`p-3 rounded-lg border text-sm transition-colors ${r.difficulty===s.level?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[e.jsx("div",{className:"font-medium",children:s.level}),e.jsx("div",{className:"text-xs opacity-75 mt-1",children:s.description.split(" - ")[0]})]},s.level))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Participants"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>n({...r,participantCount:2}),className:`px-4 py-2 rounded-lg border transition-colors ${r.participantCount===2?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"2 People"}),e.jsx("button",{onClick:()=>n({...r,participantCount:3}),className:`px-4 py-2 rounded-lg border transition-colors ${r.participantCount===3?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"3 People"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Duration (minutes)"}),e.jsx("input",{type:"number",min:"5",max:"30",value:r.duration,onChange:s=>n({...r,duration:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Areas (optional)"}),e.jsx("input",{type:"text",value:r.focusAreas?.join(", ")||"",onChange:s=>n({...r,focusAreas:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),placeholder:"e.g., pronunciation, grammar, vocabulary",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:S,disabled:h||!d.trim(),className:"w-full px-4 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{children:"Generate Conversation"})]})})})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"text-sm text-red-700 mt-1",children:p})]})]})})]}),e.jsx("div",{className:"space-y-6",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generated Conversation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Title"}),e.jsx("div",{className:"text-blue-700",children:t.title})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Difficulty"}),e.jsx("div",{className:"text-green-700",children:t.difficulty})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Duration"}),e.jsxs("div",{className:"text-purple-700",children:[t.duration," min"]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Turns"}),e.jsx("div",{className:"text-orange-700",children:t.dialogue.length})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Participants"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.participants.map((s,a)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:s},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("div",{className:"text-gray-600 text-sm",children:t.description})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preview"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(Math.max(0,o-1)),disabled:o===0,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[o+1," / ",t.dialogue.length]}),e.jsx("button",{onClick:()=>x(Math.min(t.dialogue.length-1,o+1)),disabled:o===t.dialogue.length-1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})})]})]}),e.jsx(A,{turn:t.dialogue[o],isCurrentTurn:!0,isStudentTurn:!1,showTranslation:!0,showHints:!0})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share with Students"}),c?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Shareable Link"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:c,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-gray-50"}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-r-lg",children:"Copy"})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Students can use this link to practice the conversation"})]}):e.jsx("button",{onClick:L,disabled:v,className:"w-full px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("span",{children:"Creating Share Link..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"})}),e.jsx("span",{children:"Create Share Link"})]})})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ’¬"}),e.jsx("div",{className:"text-gray-600",children:"Generate a conversation to see the preview"})]})})]})]})})};export{z as default};
