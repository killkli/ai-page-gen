import{u as b,r as n,j as e}from"./react-vendor-CKBOTALK.js";import{L as f,H as y}from"./interactive-components-Bz66s04f.js";import{L as w}from"./app-services-2y2dLhqm.js";import{e as v}from"./index-C3TG8Xrl.js";import{W as N}from"./teacher-components-h4c49MD4.js";import"./vendor-D_G8XHYM.js";import"./ai-vendor-DJy2VIy7.js";import"./ui-utilities-SaSpuDSU.js";const _=()=>{const[o]=b(),[m,u]=n.useState(null),[p,c]=n.useState(!0),[x,g]=n.useState(null),[t,a]=n.useState(""),[h,l]=n.useState("manual"),d=o.get("binId");n.useEffect(()=>{(async()=>{if(!d){g("ç¼ºå°‘å…§å®¹ ID"),c(!1);return}try{c(!0);const r=await w(d);u(r.writingPractice);try{const i=await v(o);i&&(a(i),l("url"),localStorage.setItem("gemini_api_key",i),console.log("ä½¿ç”¨ URL ä¸­çš„ API Key é€²è¡Œ AI æ‰¹æ”¹"))}catch(i){console.warn("è§£æ URL API Key å¤±æ•—:",i)}}catch(r){console.error("è¼‰å…¥åˆ†äº«å…§å®¹å¤±æ•—:",r),g("è¼‰å…¥åˆ†äº«å…§å®¹å¤±æ•—ï¼Œè«‹æª¢æŸ¥é€£çµæ˜¯å¦æ­£ç¢º")}finally{c(!1)}})()},[d,o]),n.useEffect(()=>{if(!t){const s=localStorage.getItem("gemini_api_key");s&&(a(s),l("localStorage"))}},[t]);const j=s=>{s.preventDefault();const r=t.trim();r&&(localStorage.setItem("gemini_api_key",r),a(r),l("manual"))};return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{}),e.jsx("p",{className:"mt-4 text-gray-600",children:"è¼‰å…¥å¯«ä½œç·´ç¿’å…§å®¹ä¸­..."})]})}):x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"è¼‰å…¥å¤±æ•—"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"é‡æ–°è¼‰å…¥"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 text-blue-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ğŸ“ å¯«ä½œç·´ç¿’å¹³å°"}),e.jsx("p",{className:"text-gray-600",children:"å®Œæˆç·´ç¿’å¾Œå¯ç²å¾— AI å³æ™‚æ‰¹æ”¹å›é¥‹"})]}),e.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsx(y,{className:"w-4 h-4"}),"è¿”å›é¦–é "]})]}),!t&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:"è¨­å®š API Key ä»¥ä½¿ç”¨ AI æ‰¹æ”¹åŠŸèƒ½"}),e.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["è¼¸å…¥æ‚¨çš„ Google Gemini API Key ä¾†å•Ÿç”¨ AI è‡ªå‹•æ‰¹æ”¹åŠŸèƒ½ã€‚",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:"é»æ­¤å–å¾— API Key"})]})]})]}),e.jsxs("form",{onSubmit:j,className:"flex gap-3",children:[e.jsx("input",{type:"password",value:t,onChange:s=>a(s.target.value),placeholder:"è«‹è¼¸å…¥æ‚¨çš„ Gemini API Key",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"submit",disabled:!t.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"è¨­å®š"})]})]}),t&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"API Key å·²è¨­å®šï¼Œå¯ä»¥ä½¿ç”¨ AI æ‰¹æ”¹åŠŸèƒ½"}),h==="url"&&e.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ”—"}),e.jsx("span",{children:"ä¾†è‡ªåˆ†äº«é€£çµ - è€å¸«å·²ç‚ºæ‚¨é…ç½®å¥½ AI åŠŸèƒ½"})]}),h==="localStorage"&&e.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ’¾"}),e.jsx("span",{children:"ä¾†è‡ªæœ¬åœ°å­˜å„²"})]})]})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("gemini_api_key"),a(""),l("manual")},className:"text-sm text-green-600 hover:text-green-800 underline",children:"é‡æ–°è¨­å®š"})]})})]}),m&&e.jsx(N,{content:m,apiKey:t,isStudentMode:!0}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[e.jsx("p",{children:"ğŸ¤– æœ¬å¹³å°ä½¿ç”¨ Google Gemini AI æä¾›æ™ºèƒ½æ‰¹æ”¹å›é¥‹"}),e.jsx("p",{className:"mt-1",children:"ğŸ’¡ å»ºè­°ï¼šå®Œæˆç·´ç¿’å¾Œé»æ“Šã€Œç²å¾— AI æ‰¹æ”¹ã€æŒ‰éˆ•ï¼Œå³å¯ç²å¾—è©³ç´°çš„å­¸ç¿’å»ºè­°"})]})]})})};export{_ as default};
