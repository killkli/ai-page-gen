var xo=Object.defineProperty,Ro=Object.defineProperties;var Po=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var wo=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable;var At=Math.pow,St=(t,e,n)=>e in t?xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))wo.call(e,n)&&St(t,n,e[n]);if(Et)for(var n of Et(e))No.call(e,n)&&St(t,n,e[n]);return t},x=(t,e)=>Ro(t,Po(e));var v=(t,e,n)=>new Promise((o,r)=>{var l=d=>{try{u(n.next(d))}catch(c){r(c)}},a=d=>{try{u(n.throw(d))}catch(c){r(c)}},u=d=>d.done?o(d.value):Promise.resolve(d.value).then(l,a);u((n=n.apply(t,e)).next())});var U;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const l={};for(const a of r)l[a]=a;return l},t.getValidEnumValues=r=>{const l=t.objectKeys(r).filter(u=>typeof r[r[u]]!="number"),a={};for(const u of l)a[u]=r[u];return t.objectValues(a)},t.objectValues=r=>t.objectKeys(r).map(function(l){return r[l]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const l=[];for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&l.push(a);return l},t.find=(r,l)=>{for(const a of r)if(l(a))return a},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function o(r,l=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(l)}t.joinValues=o,t.jsonStringifyReplacer=(r,l)=>typeof l=="bigint"?l.toString():l})(U||(U={}));var It;(function(t){t.mergeShapes=(e,n)=>g(g({},e),n)})(It||(It={}));const E=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oe=t=>{switch(typeof t){case"undefined":return E.undefined;case"string":return E.string;case"number":return Number.isNaN(t)?E.nan:E.number;case"boolean":return E.boolean;case"function":return E.function;case"bigint":return E.bigint;case"symbol":return E.symbol;case"object":return Array.isArray(t)?E.array:t===null?E.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?E.promise:typeof Map!="undefined"&&t instanceof Map?E.map:typeof Set!="undefined"&&t instanceof Set?E.set:typeof Date!="undefined"&&t instanceof Date?E.date:E.object;default:return E.unknown}},T=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class te extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},o={_errors:[]},r=l=>{for(const a of l.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)o._errors.push(n(a));else{let u=o,d=0;for(;d<a.path.length;){const c=a.path[d];d===a.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(a))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return r(this),o}static assert(e){if(!(e instanceof te))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},o=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):o.push(e(r));return{formErrors:o,fieldErrors:n}}get formErrors(){return this.flatten()}}te.create=t=>new te(t);const je=(t,e)=>{let n;switch(t.code){case T.invalid_type:t.received===E.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case T.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,U.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:n=`Unrecognized key(s) in object: ${U.joinValues(t.keys,", ")}`;break;case T.invalid_union:n="Invalid input";break;case T.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${U.joinValues(t.options)}`;break;case T.invalid_enum_value:n=`Invalid enum value. Expected ${U.joinValues(t.options)}, received '${t.received}'`;break;case T.invalid_arguments:n="Invalid function arguments";break;case T.invalid_return_type:n="Invalid function return type";break;case T.invalid_date:n="Invalid date";break;case T.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:U.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case T.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case T.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case T.custom:n="Invalid input";break;case T.invalid_intersection_types:n="Intersection results could not be merged";break;case T.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case T.not_finite:n="Number must be finite";break;default:n=e.defaultError,U.assertNever(t)}return{message:n}};let ko=je;function Do(){return ko}const Vo=t=>{const{data:e,path:n,errorMaps:o,issueData:r}=t,l=[...n,...r.path||[]],a=x(g({},r),{path:l});if(r.message!==void 0)return x(g({},r),{path:l,message:r.message});let u="";const d=o.filter(c=>!!c).slice().reverse();for(const c of d)u=c(a,{data:e,defaultError:u}).message;return x(g({},r),{path:l,message:u})};function _(t,e){const n=Do(),o=Vo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===je?void 0:je].filter(r=>!!r)});t.common.issues.push(o)}class O{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const o=[];for(const r of n){if(r.status==="aborted")return R;r.status==="dirty"&&e.dirty(),o.push(r.value)}return{status:e.value,value:o}}static mergeObjectAsync(e,n){return v(this,null,function*(){const o=[];for(const r of n){const l=yield r.key,a=yield r.value;o.push({key:l,value:a})}return O.mergeObjectSync(e,o)})}static mergeObjectSync(e,n){const o={};for(const r of n){const{key:l,value:a}=r;if(l.status==="aborted"||a.status==="aborted")return R;l.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof a.value!="undefined"||r.alwaysSet)&&(o[l.value]=a.value)}return{status:e.value,value:o}}}const R=Object.freeze({status:"aborted"}),Ie=t=>({status:"dirty",value:t}),Y=t=>({status:"valid",value:t}),Mt=t=>t.status==="aborted",xt=t=>t.status==="dirty",ge=t=>t.status==="valid",Fe=t=>typeof Promise!="undefined"&&t instanceof Promise;var S;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(S||(S={}));class j{constructor(e,n,o,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=o,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Rt=(t,e)=>{if(ge(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new te(t.common.issues);return this._error=n,this._error}}};function D(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:o,description:r}=t;if(e&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,u)=>{var c,f;const{message:d}=t;return a.code==="invalid_enum_value"?{message:d!=null?d:u.defaultError}:typeof u.data=="undefined"?{message:(c=d!=null?d:o)!=null?c:u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:(f=d!=null?d:n)!=null?f:u.defaultError}},description:r}}class F{get description(){return this._def.description}_getType(e){return oe(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new O,ctx:{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fe(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const o=this.safeParse(e,n);if(o.success)return o.data;throw o.error}safeParse(e,n){var l;const o={common:{issues:[],async:(l=n==null?void 0:n.async)!=null?l:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},r=this._parseSync({data:e,path:o.path,parent:o});return Rt(o,r)}"~validate"(e){var o,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:n});return ge(l)?{value:l.value}:{issues:n.common.issues}}catch(l){(r=(o=l==null?void 0:l.message)==null?void 0:o.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(l=>ge(l)?{value:l.value}:{issues:n.common.issues})}parseAsync(e,n){return v(this,null,function*(){const o=yield this.safeParseAsync(e,n);if(o.success)return o.data;throw o.error})}safeParseAsync(e,n){return v(this,null,function*(){const o={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},r=this._parse({data:e,path:o.path,parent:o}),l=yield Fe(r)?r:Promise.resolve(r);return Rt(o,l)})}refine(e,n){const o=r=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,l)=>{const a=e(r),u=()=>l.addIssue(g({code:T.custom},o(r)));return typeof Promise!="undefined"&&a instanceof Promise?a.then(d=>d?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,n){return this._refinement((o,r)=>e(o)?!0:(r.addIssue(typeof n=="function"?n(o,r):n),!1))}_refinement(e){return new Te({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ie.create(this,this._def)}nullable(){return Ce.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Q.create(this)}promise(){return $e.create(this,this._def)}or(e){return Ge.create([this,e],this._def)}and(e){return qe.create(this,e,this._def)}transform(e){return new Te(x(g({},D(this._def)),{schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const n=typeof e=="function"?e:()=>e;return new ot(x(g({},D(this._def)),{innerType:this,defaultValue:n,typeName:M.ZodDefault}))}brand(){return new oi(g({typeName:M.ZodBranded,type:this},D(this._def)))}catch(e){const n=typeof e=="function"?e:()=>e;return new it(x(g({},D(this._def)),{innerType:this,catchValue:n,typeName:M.ZodCatch}))}describe(e){const n=this.constructor;return new n(x(g({},this._def),{description:e}))}pipe(e){return ht.create(this,e)}readonly(){return rt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lo=/^c[^\s-]{8,}$/i,Fo=/^[0-9a-z]+$/,Uo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Go=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qo=/^[a-z0-9_-]{21}$/i,Bo=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$o=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Jo=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xe;const Ho=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Oo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Wo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ko=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zo=new RegExp(`^${eo}$`);function to(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Xo(t){return new RegExp(`^${to(t)}$`)}function Qo(t){let e=`${eo}T${to(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function jo(t,e){return!!((e==="v4"||!e)&&Ho.test(t)||(e==="v6"||!e)&&Wo.test(t))}function ei(t,e){if(!Bo.test(t))return!1;try{const[n]=t.split("."),o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(o));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch(n){return!1}}function ti(t,e){return!!((e==="v4"||!e)&&Oo.test(t)||(e==="v6"||!e)&&Yo.test(t))}class z extends F{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==E.string){const l=this._getOrReturnCtx(e);return _(l,{code:T.invalid_type,expected:E.string,received:l.parsedType}),R}const o=new O;let r;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:T.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if(l.kind==="max")e.data.length>l.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:T.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if(l.kind==="length"){const a=e.data.length>l.value,u=e.data.length<l.value;(a||u)&&(r=this._getOrReturnCtx(e,r),a?_(r,{code:T.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):u&&_(r,{code:T.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if(l.kind==="email")Jo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"email",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="emoji")Xe||(Xe=new RegExp(bo,"u")),Xe.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"emoji",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="uuid")Go.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"uuid",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="nanoid")qo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"nanoid",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="cuid")Lo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"cuid",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="cuid2")Fo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"cuid2",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="ulid")Uo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"ulid",code:T.invalid_string,message:l.message}),o.dirty());else if(l.kind==="url")try{new URL(e.data)}catch(a){r=this._getOrReturnCtx(e,r),_(r,{validation:"url",code:T.invalid_string,message:l.message}),o.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"regex",code:T.invalid_string,message:l.message}),o.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):l.kind==="datetime"?Qo(l).test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:"datetime",message:l.message}),o.dirty()):l.kind==="date"?zo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:"date",message:l.message}),o.dirty()):l.kind==="time"?Xo(l).test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{code:T.invalid_string,validation:"time",message:l.message}),o.dirty()):l.kind==="duration"?$o.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"duration",code:T.invalid_string,message:l.message}),o.dirty()):l.kind==="ip"?jo(e.data,l.version)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"ip",code:T.invalid_string,message:l.message}),o.dirty()):l.kind==="jwt"?ei(e.data,l.alg)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"jwt",code:T.invalid_string,message:l.message}),o.dirty()):l.kind==="cidr"?ti(e.data,l.version)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"cidr",code:T.invalid_string,message:l.message}),o.dirty()):l.kind==="base64"?Zo.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"base64",code:T.invalid_string,message:l.message}),o.dirty()):l.kind==="base64url"?Ko.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"base64url",code:T.invalid_string,message:l.message}),o.dirty()):U.assertNever(l);return{status:o.value,value:e.data}}_regex(e,n,o){return this.refinement(r=>e.test(r),g({validation:n,code:T.invalid_string},S.errToObj(o)))}_addCheck(e){return new z(x(g({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(g({kind:"email"},S.errToObj(e)))}url(e){return this._addCheck(g({kind:"url"},S.errToObj(e)))}emoji(e){return this._addCheck(g({kind:"emoji"},S.errToObj(e)))}uuid(e){return this._addCheck(g({kind:"uuid"},S.errToObj(e)))}nanoid(e){return this._addCheck(g({kind:"nanoid"},S.errToObj(e)))}cuid(e){return this._addCheck(g({kind:"cuid"},S.errToObj(e)))}cuid2(e){return this._addCheck(g({kind:"cuid2"},S.errToObj(e)))}ulid(e){return this._addCheck(g({kind:"ulid"},S.errToObj(e)))}base64(e){return this._addCheck(g({kind:"base64"},S.errToObj(e)))}base64url(e){return this._addCheck(g({kind:"base64url"},S.errToObj(e)))}jwt(e){return this._addCheck(g({kind:"jwt"},S.errToObj(e)))}ip(e){return this._addCheck(g({kind:"ip"},S.errToObj(e)))}cidr(e){return this._addCheck(g({kind:"cidr"},S.errToObj(e)))}datetime(e){var n,o;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(g({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!=null?n:!1,local:(o=e==null?void 0:e.local)!=null?o:!1},S.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(g({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},S.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(g({kind:"duration"},S.errToObj(e)))}regex(e,n){return this._addCheck(g({kind:"regex",regex:e},S.errToObj(n)))}includes(e,n){return this._addCheck(g({kind:"includes",value:e,position:n==null?void 0:n.position},S.errToObj(n==null?void 0:n.message)))}startsWith(e,n){return this._addCheck(g({kind:"startsWith",value:e},S.errToObj(n)))}endsWith(e,n){return this._addCheck(g({kind:"endsWith",value:e},S.errToObj(n)))}min(e,n){return this._addCheck(g({kind:"min",value:e},S.errToObj(n)))}max(e,n){return this._addCheck(g({kind:"max",value:e},S.errToObj(n)))}length(e,n){return this._addCheck(g({kind:"length",value:e},S.errToObj(n)))}nonempty(e){return this.min(1,S.errToObj(e))}trim(){return new z(x(g({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new z(x(g({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new z(x(g({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}z.create=t=>{var e;return new z(g({checks:[],typeName:M.ZodString,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},D(t)))};function ni(t,e){const n=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,r=n>o?n:o,l=Number.parseInt(t.toFixed(r).replace(".","")),a=Number.parseInt(e.toFixed(r).replace(".",""));return l%a/At(10,r)}class ae extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==E.number){const l=this._getOrReturnCtx(e);return _(l,{code:T.invalid_type,expected:E.number,received:l.parsedType}),R}let o;const r=new O;for(const l of this._def.checks)l.kind==="int"?U.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),_(o,{code:T.invalid_type,expected:"integer",received:"float",message:l.message}),r.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="multipleOf"?ni(e.data,l.value)!==0&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),_(o,{code:T.not_finite,message:l.message}),r.dirty()):U.assertNever(l);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,S.toString(n))}gt(e,n){return this.setLimit("min",e,!1,S.toString(n))}lte(e,n){return this.setLimit("max",e,!0,S.toString(n))}lt(e,n){return this.setLimit("max",e,!1,S.toString(n))}setLimit(e,n,o,r){return new ae(x(g({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:S.toString(r)}]}))}_addCheck(e){return new ae(x(g({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:S.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ae.create=t=>new ae(g({checks:[],typeName:M.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1},D(t)));class ue extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(l){return this._getInvalidInput(e)}if(this._getType(e)!==E.bigint)return this._getInvalidInput(e);let o;const r=new O;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),_(o,{code:T.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):U.assertNever(l);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return _(n,{code:T.invalid_type,expected:E.bigint,received:n.parsedType}),R}gte(e,n){return this.setLimit("min",e,!0,S.toString(n))}gt(e,n){return this.setLimit("min",e,!1,S.toString(n))}lte(e,n){return this.setLimit("max",e,!0,S.toString(n))}lt(e,n){return this.setLimit("max",e,!1,S.toString(n))}setLimit(e,n,o,r){return new ue(x(g({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:S.toString(r)}]}))}_addCheck(e){return new ue(x(g({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ue.create=t=>{var e;return new ue(g({checks:[],typeName:M.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},D(t)))};class Ue extends F{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==E.boolean){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.boolean,received:o.parsedType}),R}return Y(e.data)}}Ue.create=t=>new Ue(g({typeName:M.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1},D(t)));class ye extends F{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==E.date){const l=this._getOrReturnCtx(e);return _(l,{code:T.invalid_type,expected:E.date,received:l.parsedType}),R}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return _(l,{code:T.invalid_date}),R}const o=new O;let r;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:T.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),o.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:T.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),o.dirty()):U.assertNever(l);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ye(x(g({},this._def),{checks:[...this._def.checks,e]}))}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:S.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:S.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ye.create=t=>new ye(g({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:M.ZodDate},D(t)));class Pt extends F{_parse(e){if(this._getType(e)!==E.symbol){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.symbol,received:o.parsedType}),R}return Y(e.data)}}Pt.create=t=>new Pt(g({typeName:M.ZodSymbol},D(t)));class wt extends F{_parse(e){if(this._getType(e)!==E.undefined){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.undefined,received:o.parsedType}),R}return Y(e.data)}}wt.create=t=>new wt(g({typeName:M.ZodUndefined},D(t)));class Nt extends F{_parse(e){if(this._getType(e)!==E.null){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.null,received:o.parsedType}),R}return Y(e.data)}}Nt.create=t=>new Nt(g({typeName:M.ZodNull},D(t)));class kt extends F{constructor(){super(...arguments),this._any=!0}_parse(e){return Y(e.data)}}kt.create=t=>new kt(g({typeName:M.ZodAny},D(t)));class et extends F{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Y(e.data)}}et.create=t=>new et(g({typeName:M.ZodUnknown},D(t)));class re extends F{_parse(e){const n=this._getOrReturnCtx(e);return _(n,{code:T.invalid_type,expected:E.never,received:n.parsedType}),R}}re.create=t=>new re(g({typeName:M.ZodNever},D(t)));class Dt extends F{_parse(e){if(this._getType(e)!==E.undefined){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.void,received:o.parsedType}),R}return Y(e.data)}}Dt.create=t=>new Dt(g({typeName:M.ZodVoid},D(t)));class Q extends F{_parse(e){const{ctx:n,status:o}=this._processInputParams(e),r=this._def;if(n.parsedType!==E.array)return _(n,{code:T.invalid_type,expected:E.array,received:n.parsedType}),R;if(r.exactLength!==null){const a=n.data.length>r.exactLength.value,u=n.data.length<r.exactLength.value;(a||u)&&(_(n,{code:a?T.too_big:T.too_small,minimum:u?r.exactLength.value:void 0,maximum:a?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),o.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(_(n,{code:T.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),o.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(_(n,{code:T.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((a,u)=>r.type._parseAsync(new j(n,a,n.path,u)))).then(a=>O.mergeArray(o,a));const l=[...n.data].map((a,u)=>r.type._parseSync(new j(n,a,n.path,u)));return O.mergeArray(o,l)}get element(){return this._def.type}min(e,n){return new Q(x(g({},this._def),{minLength:{value:e,message:S.toString(n)}}))}max(e,n){return new Q(x(g({},this._def),{maxLength:{value:e,message:S.toString(n)}}))}length(e,n){return new Q(x(g({},this._def),{exactLength:{value:e,message:S.toString(n)}}))}nonempty(e){return this.min(1,e)}}Q.create=(t,e)=>new Q(g({type:t,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray},D(e)));function fe(t){if(t instanceof b){const e={};for(const n in t.shape){const o=t.shape[n];e[n]=ie.create(fe(o))}return new b(x(g({},t._def),{shape:()=>e}))}else return t instanceof Q?new Q(x(g({},t._def),{type:fe(t.element)})):t instanceof ie?ie.create(fe(t.unwrap())):t instanceof Ce?Ce.create(fe(t.unwrap())):t instanceof ce?ce.create(t.items.map(e=>fe(e))):t}class b extends F{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=U.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==E.object){const c=this._getOrReturnCtx(e);return _(c,{code:T.invalid_type,expected:E.object,received:c.parsedType}),R}const{status:o,ctx:r}=this._processInputParams(e),{shape:l,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof re&&this._def.unknownKeys==="strip"))for(const c in r.data)a.includes(c)||u.push(c);const d=[];for(const c of a){const f=l[c],p=r.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new j(r,p,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof re){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:r.data[f]}});else if(c==="strict")u.length>0&&(_(r,{code:T.unrecognized_keys,keys:u}),o.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=r.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new j(r,p,r.path,f)),alwaysSet:f in r.data})}}return r.common.async?Promise.resolve().then(()=>v(this,null,function*(){const c=[];for(const f of d){const p=yield f.key,m=yield f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c})).then(c=>O.mergeObjectSync(o,c)):O.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new b(g(x(g({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(n,o)=>{var l,a,u,d;const r=(u=(a=(l=this._def).errorMap)==null?void 0:a.call(l,n,o).message)!=null?u:o.defaultError;return n.code==="unrecognized_keys"?{message:(d=S.errToObj(e).message)!=null?d:r}:{message:r}}}:{}))}strip(){return new b(x(g({},this._def),{unknownKeys:"strip"}))}passthrough(){return new b(x(g({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new b(x(g({},this._def),{shape:()=>g(g({},this._def.shape()),e)}))}merge(e){return new b({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>g(g({},this._def.shape()),e._def.shape()),typeName:M.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new b(x(g({},this._def),{catchall:e}))}pick(e){const n={};for(const o of U.objectKeys(e))e[o]&&this.shape[o]&&(n[o]=this.shape[o]);return new b(x(g({},this._def),{shape:()=>n}))}omit(e){const n={};for(const o of U.objectKeys(this.shape))e[o]||(n[o]=this.shape[o]);return new b(x(g({},this._def),{shape:()=>n}))}deepPartial(){return fe(this)}partial(e){const n={};for(const o of U.objectKeys(this.shape)){const r=this.shape[o];e&&!e[o]?n[o]=r:n[o]=r.optional()}return new b(x(g({},this._def),{shape:()=>n}))}required(e){const n={};for(const o of U.objectKeys(this.shape))if(e&&!e[o])n[o]=this.shape[o];else{let l=this.shape[o];for(;l instanceof ie;)l=l._def.innerType;n[o]=l}return new b(x(g({},this._def),{shape:()=>n}))}keyof(){return no(U.objectKeys(this.shape))}}b.create=(t,e)=>new b(g({shape:()=>t,unknownKeys:"strip",catchall:re.create(),typeName:M.ZodObject},D(e)));b.strictCreate=(t,e)=>new b(g({shape:()=>t,unknownKeys:"strict",catchall:re.create(),typeName:M.ZodObject},D(e)));b.lazycreate=(t,e)=>new b(g({shape:t,unknownKeys:"strip",catchall:re.create(),typeName:M.ZodObject},D(e)));class Ge extends F{_parse(e){const{ctx:n}=this._processInputParams(e),o=this._def.options;function r(l){for(const u of l)if(u.result.status==="valid")return u.result;for(const u of l)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const a=l.map(u=>new te(u.ctx.common.issues));return _(n,{code:T.invalid_union,unionErrors:a}),R}if(n.common.async)return Promise.all(o.map(l=>v(this,null,function*(){const a=x(g({},n),{common:x(g({},n.common),{issues:[]}),parent:null});return{result:yield l._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}}))).then(r);{let l;const a=[];for(const d of o){const c=x(g({},n),{common:x(g({},n.common),{issues:[]}),parent:null}),f=d._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!l&&(l={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const u=a.map(d=>new te(d));return _(n,{code:T.invalid_union,unionErrors:u}),R}}get options(){return this._def.options}}Ge.create=(t,e)=>new Ge(g({options:t,typeName:M.ZodUnion},D(e)));function tt(t,e){const n=oe(t),o=oe(e);if(t===e)return{valid:!0,data:t};if(n===E.object&&o===E.object){const r=U.objectKeys(e),l=U.objectKeys(t).filter(u=>r.indexOf(u)!==-1),a=g(g({},t),e);for(const u of l){const d=tt(t[u],e[u]);if(!d.valid)return{valid:!1};a[u]=d.data}return{valid:!0,data:a}}else if(n===E.array&&o===E.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let l=0;l<t.length;l++){const a=t[l],u=e[l],d=tt(a,u);if(!d.valid)return{valid:!1};r.push(d.data)}return{valid:!0,data:r}}else return n===E.date&&o===E.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qe extends F{_parse(e){const{status:n,ctx:o}=this._processInputParams(e),r=(l,a)=>{if(Mt(l)||Mt(a))return R;const u=tt(l.value,a.value);return u.valid?((xt(l)||xt(a))&&n.dirty(),{status:n.value,value:u.data}):(_(o,{code:T.invalid_intersection_types}),R)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([l,a])=>r(l,a)):r(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}qe.create=(t,e,n)=>new qe(g({left:t,right:e,typeName:M.ZodIntersection},D(n)));class ce extends F{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==E.array)return _(o,{code:T.invalid_type,expected:E.array,received:o.parsedType}),R;if(o.data.length<this._def.items.length)return _(o,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&o.data.length>this._def.items.length&&(_(o,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...o.data].map((a,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new j(o,a,o.path,u)):null}).filter(a=>!!a);return o.common.async?Promise.all(l).then(a=>O.mergeArray(n,a)):O.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new ce(x(g({},this._def),{rest:e}))}}ce.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ce(g({items:t,typeName:M.ZodTuple,rest:null},D(e)))};class Be extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==E.object)return _(o,{code:T.invalid_type,expected:E.object,received:o.parsedType}),R;const r=[],l=this._def.keyType,a=this._def.valueType;for(const u in o.data)r.push({key:l._parse(new j(o,u,o.path,u)),value:a._parse(new j(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?O.mergeObjectAsync(n,r):O.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,o){return n instanceof F?new Be(g({keyType:e,valueType:n,typeName:M.ZodRecord},D(o))):new Be(g({keyType:z.create(),valueType:e,typeName:M.ZodRecord},D(n)))}}class Vt extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==E.map)return _(o,{code:T.invalid_type,expected:E.map,received:o.parsedType}),R;const r=this._def.keyType,l=this._def.valueType,a=[...o.data.entries()].map(([u,d],c)=>({key:r._parse(new j(o,u,o.path,[c,"key"])),value:l._parse(new j(o,d,o.path,[c,"value"]))}));if(o.common.async){const u=new Map;return Promise.resolve().then(()=>v(this,null,function*(){for(const d of a){const c=yield d.key,f=yield d.value;if(c.status==="aborted"||f.status==="aborted")return R;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}}))}else{const u=new Map;for(const d of a){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return R;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}}}}Vt.create=(t,e,n)=>new Vt(g({valueType:e,keyType:t,typeName:M.ZodMap},D(n)));class Re extends F{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==E.set)return _(o,{code:T.invalid_type,expected:E.set,received:o.parsedType}),R;const r=this._def;r.minSize!==null&&o.data.size<r.minSize.value&&(_(o,{code:T.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&o.data.size>r.maxSize.value&&(_(o,{code:T.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const l=this._def.valueType;function a(d){const c=new Set;for(const f of d){if(f.status==="aborted")return R;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const u=[...o.data.values()].map((d,c)=>l._parse(new j(o,d,o.path,c)));return o.common.async?Promise.all(u).then(d=>a(d)):a(u)}min(e,n){return new Re(x(g({},this._def),{minSize:{value:e,message:S.toString(n)}}))}max(e,n){return new Re(x(g({},this._def),{maxSize:{value:e,message:S.toString(n)}}))}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Re.create=(t,e)=>new Re(g({valueType:t,minSize:null,maxSize:null,typeName:M.ZodSet},D(e)));class nt extends F{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nt.create=(t,e)=>new nt(g({getter:t,typeName:M.ZodLazy},D(e)));class Lt extends F{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return _(n,{received:n.data,code:T.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}}Lt.create=(t,e)=>new Lt(g({value:t,typeName:M.ZodLiteral},D(e)));function no(t,e){return new ve(g({values:t,typeName:M.ZodEnum},D(e)))}class ve extends F{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),o=this._def.values;return _(n,{expected:U.joinValues(o),received:n.parsedType,code:T.invalid_type}),R}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),o=this._def.values;return _(n,{received:n.data,code:T.invalid_enum_value,options:o}),R}return Y(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ve.create(e,g(g({},this._def),n))}exclude(e,n=this._def){return ve.create(this.options.filter(o=>!e.includes(o)),g(g({},this._def),n))}}ve.create=no;class Ft extends F{_parse(e){const n=U.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==E.string&&o.parsedType!==E.number){const r=U.objectValues(n);return _(o,{expected:U.joinValues(r),received:o.parsedType,code:T.invalid_type}),R}if(this._cache||(this._cache=new Set(U.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=U.objectValues(n);return _(o,{received:o.data,code:T.invalid_enum_value,options:r}),R}return Y(e.data)}get enum(){return this._def.values}}Ft.create=(t,e)=>new Ft(g({values:t,typeName:M.ZodNativeEnum},D(e)));class $e extends F{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==E.promise&&n.common.async===!1)return _(n,{code:T.invalid_type,expected:E.promise,received:n.parsedType}),R;const o=n.parsedType===E.promise?n.data:Promise.resolve(n.data);return Y(o.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$e.create=(t,e)=>new $e(g({type:t,typeName:M.ZodPromise},D(e)));class Te extends F{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:o}=this._processInputParams(e),r=this._def.effect||null,l={addIssue:a=>{_(o,a),a.fatal?n.abort():n.dirty()},get path(){return o.path}};if(l.addIssue=l.addIssue.bind(l),r.type==="preprocess"){const a=r.transform(o.data,l);if(o.common.async)return Promise.resolve(a).then(u=>v(this,null,function*(){if(n.value==="aborted")return R;const d=yield this._def.schema._parseAsync({data:u,path:o.path,parent:o});return d.status==="aborted"?R:d.status==="dirty"||n.value==="dirty"?Ie(d.value):d}));{if(n.value==="aborted")return R;const u=this._def.schema._parseSync({data:a,path:o.path,parent:o});return u.status==="aborted"?R:u.status==="dirty"||n.value==="dirty"?Ie(u.value):u}}if(r.type==="refinement"){const a=u=>{const d=r.refinement(u,l);if(o.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){const u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?R:(u.status==="dirty"&&n.dirty(),a(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?R:(u.status==="dirty"&&n.dirty(),a(u.value).then(()=>({status:n.value,value:u.value}))))}if(r.type==="transform")if(o.common.async===!1){const a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!ge(a))return R;const u=r.transform(a.value,l);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>ge(a)?Promise.resolve(r.transform(a.value,l)).then(u=>({status:n.value,value:u})):R);U.assertNever(r)}}Te.create=(t,e,n)=>new Te(g({schema:t,typeName:M.ZodEffects,effect:e},D(n)));Te.createWithPreprocess=(t,e,n)=>new Te(g({schema:e,effect:{type:"preprocess",transform:t},typeName:M.ZodEffects},D(n)));class ie extends F{_parse(e){return this._getType(e)===E.undefined?Y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ie.create=(t,e)=>new ie(g({innerType:t,typeName:M.ZodOptional},D(e)));class Ce extends F{_parse(e){return this._getType(e)===E.null?Y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ce.create=(t,e)=>new Ce(g({innerType:t,typeName:M.ZodNullable},D(e)));class ot extends F{_parse(e){const{ctx:n}=this._processInputParams(e);let o=n.data;return n.parsedType===E.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ot.create=(t,e)=>new ot(g({innerType:t,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},D(e)));class it extends F{_parse(e){const{ctx:n}=this._processInputParams(e),o=x(g({},n),{common:x(g({},n.common),{issues:[]})}),r=this._def.innerType._parse({data:o.data,path:o.path,parent:g({},o)});return Fe(r)?r.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new te(o.common.issues)},input:o.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new te(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}it.create=(t,e)=>new it(g({innerType:t,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},D(e)));class Ut extends F{_parse(e){if(this._getType(e)!==E.nan){const o=this._getOrReturnCtx(e);return _(o,{code:T.invalid_type,expected:E.nan,received:o.parsedType}),R}return{status:"valid",value:e.data}}}Ut.create=t=>new Ut(g({typeName:M.ZodNaN},D(t)));class oi extends F{_parse(e){const{ctx:n}=this._processInputParams(e),o=n.data;return this._def.type._parse({data:o,path:n.path,parent:n})}unwrap(){return this._def.type}}class ht extends F{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.common.async)return v(this,null,function*(){const l=yield this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return l.status==="aborted"?R:l.status==="dirty"?(n.dirty(),Ie(l.value)):this._def.out._parseAsync({data:l.value,path:o.path,parent:o})});{const r=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return r.status==="aborted"?R:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:o.path,parent:o})}}static create(e,n){return new ht({in:e,out:n,typeName:M.ZodPipeline})}}class rt extends F{_parse(e){const n=this._def.innerType._parse(e),o=r=>(ge(r)&&(r.value=Object.freeze(r.value)),r);return Fe(n)?n.then(r=>o(r)):o(n)}unwrap(){return this._def.innerType}}rt.create=(t,e)=>new rt(g({innerType:t,typeName:M.ZodReadonly},D(e)));var M;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(M||(M={}));const le=z.create,Gt=ae.create;ue.create;const ii=Ue.create;ye.create;const qt=et.create;re.create;const Me=Q.create,ri=b.create,si=Ge.create;qe.create;ce.create;const li=Be.create,ai=nt.create,ui=ve.create;$e.create;ie.create;Ce.create;const de={string:t=>z.create(x(g({},t),{coerce:!0})),number:t=>ae.create(x(g({},t),{coerce:!0})),boolean:t=>Ue.create(x(g({},t),{coerce:!0})),bigint:t=>ue.create(x(g({},t),{coerce:!0})),date:t=>ye.create(x(g({},t),{coerce:!0}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ci,di;function fi(){return{geminiUrl:ci,vertexUrl:di}}function pi(t,e,n){var o,r,l;if(!(!((o=t.httpOptions)===null||o===void 0)&&o.baseUrl)){const a=fi();return t.vertexai?(r=a.vertexUrl)!==null&&r!==void 0?r:e:(l=a.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ee{}function I(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];s(f,e.slice(l+1),n[c])}else for(const c of d)s(c,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];s(d[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bt;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Bt||(Bt={}));var $t;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($t||($t={}));var X;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(X||(X={}));var Jt;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Jt||(Jt={}));var bt;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(bt||(bt={}));var Ht;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ht||(Ht={}));var Ot;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ot||(Ot={}));var Wt;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wt||(Wt={}));var Yt;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Yt||(Yt={}));var Zt;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Zt||(Zt={}));var Kt;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Kt||(Kt={}));var zt;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(zt||(zt={}));var Xt;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xt||(Xt={}));var Je;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Je||(Je={}));var Qt;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qt||(Qt={}));var st;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(st||(st={}));var jt;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jt||(jt={}));var en;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(en||(en={}));var tn;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(tn||(tn={}));var nn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nn||(nn={}));var on;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(on||(on={}));var rn;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(rn||(rn={}));var sn;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sn||(sn={}));var ln;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ln||(ln={}));var an;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(an||(an={}));var un;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(un||(un={}));var cn;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cn||(cn={}));var dn;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dn||(dn={}));var fn;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fn||(fn={}));var pn;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(pn||(pn={}));var mn;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(mn||(mn={}));var hn;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(hn||(hn={}));var gn;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gn||(gn={}));var yn;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yn||(yn={}));var vn;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(vn||(vn={}));var Tn;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Tn||(Tn={}));var Cn;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Cn||(Cn={}));var _n;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_n||(_n={}));var pe;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pe||(pe={}));class lt{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ae{get text(){var e,n,o,r,l,a,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,y]of Object.entries(m))h!=="text"&&h!=="thought"&&(y!==null||y!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,r,l,a,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,r,l,a,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,r,l,a,u,d,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,r,l,a,u,d,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class En{}class Sn{}class mi{}class hi{}class An{}class In{}class Mn{}class gi{}class xn{}class Rn{}class Pn{}class yi{}class vi{}class Ti{}class Ci{get text(){var e,n,o;let r="",l=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class _i{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function oo(t,e){const n=q(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function io(t){return Array.isArray(t)?t.map(e=>be(e)):[be(t)]}function be(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ei(t){const e=be(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Si(t){const e=be(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wn(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ro(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>wn(e)):[wn(t)]}function at(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Nn(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function kn(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function H(t){if(t==null)throw new Error("ContentUnion is required");return at(t)?t:{role:"user",parts:ro(t)}}function so(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=H(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=H(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>H(n)):[H(e)]}function K(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Nn(t)||kn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[H(t)]}const e=[],n=[],o=at(t[0]);for(const r of t){const l=at(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(Nn(r)||kn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:ro(n)}),e}const Ai=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Dn=ui(["string","number","integer","object","array","boolean","null"]),Ii=si([Dn,Me(Dn)]);function Mi(t=!0){const e=ai(()=>{const n=ri({type:Ii.optional(),format:le().optional(),title:le().optional(),description:le().optional(),default:qt().optional(),items:e.optional(),minItems:de.string().optional(),maxItems:de.string().optional(),enum:Me(qt()).optional(),properties:li(le(),e).optional(),required:Me(le()).optional(),minProperties:de.string().optional(),maxProperties:de.string().optional(),propertyOrdering:Me(le()).optional(),minimum:Gt().optional(),maximum:Gt().optional(),minLength:de.string().optional(),maxLength:de.string().optional(),pattern:le().optional(),anyOf:Me(e).optional(),additionalProperties:ii().optional()});return t?n.strict():n});return e}function xi(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(X).includes(n[0].toUpperCase())?n[0].toUpperCase():X.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(X).includes(o.toUpperCase())?o.toUpperCase():X.TYPE_UNSPECIFIED})}}function me(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&xi(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(X).includes(u.toUpperCase())?u.toUpperCase():X.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=me(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(me(c))}e[a]=d}else if(r.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=me(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function He(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Mi().parse(t);return me(e)}else return me(t)}function lo(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gt(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Pe(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=He(e.parameters)),e.response&&(e.response=He(e.response));return t}function we(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ri(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function se(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ri(t,e,"cachedContents")}function ao(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ne(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Pi(t){return t!=null&&typeof t=="object"&&"name"in t}function wi(t){return t!=null&&typeof t=="object"&&"video"in t}function Ni(t){return t!=null&&typeof t=="object"&&"uri"in t}function uo(t){var e;let n;if(Pi(t)&&(n=t.name),!(Ni(t)&&(n=t.uri,n===void 0))&&!(wi(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function co(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function fo(t){for(const e of["models","tunedModels","publisherModels"])if(ki(t,e))return t[e];return[]}function ki(t,e){return t!==null&&typeof t=="object"&&e in t}function Di(t,e={}){const n=t,o={name:n.name,description:n.description,parameters:me(Oe(n.inputSchema))};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Vi(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=Di(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Li(t){const e=[];for(const n of t)e.push(Oe(n));return e}function Fi(t){const e={};for(const[n,o]of Object.entries(t)){const r=o;e[n]=Oe(r)}return e}function Oe(t){const e=new Set(["items"]),n=new Set(["anyOf"]),o=new Set(["properties"]),r={};for(const[l,a]of Object.entries(t))if(e.has(l))r[l]=Oe(a);else if(n.has(l))r[l]=Li(a);else if(o.has(l))r[l]=Fi(a);else if(l==="type"){const u=a.toUpperCase();r[l]=Object.values(X).includes(u)?u:X.TYPE_UNSPECIFIED}else Ai.has(l)&&(r[l]=a);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ui(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Gi(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qi(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Bi(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ui(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Gi(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],qi(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Vn(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Bi(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function $i(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&s(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Ji(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function bi(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ji(n)),e}function Hi(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Oi(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Hi(n)),e}function Wi(){return{}}function Yi(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>$i(d))),s(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],bi(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Oi(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],Wi());const a=i(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function Zi(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Ki(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function zi(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],Ki(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Xi(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Zi(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],zi(o)),e}function Qi(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=K(a);Array.isArray(f)&&(f=f.map(p=>Vn(p))),s(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],Vn(H(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Yi(p))),s(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&s(e,["toolConfig"],Xi(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ji(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["model"],oo(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Qi(r,n)),n}function er(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function tr(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function nr(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function or(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],nr(r,n)),n}function ir(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function rr(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],ir(n,e)),e}function sr(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function lr(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ar(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ur(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],sr(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],lr(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],ar(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ln(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ur(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function cr(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function dr(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function fr(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],dr(n)),e}function pr(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function mr(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],pr(n)),e}function hr(){return{}}function gr(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function yr(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],gr(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function vr(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],yr(n)),e}function Tr(){return{}}function Cr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>cr(p))),s(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],fr(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],mr(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],hr());const u=i(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],vr(u)),i(t,["urlContext"])!=null&&s(e,["urlContext"],Tr());const c=i(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function _r(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Er(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Sr(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],Er(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ar(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],_r(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Sr(o)),e}function Ir(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=K(a);Array.isArray(p)&&(p=p.map(m=>Ln(m))),s(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],Ln(H(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Cr(m))),s(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&s(e,["toolConfig"],Ar(c));const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&s(e,["encryption_spec","kmsKeyName"],f),n}function Mr(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["model"],oo(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Ir(r,n)),n}function xr(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Rr(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Pr(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function wr(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],se(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Pr(r,n)),n}function Nr(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function kr(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Nr(n,e)),e}function De(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["model"]);r!=null&&s(e,["model"],r);const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function Dr(){return{}}function Vr(t){const e={},n=i(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>De(l))),s(e,["cachedContents"],r)}return e}function Ve(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["model"]);r!=null&&s(e,["model"],r);const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function Lr(){return{}}function Fr(t){const e={},n=i(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ve(l))),s(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _e;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_e||(_e={}));class We{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};o?typeof o=="object"?a=Object.assign({},o):a=o:a={config:{}},a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:()=>v(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}}),return:()=>v(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return v(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=yield this.requestInternal(this.params);return this.initNextPage(e),this.page})}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ur extends Ee{constructor(e){super(),this.apiClient=e,this.list=(...o)=>v(this,[...o],function*(n={}){return new We(_e.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),yield this.listInternal(n),n)})}create(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mr(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ve(f))}else{const c=ji(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}})}get(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=xr(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ve(f))}else{const c=er(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}})}delete(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Rr(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Lr(),p=new Rn;return Object.assign(p,f),p})}else{const c=tr(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Dr(),p=new Rn;return Object.assign(p,f),p})}})}update(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=wr(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ve(f))}else{const c=or(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}})}listInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=kr(e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Fr(f),m=new Pn;return Object.assign(m,p),m})}else{const c=rr(e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Vr(f),m=new Pn;return Object.assign(m,p),m})}})}}function Fn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function he(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(h){return function(y){return Promise.resolve(y).then(h,p)}}function u(h,y){o[h]&&(r[h]=function(C){return new Promise(function(A,P){l.push([h,C,A,P])>1||d(h,C)})},y&&(r[h]=y(r[h])))}function d(h,y){try{c(o[h](y))}catch(C){m(l[0][3],C)}}function c(h){h.value instanceof B?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,y){h(y),l.shift(),l.length&&d(l[0][0],l[0][1])}}function xe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Fn=="function"?Fn(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(u,d){a=t[l](a),r(u,d,a.done,a.value)})}}function r(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gr(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:po(n)}function po(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function qr(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Un(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!po(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Br{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new $r(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $r{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),qr(l)}sendMessage(e){return v(this,null,function*(){var n;yield this.sendPromise;const o=H(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=v(this,null,function*(){var l,a,u;const d=yield r,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,m)}),yield this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r})}sendMessageStream(e){return v(this,null,function*(){var n;yield this.sendPromise;const o=H(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=yield r;return this.processStreamResponse(l,o)})}getHistory(e=!1){const n=e?Un(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,r;return he(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var p=!0,m=xe(e),h;h=yield B(m.next()),a=h.done,!a;p=!0){c=h.value,p=!1;const y=c;if(Gr(y)){const C=(r=(o=y.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;C!==void 0&&f.push(C)}yield yield B(y)}}catch(y){u={error:y}}finally{try{!p&&!a&&(d=m.return)&&(yield B(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Un(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ye extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ye.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jr(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function br(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Jr(n,e)),e}function Hr(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["message"]);o!=null&&s(e,["message"],o);const r=i(t,["code"]);return r!=null&&s(e,["code"],r),e}function Or(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&s(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&s(e,["state"],m);const h=i(t,["source"]);h!=null&&s(e,["source"],h);const y=i(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=i(t,["error"]);return C!=null&&s(e,["error"],Hr(C)),e}function Wr(t){const e={},n=i(t,["file"]);n!=null&&s(e,["file"],Or(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Yr(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","file"],uo(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Zr(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","file"],uo(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Kr(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["message"]);o!=null&&s(e,["message"],o);const r=i(t,["code"]);return r!=null&&s(e,["code"],r),e}function ut(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&s(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&s(e,["state"],m);const h=i(t,["source"]);h!=null&&s(e,["source"],h);const y=i(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=i(t,["error"]);return C!=null&&s(e,["error"],Kr(C)),e}function zr(t){const e={},n=i(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=i(t,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ut(l))),s(e,["files"],r)}return e}function Xr(){return{}}function Qr(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jr extends Ee{constructor(e){super(),this.apiClient=e,this.list=(...o)=>v(this,[...o],function*(n={}){return new We(_e.PAGED_ITEM_FILES,r=>this.listInternal(r),yield this.listInternal(n),n)})}upload(e){return v(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>ut(n))})}download(e){return v(this,null,function*(){yield this.apiClient.downloadFile(e)})}listInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=br(e);return l=I("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=zr(d),f=new yi;return Object.assign(f,c),f})}})}createInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wr(e);return l=I("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(()=>{const d=Xr(),c=new vi;return Object.assign(c,d),c})}})}get(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Yr(e);return l=I("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>ut(d))}})}delete(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zr(e);return l=I("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(()=>{const d=Qr(),c=new Ti;return Object.assign(c,d),c})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function es(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function ts(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function mo(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],es(n)),e}function ns(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],ts(n)),e}function os(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],mo(o)),e}function is(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>os(r))),s(e,["speakerVoiceConfigs"],o)}return e}function rs(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],mo(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],is(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function ss(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],ns(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ls(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function as(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function us(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function cs(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ds(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function fs(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ps(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ls(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],us(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],ds(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function ms(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],as(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],cs(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],fs(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function hs(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ps(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function gs(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ms(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ys(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&s(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function vs(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Ts(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Cs(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function _s(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ts(n)),e}function Es(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Cs(n)),e}function Ss(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function As(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Is(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ss(n)),e}function Ms(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],As(n)),e}function xs(){return{}}function Rs(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Ps(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Rs(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function ws(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Ps(n)),e}function Ns(){return{}}function ks(){return{}}function Ds(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>ys(d))),s(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],_s(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Is(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],Ns());const a=i(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function Vs(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>vs(p))),s(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],Es(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Ms(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],xs());const u=i(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],ws(u)),i(t,["urlContext"])!=null&&s(e,["urlContext"],ks());const c=i(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Ls(t){const e={},n=i(t,["handle"]);if(n!=null&&s(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fs(t){const e={},n=i(t,["handle"]);n!=null&&s(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function Gn(){return{}}function qn(){return{}}function Us(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Gs(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function qs(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Us(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Bs(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Gs(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $s(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Js(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function bs(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],$s(o)),e}function Hs(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Js(o)),e}function Os(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Ws(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Ys(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],rs(gt(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],hs(H(h)));const y=i(t,["tools"]);if(e!==void 0&&y!=null){let N=we(y);Array.isArray(N)&&(N=N.map($=>Ds(Pe($)))),s(e,["setup","tools"],N)}const C=i(t,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],Ls(C));const A=i(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],Gn());const P=i(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&s(e,["setup","outputAudioTranscription"],Gn());const k=i(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],qs(k));const w=i(t,["contextWindowCompression"]);e!==void 0&&w!=null&&s(e,["setup","contextWindowCompression"],bs(w));const L=i(t,["proactivity"]);return e!==void 0&&L!=null&&s(e,["setup","proactivity"],Os(L)),n}function Zs(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],ss(gt(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],gs(H(h)));const y=i(t,["tools"]);if(e!==void 0&&y!=null){let N=we(y);Array.isArray(N)&&(N=N.map($=>Vs(Pe($)))),s(e,["setup","tools"],N)}const C=i(t,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],Fs(C));const A=i(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],qn());const P=i(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&s(e,["setup","outputAudioTranscription"],qn());const k=i(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],Bs(k));const w=i(t,["contextWindowCompression"]);e!==void 0&&w!=null&&s(e,["setup","contextWindowCompression"],Hs(w));const L=i(t,["proactivity"]);return e!==void 0&&L!=null&&s(e,["setup","proactivity"],Ws(L)),n}function Ks(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Ys(r,n)),n}function zs(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Zs(r,n)),n}function Xs(){return{}}function Qs(){return{}}function js(){return{}}function el(){return{}}function tl(t){const e={},n=i(t,["media"]);n!=null&&s(e,["mediaChunks"],io(n));const o=i(t,["audio"]);o!=null&&s(e,["audio"],Si(o));const r=i(t,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(t,["video"]);l!=null&&s(e,["video"],Ei(l));const a=i(t,["text"]);return a!=null&&s(e,["text"],a),i(t,["activityStart"])!=null&&s(e,["activityStart"],Xs()),i(t,["activityEnd"])!=null&&s(e,["activityEnd"],js()),e}function nl(t){const e={},n=i(t,["media"]);if(n!=null&&s(e,["mediaChunks"],io(n)),i(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=i(t,["audioStreamEnd"]);if(o!=null&&s(e,["audioStreamEnd"],o),i(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(i(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return i(t,["activityStart"])!=null&&s(e,["activityStart"],Qs()),i(t,["activityEnd"])!=null&&s(e,["activityEnd"],el()),e}function ho(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function ol(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ho(r))),s(e,["weightedPrompts"],o)}return e}function go(t){const e={},n=i(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&s(e,["topK"],o);const r=i(t,["seed"]);r!=null&&s(e,["seed"],r);const l=i(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(t,["density"]);u!=null&&s(e,["density"],u);const d=i(t,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&s(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&s(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&s(e,["onlyBassAndDrums"],m),e}function il(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],go(n)),e}function yo(t){const e={},n=i(t,["model"]);return n!=null&&s(e,["model"],n),e}function vo(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ho(r))),s(e,["weightedPrompts"],o)}return e}function ct(t){const e={},n=i(t,["setup"]);n!=null&&s(e,["setup"],yo(n));const o=i(t,["clientContent"]);o!=null&&s(e,["clientContent"],vo(o));const r=i(t,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],go(r));const l=i(t,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function rl(){return{}}function sl(){return{}}function ll(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function al(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ul(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function cl(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function dl(t){const e={},n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function fl(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function pl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ll(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],ul(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],dl(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function ml(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],al(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],cl(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],fl(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function hl(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>pl(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function gl(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ml(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Bn(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function $n(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function yl(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function vl(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yl(r))),s(e,["urlMetadata"],o)}return e}function Tl(t){const e={},n=i(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],hl(n));const o=i(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Bn(u));const d=i(t,["outputTranscription"]);d!=null&&s(e,["outputTranscription"],Bn(d));const c=i(t,["urlContextMetadata"]);return c!=null&&s(e,["urlContextMetadata"],vl(c)),e}function Cl(t){const e={},n=i(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],gl(n));const o=i(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],$n(u));const d=i(t,["outputTranscription"]);return d!=null&&s(e,["outputTranscription"],$n(d)),e}function _l(t){const e={},n=i(t,["id"]);n!=null&&s(e,["id"],n);const o=i(t,["args"]);o!=null&&s(e,["args"],o);const r=i(t,["name"]);return r!=null&&s(e,["name"],r),e}function El(t){const e={},n=i(t,["args"]);n!=null&&s(e,["args"],n);const o=i(t,["name"]);return o!=null&&s(e,["name"],o),e}function Sl(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>_l(r))),s(e,["functionCalls"],o)}return e}function Al(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>El(r))),s(e,["functionCalls"],o)}return e}function Il(t){const e={},n=i(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Ml(t){const e={},n=i(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Ne(t){const e={},n=i(t,["modality"]);n!=null&&s(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function ke(t){const e={},n=i(t,["modality"]);n!=null&&s(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function xl(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(t,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>Ne(h))),s(e,["promptTokensDetails"],m)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Ne(h))),s(e,["cacheTokensDetails"],m)}const f=i(t,["responseTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>Ne(h))),s(e,["responseTokensDetails"],m)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>Ne(h))),s(e,["toolUsePromptTokensDetails"],m)}return e}function Rl(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(t,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>ke(y))),s(e,["promptTokensDetails"],h)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(y=>ke(y))),s(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>ke(y))),s(e,["responseTokensDetails"],h)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>ke(y))),s(e,["toolUsePromptTokensDetails"],h)}const m=i(t,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function Pl(t){const e={},n=i(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function wl(t){const e={},n=i(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function Nl(t){const e={},n=i(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function kl(t){const e={},n=i(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Dl(t){const e={};i(t,["setupComplete"])!=null&&s(e,["setupComplete"],rl());const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],Tl(o));const r=i(t,["toolCall"]);r!=null&&s(e,["toolCall"],Sl(r));const l=i(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Il(l));const a=i(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],xl(a));const u=i(t,["goAway"]);u!=null&&s(e,["goAway"],Pl(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],Nl(d)),e}function Vl(t){const e={};i(t,["setupComplete"])!=null&&s(e,["setupComplete"],sl());const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],Cl(o));const r=i(t,["toolCall"]);r!=null&&s(e,["toolCall"],Al(r));const l=i(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ml(l));const a=i(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Rl(a));const u=i(t,["goAway"]);u!=null&&s(e,["goAway"],wl(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],kl(d)),e}function Ll(){return{}}function Fl(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function Ul(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Fl(r))),s(e,["weightedPrompts"],o)}return e}function Gl(t){const e={},n=i(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&s(e,["topK"],o);const r=i(t,["seed"]);r!=null&&s(e,["seed"],r);const l=i(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(t,["density"]);u!=null&&s(e,["density"],u);const d=i(t,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&s(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&s(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&s(e,["onlyBassAndDrums"],m),e}function ql(t){const e={},n=i(t,["clientContent"]);n!=null&&s(e,["clientContent"],Ul(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Gl(o)),e}function Bl(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(t,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],ql(r)),e}function $l(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Bl(r))),s(e,["audioChunks"],o)}return e}function Jl(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function bl(t){const e={};i(t,["setupComplete"])!=null&&s(e,["setupComplete"],Ll());const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],$l(o));const r=i(t,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],Jl(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hl(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ol(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Yl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Hl(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Ol(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],Wl(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ze(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Yl(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Zl(t){const e={},n=i(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&s(e,["default"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["enum"]);l!=null&&s(e,["enum"],l);const a=i(t,["example"]);a!=null&&s(e,["example"],a);const u=i(t,["format"]);u!=null&&s(e,["format"],u);const d=i(t,["items"]);d!=null&&s(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&s(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&s(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&s(e,["minItems"],h);const y=i(t,["minLength"]);y!=null&&s(e,["minLength"],y);const C=i(t,["minProperties"]);C!=null&&s(e,["minProperties"],C);const A=i(t,["minimum"]);A!=null&&s(e,["minimum"],A);const P=i(t,["nullable"]);P!=null&&s(e,["nullable"],P);const k=i(t,["pattern"]);k!=null&&s(e,["pattern"],k);const w=i(t,["properties"]);w!=null&&s(e,["properties"],w);const L=i(t,["propertyOrdering"]);L!=null&&s(e,["propertyOrdering"],L);const N=i(t,["required"]);N!=null&&s(e,["required"],N);const $=i(t,["title"]);$!=null&&s(e,["title"],$);const J=i(t,["type"]);return J!=null&&s(e,["type"],J),e}function Kl(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&s(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function zl(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&s(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Xl(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ql(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Xl(n)),e}function jl(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ea(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],jl(n)),e}function ta(){return{}}function na(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>zl(d))),s(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],Ql(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ea(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],ta());const a=i(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function oa(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function ia(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function ra(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],ia(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function sa(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],oa(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],ra(o)),e}function la(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function To(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],la(n)),e}function aa(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],To(o)),e}function ua(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>aa(r))),s(e,["speakerVoiceConfigs"],o)}return e}function ca(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],To(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ua(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function da(t){const e={},n=i(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function fa(t,e,n){const o={},r=i(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],Ze(H(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const C=i(e,["seed"]);C!=null&&s(o,["seed"],C);const A=i(e,["responseMimeType"]);A!=null&&s(o,["responseMimeType"],A);const P=i(e,["responseSchema"]);if(P!=null&&s(o,["responseSchema"],Zl(He(P))),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=i(e,["safetySettings"]);if(n!==void 0&&k!=null){let G=k;Array.isArray(G)&&(G=G.map(W=>Kl(W))),s(n,["safetySettings"],G)}const w=i(e,["tools"]);if(n!==void 0&&w!=null){let G=we(w);Array.isArray(G)&&(G=G.map(W=>na(Pe(W)))),s(n,["tools"],G)}const L=i(e,["toolConfig"]);if(n!==void 0&&L!=null&&s(n,["toolConfig"],sa(L)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=i(e,["cachedContent"]);n!==void 0&&N!=null&&s(n,["cachedContent"],se(t,N));const $=i(e,["responseModalities"]);$!=null&&s(o,["responseModalities"],$);const J=i(e,["mediaResolution"]);J!=null&&s(o,["mediaResolution"],J);const Z=i(e,["speechConfig"]);if(Z!=null&&s(o,["speechConfig"],ca(lo(Z))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=i(e,["thinkingConfig"]);return V!=null&&s(o,["thinkingConfig"],da(V)),o}function Jn(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Ze(u))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["generationConfig"],fa(t,l,n)),n}function pa(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(t,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ma(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);r!=null&&s(n,["requests[]","content"],so(t,r));const l=i(e,["config"]);l!=null&&s(n,["config"],pa(l,n));const a=i(e,["model"]);return a!==void 0&&s(n,["requests[]","model"],q(t,a)),n}function ha(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(t,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&s(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&s(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&s(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ga(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(n,["config"],ha(l,n)),n}function ya(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function va(t,e,n){const o={},r=i(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],co(t,u)),o}function Ta(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],va(t,o,n)),n}function Ca(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function _a(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Ca(r,n)),n}function Ea(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Sa(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Aa(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Ze(u))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],Sa(l)),n}function Ia(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],ne(n));const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ma(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(t,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(t,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=i(t,["negativePrompt"]);e!==void 0&&u!=null&&s(e,["parameters","negativePrompt"],u);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function xa(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(n,["instances[0]","image"],Ia(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&s(n,["config"],Ma(a,n)),n}function Ra(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Pa(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function wa(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Na(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ra(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Pa(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],wa(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Se(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Na(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ka(t){const e={},n=i(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&s(e,["default"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["enum"]);l!=null&&s(e,["enum"],l);const a=i(t,["example"]);a!=null&&s(e,["example"],a);const u=i(t,["format"]);u!=null&&s(e,["format"],u);const d=i(t,["items"]);d!=null&&s(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&s(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&s(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&s(e,["minItems"],h);const y=i(t,["minLength"]);y!=null&&s(e,["minLength"],y);const C=i(t,["minProperties"]);C!=null&&s(e,["minProperties"],C);const A=i(t,["minimum"]);A!=null&&s(e,["minimum"],A);const P=i(t,["nullable"]);P!=null&&s(e,["nullable"],P);const k=i(t,["pattern"]);k!=null&&s(e,["pattern"],k);const w=i(t,["properties"]);w!=null&&s(e,["properties"],w);const L=i(t,["propertyOrdering"]);L!=null&&s(e,["propertyOrdering"],L);const N=i(t,["required"]);N!=null&&s(e,["required"],N);const $=i(t,["title"]);$!=null&&s(e,["title"],$);const J=i(t,["type"]);return J!=null&&s(e,["type"],J),e}function Da(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function Va(t){const e={},n=i(t,["method"]);n!=null&&s(e,["method"],n);const o=i(t,["category"]);o!=null&&s(e,["category"],o);const r=i(t,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function La(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Fa(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ua(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Fa(n)),e}function Ga(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function qa(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ga(n)),e}function Ba(){return{}}function $a(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Ja(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],$a(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function ba(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Ja(n)),e}function Ha(){return{}}function Co(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>La(p))),s(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],Ua(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],qa(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Ba());const u=i(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],ba(u)),i(t,["urlContext"])!=null&&s(e,["urlContext"],Ha());const c=i(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Oa(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Wa(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ya(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],Wa(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Za(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Oa(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Ya(o)),e}function Ka(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function za(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Ka(n)),e}function Xa(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],za(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Qa(t){const e={},n=i(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function ja(t,e,n){const o={},r=i(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],Se(H(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const C=i(e,["seed"]);C!=null&&s(o,["seed"],C);const A=i(e,["responseMimeType"]);A!=null&&s(o,["responseMimeType"],A);const P=i(e,["responseSchema"]);P!=null&&s(o,["responseSchema"],ka(He(P)));const k=i(e,["routingConfig"]);k!=null&&s(o,["routingConfig"],k);const w=i(e,["modelSelectionConfig"]);w!=null&&s(o,["modelConfig"],Da(w));const L=i(e,["safetySettings"]);if(n!==void 0&&L!=null){let ee=L;Array.isArray(ee)&&(ee=ee.map(ze=>Va(ze))),s(n,["safetySettings"],ee)}const N=i(e,["tools"]);if(n!==void 0&&N!=null){let ee=we(N);Array.isArray(ee)&&(ee=ee.map(ze=>Co(Pe(ze)))),s(n,["tools"],ee)}const $=i(e,["toolConfig"]);n!==void 0&&$!=null&&s(n,["toolConfig"],Za($));const J=i(e,["labels"]);n!==void 0&&J!=null&&s(n,["labels"],J);const Z=i(e,["cachedContent"]);n!==void 0&&Z!=null&&s(n,["cachedContent"],se(t,Z));const V=i(e,["responseModalities"]);V!=null&&s(o,["responseModalities"],V);const G=i(e,["mediaResolution"]);G!=null&&s(o,["mediaResolution"],G);const W=i(e,["speechConfig"]);W!=null&&s(o,["speechConfig"],Xa(lo(W)));const Ct=i(e,["audioTimestamp"]);Ct!=null&&s(o,["audioTimestamp"],Ct);const _t=i(e,["thinkingConfig"]);return _t!=null&&s(o,["thinkingConfig"],Qa(_t)),o}function bn(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Se(u))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["generationConfig"],ja(t,l,n)),n}function eu(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(t,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),n}function tu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);r!=null&&s(n,["instances[]","content"],so(t,r));const l=i(e,["config"]);return l!=null&&s(n,["config"],eu(l,n)),n}function nu(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const C=i(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const A=i(t,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const P=i(t,["enhancePrompt"]);return e!==void 0&&P!=null&&s(e,["parameters","enhancePrompt"],P),n}function ou(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(n,["config"],nu(l,n)),n}function Ke(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ne(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function iu(t){const e={},n=i(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(t,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function ru(t){const e={},n=i(t,["controlType"]);n!=null&&s(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function su(t){const e={},n=i(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function lu(t){const e={},n=i(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function au(t){const e={},n=i(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],Ke(n));const o=i(t,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(t,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(t,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],iu(l));const a=i(t,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],ru(a));const u=i(t,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],su(u));const d=i(t,["subjectImageConfig"]);return d!=null&&s(e,["subjectImageConfig"],lu(d)),e}function uu(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const C=i(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const A=i(t,["editMode"]);e!==void 0&&A!=null&&s(e,["parameters","editMode"],A);const P=i(t,["baseSteps"]);return e!==void 0&&P!=null&&s(e,["parameters","editConfig","baseSteps"],P),n}function cu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>au(d))),s(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&s(n,["config"],uu(a,n)),n}function du(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&s(e,["parameters","includeRaiReason"],o);const r=i(t,["outputMimeType"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","mimeType"],r);const l=i(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=i(t,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);const u=i(t,["mode"]);return e!==void 0&&u!=null&&s(e,["parameters","mode"],u),n}function fu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["image"]);r!=null&&s(n,["instances[0]","image"],Ke(r));const l=i(e,["upscaleFactor"]);l!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&s(n,["config"],du(a,n)),n}function pu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function mu(t,e,n){const o={},r=i(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],co(t,u)),o}function hu(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],mu(t,o,n)),n}function gu(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function yu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],gu(r,n)),n}function vu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Tu(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],Se(H(o)));const r=i(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Co(u))),s(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),n}function Cu(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Se(u))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],Tu(l,n)),n}function _u(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Se(u))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],l),n}function Eu(t){const e={},n=i(t,["uri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ne(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Su(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(t,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(t,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&s(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","enhancePrompt"],h);const y=i(t,["generateAudio"]);e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y);const C=i(t,["lastFrame"]);return e!==void 0&&C!=null&&s(e,["instances[0]","lastFrame"],Ke(C)),n}function Au(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],q(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(n,["instances[0]","image"],Ke(l));const a=i(e,["video"]);a!=null&&s(n,["instances[0]","video"],Eu(a));const u=i(e,["config"]);return u!=null&&s(n,["config"],Su(u,n)),n}function Iu(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Mu(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function xu(t){const e={},n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ru(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Iu(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Mu(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],xu(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Pu(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ru(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function wu(t){const e={},n=i(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Nu(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function ku(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Nu(r))),s(e,["urlMetadata"],o)}return e}function Du(t){const e={},n=i(t,["content"]);n!=null&&s(e,["content"],Pu(n));const o=i(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],wu(o));const r=i(t,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],ku(a));const u=i(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&s(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Hn(t){const e={},n=i(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Du(u))),s(e,["candidates"],a)}const o=i(t,["modelVersion"]);o!=null&&s(e,["modelVersion"],o);const r=i(t,["promptFeedback"]);r!=null&&s(e,["promptFeedback"],r);const l=i(t,["usageMetadata"]);return l!=null&&s(e,["usageMetadata"],l),e}function Vu(t){const e={},n=i(t,["values"]);return n!=null&&s(e,["values"],n),e}function Lu(){return{}}function Fu(t){const e={},n=i(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Vu(l))),s(e,["embeddings"],r)}return i(t,["metadata"])!=null&&s(e,["metadata"],Lu()),e}function Uu(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],ne(n));const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function _o(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Gu(t){const e={},n=i(t,["_self"]);n!=null&&s(e,["image"],Uu(n));const o=i(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(t,["_self"]);return r!=null&&s(e,["safetyAttributes"],_o(r)),e}function qu(t){const e={},n=i(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Gu(l))),s(e,["generatedImages"],r)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],_o(o)),e}function Bu(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function dt(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["version"]);l!=null&&s(e,["version"],l);const a=i(t,["_self"]);a!=null&&s(e,["tunedModelInfo"],Bu(a));const u=i(t,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&s(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);return c!=null&&s(e,["supportedActions"],c),e}function $u(t,e){const n={},o=i(e,["nextPageToken"]);o!=null&&s(n,["nextPageToken"],o);const r=i(e,["_self"]);if(r!=null){let l=fo(r);Array.isArray(l)&&(l=l.map(a=>dt(a))),s(n,["models"],l)}return n}function Ju(){return{}}function bu(t){const e={},n=i(t,["totalTokens"]);n!=null&&s(e,["totalTokens"],n);const o=i(t,["cachedContentTokenCount"]);return o!=null&&s(e,["cachedContentTokenCount"],o),e}function Hu(t){const e={},n=i(t,["video","uri"]);n!=null&&s(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ne(o));const r=i(t,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Ou(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],Hu(n)),e}function Wu(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ou(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Yu(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Wu(a)),e}function Zu(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ku(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function zu(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Xu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Zu(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Ku(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],zu(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Qu(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Xu(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ju(t){const e={},n=i(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function ec(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function tc(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ec(r))),s(e,["urlMetadata"],o)}return e}function nc(t){const e={},n=i(t,["content"]);n!=null&&s(e,["content"],Qu(n));const o=i(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],ju(o));const r=i(t,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],tc(a));const u=i(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&s(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function On(t){const e={},n=i(t,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>nc(c))),s(e,["candidates"],d)}const o=i(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(t,["responseId"]);r!=null&&s(e,["responseId"],r);const l=i(t,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(t,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function oc(t){const e={},n=i(t,["truncated"]);n!=null&&s(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function ic(t){const e={},n=i(t,["values"]);n!=null&&s(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&s(e,["statistics"],oc(o)),e}function rc(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function sc(t){const e={},n=i(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ic(l))),s(e,["embeddings"],r)}const o=i(t,["metadata"]);return o!=null&&s(e,["metadata"],rc(o)),e}function lc(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],ne(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Eo(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function yt(t){const e={},n=i(t,["_self"]);n!=null&&s(e,["image"],lc(n));const o=i(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(t,["_self"]);r!=null&&s(e,["safetyAttributes"],Eo(r));const l=i(t,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function ac(t){const e={},n=i(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>yt(l))),s(e,["generatedImages"],r)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],Eo(o)),e}function uc(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yt(r))),s(e,["generatedImages"],o)}return e}function cc(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yt(r))),s(e,["generatedImages"],o)}return e}function dc(t){const e={},n=i(t,["endpoint"]);n!=null&&s(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function fc(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function pc(t){const e={},n=i(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(t,["step"]);return r!=null&&s(e,["step"],r),e}function ft(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["versionId"]);l!=null&&s(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>dc(m))),s(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&s(e,["labels"],u);const d=i(t,["_self"]);d!=null&&s(e,["tunedModelInfo"],fc(d));const c=i(t,["defaultCheckpointId"]);c!=null&&s(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>pc(m))),s(e,["checkpoints"],p)}return e}function mc(t,e){const n={},o=i(e,["nextPageToken"]);o!=null&&s(n,["nextPageToken"],o);const r=i(e,["_self"]);if(r!=null){let l=fo(r);Array.isArray(l)&&(l=l.map(a=>ft(a))),s(n,["models"],l)}return n}function hc(){return{}}function gc(t){const e={},n=i(t,["totalTokens"]);return n!=null&&s(e,["totalTokens"],n),e}function yc(t){const e={},n=i(t,["tokensInfo"]);return n!=null&&s(e,["tokensInfo"],n),e}function vc(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ne(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Tc(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],vc(n)),e}function Cc(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Tc(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function _c(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response"]);return a!=null&&s(e,["response"],Cc(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ec="Content-Type",Sc="X-Server-Timeout",Ac="User-Agent",pt="x-goog-api-client",Ic="1.6.0",Mc=`google-genai-sdk/${Ic}`,xc="v1beta1",Rc="v1beta",Wn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Pc{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xc,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Rc,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}request(e){return v(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=yield this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)})}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}requestStream(e){return v(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=yield this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)})}includeExtraHttpOptionsToRequestInit(e,n,o){return v(this,null,function*(){if(n&&n.timeout||o){const r=new AbortController,l=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&wc(e,n.extraBody),e.headers=yield this.getHeadersInternal(n),e})}unaryApiCall(e,n,o){return v(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(r=>v(this,null,function*(){return yield Yn(r),new lt(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}streamApiCall(e,n,o){return v(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(r=>v(this,null,function*(){return yield Yn(r),this.processStreamResponse(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}processStreamResponse(e){var n;return he(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield B(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,y=m.code,C=`got status: ${h}. ${JSON.stringify(p)}`;if(y>=400&&y<600)throw new Ye({message:C,status:y})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let f=a.match(Wn);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new lt(m)),a=a.slice(f[0].length),f=a.match(Wn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}apiCall(e,n){return v(this,null,function*(){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})})}getDefaultHeaders(){const e={},n=Mc+" "+this.clientOptions.userAgentExtra;return e[Ac]=n,e[pt]=n,e[Ec]="application/json",e}getHeadersInternal(e){return v(this,null,function*(){const n=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))n.append(o,r);e.timeout&&e.timeout>0&&n.append(Sc,String(Math.ceil(e.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(n),n})}uploadFile(e,n){return v(this,null,function*(){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=yield l.stat(e);r.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d=yield this.fetchUploadUrl(r,n);return l.upload(e,d,this)})}downloadFile(e){return v(this,null,function*(){yield this.clientOptions.downloader.download(e,this)})}fetchUploadUrl(e,n){return v(this,null,function*(){var o;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=yield this.request({path:I("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u})}}function Yn(t){return v(this,null,function*(){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=yield t.json():o={error:{message:yield t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Ye({message:r,status:n}):new Error(r)}})}function wc(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch(l){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nc="mcp_used/unknown";function So(t){for(const e of t)if(vt(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Ao(t){var e;const n=(e=t[pt])!==null&&e!==void 0?e:"";t[pt]=(n+` ${Nc}`).trimStart()}function kc(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>vt(r)))!==null&&o!==void 0?o:!1}function Dc(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!vt(r)))!==null&&o!==void 0?o:!1}function vt(t){return t!==null&&typeof t=="object"&&t instanceof Tt}function Vc(t,e=100){return he(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield B(t.listTools({cursor:o}));for(const a of l.tools)yield yield B(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Tt{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Tt(e,n)}initialize(){return v(this,null,function*(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,xe(Vc(f))),c;c=yield d.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&(yield o.call(d))}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l})}tool(){return v(this,null,function*(){return yield this.initialize(),Vi(this.mcpTools,this.config)})}callTool(e){return v(this,null,function*(){yield this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=yield r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lc(t,e,n){return v(this,null,function*(){const o=new _i;let r;n.data instanceof Blob?r=JSON.parse(yield n.data.text()):r=JSON.parse(n.data);const l=bl(r);Object.assign(o,l),e(o)})}class Fc{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}connect(e){return v(this,null,function*(){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=qc(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(w=>{c=w}),p=e.callbacks,m=function(){c({})},h=this.apiClient,y={onopen:m,onmessage:w=>{Lc(h,p.onmessage,w)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(w){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(w){}},C=this.webSocketFactory.create(d,Gc(a),y);C.connect(),yield f;const A=q(this.apiClient,e.model),P=yo({model:A}),k=ct({setup:P});return C.send(JSON.stringify(k)),new Uc(C,this.apiClient)})}}class Uc{constructor(e,n){this.conn=e,this.apiClient=n}setWeightedPrompts(e){return v(this,null,function*(){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ol(e),o=vo(n);this.conn.send(JSON.stringify({clientContent:o}))})}setMusicGenerationConfig(e){return v(this,null,function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=il(e),o=ct(n);this.conn.send(JSON.stringify(o))})}sendPlaybackControl(e){const n=ct({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pe.PLAY)}pause(){this.sendPlaybackControl(pe.PAUSE)}stop(){this.sendPlaybackControl(pe.STOP)}resetContext(){this.sendPlaybackControl(pe.RESET_CONTEXT)}close(){this.conn.close()}}function Gc(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function qc(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bc="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function $c(t,e,n){return v(this,null,function*(){const o=new Ci;let r;if(n.data instanceof Blob?r=JSON.parse(yield n.data.text()):r=JSON.parse(n.data),t.isVertexAI()){const l=Vl(r);Object.assign(o,l)}else{const l=Dl(r);Object.assign(o,l)}e(o)})}class Jc{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Fc(this.apiClient,this.auth,this.webSocketFactory)}connect(e){return v(this,null,function*(){var n,o,r,l,a,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&So(e.config.tools)&&Ao(p);const m=Wc(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(m);else{const V=this.apiClient.getApiKey();let G="BidiGenerateContent",W="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),G="BidiGenerateContentConstrained",W="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${G}?${W}=${V}`}let h=()=>{};const y=new Promise(V=>{h=V}),C=e.callbacks,A=function(){var V;(V=C==null?void 0:C.onopen)===null||V===void 0||V.call(C),h({})},P=this.apiClient,k={onopen:A,onmessage:V=>{$c(P,C.onmessage,V)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(V){},onclose:(o=C==null?void 0:C.onclose)!==null&&o!==void 0?o:function(V){}},w=this.webSocketFactory.create(f,Oc(m),k);w.connect(),yield y;let L=q(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const V=this.apiClient.getProject(),G=this.apiClient.getLocation();L=`projects/${V}/locations/${G}/`+L}let N={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Je.AUDIO]}:e.config.responseModalities=[Je.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],J=[];for(const V of $)if(this.isCallableTool(V)){const G=V;J.push(yield G.tool())}else J.push(V);J.length>0&&(e.config.tools=J);const Z={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=zs(this.apiClient,Z):N=Ks(this.apiClient,Z),delete N.config,w.send(JSON.stringify(N)),new Hc(w,this.apiClient)})}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const bc={turnComplete:!0};class Hc{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=K(n.turns),e.isVertexAI()?o=o.map(r=>Se(r)):o=o.map(r=>Ze(r))}catch(r){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Bc)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},bc),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nl(e)}:n={realtimeInput:tl(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Oc(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Wc(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zn=10;function Kn(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Le(a)){r=!0;break}if(!r)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Le(t){return"callTool"in t&&typeof t.callTool=="function"}function zn(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yc extends Ee{constructor(e){super(),this.apiClient=e,this.generateContent=n=>v(this,null,function*(){var o,r,l,a,u;const d=yield this.processParamsForMcpUsage(n);if(!kc(n)||Kn(n.config))return yield this.generateContentInternal(d);if(Dc(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=K(d.contents),m=(l=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Zn;let h=0;for(;h<m&&(c=yield this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,C=[];for(const A of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Le(A)){const k=yield A.callTool(c.functionCalls);C.push(...k)}h++,f={role:"user",parts:C},d.contents=K(d.contents),d.contents.push(y),d.contents.push(f),zn(d.config)&&(p.push(y),p.push(f))}return zn(d.config)&&(c.automaticFunctionCallingHistory=p),c}),this.generateContentStream=n=>v(this,null,function*(){if(Kn(n.config)){const o=yield this.processParamsForMcpUsage(n);return yield this.generateContentStreamInternal(o)}else return yield this.processAfcStream(n)}),this.generateImages=n=>v(this,null,function*(){return yield this.generateImagesInternal(n).then(o=>{var r;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u})}),this.list=n=>v(this,null,function*(){var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new We(_e.PAGED_ITEM_MODELS,u=>this.listInternal(u),yield this.listInternal(a),a)}),this.editImage=n=>v(this,null,function*(){const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),yield this.editImageInternal(o)}),this.upscaleImage=n=>v(this,null,function*(){let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return yield this.upscaleImageInternal(r)})}processParamsForMcpUsage(e){return v(this,null,function*(){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=yield Promise.all(l.map(d=>v(null,null,function*(){return Le(d)?yield d.tool():d}))),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&So(e.config.tools)){const d=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Ao(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u})}initAfcToolsMap(e){return v(this,null,function*(){var n,o,r;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Le(a)){const u=a,d=yield u.tool();for(const c of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l})}processAfcStream(e){return v(this,null,function*(){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Zn;let a=!1,u=0;const d=yield this.initAfcToolsMap(e);return function(c,f,p){var m,h;return he(this,arguments,function*(){for(var y,C,A,P;u<l;){a&&(u++,a=!1);const N=yield B(c.processParamsForMcpUsage(p)),$=yield B(c.generateContentStreamInternal(N)),J=[],Z=[];try{for(var k=!0,w=(C=void 0,xe($)),L;L=yield B(w.next()),y=L.done,!y;k=!0){P=L.value,k=!1;const V=P;if(yield yield B(V),V.candidates&&(!((m=V.candidates[0])===null||m===void 0)&&m.content)){Z.push(V.candidates[0].content);for(const G of(h=V.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&G.functionCall){if(!G.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(G.functionCall.name)){const W=yield B(f.get(G.functionCall.name).callTool([G.functionCall]));J.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${G.functionCall.name}`)}}}}catch(V){C={error:V}}finally{try{!k&&!y&&(A=w.return)&&(yield B(A.call(w)))}finally{if(C)throw C.error}}if(J.length>0){a=!0;const V=new Ae;V.candidates=[{content:{role:"user",parts:J}}],yield yield B(V);const G=[];G.push(...Z),G.push({role:"user",parts:J});const W=K(p.contents).concat(G);p.contents=W}else break}})}(this,d,e)})}generateContentInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=bn(this.apiClient,e);return u=I("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=On(f),m=new Ae;return Object.assign(m,p),m})}else{const c=Jn(this.apiClient,e);return u=I("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Hn(f),m=new Ae;return Object.assign(m,p),m})}})}generateContentStreamInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=bn(this.apiClient,e);return u=I("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return he(this,arguments,function*(){var m,h,y,C;try{for(var A=!0,P=xe(p),k;k=yield B(P.next()),m=k.done,!m;A=!0){C=k.value,A=!1;const L=On(yield B(C.json())),N=new Ae;Object.assign(N,L),yield yield B(N)}}catch(w){h={error:w}}finally{try{!A&&!m&&(y=P.return)&&(yield B(y.call(P)))}finally{if(h)throw h.error}}})})}else{const c=Jn(this.apiClient,e);return u=I("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return he(this,arguments,function*(){var m,h,y,C;try{for(var A=!0,P=xe(p),k;k=yield B(P.next()),m=k.done,!m;A=!0){C=k.value,A=!1;const L=Hn(yield B(C.json())),N=new Ae;Object.assign(N,L),yield yield B(N)}}catch(w){h={error:w}}finally{try{!A&&!m&&(y=P.return)&&(yield B(y.call(P)))}finally{if(h)throw h.error}}})})}})}embedContent(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=tu(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=sc(f),m=new En;return Object.assign(m,p),m})}else{const c=ma(this.apiClient,e);return u=I("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Fu(f),m=new En;return Object.assign(m,p),m})}})}generateImagesInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ou(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=ac(f),m=new Sn;return Object.assign(m,p),m})}else{const c=ga(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=qu(f),m=new Sn;return Object.assign(m,p),m})}})}editImageInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=cu(this.apiClient,e);return l=I("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=uc(d),f=new mi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")})}upscaleImageInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=fu(this.apiClient,e);return l=I("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=cc(d),f=new hi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")})}get(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=pu(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ft(f))}else{const c=ya(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>dt(f))}})}listInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=hu(this.apiClient,e);return u=I("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=mc(this.apiClient,f),m=new An;return Object.assign(m,p),m})}else{const c=Ta(this.apiClient,e);return u=I("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=$u(this.apiClient,f),m=new An;return Object.assign(m,p),m})}})}update(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yu(this.apiClient,e);return u=I("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ft(f))}else{const c=_a(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>dt(f))}})}delete(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vu(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=hc(),p=new In;return Object.assign(p,f),p})}else{const c=Ea(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Ju(),p=new In;return Object.assign(p,f),p})}})}countTokens(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Cu(this.apiClient,e);return u=I("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=gc(f),m=new Mn;return Object.assign(m,p),m})}else{const c=Aa(this.apiClient,e);return u=I("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=bu(f),m=new Mn;return Object.assign(m,p),m})}})}computeTokens(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=_u(this.apiClient,e);return l=I("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=yc(d),f=new gi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideos(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Au(this.apiClient,e);return u=I("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>_c(f))}else{const c=xa(this.apiClient,e);return u=I("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Yu(f))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Kc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function zc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const r=i(t,["config"]);return r!=null&&s(e,["config"],r),e}function Xc(t){const e={},n=i(t,["video","uri"]);n!=null&&s(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ne(o));const r=i(t,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Qc(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],Xc(n)),e}function jc(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Qc(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function ed(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],jc(a)),e}function td(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ne(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function nd(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],td(n)),e}function od(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>nd(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Xn(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response"]);return a!=null&&s(e,["response"],od(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class id extends Ee{constructor(e){super(),this.apiClient=e}getVideosOperation(e){return v(this,null,function*(){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;return o&&"httpOptions"in o&&(l=o.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:o})})}getVideosOperationInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Kc(e);return u=I("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Xn(f))}else{const c=Zc(e);return u=I("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ed(f))}})}fetchPredictVideosOperationInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=zc(e);return l=I("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Xn(d))}else throw new Error("This method is only supported by the Vertex AI.")})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rd(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Io(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],rd(n)),e}function sd(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Io(o)),e}function ld(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>sd(r))),s(e,["speakerVoiceConfigs"],o)}return e}function ad(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Io(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ld(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function ud(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function cd(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function dd(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function fd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ud(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],cd(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],dd(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&s(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function pd(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>fd(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function md(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&s(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function hd(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function gd(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],hd(n)),e}function yd(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function vd(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],yd(n)),e}function Td(){return{}}function Cd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>md(d))),s(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],gd(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],vd(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],Td());const a=i(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function _d(t){const e={},n=i(t,["handle"]);if(n!=null&&s(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Qn(){return{}}function Ed(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Sd(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Ed(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Ad(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Id(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Ad(o)),e}function Md(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function xd(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],ad(gt(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],pd(H(h)));const y=i(t,["tools"]);if(e!==void 0&&y!=null){let N=we(y);Array.isArray(N)&&(N=N.map($=>Cd(Pe($)))),s(e,["setup","tools"],N)}const C=i(t,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],_d(C));const A=i(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],Qn());const P=i(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&s(e,["setup","outputAudioTranscription"],Qn());const k=i(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],Sd(k));const w=i(t,["contextWindowCompression"]);e!==void 0&&w!=null&&s(e,["setup","contextWindowCompression"],Id(w));const L=i(t,["proactivity"]);return e!==void 0&&L!=null&&s(e,["setup","proactivity"],Md(L)),n}function Rd(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],xd(r,n)),n}function Pd(t,e,n){const o={},r=i(e,["expireTime"]);n!==void 0&&r!=null&&s(n,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&s(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&s(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&s(n,["bidiGenerateContentSetup"],Rd(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&s(n,["fieldMask"],d),o}function wd(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],Pd(t,o,n)),n}function Nd(t){const e={},n=i(t,["name"]);return n!=null&&s(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kd(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function Dd(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=kd(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Vd extends Ee{constructor(e){super(),this.apiClient=e}create(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=wd(this.apiClient,e);l=I("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Dd(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>Nd(c))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ld(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Fd(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Ud(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Fd(n,e)),e}function Gd(t){const e={},n=i(t,["textInput"]);n!=null&&s(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&s(e,["output"],o),e}function qd(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Gd(r))),s(e,["examples","examples"],o)}return e}function Bd(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(t,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(t,["learningRateMultiplier"]);if(l!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(t,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(t,["learningRate"]);return e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),n}function $d(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&s(e,["tuningTask","trainingData"],qd(o));const r=i(t,["config"]);return r!=null&&s(e,["config"],Bd(r,e)),e}function Jd(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function bd(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Hd(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],bd(n,e)),e}function Od(t,e){const n={},o=i(t,["gcsUri"]);if(e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Wd(t){const e={},n=i(t,["gcsUri"]);return n!=null&&s(e,["validationDatasetUri"],n),e}function Yd(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],Wd(o));const r=i(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(t,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(t,["adapterSize"]);if(e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Zd(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],Od(o,e));const r=i(t,["config"]);return r!=null&&s(e,["config"],Yd(r,e)),e}function Kd(t){const e={},n=i(t,["name"]);n!=null&&s(e,["model"],n);const o=i(t,["name"]);return o!=null&&s(e,["endpoint"],o),e}function Mo(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["state"]);o!=null&&s(e,["state"],ao(o));const r=i(t,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(t,["tuningTask","startTime"]);l!=null&&s(e,["startTime"],l);const a=i(t,["tuningTask","completeTime"]);a!=null&&s(e,["endTime"],a);const u=i(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(t,["description"]);d!=null&&s(e,["description"],d);const c=i(t,["baseModel"]);c!=null&&s(e,["baseModel"],c);const f=i(t,["_self"]);f!=null&&s(e,["tunedModel"],Kd(f));const p=i(t,["distillationSpec"]);p!=null&&s(e,["distillationSpec"],p);const m=i(t,["experiment"]);m!=null&&s(e,["experiment"],m);const h=i(t,["labels"]);h!=null&&s(e,["labels"],h);const y=i(t,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const C=i(t,["serviceAccount"]);C!=null&&s(e,["serviceAccount"],C);const A=i(t,["tunedModelDisplayName"]);return A!=null&&s(e,["tunedModelDisplayName"],A),e}function zd(t){const e={},n=i(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=i(t,["tunedModels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Mo(l))),s(e,["tuningJobs"],r)}return e}function Xd(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);return l!=null&&s(e,["error"],l),e}function Qd(t){const e={},n=i(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(t,["step"]);r!=null&&s(e,["step"],r);const l=i(t,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function jd(t){const e={},n=i(t,["model"]);n!=null&&s(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(t,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Qd(a))),s(e,["checkpoints"],l)}return e}function mt(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["state"]);o!=null&&s(e,["state"],ao(o));const r=i(t,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(t,["startTime"]);l!=null&&s(e,["startTime"],l);const a=i(t,["endTime"]);a!=null&&s(e,["endTime"],a);const u=i(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(t,["error"]);d!=null&&s(e,["error"],d);const c=i(t,["description"]);c!=null&&s(e,["description"],c);const f=i(t,["baseModel"]);f!=null&&s(e,["baseModel"],f);const p=i(t,["tunedModel"]);p!=null&&s(e,["tunedModel"],jd(p));const m=i(t,["supervisedTuningSpec"]);m!=null&&s(e,["supervisedTuningSpec"],m);const h=i(t,["tuningDataStats"]);h!=null&&s(e,["tuningDataStats"],h);const y=i(t,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const C=i(t,["partnerModelTuningSpec"]);C!=null&&s(e,["partnerModelTuningSpec"],C);const A=i(t,["distillationSpec"]);A!=null&&s(e,["distillationSpec"],A);const P=i(t,["experiment"]);P!=null&&s(e,["experiment"],P);const k=i(t,["labels"]);k!=null&&s(e,["labels"],k);const w=i(t,["pipelineJob"]);w!=null&&s(e,["pipelineJob"],w);const L=i(t,["serviceAccount"]);L!=null&&s(e,["serviceAccount"],L);const N=i(t,["tunedModelDisplayName"]);return N!=null&&s(e,["tunedModelDisplayName"],N),e}function ef(t){const e={},n=i(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=i(t,["tuningJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>mt(l))),s(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tf extends Ee{constructor(e){super(),this.apiClient=e,this.get=n=>v(this,null,function*(){return yield this.getInternal(n)}),this.list=(...o)=>v(this,[...o],function*(n={}){return new We(_e.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),yield this.listInternal(n),n)}),this.tune=n=>v(this,null,function*(){if(this.apiClient.isVertexAI())return yield this.tuneInternal(n);{const o=yield this.tuneMldevInternal(n);let r="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?r=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(r=o.name.split("/operations/")[0]),{name:r,state:st.JOB_STATE_QUEUED}}})}getInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Jd(e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>mt(f))}else{const c=Ld(e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mo(f))}})}listInternal(e){return v(this,null,function*(){var n,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Hd(e);return u=I("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=ef(f),m=new xn;return Object.assign(m,p),m})}else{const c=Ud(e);return u=I("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=zd(f),m=new xn;return Object.assign(m,p),m})}})}tuneInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Zd(e);return l=I("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>mt(d))}else throw new Error("This method is only supported by the Vertex AI.")})}tuneMldevInternal(e){return v(this,null,function*(){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$d(e);return l=I("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Xd(d))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nf{download(e,n){return v(this,null,function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})}}const of=1024*1024*8,rf=3,sf=1e3,lf=2,Qe="x-goog-upload-status";function af(t,e,n){return v(this,null,function*(){var o,r,l;let a=0,u=0,d=new lt(new Response),c="upload";for(a=t.size;u<a;){const p=Math.min(of,a-u),m=t.slice(u,u+p);u+p>=a&&(c+=", finalize");let h=0,y=sf;for(;h<rf&&(d=yield n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[Qe]));)h++,yield cf(y),y=y*lf;if(u+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Qe])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=yield d==null?void 0:d.json();if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[Qe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file})}function uf(t){return v(this,null,function*(){return{size:t.size,type:t.type}})}function cf(t){return new Promise(e=>setTimeout(e,t))}class df{upload(e,n,o){return v(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield af(e,n,o)})}stat(e){return v(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield uf(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ff{create(e,n,o){return new pf(e,n,o)}}class pf{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jn="x-goog-api-key";class mf{constructor(e){this.apiKey=e}addAuthHeaders(e){return v(this,null,function*(){if(e.get(jn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(jn,this.apiKey)}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hf="gl-node/";class yf{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=pi(e,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new mf(this.apiKey);this.apiClient=new Pc({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:hf+"web",uploader:new df,downloader:new nf}),this.models=new Yc(this.apiClient),this.live=new Jc(this.apiClient,r,new ff),this.chats=new Br(this.models,this.apiClient),this.caches=new Ur(this.apiClient),this.files=new jr(this.apiClient),this.operations=new id(this.apiClient),this.authTokens=new Vd(this.apiClient),this.tunings=new tf(this.apiClient)}}export{yf as G};
