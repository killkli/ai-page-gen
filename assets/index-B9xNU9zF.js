var _h=Object.defineProperty,Qh=Object.defineProperties;var Gh=Object.getOwnPropertyDescriptors;var Ei=Object.getOwnPropertySymbols;var P0=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable;var F0=(r,d,c)=>d in r?_h(r,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[d]=c,ie=(r,d)=>{for(var c in d||(d={}))P0.call(d,c)&&F0(r,c,d[c]);if(Ei)for(var c of Ei(d))em.call(d,c)&&F0(r,c,d[c]);return r},me=(r,d)=>Qh(r,Gh(d));var tm=(r,d)=>{var c={};for(var o in r)P0.call(r,o)&&d.indexOf(o)<0&&(c[o]=r[o]);if(r!=null&&Ei)for(var o of Ei(r))d.indexOf(o)<0&&em.call(r,o)&&(c[o]=r[o]);return c};var Vh=(r,d)=>()=>(d||r((d={exports:{}}).exports,d),d.exports);var H=(r,d,c)=>new Promise((o,m)=>{var x=f=>{try{j(c.next(f))}catch(b){m(b)}},g=f=>{try{j(c.throw(f))}catch(b){m(b)}},j=f=>f.done?o(f.value):Promise.resolve(f.value).then(x,g);j((c=c.apply(r,d)).next())});import{j as t,r as Zh,M as Yh}from"./utilities-BkxrxE9D.js";import{r as Ih,a as Kh,g as xm,b as S,R as Me,u as Na,c as Xh,d as Jh,B as Wh,e as Fh,f as Pt}from"./vendor-vmCsExVI.js";import{G as hm}from"./ai-09tMth0v.js";var _f=Vh(ae=>{(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))o(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const g of x.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function c(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(m){if(m.ep)return;m.ep=!0;const x=c(m);fetch(m.href,x)}})();var Xc={exports:{}},fl={},Jc={exports:{}},Wc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function Ph(){return sm||(sm=1,function(r){function d(N,B){var ne=N.length;N.push(B);e:for(;0<ne;){var L=ne-1>>>1,O=N[L];if(0<m(O,B))N[L]=B,N[ne]=O,ne=L;else break e}}function c(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var B=N[0],ne=N.pop();if(ne!==B){N[0]=ne;e:for(var L=0,O=N.length,G=O>>>1;L<G;){var W=2*(L+1)-1,ge=N[W],Te=W+1,Ae=N[Te];if(0>m(ge,ne))Te<O&&0>m(Ae,ge)?(N[L]=Ae,N[Te]=ne,L=Te):(N[L]=ge,N[W]=ne,L=W);else if(Te<O&&0>m(Ae,ne))N[L]=Ae,N[Te]=ne,L=Te;else break e}}return B}function m(N,B){var ne=N.sortIndex-B.sortIndex;return ne!==0?ne:N.id-B.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var g=Date,j=g.now();r.unstable_now=function(){return g.now()-j}}var f=[],b=[],p=1,k=null,T=3,v=!1,w=!1,E=!1,A=!1,X=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate!="undefined"?setImmediate:null;function J(N){for(var B=c(b);B!==null;){if(B.callback===null)o(b);else if(B.startTime<=N)o(b),B.sortIndex=B.expirationTime,d(f,B);else break;B=c(b)}}function fe(N){if(E=!1,J(N),!w)if(c(f)!==null)w=!0,P||(P=!0,ce());else{var B=c(b);B!==null&&V(fe,B.startTime-N)}}var P=!1,z=-1,_=5,te=-1;function Ne(){return A?!0:!(r.unstable_now()-te<_)}function xe(){if(A=!1,P){var N=r.unstable_now();te=N;var B=!0;try{e:{w=!1,E&&(E=!1,oe(z),z=-1),v=!0;var ne=T;try{t:{for(J(N),k=c(f);k!==null&&!(k.expirationTime>N&&Ne());){var L=k.callback;if(typeof L=="function"){k.callback=null,T=k.priorityLevel;var O=L(k.expirationTime<=N);if(N=r.unstable_now(),typeof O=="function"){k.callback=O,J(N),B=!0;break t}k===c(f)&&o(f),J(N)}else o(f);k=c(f)}if(k!==null)B=!0;else{var G=c(b);G!==null&&V(fe,G.startTime-N),B=!1}}break e}finally{k=null,T=ne,v=!1}B=void 0}}finally{B?ce():P=!1}}}var ce;if(typeof F=="function")ce=function(){F(xe)};else if(typeof MessageChannel!="undefined"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=xe,ce=function(){K.postMessage(null)}}else ce=function(){X(xe,0)};function V(N,B){z=X(function(){N(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(N){switch(T){case 1:case 2:case 3:var B=3;break;default:B=T}var ne=T;T=B;try{return N()}finally{T=ne}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ne=T;T=N;try{return B()}finally{T=ne}},r.unstable_scheduleCallback=function(N,B,ne){var L=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?L+ne:L):ne=L,N){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ne+O,N={id:p++,callback:B,priorityLevel:N,startTime:ne,expirationTime:O,sortIndex:-1},ne>L?(N.sortIndex=ne,d(b,N),c(f)===null&&N===c(b)&&(E?(oe(z),z=-1):E=!0,V(fe,ne-L))):(N.sortIndex=O,d(f,N),w||v||(w=!0,P||(P=!0,ce()))),N},r.unstable_shouldYield=Ne,r.unstable_wrapCallback=function(N){var B=T;return function(){var ne=T;T=B;try{return N.apply(this,arguments)}finally{T=ne}}}}(Wc)),Wc}var am;function eg(){return am||(am=1,Jc.exports=Ph()),Jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function tg(){if(nm)return fl;nm=1;var r=eg(),d=Ih(),c=Kh();function o(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function g(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function j(e){if(x(e)!==e)throw Error(o(188))}function f(e){var s=e.alternate;if(!s){if(s=x(e),s===null)throw Error(o(188));return s!==e?null:e}for(var a=e,n=s;;){var l=a.return;if(l===null)break;var i=l.alternate;if(i===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===a)return j(l),e;if(i===n)return j(l),s;i=i.sibling}throw Error(o(188))}if(a.return!==n.return)a=l,n=i;else{for(var u=!1,h=l.child;h;){if(h===a){u=!0,a=l,n=i;break}if(h===n){u=!0,n=l,a=i;break}h=h.sibling}if(!u){for(h=i.child;h;){if(h===a){u=!0,a=i,n=l;break}if(h===n){u=!0,n=i,a=l;break}h=h.sibling}if(!u)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:s}function b(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=b(e),s!==null)return s;e=e.sibling}return null}var p=Object.assign,k=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),F=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=xe&&e[xe]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Symbol.for("react.client.reference");function K(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Y?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case fe:return"Suspense";case P:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case F:return(e.displayName||"Context")+".Provider";case oe:return(e._context.displayName||"Context")+".Consumer";case J:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return s=e.displayName||null,s!==null?s:K(e.type)||"Memo";case _:s=e._payload,e=e._init;try{return K(e(s))}catch(a){}}return null}var V=Array.isArray,N=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},L=[],O=-1;function G(e){return{current:e}}function W(e){0>O||(e.current=L[O],L[O]=null,O--)}function ge(e,s){O++,L[O]=e.current,e.current=s}var Te=G(null),Ae=G(null),ee=G(null),de=G(null);function ue(e,s){switch(ge(ee,s),ge(Ae,e),ge(Te,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?C0(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=C0(s),e=A0(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(Te),ge(Te,e)}function pe(){W(Te),W(Ae),W(ee)}function We(e){e.memoizedState!==null&&ge(de,e);var s=Te.current,a=A0(s,e.type);s!==a&&(ge(Ae,e),ge(Te,a))}function Ge(e){Ae.current===e&&(W(Te),W(Ae)),de.current===e&&(W(de),ul._currentValue=ne)}var et=Object.prototype.hasOwnProperty,at=r.unstable_scheduleCallback,St=r.unstable_cancelCallback,Ht=r.unstable_shouldYield,os=r.unstable_requestPaint,Ct=r.unstable_now,Sa=r.unstable_getCurrentPriorityLevel,ta=r.unstable_ImmediatePriority,ka=r.unstable_UserBlockingPriority,Es=r.unstable_NormalPriority,pn=r.unstable_LowPriority,ds=r.unstable_IdlePriority,sa=r.log,bn=r.unstable_setDisableYieldValue,us=null,gt=null;function se(e){if(typeof sa=="function"&&bn(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(us,e)}catch(s){}}var je=Math.clz32?Math.clz32:vn,qe=Math.log,it=Math.LN2;function vn(e){return e>>>=0,e===0?32:31-(qe(e)/it|0)|0}var zs=256,Ee=4194304;function ms(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ve(e,s,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,i=e.suspendedLanes,u=e.pingedLanes;e=e.warmLanes;var h=n&134217727;return h!==0?(n=h&~i,n!==0?l=ms(n):(u&=h,u!==0?l=ms(u):a||(a=h&~e,a!==0&&(l=ms(a))))):(h=n&~i,h!==0?l=ms(h):u!==0?l=ms(u):a||(a=n&~e,a!==0&&(l=ms(a)))),l===0?0:s!==0&&s!==l&&(s&i)===0&&(i=l&-l,a=s&-s,i>=a||i===32&&(a&4194048)!==0)?s:l}function ss(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Os(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var e=zs;return zs<<=1,(zs&4194048)===0&&(zs=256),e}function yn(){var e=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),e}function Ca(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function U(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function re(e,s,a,n,l,i){var u=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var h=e.entanglements,y=e.expirationTimes,$=e.hiddenUpdates;for(a=u&~a;0<a;){var Q=31-je(a),I=1<<Q;h[Q]=0,y[Q]=-1;var R=$[Q];if(R!==null)for($[Q]=null,Q=0;Q<R.length;Q++){var q=R[Q];q!==null&&(q.lane&=-536870913)}a&=~I}n!==0&&le(e,n,0),i!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=i&~(u&~s))}function le(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var n=31-je(s);e.entangledLanes|=s,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function he(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var n=31-je(a),l=1<<n;l&s|e[n]&s&&(e[n]|=s),a&=~l}}function ve(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ke(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ze(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Y0(e.type))}function $e(e,s){var a=B.p;try{return B.p=e,s()}finally{B.p=a}}var Ue=Math.random().toString(36).slice(2),_e="__reactFiber$"+Ue,ut="__reactProps$"+Ue,xs="__reactContainer$"+Ue,Aa="__reactEvents$"+Ue,zm="__reactListeners$"+Ue,Om="__reactHandles$"+Ue,ho="__reactResources$"+Ue,Nn="__reactMarker$"+Ue;function Qi(e){delete e[_e],delete e[ut],delete e[Aa],delete e[zm],delete e[Om]}function Ta(e){var s=e[_e];if(s)return s;for(var a=e.parentNode;a;){if(s=a[xs]||a[_e]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=z0(e);e!==null;){if(a=e[_e])return a;e=z0(e)}return s}e=a,a=e.parentNode}return null}function Ma(e){if(e=e[_e]||e[xs]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function wn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(o(33))}function Ea(e){var s=e[ho];return s||(s=e[ho]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ft(e){e[Nn]=!0}var go=new Set,fo={};function aa(e,s){za(e,s),za(e+"Capture",s)}function za(e,s){for(fo[e]=s,e=0;e<s.length;e++)go.add(s[e])}var Lm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),po={},bo={};function Dm(e){return et.call(bo,e)?!0:et.call(po,e)?!1:Lm.test(e)?bo[e]=!0:(po[e]=!0,!1)}function jl(e,s,a){if(Dm(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var n=s.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function yl(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function hs(e,s,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+n)}}var Gi,vo;function Oa(e){if(Gi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gi=s&&s[1]||"",vo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+e+vo}var Vi=!1;function Zi(e,s){if(!e||Vi)return"";Vi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(s){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(q){var R=q}Reflect.construct(e,[],I)}else{try{I.call()}catch(q){R=q}e.call(I.prototype)}}else{try{throw Error()}catch(q){R=q}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(q){if(q&&R&&typeof q.stack=="string")return[q.stack,R.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),u=i[0],h=i[1];if(u&&h){var y=u.split(`
`),$=h.split(`
`);for(l=n=0;n<y.length&&!y[n].includes("DetermineComponentFrameRoot");)n++;for(;l<$.length&&!$[l].includes("DetermineComponentFrameRoot");)l++;if(n===y.length||l===$.length)for(n=y.length-1,l=$.length-1;1<=n&&0<=l&&y[n]!==$[l];)l--;for(;1<=n&&0<=l;n--,l--)if(y[n]!==$[l]){if(n!==1||l!==1)do if(n--,l--,0>l||y[n]!==$[l]){var Q=`
`+y[n].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=n&&0<=l);break}}}finally{Vi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Oa(a):""}function Bm(e){switch(e.tag){case 26:case 27:case 5:return Oa(e.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 15:return Zi(e.type,!1);case 11:return Zi(e.type.render,!1);case 1:return Zi(e.type,!0);case 31:return Oa("Activity");default:return""}}function jo(e){try{var s="";do s+=Bm(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function _t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yo(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $m(e){var s=yo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,i=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return l.call(this)},set:function(u){n=""+u,i.call(this,u)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Nl(e){e._valueTracker||(e._valueTracker=$m(e))}function No(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),n="";return e&&(n=yo(e)?e.checked?"true":"false":e.value),e=n,e!==a?(s.setValue(e),!0):!1}function wl(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(s){return e.body}}var Rm=/[\n"\\]/g;function Qt(e){return e.replace(Rm,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Yi(e,s,a,n,l,i,u,h){e.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.type=u:e.removeAttribute("type"),s!=null?u==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+_t(s)):e.value!==""+_t(s)&&(e.value=""+_t(s)):u!=="submit"&&u!=="reset"||e.removeAttribute("value"),s!=null?Ii(e,u,_t(s)):a!=null?Ii(e,u,_t(a)):n!=null&&e.removeAttribute("value"),l==null&&i!=null&&(e.defaultChecked=!!i),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+_t(h):e.removeAttribute("name")}function wo(e,s,a,n,l,i,u,h){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),s!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||s!=null))return;a=a!=null?""+_t(a):"",s=s!=null?""+_t(s):a,h||s===e.value||(e.value=s),e.defaultValue=s}n=n!=null?n:l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=h?e.checked:!!n,e.defaultChecked=!!n,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.name=u)}function Ii(e,s,a){s==="number"&&wl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function La(e,s,a,n){if(e=e.options,s){s={};for(var l=0;l<a.length;l++)s["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=s.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+_t(a),s=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}s!==null||e[l].disabled||(s=e[l])}s!==null&&(s.selected=!0)}}function So(e,s,a){if(s!=null&&(s=""+_t(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+_t(a):""}function ko(e,s,a,n){if(s==null){if(n!=null){if(a!=null)throw Error(o(92));if(V(n)){if(1<n.length)throw Error(o(93));n=n[0]}a=n}a==null&&(a=""),s=a}a=_t(s),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function Da(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var qm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Co(e,s,a){var n=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":n?e.setProperty(s,a):typeof a!="number"||a===0||qm.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Ao(e,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||s!=null&&s.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in s)n=s[l],s.hasOwnProperty(l)&&a[l]!==n&&Co(e,l,n)}else for(var i in s)s.hasOwnProperty(i)&&Co(e,i,s[i])}function Ki(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sl(e){return Hm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Xi=null;function Ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,$a=null;function To(e){var s=Ma(e);if(s&&(e=s.stateNode)){var a=e[ut]||null;e:switch(e=s.stateNode,s.type){case"input":if(Yi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var n=a[s];if(n!==e&&n.form===e.form){var l=n[ut]||null;if(!l)throw Error(o(90));Yi(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(s=0;s<a.length;s++)n=a[s],n.form===e.form&&No(n)}break e;case"textarea":So(e,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&La(e,!!a.multiple,s,!1)}}}var Wi=!1;function Mo(e,s,a){if(Wi)return e(s,a);Wi=!0;try{var n=e(s);return n}finally{if(Wi=!1,(Ba!==null||$a!==null)&&(oi(),Ba&&(s=Ba,e=$a,$a=Ba=null,To(s),e)))for(s=0;s<e.length;s++)To(e[s])}}function Sn(e,s){var a=e.stateNode;if(a===null)return null;var n=a[ut]||null;if(n===null)return null;a=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var gs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Fi=!1;if(gs)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch(e){Fi=!1}var Ls=null,Pi=null,kl=null;function Eo(){if(kl)return kl;var e,s=Pi,a=s.length,n,l="value"in Ls?Ls.value:Ls.textContent,i=l.length;for(e=0;e<a&&s[e]===l[e];e++);var u=a-e;for(n=1;n<=u&&s[a-n]===l[i-n];n++);return kl=l.slice(e,1<n?1-n:void 0)}function Cl(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Al(){return!0}function zo(){return!1}function Tt(e){function s(a,n,l,i,u){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=i,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(a=e[h],this[h]=a?a(i):i[h]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Al:zo,this.isPropagationStopped=zo,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),s}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=Tt(na),Cn=p({},na,{view:0,detail:0}),_m=Tt(Cn),er,tr,An,Ml=p({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==An&&(An&&e.type==="mousemove"?(er=e.screenX-An.screenX,tr=e.screenY-An.screenY):tr=er=0,An=e),er)},movementY:function(e){return"movementY"in e?e.movementY:tr}}),Oo=Tt(Ml),Qm=p({},Ml,{dataTransfer:0}),Gm=Tt(Qm),Vm=p({},Cn,{relatedTarget:0}),sr=Tt(Vm),Zm=p({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),Ym=Tt(Zm),Im=p({},na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Km=Tt(Im),Xm=p({},na,{data:0}),Lo=Tt(Xm),Jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Fm[e])?!!s[e]:!1}function ar(){return Pm}var ex=p({},Cn,{key:function(e){if(e.key){var s=Jm[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(e){return e.type==="keypress"?Cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tx=Tt(ex),sx=p({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=Tt(sx),ax=p({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),nx=Tt(ax),lx=p({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),ix=Tt(lx),rx=p({},Ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cx=Tt(rx),ox=p({},na,{newState:0,oldState:0}),dx=Tt(ox),ux=[9,13,27,32],nr=gs&&"CompositionEvent"in window,Tn=null;gs&&"documentMode"in document&&(Tn=document.documentMode);var mx=gs&&"TextEvent"in window&&!Tn,Bo=gs&&(!nr||Tn&&8<Tn&&11>=Tn),$o=" ",Ro=!1;function qo(e,s){switch(e){case"keyup":return ux.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function xx(e,s){switch(e){case"compositionend":return Uo(s);case"keypress":return s.which!==32?null:(Ro=!0,$o);case"textInput":return e=s.data,e===$o&&Ro?null:e;default:return null}}function hx(e,s){if(Ra)return e==="compositionend"||!nr&&qo(e,s)?(e=Eo(),kl=Pi=Ls=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bo&&s.locale!=="ko"?null:s.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ho(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!gx[e.type]:s==="textarea"}function _o(e,s,a,n){Ba?$a?$a.push(n):$a=[n]:Ba=n,s=gi(s,"onChange"),0<s.length&&(a=new Tl("onChange","change",null,a,n),e.push({event:a,listeners:s}))}var Mn=null,En=null;function fx(e){y0(e,0)}function El(e){var s=wn(e);if(No(s))return e}function Qo(e,s){if(e==="change")return s}var Go=!1;if(gs){var lr;if(gs){var ir="oninput"in document;if(!ir){var Vo=document.createElement("div");Vo.setAttribute("oninput","return;"),ir=typeof Vo.oninput=="function"}lr=ir}else lr=!1;Go=lr&&(!document.documentMode||9<document.documentMode)}function Zo(){Mn&&(Mn.detachEvent("onpropertychange",Yo),En=Mn=null)}function Yo(e){if(e.propertyName==="value"&&El(En)){var s=[];_o(s,En,e,Ji(e)),Mo(fx,s)}}function px(e,s,a){e==="focusin"?(Zo(),Mn=s,En=a,Mn.attachEvent("onpropertychange",Yo)):e==="focusout"&&Zo()}function bx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(En)}function vx(e,s){if(e==="click")return El(s)}function jx(e,s){if(e==="input"||e==="change")return El(s)}function yx(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Lt=typeof Object.is=="function"?Object.is:yx;function zn(e,s){if(Lt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!et.call(s,l)||!Lt(e[l],s[l]))return!1}return!0}function Io(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ko(e,s){var a=Io(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=s&&n>=s)return{node:a,offset:s-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Io(a)}}function Xo(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Xo(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Jo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=wl(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch(n){a=!1}if(a)e=s.contentWindow;else break;s=wl(e.document)}return s}function rr(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var Nx=gs&&"documentMode"in document&&11>=document.documentMode,qa=null,cr=null,On=null,or=!1;function Wo(e,s,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;or||qa==null||qa!==wl(n)||(n=qa,"selectionStart"in n&&rr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),On&&zn(On,n)||(On=n,n=gi(cr,"onSelect"),0<n.length&&(s=new Tl("onSelect","select",null,s,a),e.push({event:s,listeners:n}),s.target=qa)))}function la(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var Ua={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},dr={},Fo={};gs&&(Fo=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function ia(e){if(dr[e])return dr[e];if(!Ua[e])return e;var s=Ua[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in Fo)return dr[e]=s[a];return e}var Po=ia("animationend"),ed=ia("animationiteration"),td=ia("animationstart"),wx=ia("transitionrun"),Sx=ia("transitionstart"),kx=ia("transitioncancel"),sd=ia("transitionend"),ad=new Map,ur="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ur.push("scrollEnd");function Jt(e,s){ad.set(e,s),aa(s,[e])}var nd=new WeakMap;function Gt(e,s){if(typeof e=="object"&&e!==null){var a=nd.get(e);return a!==void 0?a:(s={value:e,source:s,stack:jo(s)},nd.set(e,s),s)}return{value:e,source:s,stack:jo(s)}}var Vt=[],Ha=0,mr=0;function zl(){for(var e=Ha,s=mr=Ha=0;s<e;){var a=Vt[s];Vt[s++]=null;var n=Vt[s];Vt[s++]=null;var l=Vt[s];Vt[s++]=null;var i=Vt[s];if(Vt[s++]=null,n!==null&&l!==null){var u=n.pending;u===null?l.next=l:(l.next=u.next,u.next=l),n.pending=l}i!==0&&ld(a,l,i)}}function Ol(e,s,a,n){Vt[Ha++]=e,Vt[Ha++]=s,Vt[Ha++]=a,Vt[Ha++]=n,mr|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function xr(e,s,a,n){return Ol(e,s,a,n),Ll(e)}function _a(e,s){return Ol(e,null,null,s),Ll(e)}function ld(e,s,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,i=e.return;i!==null;)i.childLanes|=a,n=i.alternate,n!==null&&(n.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(l=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,l&&s!==null&&(l=31-je(a),e=i.hiddenUpdates,n=e[l],n===null?e[l]=[s]:n.push(s),s.lane=a|536870912),i):null}function Ll(e){if(50<al)throw al=0,vc=null,Error(o(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Qa={};function Cx(e,s,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,s,a,n){return new Cx(e,s,a,n)}function hr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fs(e,s){var a=e.alternate;return a===null?(a=Dt(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function id(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Dl(e,s,a,n,l,i){var u=0;if(n=e,typeof e=="function")hr(e)&&(u=1);else if(typeof e=="string")u=Th(e,a,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=Dt(31,a,s,l),e.elementType=te,e.lanes=i,e;case w:return ra(a.children,l,i,s);case E:u=8,l|=24;break;case A:return e=Dt(12,a,s,l|2),e.elementType=A,e.lanes=i,e;case fe:return e=Dt(13,a,s,l),e.elementType=fe,e.lanes=i,e;case P:return e=Dt(19,a,s,l),e.elementType=P,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:case F:u=10;break e;case oe:u=9;break e;case J:u=11;break e;case z:u=14;break e;case _:u=16,n=null;break e}u=29,a=Error(o(130,e===null?"null":typeof e,"")),n=null}return s=Dt(u,a,s,l),s.elementType=e,s.type=n,s.lanes=i,s}function ra(e,s,a,n){return e=Dt(7,e,n,s),e.lanes=a,e}function gr(e,s,a){return e=Dt(6,e,null,s),e.lanes=a,e}function fr(e,s,a){return s=Dt(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Ga=[],Va=0,Bl=null,$l=0,Zt=[],Yt=0,ca=null,ps=1,bs="";function oa(e,s){Ga[Va++]=$l,Ga[Va++]=Bl,Bl=e,$l=s}function rd(e,s,a){Zt[Yt++]=ps,Zt[Yt++]=bs,Zt[Yt++]=ca,ca=e;var n=ps;e=bs;var l=32-je(n)-1;n&=~(1<<l),a+=1;var i=32-je(s)+l;if(30<i){var u=l-l%5;i=(n&(1<<u)-1).toString(32),n>>=u,l-=u,ps=1<<32-je(s)+l|a<<l|n,bs=i+e}else ps=1<<i|a<<l|n,bs=e}function pr(e){e.return!==null&&(oa(e,1),rd(e,1,0))}function br(e){for(;e===Bl;)Bl=Ga[--Va],Ga[Va]=null,$l=Ga[--Va],Ga[Va]=null;for(;e===ca;)ca=Zt[--Yt],Zt[Yt]=null,bs=Zt[--Yt],Zt[Yt]=null,ps=Zt[--Yt],Zt[Yt]=null}var At=null,nt=null,Qe=!1,da=null,as=!1,vr=Error(o(519));function ua(e){var s=Error(o(418,""));throw Bn(Gt(s,e)),vr}function cd(e){var s=e.stateNode,a=e.type,n=e.memoizedProps;switch(s[_e]=e,s[ut]=n,a){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(a=0;a<ll.length;a++)Be(ll[a],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),wo(s,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Nl(s);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),ko(s,n.value,n.defaultValue,n.children),Nl(s)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||n.suppressHydrationWarning===!0||k0(s.textContent,a)?(n.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),n.onScroll!=null&&Be("scroll",s),n.onScrollEnd!=null&&Be("scrollend",s),n.onClick!=null&&(s.onclick=fi),s=!0):s=!1,s||ua(e)}function od(e){for(At=e.return;At;)switch(At.tag){case 5:case 13:as=!1;return;case 27:case 3:as=!0;return;default:At=At.return}}function Ln(e){if(e!==At)return!1;if(!Qe)return od(e),Qe=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&nt&&ua(e),od(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){nt=Ft(e.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}nt=null}}else s===27?(s=nt,Xs(e.type)?(e=Uc,Uc=null,nt=e):nt=s):nt=At?Ft(e.stateNode.nextSibling):null;return!0}function Dn(){nt=At=null,Qe=!1}function dd(){var e=da;return e!==null&&(zt===null?zt=e:zt.push.apply(zt,e),da=null),e}function Bn(e){da===null?da=[e]:da.push(e)}var jr=G(null),ma=null,vs=null;function Ds(e,s,a){ge(jr,s._currentValue),s._currentValue=a}function js(e){e._currentValue=jr.current,W(jr)}function yr(e,s,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===a)break;e=e.return}}function Nr(e,s,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var i=l.dependencies;if(i!==null){var u=l.child;i=i.firstContext;e:for(;i!==null;){var h=i;i=l;for(var y=0;y<s.length;y++)if(h.context===s[y]){i.lanes|=a,h=i.alternate,h!==null&&(h.lanes|=a),yr(i.return,a,e),n||(u=null);break e}i=h.next}}else if(l.tag===18){if(u=l.return,u===null)throw Error(o(341));u.lanes|=a,i=u.alternate,i!==null&&(i.lanes|=a),yr(u,a,e),u=null}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===e){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}}function $n(e,s,a,n){e=null;for(var l=s,i=!1;l!==null;){if(!i){if((l.flags&524288)!==0)i=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var u=l.alternate;if(u===null)throw Error(o(387));if(u=u.memoizedProps,u!==null){var h=l.type;Lt(l.pendingProps.value,u.value)||(e!==null?e.push(h):e=[h])}}else if(l===de.current){if(u=l.alternate,u===null)throw Error(o(387));u.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}l=l.return}e!==null&&Nr(s,e,a,n),s.flags|=262144}function Rl(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xa(e){ma=e,vs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return ud(ma,e)}function ql(e,s){return ma===null&&xa(e),ud(e,s)}function ud(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},vs===null){if(e===null)throw Error(o(308));vs=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else vs=vs.next=s;return a}var Ax=typeof AbortController!="undefined"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},Tx=r.unstable_scheduleCallback,Mx=r.unstable_NormalPriority,mt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wr(){return{controller:new Ax,data:new Map,refCount:0}}function Rn(e){e.refCount--,e.refCount===0&&Tx(Mx,function(){e.controller.abort()})}var qn=null,Sr=0,Za=0,Ya=null;function Ex(e,s){if(qn===null){var a=qn=[];Sr=0,Za=Cc(),Ya={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Sr++,s.then(md,md),s}function md(){if(--Sr===0&&qn!==null){Ya!==null&&(Ya.status="fulfilled");var e=qn;qn=null,Za=0,Ya=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function zx(e,s){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=s;for(var l=0;l<a.length;l++)(0,a[l])(s)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var xd=N.S;N.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Ex(e,s),xd!==null&&xd(e,s)};var ha=G(null);function kr(){var e=ha.current;return e!==null?e:Pe.pooledCache}function Ul(e,s){s===null?ge(ha,ha.current):ge(ha,s.pool)}function hd(){var e=kr();return e===null?null:{parent:mt._currentValue,pool:e}}var Un=Error(o(460)),gd=Error(o(474)),Hl=Error(o(542)),Cr={then:function(){}};function fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _l(){}function pd(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(_l,_l),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,vd(e),e;default:if(typeof s.status=="string")s.then(_l,_l);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=s,e.status="pending",e.then(function(n){if(s.status==="pending"){var l=s;l.status="fulfilled",l.value=n}},function(n){if(s.status==="pending"){var l=s;l.status="rejected",l.reason=n}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,vd(e),e}throw Hn=s,Un}}var Hn=null;function bd(){if(Hn===null)throw Error(o(459));var e=Hn;return Hn=null,e}function vd(e){if(e===Un||e===Hl)throw Error(o(483))}var Bs=!1;function Ar(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tr(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rs(e,s,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ze&2)!==0){var l=n.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s,s=Ll(e),ld(e,null,a),s}return Ol(e,n,s,a),Ll(e)}function _n(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var n=s.lanes;n&=e.pendingLanes,a|=n,s.lanes=a,he(e,a)}}function Mr(e,s){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var u={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?l=i=u:i=i.next=u,a=a.next}while(a!==null);i===null?l=i=s:i=i.next=s}else l=i=s;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var Er=!1;function Qn(){if(Er){var e=Ya;if(e!==null)throw e}}function Gn(e,s,a,n){Er=!1;var l=e.updateQueue;Bs=!1;var i=l.firstBaseUpdate,u=l.lastBaseUpdate,h=l.shared.pending;if(h!==null){l.shared.pending=null;var y=h,$=y.next;y.next=null,u===null?i=$:u.next=$,u=y;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,h=Q.lastBaseUpdate,h!==u&&(h===null?Q.firstBaseUpdate=$:h.next=$,Q.lastBaseUpdate=y))}if(i!==null){var I=l.baseState;u=0,Q=$=y=null,h=i;do{var R=h.lane&-536870913,q=R!==h.lane;if(q?(Re&R)===R:(n&R)===R){R!==0&&R===Za&&(Er=!0),Q!==null&&(Q=Q.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var Ce=e,we=h;R=s;var Je=a;switch(we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){I=Ce.call(Je,I,R);break e}I=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,R=typeof Ce=="function"?Ce.call(Je,I,R):Ce,R==null)break e;I=p({},I,R);break e;case 2:Bs=!0}}R=h.callback,R!==null&&(e.flags|=64,q&&(e.flags|=8192),q=l.callbacks,q===null?l.callbacks=[R]:q.push(R))}else q={lane:R,tag:h.tag,payload:h.payload,callback:h.callback,next:null},Q===null?($=Q=q,y=I):Q=Q.next=q,u|=R;if(h=h.next,h===null){if(h=l.shared.pending,h===null)break;q=h,h=q.next,q.next=null,l.lastBaseUpdate=q,l.shared.pending=null}}while(!0);Q===null&&(y=I),l.baseState=y,l.firstBaseUpdate=$,l.lastBaseUpdate=Q,i===null&&(l.shared.lanes=0),Zs|=u,e.lanes=u,e.memoizedState=I}}function jd(e,s){if(typeof e!="function")throw Error(o(191,e));e.call(s)}function yd(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)jd(a[e],s)}var Ia=G(null),Ql=G(0);function Nd(e,s){e=As,ge(Ql,e),ge(Ia,s),As=e|s.baseLanes}function zr(){ge(Ql,As),ge(Ia,Ia.current)}function Or(){As=Ql.current,W(Ia),W(Ql)}var qs=0,Oe=null,Ke=null,ot=null,Gl=!1,Ka=!1,ga=!1,Vl=0,Vn=0,Xa=null,Ox=0;function rt(){throw Error(o(321))}function Lr(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Lt(e[a],s[a]))return!1;return!0}function Dr(e,s,a,n,l,i){return qs=i,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=e===null||e.memoizedState===null?lu:iu,ga=!1,i=a(n,l),ga=!1,Ka&&(i=Sd(s,a,n,l)),wd(e),i}function wd(e){N.H=Jl;var s=Ke!==null&&Ke.next!==null;if(qs=0,ot=Ke=Oe=null,Gl=!1,Vn=0,Xa=null,s)throw Error(o(300));e===null||pt||(e=e.dependencies,e!==null&&Rl(e)&&(pt=!0))}function Sd(e,s,a,n){Oe=e;var l=0;do{if(Ka&&(Xa=null),Vn=0,Ka=!1,25<=l)throw Error(o(301));if(l+=1,ot=Ke=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}N.H=Ux,i=s(a,n)}while(Ka);return i}function Lx(){var e=N.H,s=e.useState()[0];return s=typeof s.then=="function"?Zn(s):s,e=e.useState()[0],(Ke!==null?Ke.memoizedState:null)!==e&&(Oe.flags|=1024),s}function Br(){var e=Vl!==0;return Vl=0,e}function $r(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function Rr(e){if(Gl){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Gl=!1}qs=0,ot=Ke=Oe=null,Ka=!1,Vn=Vl=0,Xa=null}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Oe.memoizedState=ot=e:ot=ot.next=e,ot}function dt(){if(Ke===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var s=ot===null?Oe.memoizedState:ot.next;if(s!==null)ot=s,Ke=e;else{if(e===null)throw Oe.alternate===null?Error(o(467)):Error(o(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},ot===null?Oe.memoizedState=ot=e:ot=ot.next=e}return ot}function qr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zn(e){var s=Vn;return Vn+=1,Xa===null&&(Xa=[]),e=pd(Xa,e,s),s=Oe,(ot===null?s.memoizedState:ot.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?lu:iu),e}function Zl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zn(e);if(e.$$typeof===F)return kt(e)}throw Error(o(438,String(e)))}function Ur(e){var s=null,a=Oe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var n=Oe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(s={data:n.data.map(function(l){return l.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=qr(),Oe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),n=0;n<e;n++)a[n]=Ne;return s.index++,a}function ys(e,s){return typeof s=="function"?s(e):s}function Yl(e){var s=dt();return Hr(s,Ke,e)}function Hr(e,s,a){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=a;var l=e.baseQueue,i=n.pending;if(i!==null){if(l!==null){var u=l.next;l.next=i.next,i.next=u}s.baseQueue=l=i,n.pending=null}if(i=e.baseState,l===null)e.memoizedState=i;else{s=l.next;var h=u=null,y=null,$=s,Q=!1;do{var I=$.lane&-536870913;if(I!==$.lane?(Re&I)===I:(qs&I)===I){var R=$.revertLane;if(R===0)y!==null&&(y=y.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),I===Za&&(Q=!0);else if((qs&R)===R){$=$.next,R===Za&&(Q=!0);continue}else I={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},y===null?(h=y=I,u=i):y=y.next=I,Oe.lanes|=R,Zs|=R;I=$.action,ga&&a(i,I),i=$.hasEagerState?$.eagerState:a(i,I)}else R={lane:I,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},y===null?(h=y=R,u=i):y=y.next=R,Oe.lanes|=I,Zs|=I;$=$.next}while($!==null&&$!==s);if(y===null?u=i:y.next=h,!Lt(i,e.memoizedState)&&(pt=!0,Q&&(a=Ya,a!==null)))throw a;e.memoizedState=i,e.baseState=u,e.baseQueue=y,n.lastRenderedState=i}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function _r(e){var s=dt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,i=s.memoizedState;if(l!==null){a.pending=null;var u=l=l.next;do i=e(i,u.action),u=u.next;while(u!==l);Lt(i,s.memoizedState)||(pt=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),a.lastRenderedState=i}return[i,n]}function kd(e,s,a){var n=Oe,l=dt(),i=Qe;if(i){if(a===void 0)throw Error(o(407));a=a()}else a=s();var u=!Lt((Ke||l).memoizedState,a);u&&(l.memoizedState=a,pt=!0),l=l.queue;var h=Td.bind(null,n,l,e);if(Yn(2048,8,h,[e]),l.getSnapshot!==s||u||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Ja(9,Il(),Ad.bind(null,n,l,a,s),null),Pe===null)throw Error(o(349));i||(qs&124)!==0||Cd(n,s,a)}return a}function Cd(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Oe.updateQueue,s===null?(s=qr(),Oe.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function Ad(e,s,a,n){s.value=a,s.getSnapshot=n,Md(s)&&Ed(e)}function Td(e,s,a){return a(function(){Md(s)&&Ed(e)})}function Md(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Lt(e,a)}catch(n){return!0}}function Ed(e){var s=_a(e,2);s!==null&&Ut(s,e,2)}function Qr(e){var s=Mt();if(typeof e=="function"){var a=e;if(e=a(),ga){se(!0);try{a()}finally{se(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},s}function zd(e,s,a,n){return e.baseState=a,Hr(e,Ke,typeof n=="function"?n:ys)}function Dx(e,s,a,n,l){if(Xl(e))throw Error(o(485));if(e=s.action,e!==null){var i={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){i.listeners.push(u)}};N.T!==null?a(!0):i.isTransition=!1,n(i),a=s.pending,a===null?(i.next=s.pending=i,Od(s,i)):(i.next=a.next,s.pending=a.next=i)}}function Od(e,s){var a=s.action,n=s.payload,l=e.state;if(s.isTransition){var i=N.T,u={};N.T=u;try{var h=a(l,n),y=N.S;y!==null&&y(u,h),Ld(e,s,h)}catch($){Gr(e,s,$)}finally{N.T=i}}else try{i=a(l,n),Ld(e,s,i)}catch($){Gr(e,s,$)}}function Ld(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Dd(e,s,n)},function(n){return Gr(e,s,n)}):Dd(e,s,a)}function Dd(e,s,a){s.status="fulfilled",s.value=a,Bd(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,Od(e,a)))}function Gr(e,s,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do s.status="rejected",s.reason=a,Bd(s),s=s.next;while(s!==n)}e.action=null}function Bd(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function $d(e,s){return s}function Rd(e,s){if(Qe){var a=Pe.formState;if(a!==null){e:{var n=Oe;if(Qe){if(nt){t:{for(var l=nt,i=as;l.nodeType!==8;){if(!i){l=null;break t}if(l=Ft(l.nextSibling),l===null){l=null;break t}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){nt=Ft(l.nextSibling),n=l.data==="F!";break e}}ua(n)}n=!1}n&&(s=a[0])}}return a=Mt(),a.memoizedState=a.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:s},a.queue=n,a=su.bind(null,Oe,n),n.dispatch=a,n=Qr(!1),i=Kr.bind(null,Oe,!1,n.queue),n=Mt(),l={state:s,dispatch:null,action:e,pending:null},n.queue=l,a=Dx.bind(null,Oe,l,i,a),l.dispatch=a,n.memoizedState=e,[s,a,!1]}function qd(e){var s=dt();return Ud(s,Ke,e)}function Ud(e,s,a){if(s=Hr(e,s,$d)[0],e=Yl(ys)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var n=Zn(s)}catch(u){throw u===Un?Hl:u}else n=s;s=dt();var l=s.queue,i=l.dispatch;return a!==s.memoizedState&&(Oe.flags|=2048,Ja(9,Il(),Bx.bind(null,l,a),null)),[n,i,e]}function Bx(e,s){e.action=s}function Hd(e){var s=dt(),a=Ke;if(a!==null)return Ud(s,a,e);dt(),s=s.memoizedState,a=dt();var n=a.queue.dispatch;return a.memoizedState=e,[s,n,!1]}function Ja(e,s,a,n){return e={tag:e,create:a,deps:n,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=qr(),Oe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,s.lastEffect=e),e}function Il(){return{destroy:void 0,resource:void 0}}function _d(){return dt().memoizedState}function Kl(e,s,a,n){var l=Mt();n=n===void 0?null:n,Oe.flags|=e,l.memoizedState=Ja(1|s,Il(),a,n)}function Yn(e,s,a,n){var l=dt();n=n===void 0?null:n;var i=l.memoizedState.inst;Ke!==null&&n!==null&&Lr(n,Ke.memoizedState.deps)?l.memoizedState=Ja(s,i,a,n):(Oe.flags|=e,l.memoizedState=Ja(1|s,i,a,n))}function Qd(e,s){Kl(8390656,8,e,s)}function Gd(e,s){Yn(2048,8,e,s)}function Vd(e,s){return Yn(4,2,e,s)}function Zd(e,s){return Yn(4,4,e,s)}function Yd(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Id(e,s,a){a=a!=null?a.concat([e]):null,Yn(4,4,Yd.bind(null,s,e),a)}function Vr(){}function Kd(e,s){var a=dt();s=s===void 0?null:s;var n=a.memoizedState;return s!==null&&Lr(s,n[1])?n[0]:(a.memoizedState=[e,s],e)}function Xd(e,s){var a=dt();s=s===void 0?null:s;var n=a.memoizedState;if(s!==null&&Lr(s,n[1]))return n[0];if(n=e(),ga){se(!0);try{e()}finally{se(!1)}}return a.memoizedState=[n,s],n}function Zr(e,s,a){return a===void 0||(qs&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=Fu(),Oe.lanes|=e,Zs|=e,a)}function Jd(e,s,a,n){return Lt(a,s)?a:Ia.current!==null?(e=Zr(e,a,n),Lt(e,s)||(pt=!0),e):(qs&42)===0?(pt=!0,e.memoizedState=a):(e=Fu(),Oe.lanes|=e,Zs|=e,s)}function Wd(e,s,a,n,l){var i=B.p;B.p=i!==0&&8>i?i:8;var u=N.T,h={};N.T=h,Kr(e,!1,s,a);try{var y=l(),$=N.S;if($!==null&&$(h,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var Q=zx(y,n);In(e,s,Q,qt(e))}else In(e,s,n,qt(e))}catch(I){In(e,s,{then:function(){},status:"rejected",reason:I},qt())}finally{B.p=i,N.T=u}}function $x(){}function Yr(e,s,a,n){if(e.tag!==5)throw Error(o(476));var l=Fd(e).queue;Wd(e,l,s,ne,a===null?$x:function(){return Pd(e),a(n)})}function Fd(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:ne},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Pd(e){var s=Fd(e).next.queue;In(e,s,{},qt())}function Ir(){return kt(ul)}function eu(){return dt().memoizedState}function tu(){return dt().memoizedState}function Rx(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=qt();e=$s(a);var n=Rs(s,e,a);n!==null&&(Ut(n,s,a),_n(n,s,a)),s={cache:wr()},e.payload=s;return}s=s.return}}function qx(e,s,a){var n=qt();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xl(e)?au(s,a):(a=xr(e,s,a,n),a!==null&&(Ut(a,e,n),nu(a,s,n)))}function su(e,s,a){var n=qt();In(e,s,a,n)}function In(e,s,a,n){var l={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xl(e))au(s,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var u=s.lastRenderedState,h=i(u,a);if(l.hasEagerState=!0,l.eagerState=h,Lt(h,u))return Ol(e,s,l,0),Pe===null&&zl(),!1}catch(y){}finally{}if(a=xr(e,s,l,n),a!==null)return Ut(a,e,n),nu(a,s,n),!0}return!1}function Kr(e,s,a,n){if(n={lane:2,revertLane:Cc(),action:n,hasEagerState:!1,eagerState:null,next:null},Xl(e)){if(s)throw Error(o(479))}else s=xr(e,a,n,2),s!==null&&Ut(s,e,2)}function Xl(e){var s=e.alternate;return e===Oe||s!==null&&s===Oe}function au(e,s){Ka=Gl=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function nu(e,s,a){if((a&4194048)!==0){var n=s.lanes;n&=e.pendingLanes,a|=n,s.lanes=a,he(e,a)}}var Jl={readContext:kt,use:Zl,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt},lu={readContext:kt,use:Zl,useCallback:function(e,s){return Mt().memoizedState=[e,s===void 0?null:s],e},useContext:kt,useEffect:Qd,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,Kl(4194308,4,Yd.bind(null,s,e),a)},useLayoutEffect:function(e,s){return Kl(4194308,4,e,s)},useInsertionEffect:function(e,s){Kl(4,2,e,s)},useMemo:function(e,s){var a=Mt();s=s===void 0?null:s;var n=e();if(ga){se(!0);try{e()}finally{se(!1)}}return a.memoizedState=[n,s],n},useReducer:function(e,s,a){var n=Mt();if(a!==void 0){var l=a(s);if(ga){se(!0);try{a(s)}finally{se(!1)}}}else l=s;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=qx.bind(null,Oe,e),[n.memoizedState,e]},useRef:function(e){var s=Mt();return e={current:e},s.memoizedState=e},useState:function(e){e=Qr(e);var s=e.queue,a=su.bind(null,Oe,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:Vr,useDeferredValue:function(e,s){var a=Mt();return Zr(a,e,s)},useTransition:function(){var e=Qr(!1);return e=Wd.bind(null,Oe,e.queue,!0,!1),Mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var n=Oe,l=Mt();if(Qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Pe===null)throw Error(o(349));(Re&124)!==0||Cd(n,s,a)}l.memoizedState=a;var i={value:a,getSnapshot:s};return l.queue=i,Qd(Td.bind(null,n,i,e),[e]),n.flags|=2048,Ja(9,Il(),Ad.bind(null,n,i,a,s),null),a},useId:function(){var e=Mt(),s=Pe.identifierPrefix;if(Qe){var a=bs,n=ps;a=(n&~(1<<32-je(n)-1)).toString(32)+a,s=""+s+"R"+a,a=Vl++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=Ox++,s=""+s+"r"+a.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:Ir,useFormState:Rd,useActionState:Rd,useOptimistic:function(e){var s=Mt();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Kr.bind(null,Oe,!0,a),a.dispatch=s,[e,s]},useMemoCache:Ur,useCacheRefresh:function(){return Mt().memoizedState=Rx.bind(null,Oe)}},iu={readContext:kt,use:Zl,useCallback:Kd,useContext:kt,useEffect:Gd,useImperativeHandle:Id,useInsertionEffect:Vd,useLayoutEffect:Zd,useMemo:Xd,useReducer:Yl,useRef:_d,useState:function(){return Yl(ys)},useDebugValue:Vr,useDeferredValue:function(e,s){var a=dt();return Jd(a,Ke.memoizedState,e,s)},useTransition:function(){var e=Yl(ys)[0],s=dt().memoizedState;return[typeof e=="boolean"?e:Zn(e),s]},useSyncExternalStore:kd,useId:eu,useHostTransitionStatus:Ir,useFormState:qd,useActionState:qd,useOptimistic:function(e,s){var a=dt();return zd(a,Ke,e,s)},useMemoCache:Ur,useCacheRefresh:tu},Ux={readContext:kt,use:Zl,useCallback:Kd,useContext:kt,useEffect:Gd,useImperativeHandle:Id,useInsertionEffect:Vd,useLayoutEffect:Zd,useMemo:Xd,useReducer:_r,useRef:_d,useState:function(){return _r(ys)},useDebugValue:Vr,useDeferredValue:function(e,s){var a=dt();return Ke===null?Zr(a,e,s):Jd(a,Ke.memoizedState,e,s)},useTransition:function(){var e=_r(ys)[0],s=dt().memoizedState;return[typeof e=="boolean"?e:Zn(e),s]},useSyncExternalStore:kd,useId:eu,useHostTransitionStatus:Ir,useFormState:Hd,useActionState:Hd,useOptimistic:function(e,s){var a=dt();return Ke!==null?zd(a,Ke,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ur,useCacheRefresh:tu},Wa=null,Kn=0;function Wl(e){var s=Kn;return Kn+=1,Wa===null&&(Wa=[]),pd(Wa,e,s)}function Xn(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Fl(e,s){throw s.$$typeof===k?Error(o(525)):(e=Object.prototype.toString.call(s),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function ru(e){var s=e._init;return s(e._payload)}function cu(e){function s(M,C){if(e){var D=M.deletions;D===null?(M.deletions=[C],M.flags|=16):D.push(C)}}function a(M,C){if(!e)return null;for(;C!==null;)s(M,C),C=C.sibling;return null}function n(M){for(var C=new Map;M!==null;)M.key!==null?C.set(M.key,M):C.set(M.index,M),M=M.sibling;return C}function l(M,C){return M=fs(M,C),M.index=0,M.sibling=null,M}function i(M,C,D){return M.index=D,e?(D=M.alternate,D!==null?(D=D.index,D<C?(M.flags|=67108866,C):D):(M.flags|=67108866,C)):(M.flags|=1048576,C)}function u(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function h(M,C,D,Z){return C===null||C.tag!==6?(C=gr(D,M.mode,Z),C.return=M,C):(C=l(C,D),C.return=M,C)}function y(M,C,D,Z){var be=D.type;return be===w?Q(M,C,D.props.children,Z,D.key):C!==null&&(C.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===_&&ru(be)===C.type)?(C=l(C,D.props),Xn(C,D),C.return=M,C):(C=Dl(D.type,D.key,D.props,null,M.mode,Z),Xn(C,D),C.return=M,C)}function $(M,C,D,Z){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=fr(D,M.mode,Z),C.return=M,C):(C=l(C,D.children||[]),C.return=M,C)}function Q(M,C,D,Z,be){return C===null||C.tag!==7?(C=ra(D,M.mode,Z,be),C.return=M,C):(C=l(C,D),C.return=M,C)}function I(M,C,D){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=gr(""+C,M.mode,D),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case T:return D=Dl(C.type,C.key,C.props,null,M.mode,D),Xn(D,C),D.return=M,D;case v:return C=fr(C,M.mode,D),C.return=M,C;case _:var Z=C._init;return C=Z(C._payload),I(M,C,D)}if(V(C)||ce(C))return C=ra(C,M.mode,D,null),C.return=M,C;if(typeof C.then=="function")return I(M,Wl(C),D);if(C.$$typeof===F)return I(M,ql(M,C),D);Fl(M,C)}return null}function R(M,C,D,Z){var be=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return be!==null?null:h(M,C,""+D,Z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case T:return D.key===be?y(M,C,D,Z):null;case v:return D.key===be?$(M,C,D,Z):null;case _:return be=D._init,D=be(D._payload),R(M,C,D,Z)}if(V(D)||ce(D))return be!==null?null:Q(M,C,D,Z,null);if(typeof D.then=="function")return R(M,C,Wl(D),Z);if(D.$$typeof===F)return R(M,C,ql(M,D),Z);Fl(M,D)}return null}function q(M,C,D,Z,be){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return M=M.get(D)||null,h(C,M,""+Z,be);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return M=M.get(Z.key===null?D:Z.key)||null,y(C,M,Z,be);case v:return M=M.get(Z.key===null?D:Z.key)||null,$(C,M,Z,be);case _:var Le=Z._init;return Z=Le(Z._payload),q(M,C,D,Z,be)}if(V(Z)||ce(Z))return M=M.get(D)||null,Q(C,M,Z,be,null);if(typeof Z.then=="function")return q(M,C,D,Wl(Z),be);if(Z.$$typeof===F)return q(M,C,D,ql(C,Z),be);Fl(C,Z)}return null}function Ce(M,C,D,Z){for(var be=null,Le=null,ye=C,Se=C=0,vt=null;ye!==null&&Se<D.length;Se++){ye.index>Se?(vt=ye,ye=null):vt=ye.sibling;var He=R(M,ye,D[Se],Z);if(He===null){ye===null&&(ye=vt);break}e&&ye&&He.alternate===null&&s(M,ye),C=i(He,C,Se),Le===null?be=He:Le.sibling=He,Le=He,ye=vt}if(Se===D.length)return a(M,ye),Qe&&oa(M,Se),be;if(ye===null){for(;Se<D.length;Se++)ye=I(M,D[Se],Z),ye!==null&&(C=i(ye,C,Se),Le===null?be=ye:Le.sibling=ye,Le=ye);return Qe&&oa(M,Se),be}for(ye=n(ye);Se<D.length;Se++)vt=q(ye,M,Se,D[Se],Z),vt!==null&&(e&&vt.alternate!==null&&ye.delete(vt.key===null?Se:vt.key),C=i(vt,C,Se),Le===null?be=vt:Le.sibling=vt,Le=vt);return e&&ye.forEach(function(ea){return s(M,ea)}),Qe&&oa(M,Se),be}function we(M,C,D,Z){if(D==null)throw Error(o(151));for(var be=null,Le=null,ye=C,Se=C=0,vt=null,He=D.next();ye!==null&&!He.done;Se++,He=D.next()){ye.index>Se?(vt=ye,ye=null):vt=ye.sibling;var ea=R(M,ye,He.value,Z);if(ea===null){ye===null&&(ye=vt);break}e&&ye&&ea.alternate===null&&s(M,ye),C=i(ea,C,Se),Le===null?be=ea:Le.sibling=ea,Le=ea,ye=vt}if(He.done)return a(M,ye),Qe&&oa(M,Se),be;if(ye===null){for(;!He.done;Se++,He=D.next())He=I(M,He.value,Z),He!==null&&(C=i(He,C,Se),Le===null?be=He:Le.sibling=He,Le=He);return Qe&&oa(M,Se),be}for(ye=n(ye);!He.done;Se++,He=D.next())He=q(ye,M,Se,He.value,Z),He!==null&&(e&&He.alternate!==null&&ye.delete(He.key===null?Se:He.key),C=i(He,C,Se),Le===null?be=He:Le.sibling=He,Le=He);return e&&ye.forEach(function(Hh){return s(M,Hh)}),Qe&&oa(M,Se),be}function Je(M,C,D,Z){if(typeof D=="object"&&D!==null&&D.type===w&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case T:e:{for(var be=D.key;C!==null;){if(C.key===be){if(be=D.type,be===w){if(C.tag===7){a(M,C.sibling),Z=l(C,D.props.children),Z.return=M,M=Z;break e}}else if(C.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===_&&ru(be)===C.type){a(M,C.sibling),Z=l(C,D.props),Xn(Z,D),Z.return=M,M=Z;break e}a(M,C);break}else s(M,C);C=C.sibling}D.type===w?(Z=ra(D.props.children,M.mode,Z,D.key),Z.return=M,M=Z):(Z=Dl(D.type,D.key,D.props,null,M.mode,Z),Xn(Z,D),Z.return=M,M=Z)}return u(M);case v:e:{for(be=D.key;C!==null;){if(C.key===be)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){a(M,C.sibling),Z=l(C,D.children||[]),Z.return=M,M=Z;break e}else{a(M,C);break}else s(M,C);C=C.sibling}Z=fr(D,M.mode,Z),Z.return=M,M=Z}return u(M);case _:return be=D._init,D=be(D._payload),Je(M,C,D,Z)}if(V(D))return Ce(M,C,D,Z);if(ce(D)){if(be=ce(D),typeof be!="function")throw Error(o(150));return D=be.call(D),we(M,C,D,Z)}if(typeof D.then=="function")return Je(M,C,Wl(D),Z);if(D.$$typeof===F)return Je(M,C,ql(M,D),Z);Fl(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,C!==null&&C.tag===6?(a(M,C.sibling),Z=l(C,D),Z.return=M,M=Z):(a(M,C),Z=gr(D,M.mode,Z),Z.return=M,M=Z),u(M)):a(M,C)}return function(M,C,D,Z){try{Kn=0;var be=Je(M,C,D,Z);return Wa=null,be}catch(ye){if(ye===Un||ye===Hl)throw ye;var Le=Dt(29,ye,null,M.mode);return Le.lanes=Z,Le.return=M,Le}finally{}}}var Fa=cu(!0),ou=cu(!1),It=G(null),ns=null;function Us(e){var s=e.alternate;ge(xt,xt.current&1),ge(It,e),ns===null&&(s===null||Ia.current!==null||s.memoizedState!==null)&&(ns=e)}function du(e){if(e.tag===22){if(ge(xt,xt.current),ge(It,e),ns===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(ns=e)}}else Hs()}function Hs(){ge(xt,xt.current),ge(It,It.current)}function Ns(e){W(It),ns===e&&(ns=null),W(xt)}var xt=G(0);function Pl(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||qc(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Xr(e,s,a,n){s=e.memoizedState,a=a(n,s),a=a==null?s:p({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Jr={enqueueSetState:function(e,s,a){e=e._reactInternals;var n=qt(),l=$s(n);l.payload=s,a!=null&&(l.callback=a),s=Rs(e,l,n),s!==null&&(Ut(s,e,n),_n(s,e,n))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var n=qt(),l=$s(n);l.tag=1,l.payload=s,a!=null&&(l.callback=a),s=Rs(e,l,n),s!==null&&(Ut(s,e,n),_n(s,e,n))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=qt(),n=$s(a);n.tag=2,s!=null&&(n.callback=s),s=Rs(e,n,a),s!==null&&(Ut(s,e,a),_n(s,e,a))}};function uu(e,s,a,n,l,i,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,u):s.prototype&&s.prototype.isPureReactComponent?!zn(a,n)||!zn(l,i):!0}function mu(e,s,a,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,n),s.state!==e&&Jr.enqueueReplaceState(s,s.state,null)}function fa(e,s){var a=s;if("ref"in s){a={};for(var n in s)n!=="ref"&&(a[n]=s[n])}if(e=e.defaultProps){a===s&&(a=p({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}var ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function xu(e){ei(e)}function hu(e){console.error(e)}function gu(e){ei(e)}function ti(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(n){setTimeout(function(){throw n})}}function fu(e,s,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Wr(e,s,a){return a=$s(a),a.tag=3,a.payload={element:null},a.callback=function(){ti(e,s)},a}function pu(e){return e=$s(e),e.tag=3,e}function bu(e,s,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var i=n.value;e.payload=function(){return l(i)},e.callback=function(){fu(s,a,n)}}var u=a.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){fu(s,a,n),typeof l!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var h=n.stack;this.componentDidCatch(n.value,{componentStack:h!==null?h:""})})}function Hx(e,s,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(s=a.alternate,s!==null&&$n(s,a,l,!0),a=It.current,a!==null){switch(a.tag){case 13:return ns===null?yc():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===Cr?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([n]):s.add(n),wc(e,n,l)),!1;case 22:return a.flags|=65536,n===Cr?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([n]):a.add(n)),wc(e,n,l)),!1}throw Error(o(435,a.tag))}return wc(e,n,l),yc(),!1}if(Qe)return s=It.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=l,n!==vr&&(e=Error(o(422),{cause:n}),Bn(Gt(e,a)))):(n!==vr&&(s=Error(o(423),{cause:n}),Bn(Gt(s,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Gt(n,a),l=Wr(e.stateNode,n,l),Mr(e,l),lt!==4&&(lt=2)),!1;var i=Error(o(520),{cause:n});if(i=Gt(i,a),sl===null?sl=[i]:sl.push(i),lt!==4&&(lt=2),s===null)return!0;n=Gt(n,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Wr(a.stateNode,n,e),Mr(a,e),!1;case 1:if(s=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Ys===null||!Ys.has(i))))return a.flags|=65536,l&=-l,a.lanes|=l,l=pu(l),bu(l,e,a,n),Mr(a,l),!1}a=a.return}while(a!==null);return!1}var vu=Error(o(461)),pt=!1;function jt(e,s,a,n){s.child=e===null?ou(s,null,a,n):Fa(s,e.child,a,n)}function ju(e,s,a,n,l){a=a.render;var i=s.ref;if("ref"in n){var u={};for(var h in n)h!=="ref"&&(u[h]=n[h])}else u=n;return xa(s),n=Dr(e,s,a,u,i,l),h=Br(),e!==null&&!pt?($r(e,s,l),ws(e,s,l)):(Qe&&h&&pr(s),s.flags|=1,jt(e,s,n,l),s.child)}function yu(e,s,a,n,l){if(e===null){var i=a.type;return typeof i=="function"&&!hr(i)&&i.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=i,Nu(e,s,i,n,l)):(e=Dl(a.type,null,n,s,s.mode,l),e.ref=s.ref,e.return=s,s.child=e)}if(i=e.child,!lc(e,l)){var u=i.memoizedProps;if(a=a.compare,a=a!==null?a:zn,a(u,n)&&e.ref===s.ref)return ws(e,s,l)}return s.flags|=1,e=fs(i,n),e.ref=s.ref,e.return=s,s.child=e}function Nu(e,s,a,n,l){if(e!==null){var i=e.memoizedProps;if(zn(i,n)&&e.ref===s.ref)if(pt=!1,s.pendingProps=n=i,lc(e,l))(e.flags&131072)!==0&&(pt=!0);else return s.lanes=e.lanes,ws(e,s,l)}return Fr(e,s,a,n,l)}function wu(e,s,a){var n=s.pendingProps,l=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((s.flags&128)!==0){if(n=i!==null?i.baseLanes|a:a,e!==null){for(l=s.child=e.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;s.childLanes=i&~n}else s.childLanes=0,s.child=null;return Su(e,s,n,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ul(s,i!==null?i.cachePool:null),i!==null?Nd(s,i):zr(),du(s);else return s.lanes=s.childLanes=536870912,Su(e,s,i!==null?i.baseLanes|a:a,a)}else i!==null?(Ul(s,i.cachePool),Nd(s,i),Hs(),s.memoizedState=null):(e!==null&&Ul(s,null),zr(),Hs());return jt(e,s,l,a),s.child}function Su(e,s,a,n){var l=kr();return l=l===null?null:{parent:mt._currentValue,pool:l},s.memoizedState={baseLanes:a,cachePool:l},e!==null&&Ul(s,null),zr(),du(s),e!==null&&$n(e,s,n,!0),null}function si(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function Fr(e,s,a,n,l){return xa(s),a=Dr(e,s,a,n,void 0,l),n=Br(),e!==null&&!pt?($r(e,s,l),ws(e,s,l)):(Qe&&n&&pr(s),s.flags|=1,jt(e,s,a,l),s.child)}function ku(e,s,a,n,l,i){return xa(s),s.updateQueue=null,a=Sd(s,n,a,l),wd(e),n=Br(),e!==null&&!pt?($r(e,s,i),ws(e,s,i)):(Qe&&n&&pr(s),s.flags|=1,jt(e,s,a,i),s.child)}function Cu(e,s,a,n,l){if(xa(s),s.stateNode===null){var i=Qa,u=a.contextType;typeof u=="object"&&u!==null&&(i=kt(u)),i=new a(n,i),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Jr,s.stateNode=i,i._reactInternals=s,i=s.stateNode,i.props=n,i.state=s.memoizedState,i.refs={},Ar(s),u=a.contextType,i.context=typeof u=="object"&&u!==null?kt(u):Qa,i.state=s.memoizedState,u=a.getDerivedStateFromProps,typeof u=="function"&&(Xr(s,a,u,n),i.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(u=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),u!==i.state&&Jr.enqueueReplaceState(i,i.state,null),Gn(s,n,i,l),Qn(),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!0}else if(e===null){i=s.stateNode;var h=s.memoizedProps,y=fa(a,h);i.props=y;var $=i.context,Q=a.contextType;u=Qa,typeof Q=="object"&&Q!==null&&(u=kt(Q));var I=a.getDerivedStateFromProps;Q=typeof I=="function"||typeof i.getSnapshotBeforeUpdate=="function",h=s.pendingProps!==h,Q||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(h||$!==u)&&mu(s,i,n,u),Bs=!1;var R=s.memoizedState;i.state=R,Gn(s,n,i,l),Qn(),$=s.memoizedState,h||R!==$||Bs?(typeof I=="function"&&(Xr(s,a,I,n),$=s.memoizedState),(y=Bs||uu(s,a,y,n,R,$,u))?(Q||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=$),i.props=n,i.state=$,i.context=u,n=y):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Tr(e,s),u=s.memoizedProps,Q=fa(a,u),i.props=Q,I=s.pendingProps,R=i.context,$=a.contextType,y=Qa,typeof $=="object"&&$!==null&&(y=kt($)),h=a.getDerivedStateFromProps,($=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==I||R!==y)&&mu(s,i,n,y),Bs=!1,R=s.memoizedState,i.state=R,Gn(s,n,i,l),Qn();var q=s.memoizedState;u!==I||R!==q||Bs||e!==null&&e.dependencies!==null&&Rl(e.dependencies)?(typeof h=="function"&&(Xr(s,a,h,n),q=s.memoizedState),(Q=Bs||uu(s,a,Q,n,R,q,y)||e!==null&&e.dependencies!==null&&Rl(e.dependencies))?($||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,q,y),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,q,y)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=q),i.props=n,i.state=q,i.context=y,n=Q):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(s.flags|=1024),n=!1)}return i=n,si(e,s),n=(s.flags&128)!==0,i||n?(i=s.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:i.render(),s.flags|=1,e!==null&&n?(s.child=Fa(s,e.child,null,l),s.child=Fa(s,null,a,l)):jt(e,s,a,l),s.memoizedState=i.state,e=s.child):e=ws(e,s,l),e}function Au(e,s,a,n){return Dn(),s.flags|=256,jt(e,s,a,n),s.child}var Pr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ec(e){return{baseLanes:e,cachePool:hd()}}function tc(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Kt),e}function Tu(e,s,a){var n=s.pendingProps,l=!1,i=(s.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),u&&(l=!0,s.flags&=-129),u=(s.flags&32)!==0,s.flags&=-33,e===null){if(Qe){if(l?Us(s):Hs(),Qe){var h=nt,y;if(y=h){e:{for(y=h,h=as;y.nodeType!==8;){if(!h){h=null;break e}if(y=Ft(y.nextSibling),y===null){h=null;break e}}h=y}h!==null?(s.memoizedState={dehydrated:h,treeContext:ca!==null?{id:ps,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},y=Dt(18,null,null,0),y.stateNode=h,y.return=s,s.child=y,At=s,nt=null,y=!0):y=!1}y||ua(s)}if(h=s.memoizedState,h!==null&&(h=h.dehydrated,h!==null))return qc(h)?s.lanes=32:s.lanes=536870912,null;Ns(s)}return h=n.children,n=n.fallback,l?(Hs(),l=s.mode,h=ai({mode:"hidden",children:h},l),n=ra(n,l,a,null),h.return=s,n.return=s,h.sibling=n,s.child=h,l=s.child,l.memoizedState=ec(a),l.childLanes=tc(e,u,a),s.memoizedState=Pr,n):(Us(s),sc(s,h))}if(y=e.memoizedState,y!==null&&(h=y.dehydrated,h!==null)){if(i)s.flags&256?(Us(s),s.flags&=-257,s=ac(e,s,a)):s.memoizedState!==null?(Hs(),s.child=e.child,s.flags|=128,s=null):(Hs(),l=n.fallback,h=s.mode,n=ai({mode:"visible",children:n.children},h),l=ra(l,h,a,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,Fa(s,e.child,null,a),n=s.child,n.memoizedState=ec(a),n.childLanes=tc(e,u,a),s.memoizedState=Pr,s=l);else if(Us(s),qc(h)){if(u=h.nextSibling&&h.nextSibling.dataset,u)var $=u.dgst;u=$,n=Error(o(419)),n.stack="",n.digest=u,Bn({value:n,source:null,stack:null}),s=ac(e,s,a)}else if(pt||$n(e,s,a,!1),u=(a&e.childLanes)!==0,pt||u){if(u=Pe,u!==null&&(n=a&-a,n=(n&42)!==0?1:ve(n),n=(n&(u.suspendedLanes|a))!==0?0:n,n!==0&&n!==y.retryLane))throw y.retryLane=n,_a(e,n),Ut(u,e,n),vu;h.data==="$?"||yc(),s=ac(e,s,a)}else h.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=y.treeContext,nt=Ft(h.nextSibling),At=s,Qe=!0,da=null,as=!1,e!==null&&(Zt[Yt++]=ps,Zt[Yt++]=bs,Zt[Yt++]=ca,ps=e.id,bs=e.overflow,ca=s),s=sc(s,n.children),s.flags|=4096);return s}return l?(Hs(),l=n.fallback,h=s.mode,y=e.child,$=y.sibling,n=fs(y,{mode:"hidden",children:n.children}),n.subtreeFlags=y.subtreeFlags&65011712,$!==null?l=fs($,l):(l=ra(l,h,a,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,h=e.child.memoizedState,h===null?h=ec(a):(y=h.cachePool,y!==null?($=mt._currentValue,y=y.parent!==$?{parent:$,pool:$}:y):y=hd(),h={baseLanes:h.baseLanes|a,cachePool:y}),l.memoizedState=h,l.childLanes=tc(e,u,a),s.memoizedState=Pr,n):(Us(s),a=e.child,e=a.sibling,a=fs(a,{mode:"visible",children:n.children}),a.return=s,a.sibling=null,e!==null&&(u=s.deletions,u===null?(s.deletions=[e],s.flags|=16):u.push(e)),s.child=a,s.memoizedState=null,a)}function sc(e,s){return s=ai({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function ai(e,s){return e=Dt(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ac(e,s,a){return Fa(s,e.child,null,a),e=sc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Mu(e,s,a){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),yr(e.return,s,a)}function nc(e,s,a,n,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=a,i.tailMode=l)}function Eu(e,s,a){var n=s.pendingProps,l=n.revealOrder,i=n.tail;if(jt(e,s,n.children,a),n=xt.current,(n&2)!==0)n=n&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mu(e,a,s);else if(e.tag===19)Mu(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(ge(xt,n),l){case"forwards":for(a=s.child,l=null;a!==null;)e=a.alternate,e!==null&&Pl(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=s.child,s.child=null):(l=a.sibling,a.sibling=null),nc(s,!1,l,a,i);break;case"backwards":for(a=null,l=s.child,s.child=null;l!==null;){if(e=l.alternate,e!==null&&Pl(e)===null){s.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}nc(s,!0,a,null,i);break;case"together":nc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ws(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),Zs|=s.lanes,(a&s.childLanes)===0)if(e!==null){if($n(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(o(153));if(s.child!==null){for(e=s.child,a=fs(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=fs(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function lc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Rl(e)))}function _x(e,s,a){switch(s.tag){case 3:ue(s,s.stateNode.containerInfo),Ds(s,mt,e.memoizedState.cache),Dn();break;case 27:case 5:We(s);break;case 4:ue(s,s.stateNode.containerInfo);break;case 10:Ds(s,s.type,s.memoizedProps.value);break;case 13:var n=s.memoizedState;if(n!==null)return n.dehydrated!==null?(Us(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Tu(e,s,a):(Us(s),e=ws(e,s,a),e!==null?e.sibling:null);Us(s);break;case 19:var l=(e.flags&128)!==0;if(n=(a&s.childLanes)!==0,n||($n(e,s,a,!1),n=(a&s.childLanes)!==0),l){if(n)return Eu(e,s,a);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ge(xt,xt.current),n)break;return null;case 22:case 23:return s.lanes=0,wu(e,s,a);case 24:Ds(s,mt,e.memoizedState.cache)}return ws(e,s,a)}function zu(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)pt=!0;else{if(!lc(e,a)&&(s.flags&128)===0)return pt=!1,_x(e,s,a);pt=(e.flags&131072)!==0}else pt=!1,Qe&&(s.flags&1048576)!==0&&rd(s,$l,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var n=s.elementType,l=n._init;if(n=l(n._payload),s.type=n,typeof n=="function")hr(n)?(e=fa(n,e),s.tag=1,s=Cu(null,s,n,e,a)):(s.tag=0,s=Fr(null,s,n,e,a));else{if(n!=null){if(l=n.$$typeof,l===J){s.tag=11,s=ju(null,s,n,e,a);break e}else if(l===z){s.tag=14,s=yu(null,s,n,e,a);break e}}throw s=K(n)||n,Error(o(306,s,""))}}return s;case 0:return Fr(e,s,s.type,s.pendingProps,a);case 1:return n=s.type,l=fa(n,s.pendingProps),Cu(e,s,n,l,a);case 3:e:{if(ue(s,s.stateNode.containerInfo),e===null)throw Error(o(387));n=s.pendingProps;var i=s.memoizedState;l=i.element,Tr(e,s),Gn(s,n,null,a);var u=s.memoizedState;if(n=u.cache,Ds(s,mt,n),n!==i.cache&&Nr(s,[mt],a,!0),Qn(),n=u.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:u.cache},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){s=Au(e,s,n,a);break e}else if(n!==l){l=Gt(Error(o(424)),s),Bn(l),s=Au(e,s,n,a);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nt=Ft(e.firstChild),At=s,Qe=!0,da=null,as=!0,a=ou(s,null,n,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dn(),n===l){s=ws(e,s,a);break e}jt(e,s,n,a)}s=s.child}return s;case 26:return si(e,s),e===null?(a=B0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Qe||(a=s.type,e=s.pendingProps,n=pi(ee.current).createElement(a),n[_e]=s,n[ut]=e,Nt(n,a,e),ft(n),s.stateNode=n):s.memoizedState=B0(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return We(s),e===null&&Qe&&(n=s.stateNode=O0(s.type,s.pendingProps,ee.current),At=s,as=!0,l=nt,Xs(s.type)?(Uc=l,nt=Ft(n.firstChild)):nt=l),jt(e,s,s.pendingProps.children,a),si(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Qe&&((l=n=nt)&&(n=gh(n,s.type,s.pendingProps,as),n!==null?(s.stateNode=n,At=s,nt=Ft(n.firstChild),as=!1,l=!0):l=!1),l||ua(s)),We(s),l=s.type,i=s.pendingProps,u=e!==null?e.memoizedProps:null,n=i.children,Bc(l,i)?n=null:u!==null&&Bc(l,u)&&(s.flags|=32),s.memoizedState!==null&&(l=Dr(e,s,Lx,null,null,a),ul._currentValue=l),si(e,s),jt(e,s,n,a),s.child;case 6:return e===null&&Qe&&((e=a=nt)&&(a=fh(a,s.pendingProps,as),a!==null?(s.stateNode=a,At=s,nt=null,e=!0):e=!1),e||ua(s)),null;case 13:return Tu(e,s,a);case 4:return ue(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=Fa(s,null,n,a):jt(e,s,n,a),s.child;case 11:return ju(e,s,s.type,s.pendingProps,a);case 7:return jt(e,s,s.pendingProps,a),s.child;case 8:return jt(e,s,s.pendingProps.children,a),s.child;case 12:return jt(e,s,s.pendingProps.children,a),s.child;case 10:return n=s.pendingProps,Ds(s,s.type,n.value),jt(e,s,n.children,a),s.child;case 9:return l=s.type._context,n=s.pendingProps.children,xa(s),l=kt(l),n=n(l),s.flags|=1,jt(e,s,n,a),s.child;case 14:return yu(e,s,s.type,s.pendingProps,a);case 15:return Nu(e,s,s.type,s.pendingProps,a);case 19:return Eu(e,s,a);case 31:return n=s.pendingProps,a=s.mode,n={mode:n.mode,children:n.children},e===null?(a=ai(n,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=fs(e.child,n),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return wu(e,s,a);case 24:return xa(s),n=kt(mt),e===null?(l=kr(),l===null&&(l=Pe,i=wr(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=a),l=i),s.memoizedState={parent:n,cache:l},Ar(s),Ds(s,mt,l)):((e.lanes&a)!==0&&(Tr(e,s),Gn(s,null,null,a),Qn()),l=e.memoizedState,i=s.memoizedState,l.parent!==n?(l={parent:n,cache:n},s.memoizedState=l,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=l),Ds(s,mt,n)):(n=i.cache,Ds(s,mt,n),n!==l.cache&&Nr(s,[mt],a,!0))),jt(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ss(e){e.flags|=4}function Ou(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!H0(s)){if(s=It.current,s!==null&&((Re&4194048)===Re?ns!==null:(Re&62914560)!==Re&&(Re&536870912)===0||s!==ns))throw Hn=Cr,gd;e.flags|=8192}}function ni(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?yn():536870912,e.lanes|=s,sn|=s)}function Jn(e,s){if(!Qe)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function st(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(s)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,s}function Qx(e,s,a){var n=s.pendingProps;switch(br(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(s),null;case 1:return st(s),null;case 3:return a=s.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),js(mt),pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ln(s)?Ss(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,dd())),st(s),null;case 26:return a=s.memoizedState,e===null?(Ss(s),a!==null?(st(s),Ou(s,a)):(st(s),s.flags&=-16777217)):a?a!==e.memoizedState?(Ss(s),st(s),Ou(s,a)):(st(s),s.flags&=-16777217):(e.memoizedProps!==n&&Ss(s),st(s),s.flags&=-16777217),null;case 27:Ge(s),a=ee.current;var l=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==n&&Ss(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return st(s),null}e=Te.current,Ln(s)?cd(s):(e=O0(l,n,a),s.stateNode=e,Ss(s))}return st(s),null;case 5:if(Ge(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==n&&Ss(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return st(s),null}if(e=Te.current,Ln(s))cd(s);else{switch(l=pi(ee.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?l.createElement("select",{is:n.is}):l.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?l.createElement(a,{is:n.is}):l.createElement(a)}}e[_e]=s,e[ut]=n;e:for(l=s.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s.stateNode=e;e:switch(Nt(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ss(s)}}return st(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==n&&Ss(s);else{if(typeof n!="string"&&s.stateNode===null)throw Error(o(166));if(e=ee.current,Ln(s)){if(e=s.stateNode,a=s.memoizedProps,n=null,l=At,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[_e]=s,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||k0(e.nodeValue,a)),e||ua(s)}else e=pi(e).createTextNode(n),e[_e]=s,s.stateNode=e}return st(s),null;case 13:if(n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Ln(s),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[_e]=s}else Dn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),l=!1}else l=dd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return s.flags&256?(Ns(s),s):(Ns(s),null)}if(Ns(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=s.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==l&&(n.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),ni(s,s.updateQueue),st(s),null;case 4:return pe(),e===null&&Ec(s.stateNode.containerInfo),st(s),null;case 10:return js(s.type),st(s),null;case 19:if(W(xt),l=s.memoizedState,l===null)return st(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)Jn(l,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(i=Pl(e),i!==null){for(s.flags|=128,Jn(l,!1),e=i.updateQueue,s.updateQueue=e,ni(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)id(a,e),a=a.sibling;return ge(xt,xt.current&1|2),s.child}e=e.sibling}l.tail!==null&&Ct()>ri&&(s.flags|=128,n=!0,Jn(l,!1),s.lanes=4194304)}else{if(!n)if(e=Pl(i),e!==null){if(s.flags|=128,n=!0,e=e.updateQueue,s.updateQueue=e,ni(s,e),Jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Qe)return st(s),null}else 2*Ct()-l.renderingStartTime>ri&&a!==536870912&&(s.flags|=128,n=!0,Jn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(e=l.last,e!==null?e.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ct(),s.sibling=null,e=xt.current,ge(xt,n?e&1|2:e&1),s):(st(s),null);case 22:case 23:return Ns(s),Or(),n=s.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(s.flags|=8192):n&&(s.flags|=8192),n?(a&536870912)!==0&&(s.flags&128)===0&&(st(s),s.subtreeFlags&6&&(s.flags|=8192)):st(s),a=s.updateQueue,a!==null&&ni(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(s.flags|=2048),e!==null&&W(ha),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),js(mt),st(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Gx(e,s){switch(br(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return js(mt),pe(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Ge(s),null;case 13:if(Ns(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Dn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return W(xt),null;case 4:return pe(),null;case 10:return js(s.type),null;case 22:case 23:return Ns(s),Or(),e!==null&&W(ha),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return js(mt),null;case 25:return null;default:return null}}function Lu(e,s){switch(br(s),s.tag){case 3:js(mt),pe();break;case 26:case 27:case 5:Ge(s);break;case 4:pe();break;case 13:Ns(s);break;case 19:W(xt);break;case 10:js(s.type);break;case 22:case 23:Ns(s),Or(),e!==null&&W(ha);break;case 24:js(mt)}}function Wn(e,s){try{var a=s.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var i=a.create,u=a.inst;n=i(),u.destroy=n}a=a.next}while(a!==l)}}catch(h){Fe(s,s.return,h)}}function _s(e,s,a){try{var n=s.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&e)===e){var u=n.inst,h=u.destroy;if(h!==void 0){u.destroy=void 0,l=s;var y=a,$=h;try{$()}catch(Q){Fe(l,y,Q)}}}n=n.next}while(n!==i)}}catch(Q){Fe(s,s.return,Q)}}function Du(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{yd(s,a)}catch(n){Fe(e,e.return,n)}}}function Bu(e,s,a){a.props=fa(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Fe(e,s,n)}}function Fn(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){Fe(e,s,l)}}function ls(e,s){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){Fe(e,s,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){Fe(e,s,l)}else a.current=null}function $u(e){var s=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){Fe(e,e.return,l)}}function ic(e,s,a){try{var n=e.stateNode;dh(n,e.type,a,s),n[ut]=s}catch(l){Fe(e,e.return,l)}}function Ru(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Xs(e.type)||e.tag===4}function rc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,s,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=fi));else if(n!==4&&(n===27&&Xs(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(cc(e,s,a),e=e.sibling;e!==null;)cc(e,s,a),e=e.sibling}function li(e,s,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(n!==4&&(n===27&&Xs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(li(e,s,a),e=e.sibling;e!==null;)li(e,s,a),e=e.sibling}function qu(e){var s=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Nt(s,n,a),s[_e]=e,s[ut]=a}catch(i){Fe(e,e.return,i)}}var ks=!1,ct=!1,oc=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Vx(e,s){if(e=e.containerInfo,Lc=wi,e=Jo(e),rr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch(we){a=null;break e}var u=0,h=-1,y=-1,$=0,Q=0,I=e,R=null;t:for(;;){for(var q;I!==a||l!==0&&I.nodeType!==3||(h=u+l),I!==i||n!==0&&I.nodeType!==3||(y=u+n),I.nodeType===3&&(u+=I.nodeValue.length),(q=I.firstChild)!==null;)R=I,I=q;for(;;){if(I===e)break t;if(R===a&&++$===l&&(h=u),R===i&&++Q===n&&(y=u),(q=I.nextSibling)!==null)break;I=R,R=I.parentNode}I=q}a=h===-1||y===-1?null:{start:h,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dc={focusedElem:e,selectionRange:a},wi=!1,bt=s;bt!==null;)if(s=bt,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,bt=e;else for(;bt!==null;){switch(s=bt,i=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,a=s,l=i.memoizedProps,i=i.memoizedState,n=a.stateNode;try{var Ce=fa(a.type,l,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(Ce,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(we){Fe(a,a.return,we)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)Rc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=s.sibling,e!==null){e.return=s.return,bt=e;break}bt=s.return}}function Hu(e,s,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(e,a),n&4&&Wn(5,a);break;case 1:if(Qs(e,a),n&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(u){Fe(a,a.return,u)}else{var l=fa(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(l,s,e.__reactInternalSnapshotBeforeUpdate)}catch(u){Fe(a,a.return,u)}}n&64&&Du(a),n&512&&Fn(a,a.return);break;case 3:if(Qs(e,a),n&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{yd(e,s)}catch(u){Fe(a,a.return,u)}}break;case 27:s===null&&n&4&&qu(a);case 26:case 5:Qs(e,a),s===null&&n&4&&$u(a),n&512&&Fn(a,a.return);break;case 12:Qs(e,a);break;case 13:Qs(e,a),n&4&&Gu(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Px.bind(null,a),ph(e,a))));break;case 22:if(n=a.memoizedState!==null||ks,!n){s=s!==null&&s.memoizedState!==null||ct,l=ks;var i=ct;ks=n,(ct=s)&&!i?Gs(e,a,(a.subtreeFlags&8772)!==0):Qs(e,a),ks=l,ct=i}break;case 30:break;default:Qs(e,a)}}function _u(e){var s=e.alternate;s!==null&&(e.alternate=null,_u(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Qi(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var tt=null,Et=!1;function Cs(e,s,a){for(a=a.child;a!==null;)Qu(e,s,a),a=a.sibling}function Qu(e,s,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(us,a)}catch(i){}switch(a.tag){case 26:ct||ls(a,s),Cs(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ct||ls(a,s);var n=tt,l=Et;Xs(a.type)&&(tt=a.stateNode,Et=!1),Cs(e,s,a),rl(a.stateNode),tt=n,Et=l;break;case 5:ct||ls(a,s);case 6:if(n=tt,l=Et,tt=null,Cs(e,s,a),tt=n,Et=l,tt!==null)if(Et)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(a.stateNode)}catch(i){Fe(a,s,i)}else try{tt.removeChild(a.stateNode)}catch(i){Fe(a,s,i)}break;case 18:tt!==null&&(Et?(e=tt,E0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gl(e)):E0(tt,a.stateNode));break;case 4:n=tt,l=Et,tt=a.stateNode.containerInfo,Et=!0,Cs(e,s,a),tt=n,Et=l;break;case 0:case 11:case 14:case 15:ct||_s(2,a,s),ct||_s(4,a,s),Cs(e,s,a);break;case 1:ct||(ls(a,s),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Bu(a,s,n)),Cs(e,s,a);break;case 21:Cs(e,s,a);break;case 22:ct=(n=ct)||a.memoizedState!==null,Cs(e,s,a),ct=n;break;default:Cs(e,s,a)}}function Gu(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gl(e)}catch(a){Fe(s,s.return,a)}}function Zx(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Uu),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Uu),s;default:throw Error(o(435,e.tag))}}function dc(e,s){var a=Zx(e);s.forEach(function(n){var l=eh.bind(null,e,n);a.has(n)||(a.add(n),n.then(l,l))})}function Bt(e,s){var a=s.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],i=e,u=s,h=u;e:for(;h!==null;){switch(h.tag){case 27:if(Xs(h.type)){tt=h.stateNode,Et=!1;break e}break;case 5:tt=h.stateNode,Et=!1;break e;case 3:case 4:tt=h.stateNode.containerInfo,Et=!0;break e}h=h.return}if(tt===null)throw Error(o(160));Qu(i,u,l),tt=null,Et=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Vu(s,e),s=s.sibling}var Wt=null;function Vu(e,s){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bt(s,e),$t(e),n&4&&(_s(3,e,e.return),Wn(3,e),_s(5,e,e.return));break;case 1:Bt(s,e),$t(e),n&512&&(ct||a===null||ls(a,a.return)),n&64&&ks&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Wt;if(Bt(s,e),$t(e),n&512&&(ct||a===null||ls(a,a.return)),n&4){var i=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":i=l.getElementsByTagName("title")[0],(!i||i[Nn]||i[_e]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(n),l.head.insertBefore(i,l.querySelector("head > title"))),Nt(i,n,a),i[_e]=e,ft(i),n=i;break e;case"link":var u=q0("link","href",l).get(n+(a.href||""));if(u){for(var h=0;h<u.length;h++)if(i=u[h],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){u.splice(h,1);break t}}i=l.createElement(n),Nt(i,n,a),l.head.appendChild(i);break;case"meta":if(u=q0("meta","content",l).get(n+(a.content||""))){for(h=0;h<u.length;h++)if(i=u[h],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){u.splice(h,1);break t}}i=l.createElement(n),Nt(i,n,a),l.head.appendChild(i);break;default:throw Error(o(468,n))}i[_e]=e,ft(i),n=i}e.stateNode=n}else U0(l,e.type,e.stateNode);else e.stateNode=R0(l,n,e.memoizedProps);else i!==n?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,n===null?U0(l,e.type,e.stateNode):R0(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ic(e,e.memoizedProps,a.memoizedProps)}break;case 27:Bt(s,e),$t(e),n&512&&(ct||a===null||ls(a,a.return)),a!==null&&n&4&&ic(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Bt(s,e),$t(e),n&512&&(ct||a===null||ls(a,a.return)),e.flags&32){l=e.stateNode;try{Da(l,"")}catch(q){Fe(e,e.return,q)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,ic(e,l,a!==null?a.memoizedProps:l)),n&1024&&(oc=!0);break;case 6:if(Bt(s,e),$t(e),n&4){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(q){Fe(e,e.return,q)}}break;case 3:if(ji=null,l=Wt,Wt=bi(s.containerInfo),Bt(s,e),Wt=l,$t(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(s.containerInfo)}catch(q){Fe(e,e.return,q)}oc&&(oc=!1,Zu(e));break;case 4:n=Wt,Wt=bi(e.stateNode.containerInfo),Bt(s,e),$t(e),Wt=n;break;case 12:Bt(s,e),$t(e);break;case 13:Bt(s,e),$t(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fc=Ct()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,dc(e,n)));break;case 22:l=e.memoizedState!==null;var y=a!==null&&a.memoizedState!==null,$=ks,Q=ct;if(ks=$||l,ct=Q||y,Bt(s,e),ct=Q,ks=$,$t(e),n&8192)e:for(s=e.stateNode,s._visibility=l?s._visibility&-2:s._visibility|1,l&&(a===null||y||ks||ct||pa(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){y=a=s;try{if(i=y.stateNode,l)u=i.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{h=y.stateNode;var I=y.memoizedProps.style,R=I!=null&&I.hasOwnProperty("display")?I.display:null;h.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(q){Fe(y,y.return,q)}}}else if(s.tag===6){if(a===null){y=s;try{y.stateNode.nodeValue=l?"":y.memoizedProps}catch(q){Fe(y,y.return,q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,dc(e,a))));break;case 19:Bt(s,e),$t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,dc(e,n)));break;case 30:break;case 21:break;default:Bt(s,e),$t(e)}}function $t(e){var s=e.flags;if(s&2){try{for(var a,n=e.return;n!==null;){if(Ru(n)){a=n;break}n=n.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var l=a.stateNode,i=rc(e);li(e,i,l);break;case 5:var u=a.stateNode;a.flags&32&&(Da(u,""),a.flags&=-33);var h=rc(e);li(e,h,u);break;case 3:case 4:var y=a.stateNode.containerInfo,$=rc(e);cc(e,$,y);break;default:throw Error(o(161))}}catch(Q){Fe(e,e.return,Q)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Zu(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Zu(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Qs(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Hu(e,s.alternate,s),s=s.sibling}function pa(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:_s(4,s,s.return),pa(s);break;case 1:ls(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Bu(s,s.return,a),pa(s);break;case 27:rl(s.stateNode);case 26:case 5:ls(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}e=e.sibling}}function Gs(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var n=s.alternate,l=e,i=s,u=i.flags;switch(i.tag){case 0:case 11:case 15:Gs(l,i,a),Wn(4,i);break;case 1:if(Gs(l,i,a),n=i,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch($){Fe(n,n.return,$)}if(n=i,l=n.updateQueue,l!==null){var h=n.stateNode;try{var y=l.shared.hiddenCallbacks;if(y!==null)for(l.shared.hiddenCallbacks=null,l=0;l<y.length;l++)jd(y[l],h)}catch($){Fe(n,n.return,$)}}a&&u&64&&Du(i),Fn(i,i.return);break;case 27:qu(i);case 26:case 5:Gs(l,i,a),a&&n===null&&u&4&&$u(i),Fn(i,i.return);break;case 12:Gs(l,i,a);break;case 13:Gs(l,i,a),a&&u&4&&Gu(l,i);break;case 22:i.memoizedState===null&&Gs(l,i,a),Fn(i,i.return);break;case 30:break;default:Gs(l,i,a)}s=s.sibling}}function uc(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Rn(a))}function mc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Rn(e))}function is(e,s,a,n){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Yu(e,s,a,n),s=s.sibling}function Yu(e,s,a,n){var l=s.flags;switch(s.tag){case 0:case 11:case 15:is(e,s,a,n),l&2048&&Wn(9,s);break;case 1:is(e,s,a,n);break;case 3:is(e,s,a,n),l&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Rn(e)));break;case 12:if(l&2048){is(e,s,a,n),e=s.stateNode;try{var i=s.memoizedProps,u=i.id,h=i.onPostCommit;typeof h=="function"&&h(u,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){Fe(s,s.return,y)}}else is(e,s,a,n);break;case 13:is(e,s,a,n);break;case 23:break;case 22:i=s.stateNode,u=s.alternate,s.memoizedState!==null?i._visibility&2?is(e,s,a,n):Pn(e,s):i._visibility&2?is(e,s,a,n):(i._visibility|=2,Pa(e,s,a,n,(s.subtreeFlags&10256)!==0)),l&2048&&uc(u,s);break;case 24:is(e,s,a,n),l&2048&&mc(s.alternate,s);break;default:is(e,s,a,n)}}function Pa(e,s,a,n,l){for(l=l&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var i=e,u=s,h=a,y=n,$=u.flags;switch(u.tag){case 0:case 11:case 15:Pa(i,u,h,y,l),Wn(8,u);break;case 23:break;case 22:var Q=u.stateNode;u.memoizedState!==null?Q._visibility&2?Pa(i,u,h,y,l):Pn(i,u):(Q._visibility|=2,Pa(i,u,h,y,l)),l&&$&2048&&uc(u.alternate,u);break;case 24:Pa(i,u,h,y,l),l&&$&2048&&mc(u.alternate,u);break;default:Pa(i,u,h,y,l)}s=s.sibling}}function Pn(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,n=s,l=n.flags;switch(n.tag){case 22:Pn(a,n),l&2048&&uc(n.alternate,n);break;case 24:Pn(a,n),l&2048&&mc(n.alternate,n);break;default:Pn(a,n)}s=s.sibling}}var el=8192;function en(e){if(e.subtreeFlags&el)for(e=e.child;e!==null;)Iu(e),e=e.sibling}function Iu(e){switch(e.tag){case 26:en(e),e.flags&el&&e.memoizedState!==null&&Eh(Wt,e.memoizedState,e.memoizedProps);break;case 5:en(e);break;case 3:case 4:var s=Wt;Wt=bi(e.stateNode.containerInfo),en(e),Wt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=el,el=16777216,en(e),el=s):en(e));break;default:en(e)}}function Ku(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function tl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];bt=n,Ju(n,e)}Ku(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xu(e),e=e.sibling}function Xu(e){switch(e.tag){case 0:case 11:case 15:tl(e),e.flags&2048&&_s(9,e,e.return);break;case 3:tl(e);break;case 12:tl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,ii(e)):tl(e);break;default:tl(e)}}function ii(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];bt=n,Ju(n,e)}Ku(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:_s(8,s,s.return),ii(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ii(s));break;default:ii(s)}e=e.sibling}}function Ju(e,s){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:_s(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Rn(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,bt=n;else e:for(a=e;bt!==null;){n=bt;var l=n.sibling,i=n.return;if(_u(n),n===a){bt=null;break e}if(l!==null){l.return=i,bt=l;break e}bt=i}}}var Yx={getCacheForType:function(e){var s=kt(mt),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},Ix=typeof WeakMap=="function"?WeakMap:Map,Ze=0,Pe=null,De=null,Re=0,Ye=0,Rt=null,Vs=!1,tn=!1,xc=!1,As=0,lt=0,Zs=0,ba=0,hc=0,Kt=0,sn=0,sl=null,zt=null,gc=!1,fc=0,ri=1/0,ci=null,Ys=null,yt=0,Is=null,an=null,nn=0,pc=0,bc=null,Wu=null,al=0,vc=null;function qt(){if((Ze&2)!==0&&Re!==0)return Re&-Re;if(N.T!==null){var e=Za;return e!==0?e:Cc()}return ze()}function Fu(){Kt===0&&(Kt=(Re&536870912)===0||Qe?jn():536870912);var e=It.current;return e!==null&&(e.flags|=32),Kt}function Ut(e,s,a){(e===Pe&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(ln(e,0),Ks(e,Re,Kt,!1)),U(e,a),((Ze&2)===0||e!==Pe)&&(e===Pe&&((Ze&2)===0&&(ba|=a),lt===4&&Ks(e,Re,Kt,!1)),rs(e))}function Pu(e,s,a){if((Ze&6)!==0)throw Error(o(327));var n=!a&&(s&124)===0&&(s&e.expiredLanes)===0||ss(e,s),l=n?Jx(e,s):Nc(e,s,!0),i=n;do{if(l===0){tn&&!n&&Ks(e,s,0,!1);break}else{if(a=e.current.alternate,i&&!Kx(a)){l=Nc(e,s,!1),i=!1;continue}if(l===2){if(i=s,e.errorRecoveryDisabledLanes&i)var u=0;else u=e.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){s=u;e:{var h=e;l=sl;var y=h.current.memoizedState.isDehydrated;if(y&&(ln(h,u).flags|=256),u=Nc(h,u,!1),u!==2){if(xc&&!y){h.errorRecoveryDisabledLanes|=i,ba|=i,l=4;break e}i=zt,zt=l,i!==null&&(zt===null?zt=i:zt.push.apply(zt,i))}l=u}if(i=!1,l!==2)continue}}if(l===1){ln(e,0),Ks(e,s,0,!0);break}e:{switch(n=e,i=l,i){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ks(n,s,Kt,!Vs);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(l=fc+300-Ct(),10<l)){if(Ks(n,s,Kt,!Vs),Ve(n,0,!0)!==0)break e;n.timeoutHandle=T0(e0.bind(null,n,a,zt,ci,gc,s,Kt,ba,sn,Vs,i,2,-0,0),l);break e}e0(n,a,zt,ci,gc,s,Kt,ba,sn,Vs,i,0,-0,0)}}break}while(!0);rs(e)}function e0(e,s,a,n,l,i,u,h,y,$,Q,I,R,q){if(e.timeoutHandle=-1,I=s.subtreeFlags,(I&8192||(I&16785408)===16785408)&&(dl={stylesheets:null,count:0,unsuspend:Mh},Iu(s),I=zh(),I!==null)){e.cancelPendingCommit=I(r0.bind(null,e,s,i,a,n,l,u,h,y,Q,1,R,q)),Ks(e,i,u,!$);return}r0(e,s,i,a,n,l,u,h,y)}function Kx(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],i=l.getSnapshot;l=l.value;try{if(!Lt(i(),l))return!1}catch(u){return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(e,s,a,n){s&=~hc,s&=~ba,e.suspendedLanes|=s,e.pingedLanes&=~s,n&&(e.warmLanes|=s),n=e.expirationTimes;for(var l=s;0<l;){var i=31-je(l),u=1<<i;n[i]=-1,l&=~u}a!==0&&le(e,a,s)}function oi(){return(Ze&6)===0?(nl(0),!1):!0}function jc(){if(De!==null){if(Ye===0)var e=De.return;else e=De,vs=ma=null,Rr(e),Wa=null,Kn=0,e=De;for(;e!==null;)Lu(e.alternate,e),e=e.return;De=null}}function ln(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,mh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),jc(),Pe=e,De=a=fs(e.current,null),Re=s,Ye=0,Rt=null,Vs=!1,tn=ss(e,s),xc=!1,sn=Kt=hc=ba=Zs=lt=0,zt=sl=null,gc=!1,(s&8)!==0&&(s|=s&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=s;0<n;){var l=31-je(n),i=1<<l;s|=e[l],n&=~i}return As=s,zl(),a}function t0(e,s){Oe=null,N.H=Jl,s===Un||s===Hl?(s=bd(),Ye=3):s===gd?(s=bd(),Ye=4):Ye=s===vu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rt=s,De===null&&(lt=1,ti(e,Gt(s,e.current)))}function s0(){var e=N.H;return N.H=Jl,e===null?Jl:e}function a0(){var e=N.A;return N.A=Yx,e}function yc(){lt=4,Vs||(Re&4194048)!==Re&&It.current!==null||(tn=!0),(Zs&134217727)===0&&(ba&134217727)===0||Pe===null||Ks(Pe,Re,Kt,!1)}function Nc(e,s,a){var n=Ze;Ze|=2;var l=s0(),i=a0();(Pe!==e||Re!==s)&&(ci=null,ln(e,s)),s=!1;var u=lt;e:do try{if(Ye!==0&&De!==null){var h=De,y=Rt;switch(Ye){case 8:jc(),u=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(s=!0);var $=Ye;if(Ye=0,Rt=null,rn(e,h,y,$),a&&tn){u=0;break e}break;default:$=Ye,Ye=0,Rt=null,rn(e,h,y,$)}}Xx(),u=lt;break}catch(Q){t0(e,Q)}while(!0);return s&&e.shellSuspendCounter++,vs=ma=null,Ze=n,N.H=l,N.A=i,De===null&&(Pe=null,Re=0,zl()),u}function Xx(){for(;De!==null;)n0(De)}function Jx(e,s){var a=Ze;Ze|=2;var n=s0(),l=a0();Pe!==e||Re!==s?(ci=null,ri=Ct()+500,ln(e,s)):tn=ss(e,s);e:do try{if(Ye!==0&&De!==null){s=De;var i=Rt;t:switch(Ye){case 1:Ye=0,Rt=null,rn(e,s,i,1);break;case 2:case 9:if(fd(i)){Ye=0,Rt=null,l0(s);break}s=function(){Ye!==2&&Ye!==9||Pe!==e||(Ye=7),rs(e)},i.then(s,s);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:fd(i)?(Ye=0,Rt=null,l0(s)):(Ye=0,Rt=null,rn(e,s,i,7));break;case 5:var u=null;switch(De.tag){case 26:u=De.memoizedState;case 5:case 27:var h=De;if(!u||H0(u)){Ye=0,Rt=null;var y=h.sibling;if(y!==null)De=y;else{var $=h.return;$!==null?(De=$,di($)):De=null}break t}}Ye=0,Rt=null,rn(e,s,i,5);break;case 6:Ye=0,Rt=null,rn(e,s,i,6);break;case 8:jc(),lt=6;break e;default:throw Error(o(462))}}Wx();break}catch(Q){t0(e,Q)}while(!0);return vs=ma=null,N.H=n,N.A=l,Ze=a,De!==null?0:(Pe=null,Re=0,zl(),lt)}function Wx(){for(;De!==null&&!Ht();)n0(De)}function n0(e){var s=zu(e.alternate,e,As);e.memoizedProps=e.pendingProps,s===null?di(e):De=s}function l0(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=ku(a,s,s.pendingProps,s.type,void 0,Re);break;case 11:s=ku(a,s,s.pendingProps,s.type.render,s.ref,Re);break;case 5:Rr(s);default:Lu(a,s),s=De=id(s,As),s=zu(a,s,As)}e.memoizedProps=e.pendingProps,s===null?di(e):De=s}function rn(e,s,a,n){vs=ma=null,Rr(s),Wa=null,Kn=0;var l=s.return;try{if(Hx(e,l,s,a,Re)){lt=1,ti(e,Gt(a,e.current)),De=null;return}}catch(i){if(l!==null)throw De=l,i;lt=1,ti(e,Gt(a,e.current)),De=null;return}s.flags&32768?(Qe||n===1?e=!0:tn||(Re&536870912)!==0?e=!1:(Vs=e=!0,(n===2||n===9||n===3||n===6)&&(n=It.current,n!==null&&n.tag===13&&(n.flags|=16384))),i0(s,e)):di(s)}function di(e){var s=e;do{if((s.flags&32768)!==0){i0(s,Vs);return}e=s.return;var a=Qx(s.alternate,s,As);if(a!==null){De=a;return}if(s=s.sibling,s!==null){De=s;return}De=s=e}while(s!==null);lt===0&&(lt=5)}function i0(e,s){do{var a=Gx(e.alternate,e);if(a!==null){a.flags&=32767,De=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){De=e;return}De=e=a}while(e!==null);lt=6,De=null}function r0(e,s,a,n,l,i,u,h,y){e.cancelPendingCommit=null;do ui();while(yt!==0);if((Ze&6)!==0)throw Error(o(327));if(s!==null){if(s===e.current)throw Error(o(177));if(i=s.lanes|s.childLanes,i|=mr,re(e,a,i,u,h,y),e===Pe&&(De=Pe=null,Re=0),an=s,Is=e,nn=a,pc=i,bc=l,Wu=n,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,th(Es,function(){return m0(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||n){n=N.T,N.T=null,l=B.p,B.p=2,u=Ze,Ze|=4;try{Vx(e,s,a)}finally{Ze=u,B.p=l,N.T=n}}yt=1,c0(),o0(),d0()}}function c0(){if(yt===1){yt=0;var e=Is,s=an,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var n=B.p;B.p=2;var l=Ze;Ze|=4;try{Vu(s,e);var i=Dc,u=Jo(e.containerInfo),h=i.focusedElem,y=i.selectionRange;if(u!==h&&h&&h.ownerDocument&&Xo(h.ownerDocument.documentElement,h)){if(y!==null&&rr(h)){var $=y.start,Q=y.end;if(Q===void 0&&(Q=$),"selectionStart"in h)h.selectionStart=$,h.selectionEnd=Math.min(Q,h.value.length);else{var I=h.ownerDocument||document,R=I&&I.defaultView||window;if(R.getSelection){var q=R.getSelection(),Ce=h.textContent.length,we=Math.min(y.start,Ce),Je=y.end===void 0?we:Math.min(y.end,Ce);!q.extend&&we>Je&&(u=Je,Je=we,we=u);var M=Ko(h,we),C=Ko(h,Je);if(M&&C&&(q.rangeCount!==1||q.anchorNode!==M.node||q.anchorOffset!==M.offset||q.focusNode!==C.node||q.focusOffset!==C.offset)){var D=I.createRange();D.setStart(M.node,M.offset),q.removeAllRanges(),we>Je?(q.addRange(D),q.extend(C.node,C.offset)):(D.setEnd(C.node,C.offset),q.addRange(D))}}}}for(I=[],q=h;q=q.parentNode;)q.nodeType===1&&I.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<I.length;h++){var Z=I[h];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}wi=!!Lc,Dc=Lc=null}finally{Ze=l,B.p=n,N.T=a}}e.current=s,yt=2}}function o0(){if(yt===2){yt=0;var e=Is,s=an,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var n=B.p;B.p=2;var l=Ze;Ze|=4;try{Hu(e,s.alternate,s)}finally{Ze=l,B.p=n,N.T=a}}yt=3}}function d0(){if(yt===4||yt===3){yt=0,os();var e=Is,s=an,a=nn,n=Wu;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?yt=5:(yt=0,an=Is=null,u0(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ys=null),ke(a),s=s.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(us,s,void 0,(s.current.flags&128)===128)}catch(y){}if(n!==null){s=N.T,l=B.p,B.p=2,N.T=null;try{for(var i=e.onRecoverableError,u=0;u<n.length;u++){var h=n[u];i(h.value,{componentStack:h.stack})}}finally{N.T=s,B.p=l}}(nn&3)!==0&&ui(),rs(e),l=e.pendingLanes,(a&4194090)!==0&&(l&42)!==0?e===vc?al++:(al=0,vc=e):al=0,nl(0)}}function u0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Rn(s)))}function ui(e){return c0(),o0(),d0(),m0()}function m0(){if(yt!==5)return!1;var e=Is,s=pc;pc=0;var a=ke(nn),n=N.T,l=B.p;try{B.p=32>a?32:a,N.T=null,a=bc,bc=null;var i=Is,u=nn;if(yt=0,an=Is=null,nn=0,(Ze&6)!==0)throw Error(o(331));var h=Ze;if(Ze|=4,Xu(i.current),Yu(i,i.current,u,a),Ze=h,nl(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(us,i)}catch(y){}return!0}finally{B.p=l,N.T=n,u0(e,s)}}function x0(e,s,a){s=Gt(a,s),s=Wr(e.stateNode,s,2),e=Rs(e,s,2),e!==null&&(U(e,2),rs(e))}function Fe(e,s,a){if(e.tag===3)x0(e,e,a);else for(;s!==null;){if(s.tag===3){x0(s,e,a);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){e=Gt(a,e),a=pu(2),n=Rs(s,a,2),n!==null&&(bu(a,n,s,e),U(n,2),rs(n));break}}s=s.return}}function wc(e,s,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Ix;var l=new Set;n.set(s,l)}else l=n.get(s),l===void 0&&(l=new Set,n.set(s,l));l.has(a)||(xc=!0,l.add(a),e=Fx.bind(null,e,s,a),s.then(e,e))}function Fx(e,s,a){var n=e.pingCache;n!==null&&n.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Pe===e&&(Re&a)===a&&(lt===4||lt===3&&(Re&62914560)===Re&&300>Ct()-fc?(Ze&2)===0&&ln(e,0):hc|=a,sn===Re&&(sn=0)),rs(e)}function h0(e,s){s===0&&(s=yn()),e=_a(e,s),e!==null&&(U(e,s),rs(e))}function Px(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),h0(e,a)}function eh(e,s){var a=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(s),h0(e,a)}function th(e,s){return at(e,s)}var mi=null,cn=null,Sc=!1,xi=!1,kc=!1,va=0;function rs(e){e!==cn&&e.next===null&&(cn===null?mi=cn=e:cn=cn.next=e),xi=!0,Sc||(Sc=!0,ah())}function nl(e,s){if(!kc&&xi){kc=!0;do for(var a=!1,n=mi;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var i=0;else{var u=n.suspendedLanes,h=n.pingedLanes;i=(1<<31-je(42|e)+1)-1,i&=l&~(u&~h),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,b0(n,i))}else i=Re,i=Ve(n,n===Pe?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(i&3)===0||ss(n,i)||(a=!0,b0(n,i));n=n.next}while(a);kc=!1}}function sh(){g0()}function g0(){xi=Sc=!1;var e=0;va!==0&&(uh()&&(e=va),va=0);for(var s=Ct(),a=null,n=mi;n!==null;){var l=n.next,i=f0(n,s);i===0?(n.next=null,a===null?mi=l:a.next=l,l===null&&(cn=a)):(a=n,(e!==0||(i&3)!==0)&&(xi=!0)),n=l}nl(e)}function f0(e,s){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var u=31-je(i),h=1<<u,y=l[u];y===-1?((h&a)===0||(h&n)!==0)&&(l[u]=Os(h,s)):y<=s&&(e.expiredLanes|=h),i&=~h}if(s=Pe,a=Re,a=Ve(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===s&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&St(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ss(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(n!==null&&St(n),ke(a)){case 2:case 8:a=ka;break;case 32:a=Es;break;case 268435456:a=ds;break;default:a=Es}return n=p0.bind(null,e),a=at(a,n),e.callbackPriority=s,e.callbackNode=a,s}return n!==null&&n!==null&&St(n),e.callbackPriority=2,e.callbackNode=null,2}function p0(e,s){if(yt!==0&&yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ui()&&e.callbackNode!==a)return null;var n=Re;return n=Ve(e,e===Pe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Pu(e,n,s),f0(e,Ct()),e.callbackNode!=null&&e.callbackNode===a?p0.bind(null,e):null)}function b0(e,s){if(ui())return null;Pu(e,s,!0)}function ah(){xh(function(){(Ze&6)!==0?at(ta,sh):g0()})}function Cc(){return va===0&&(va=jn()),va}function v0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Sl(""+e)}function j0(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function nh(e,s,a,n,l){if(s==="submit"&&a&&a.stateNode===l){var i=v0((l[ut]||null).action),u=n.submitter;u&&(s=(s=u[ut]||null)?v0(s.formAction):u.getAttribute("formAction"),s!==null&&(i=s,u=null));var h=new Tl("action","action",null,n,l);e.push({event:h,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(va!==0){var y=u?j0(l,u):new FormData(l);Yr(a,{pending:!0,data:y,method:l.method,action:i},null,y)}}else typeof i=="function"&&(h.preventDefault(),y=u?j0(l,u):new FormData(l),Yr(a,{pending:!0,data:y,method:l.method,action:i},i,y))},currentTarget:l}]})}}for(var Ac=0;Ac<ur.length;Ac++){var Tc=ur[Ac],lh=Tc.toLowerCase(),ih=Tc[0].toUpperCase()+Tc.slice(1);Jt(lh,"on"+ih)}Jt(Po,"onAnimationEnd"),Jt(ed,"onAnimationIteration"),Jt(td,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(wx,"onTransitionRun"),Jt(Sx,"onTransitionStart"),Jt(kx,"onTransitionCancel"),Jt(sd,"onTransitionEnd"),za("onMouseEnter",["mouseout","mouseover"]),za("onMouseLeave",["mouseout","mouseover"]),za("onPointerEnter",["pointerout","pointerover"]),za("onPointerLeave",["pointerout","pointerover"]),aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function y0(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var u=n.length-1;0<=u;u--){var h=n[u],y=h.instance,$=h.currentTarget;if(h=h.listener,y!==i&&l.isPropagationStopped())break e;i=h,l.currentTarget=$;try{i(l)}catch(Q){ei(Q)}l.currentTarget=null,i=y}else for(u=0;u<n.length;u++){if(h=n[u],y=h.instance,$=h.currentTarget,h=h.listener,y!==i&&l.isPropagationStopped())break e;i=h,l.currentTarget=$;try{i(l)}catch(Q){ei(Q)}l.currentTarget=null,i=y}}}}function Be(e,s){var a=s[Aa];a===void 0&&(a=s[Aa]=new Set);var n=e+"__bubble";a.has(n)||(N0(s,e,2,!1),a.add(n))}function Mc(e,s,a){var n=0;s&&(n|=4),N0(a,e,n,s)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Ec(e){if(!e[hi]){e[hi]=!0,go.forEach(function(a){a!=="selectionchange"&&(rh.has(a)||Mc(a,!1,e),Mc(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[hi]||(s[hi]=!0,Mc("selectionchange",!1,s))}}function N0(e,s,a,n){switch(Y0(s)){case 2:var l=Dh;break;case 8:l=Bh;break;default:l=Vc}a=l.bind(null,s,a,e),l=void 0,!Fi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(s,a,{capture:!0,passive:l}):e.addEventListener(s,a,!0):l!==void 0?e.addEventListener(s,a,{passive:l}):e.addEventListener(s,a,!1)}function zc(e,s,a,n,l){var i=n;if((s&1)===0&&(s&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var h=n.stateNode.containerInfo;if(h===l)break;if(u===4)for(u=n.return;u!==null;){var y=u.tag;if((y===3||y===4)&&u.stateNode.containerInfo===l)return;u=u.return}for(;h!==null;){if(u=Ta(h),u===null)return;if(y=u.tag,y===5||y===6||y===26||y===27){n=i=u;continue e}h=h.parentNode}}n=n.return}Mo(function(){var $=i,Q=Ji(a),I=[];e:{var R=ad.get(e);if(R!==void 0){var q=Tl,Ce=e;switch(e){case"keypress":if(Cl(a)===0)break e;case"keydown":case"keyup":q=tx;break;case"focusin":Ce="focus",q=sr;break;case"focusout":Ce="blur",q=sr;break;case"beforeblur":case"afterblur":q=sr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=nx;break;case Po:case ed:case td:q=Ym;break;case sd:q=ix;break;case"scroll":case"scrollend":q=_m;break;case"wheel":q=cx;break;case"copy":case"cut":case"paste":q=Km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Do;break;case"toggle":case"beforetoggle":q=dx}var we=(s&4)!==0,Je=!we&&(e==="scroll"||e==="scrollend"),M=we?R!==null?R+"Capture":null:R;we=[];for(var C=$,D;C!==null;){var Z=C;if(D=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||D===null||M===null||(Z=Sn(C,M),Z!=null&&we.push(il(C,Z,D))),Je)break;C=C.return}0<we.length&&(R=new q(R,Ce,null,a,Q),I.push({event:R,listeners:we}))}}if((s&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",R&&a!==Xi&&(Ce=a.relatedTarget||a.fromElement)&&(Ta(Ce)||Ce[xs]))break e;if((q||R)&&(R=Q.window===Q?Q:(R=Q.ownerDocument)?R.defaultView||R.parentWindow:window,q?(Ce=a.relatedTarget||a.toElement,q=$,Ce=Ce?Ta(Ce):null,Ce!==null&&(Je=x(Ce),we=Ce.tag,Ce!==Je||we!==5&&we!==27&&we!==6)&&(Ce=null)):(q=null,Ce=$),q!==Ce)){if(we=Oo,Z="onMouseLeave",M="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(we=Do,Z="onPointerLeave",M="onPointerEnter",C="pointer"),Je=q==null?R:wn(q),D=Ce==null?R:wn(Ce),R=new we(Z,C+"leave",q,a,Q),R.target=Je,R.relatedTarget=D,Z=null,Ta(Q)===$&&(we=new we(M,C+"enter",Ce,a,Q),we.target=D,we.relatedTarget=Je,Z=we),Je=Z,q&&Ce)t:{for(we=q,M=Ce,C=0,D=we;D;D=on(D))C++;for(D=0,Z=M;Z;Z=on(Z))D++;for(;0<C-D;)we=on(we),C--;for(;0<D-C;)M=on(M),D--;for(;C--;){if(we===M||M!==null&&we===M.alternate)break t;we=on(we),M=on(M)}we=null}else we=null;q!==null&&w0(I,R,q,we,!1),Ce!==null&&Je!==null&&w0(I,Je,Ce,we,!0)}}e:{if(R=$?wn($):window,q=R.nodeName&&R.nodeName.toLowerCase(),q==="select"||q==="input"&&R.type==="file")var be=Qo;else if(Ho(R))if(Go)be=jx;else{be=bx;var Le=px}else q=R.nodeName,!q||q.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?$&&Ki($.elementType)&&(be=Qo):be=vx;if(be&&(be=be(e,$))){_o(I,be,a,Q);break e}Le&&Le(e,R,$),e==="focusout"&&$&&R.type==="number"&&$.memoizedProps.value!=null&&Ii(R,"number",R.value)}switch(Le=$?wn($):window,e){case"focusin":(Ho(Le)||Le.contentEditable==="true")&&(qa=Le,cr=$,On=null);break;case"focusout":On=cr=qa=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,Wo(I,a,Q);break;case"selectionchange":if(Nx)break;case"keydown":case"keyup":Wo(I,a,Q)}var ye;if(nr)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ra?qo(e,a)&&(Se="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Bo&&a.locale!=="ko"&&(Ra||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ra&&(ye=Eo()):(Ls=Q,Pi="value"in Ls?Ls.value:Ls.textContent,Ra=!0)),Le=gi($,Se),0<Le.length&&(Se=new Lo(Se,e,null,a,Q),I.push({event:Se,listeners:Le}),ye?Se.data=ye:(ye=Uo(a),ye!==null&&(Se.data=ye)))),(ye=mx?xx(e,a):hx(e,a))&&(Se=gi($,"onBeforeInput"),0<Se.length&&(Le=new Lo("onBeforeInput","beforeinput",null,a,Q),I.push({event:Le,listeners:Se}),Le.data=ye)),nh(I,e,$,a,Q)}y0(I,s)})}function il(e,s,a){return{instance:e,listener:s,currentTarget:a}}function gi(e,s){for(var a=s+"Capture",n=[];e!==null;){var l=e,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=Sn(e,a),l!=null&&n.unshift(il(e,l,i)),l=Sn(e,s),l!=null&&n.push(il(e,l,i))),e.tag===3)return n;e=e.return}return[]}function on(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function w0(e,s,a,n,l){for(var i=s._reactName,u=[];a!==null&&a!==n;){var h=a,y=h.alternate,$=h.stateNode;if(h=h.tag,y!==null&&y===n)break;h!==5&&h!==26&&h!==27||$===null||(y=$,l?($=Sn(a,i),$!=null&&u.unshift(il(a,$,y))):l||($=Sn(a,i),$!=null&&u.push(il(a,$,y)))),a=a.return}u.length!==0&&e.push({event:s,listeners:u})}var ch=/\r\n?/g,oh=/\u0000|\uFFFD/g;function S0(e){return(typeof e=="string"?e:""+e).replace(ch,`
`).replace(oh,"")}function k0(e,s){return s=S0(s),S0(e)===s}function fi(){}function Xe(e,s,a,n,l,i){switch(a){case"children":typeof n=="string"?s==="body"||s==="textarea"&&n===""||Da(e,n):(typeof n=="number"||typeof n=="bigint")&&s!=="body"&&Da(e,""+n);break;case"className":yl(e,"class",n);break;case"tabIndex":yl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":yl(e,a,n);break;case"style":Ao(e,n,i);break;case"data":if(s!=="object"){yl(e,"data",n);break}case"src":case"href":if(n===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Sl(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(s!=="input"&&Xe(e,s,"name",l.name,l,null),Xe(e,s,"formEncType",l.formEncType,l,null),Xe(e,s,"formMethod",l.formMethod,l,null),Xe(e,s,"formTarget",l.formTarget,l,null)):(Xe(e,s,"encType",l.encType,l,null),Xe(e,s,"method",l.method,l,null),Xe(e,s,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Sl(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=fi);break;case"onScroll":n!=null&&Be("scroll",e);break;case"onScrollEnd":n!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Sl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Be("beforetoggle",e),Be("toggle",e),jl(e,"popover",n);break;case"xlinkActuate":hs(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":hs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":hs(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":hs(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":hs(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":hs(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":hs(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":hs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":hs(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":jl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Um.get(a)||a,jl(e,a,n))}}function Oc(e,s,a,n,l,i){switch(a){case"style":Ao(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Da(e,n):(typeof n=="number"||typeof n=="bigint")&&Da(e,""+n);break;case"onScroll":n!=null&&Be("scroll",e);break;case"onScrollEnd":n!=null&&Be("scrollend",e);break;case"onClick":n!=null&&(e.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),s=a.slice(2,l?a.length-7:void 0),i=e[ut]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(s,i,l),typeof n=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):jl(e,a,n)}}}function Nt(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var n=!1,l=!1,i;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];if(u!=null)switch(i){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(e,s,i,u,a,null)}}l&&Xe(e,s,"srcSet",a.srcSet,a,null),n&&Xe(e,s,"src",a.src,a,null);return;case"input":Be("invalid",e);var h=i=u=l=null,y=null,$=null;for(n in a)if(a.hasOwnProperty(n)){var Q=a[n];if(Q!=null)switch(n){case"name":l=Q;break;case"type":u=Q;break;case"checked":y=Q;break;case"defaultChecked":$=Q;break;case"value":i=Q;break;case"defaultValue":h=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,s));break;default:Xe(e,s,n,Q,a,null)}}wo(e,i,h,y,$,u,l,!1),Nl(e);return;case"select":Be("invalid",e),n=u=i=null;for(l in a)if(a.hasOwnProperty(l)&&(h=a[l],h!=null))switch(l){case"value":i=h;break;case"defaultValue":u=h;break;case"multiple":n=h;default:Xe(e,s,l,h,a,null)}s=i,a=u,e.multiple=!!n,s!=null?La(e,!!n,s,!1):a!=null&&La(e,!!n,a,!0);return;case"textarea":Be("invalid",e),i=l=n=null;for(u in a)if(a.hasOwnProperty(u)&&(h=a[u],h!=null))switch(u){case"value":n=h;break;case"defaultValue":l=h;break;case"children":i=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:Xe(e,s,u,h,a,null)}ko(e,n,l,i),Nl(e);return;case"option":for(y in a)if(a.hasOwnProperty(y)&&(n=a[y],n!=null))switch(y){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Xe(e,s,y,n,a,null)}return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(n=0;n<ll.length;n++)Be(ll[n],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(n=a[$],n!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(e,s,$,n,a,null)}return;default:if(Ki(s)){for(Q in a)a.hasOwnProperty(Q)&&(n=a[Q],n!==void 0&&Oc(e,s,Q,n,a,void 0));return}}for(h in a)a.hasOwnProperty(h)&&(n=a[h],n!=null&&Xe(e,s,h,n,a,null))}function dh(e,s,a,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,u=null,h=null,y=null,$=null,Q=null;for(q in a){var I=a[q];if(a.hasOwnProperty(q)&&I!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":y=I;default:n.hasOwnProperty(q)||Xe(e,s,q,null,n,I)}}for(var R in n){var q=n[R];if(I=a[R],n.hasOwnProperty(R)&&(q!=null||I!=null))switch(R){case"type":i=q;break;case"name":l=q;break;case"checked":$=q;break;case"defaultChecked":Q=q;break;case"value":u=q;break;case"defaultValue":h=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:q!==I&&Xe(e,s,R,q,n,I)}}Yi(e,u,h,y,$,Q,i,l);return;case"select":q=u=h=R=null;for(i in a)if(y=a[i],a.hasOwnProperty(i)&&y!=null)switch(i){case"value":break;case"multiple":q=y;default:n.hasOwnProperty(i)||Xe(e,s,i,null,n,y)}for(l in n)if(i=n[l],y=a[l],n.hasOwnProperty(l)&&(i!=null||y!=null))switch(l){case"value":R=i;break;case"defaultValue":h=i;break;case"multiple":u=i;default:i!==y&&Xe(e,s,l,i,n,y)}s=h,a=u,n=q,R!=null?La(e,!!a,R,!1):!!n!=!!a&&(s!=null?La(e,!!a,s,!0):La(e,!!a,a?[]:"",!1));return;case"textarea":q=R=null;for(h in a)if(l=a[h],a.hasOwnProperty(h)&&l!=null&&!n.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:Xe(e,s,h,null,n,l)}for(u in n)if(l=n[u],i=a[u],n.hasOwnProperty(u)&&(l!=null||i!=null))switch(u){case"value":R=l;break;case"defaultValue":q=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==i&&Xe(e,s,u,l,n,i)}So(e,R,q);return;case"option":for(var Ce in a)if(R=a[Ce],a.hasOwnProperty(Ce)&&R!=null&&!n.hasOwnProperty(Ce))switch(Ce){case"selected":e.selected=!1;break;default:Xe(e,s,Ce,null,n,R)}for(y in n)if(R=n[y],q=a[y],n.hasOwnProperty(y)&&R!==q&&(R!=null||q!=null))switch(y){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Xe(e,s,y,R,n,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)R=a[we],a.hasOwnProperty(we)&&R!=null&&!n.hasOwnProperty(we)&&Xe(e,s,we,null,n,R);for($ in n)if(R=n[$],q=a[$],n.hasOwnProperty($)&&R!==q&&(R!=null||q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(137,s));break;default:Xe(e,s,$,R,n,q)}return;default:if(Ki(s)){for(var Je in a)R=a[Je],a.hasOwnProperty(Je)&&R!==void 0&&!n.hasOwnProperty(Je)&&Oc(e,s,Je,void 0,n,R);for(Q in n)R=n[Q],q=a[Q],!n.hasOwnProperty(Q)||R===q||R===void 0&&q===void 0||Oc(e,s,Q,R,n,q);return}}for(var M in a)R=a[M],a.hasOwnProperty(M)&&R!=null&&!n.hasOwnProperty(M)&&Xe(e,s,M,null,n,R);for(I in n)R=n[I],q=a[I],!n.hasOwnProperty(I)||R===q||R==null&&q==null||Xe(e,s,I,R,n,q)}var Lc=null,Dc=null;function pi(e){return e.nodeType===9?e:e.ownerDocument}function C0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A0(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Bc(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $c=null;function uh(){var e=window.event;return e&&e.type==="popstate"?e===$c?!1:($c=e,!0):($c=null,!1)}var T0=typeof setTimeout=="function"?setTimeout:void 0,mh=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,xh=typeof queueMicrotask=="function"?queueMicrotask:typeof M0!="undefined"?function(e){return M0.resolve(null).then(e).catch(hh)}:T0;function hh(e){setTimeout(function(){throw e})}function Xs(e){return e==="head"}function E0(e,s){var a=s,n=0,l=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(0<n&&8>n){a=n;var u=e.ownerDocument;if(a&1&&rl(u.documentElement),a&2&&rl(u.body),a&4)for(a=u.head,rl(a),u=a.firstChild;u;){var h=u.nextSibling,y=u.nodeName;u[Nn]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=h}}if(l===0){e.removeChild(i),gl(s);return}l--}else a==="$"||a==="$?"||a==="$!"?l++:n=a.charCodeAt(0)-48;else n=0;a=i}while(a);gl(s)}function Rc(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Rc(a),Qi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function gh(e,s,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Nn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Ft(e.nextSibling),e===null)break}return null}function fh(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ft(e.nextSibling),e===null))return null;return e}function qc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ph(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var n=function(){s(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ft(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Uc=null;function z0(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function O0(e,s,a){switch(s=pi(a),e){case"html":if(e=s.documentElement,!e)throw Error(o(452));return e;case"head":if(e=s.head,!e)throw Error(o(453));return e;case"body":if(e=s.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function rl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Qi(e)}var Xt=new Map,L0=new Set;function bi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ts=B.d;B.d={f:bh,r:vh,D:jh,C:yh,L:Nh,m:wh,X:kh,S:Sh,M:Ch};function bh(){var e=Ts.f(),s=oi();return e||s}function vh(e){var s=Ma(e);s!==null&&s.tag===5&&s.type==="form"?Pd(s):Ts.r(e)}var dn=typeof document=="undefined"?null:document;function D0(e,s,a){var n=dn;if(n&&typeof s=="string"&&s){var l=Qt(s);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),L0.has(l)||(L0.add(l),e={rel:e,crossOrigin:a,href:s},n.querySelector(l)===null&&(s=n.createElement("link"),Nt(s,"link",e),ft(s),n.head.appendChild(s)))}}function jh(e){Ts.D(e),D0("dns-prefetch",e,null)}function yh(e,s){Ts.C(e,s),D0("preconnect",e,s)}function Nh(e,s,a){Ts.L(e,s,a);var n=dn;if(n&&e&&s){var l='link[rel="preload"][as="'+Qt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Qt(a.imageSizes)+'"]')):l+='[href="'+Qt(e)+'"]';var i=l;switch(s){case"style":i=un(e);break;case"script":i=mn(e)}Xt.has(i)||(e=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),Xt.set(i,e),n.querySelector(l)!==null||s==="style"&&n.querySelector(cl(i))||s==="script"&&n.querySelector(ol(i))||(s=n.createElement("link"),Nt(s,"link",e),ft(s),n.head.appendChild(s)))}}function wh(e,s){Ts.m(e,s);var a=dn;if(a&&e){var n=s&&typeof s.as=="string"?s.as:"script",l='link[rel="modulepreload"][as="'+Qt(n)+'"][href="'+Qt(e)+'"]',i=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=mn(e)}if(!Xt.has(i)&&(e=p({rel:"modulepreload",href:e},s),Xt.set(i,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ol(i)))return}n=a.createElement("link"),Nt(n,"link",e),ft(n),a.head.appendChild(n)}}}function Sh(e,s,a){Ts.S(e,s,a);var n=dn;if(n&&e){var l=Ea(n).hoistableStyles,i=un(e);s=s||"default";var u=l.get(i);if(!u){var h={loading:0,preload:null};if(u=n.querySelector(cl(i)))h.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":s},a),(a=Xt.get(i))&&Hc(e,a);var y=u=n.createElement("link");ft(y),Nt(y,"link",e),y._p=new Promise(function($,Q){y.onload=$,y.onerror=Q}),y.addEventListener("load",function(){h.loading|=1}),y.addEventListener("error",function(){h.loading|=2}),h.loading|=4,vi(u,s,n)}u={type:"stylesheet",instance:u,count:1,state:h},l.set(i,u)}}}function kh(e,s){Ts.X(e,s);var a=dn;if(a&&e){var n=Ea(a).hoistableScripts,l=mn(e),i=n.get(l);i||(i=a.querySelector(ol(l)),i||(e=p({src:e,async:!0},s),(s=Xt.get(l))&&_c(e,s),i=a.createElement("script"),ft(i),Nt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function Ch(e,s){Ts.M(e,s);var a=dn;if(a&&e){var n=Ea(a).hoistableScripts,l=mn(e),i=n.get(l);i||(i=a.querySelector(ol(l)),i||(e=p({src:e,async:!0,type:"module"},s),(s=Xt.get(l))&&_c(e,s),i=a.createElement("script"),ft(i),Nt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function B0(e,s,a,n){var l=(l=ee.current)?bi(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=un(a.href),a=Ea(l).hoistableStyles,n=a.get(s),n||(n={type:"style",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=un(a.href);var i=Ea(l).hoistableStyles,u=i.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,u),(i=l.querySelector(cl(e)))&&!i._p&&(u.instance=i,u.state.loading=5),Xt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(e,a),i||Ah(l,e,a,u.state))),s&&n===null)throw Error(o(528,""));return u}if(s&&n!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=mn(a),a=Ea(l).hoistableScripts,n=a.get(s),n||(n={type:"script",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function un(e){return'href="'+Qt(e)+'"'}function cl(e){return'link[rel="stylesheet"]['+e+"]"}function $0(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Ah(e,s,a,n){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?n.loading=1:(s=e.createElement("link"),n.preload=s,s.addEventListener("load",function(){return n.loading|=1}),s.addEventListener("error",function(){return n.loading|=2}),Nt(s,"link",a),ft(s),e.head.appendChild(s))}function mn(e){return'[src="'+Qt(e)+'"]'}function ol(e){return"script[async]"+e}function R0(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var n=e.querySelector('style[data-href~="'+Qt(a.href)+'"]');if(n)return s.instance=n,ft(n),n;var l=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ft(n),Nt(n,"style",l),vi(n,a.precedence,e),s.instance=n;case"stylesheet":l=un(a.href);var i=e.querySelector(cl(l));if(i)return s.state.loading|=4,s.instance=i,ft(i),i;n=$0(a),(l=Xt.get(l))&&Hc(n,l),i=(e.ownerDocument||e).createElement("link"),ft(i);var u=i;return u._p=new Promise(function(h,y){u.onload=h,u.onerror=y}),Nt(i,"link",n),s.state.loading|=4,vi(i,a.precedence,e),s.instance=i;case"script":return i=mn(a.src),(l=e.querySelector(ol(i)))?(s.instance=l,ft(l),l):(n=a,(l=Xt.get(i))&&(n=p({},a),_c(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),ft(l),Nt(l,"link",n),e.head.appendChild(l),s.instance=l);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(n=s.instance,s.state.loading|=4,vi(n,a.precedence,e));return s.instance}function vi(e,s,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,i=l,u=0;u<n.length;u++){var h=n[u];if(h.dataset.precedence===s)i=h;else if(i!==l)break}i?i.parentNode.insertBefore(e,i.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Hc(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function _c(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var ji=null;function q0(e,s,a){if(ji===null){var n=new Map,l=ji=new Map;l.set(a,n)}else l=ji,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var i=a[l];if(!(i[Nn]||i[_e]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var u=i.getAttribute(s)||"";u=e+u;var h=n.get(u);h?h.push(i):n.set(u,[i])}}return n}function U0(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function Th(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function H0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var dl=null;function Mh(){}function Eh(e,s,a){if(dl===null)throw Error(o(475));var n=dl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var l=un(a.href),i=e.querySelector(cl(l));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=yi.bind(n),e.then(n,n)),s.state.loading|=4,s.instance=i,ft(i);return}i=e.ownerDocument||e,a=$0(a),(l=Xt.get(l))&&Hc(a,l),i=i.createElement("link"),ft(i);var u=i;u._p=new Promise(function(h,y){u.onload=h,u.onerror=y}),Nt(i,"link",a),s.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(n.count++,s=yi.bind(n),e.addEventListener("load",s),e.addEventListener("error",s))}}function zh(){if(dl===null)throw Error(o(475));var e=dl;return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function yi(){if(this.count--,this.count===0){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ni=null;function Qc(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ni=new Map,s.forEach(Oh,e),Ni=null,yi.call(e))}function Oh(e,s){if(!(s.state.loading&4)){var a=Ni.get(e);if(a)var n=a.get(null);else{a=new Map,Ni.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var u=l[i];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(a.set(u.dataset.precedence,u),n=u)}n&&a.set(null,n)}l=s.instance,u=l.getAttribute("data-precedence"),i=a.get(u)||n,i===n&&a.set(null,l),a.set(u,l),this.count++,n=yi.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),i?i.parentNode.insertBefore(l,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),s.state.loading|=4}}var ul={$$typeof:F,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Lh(e,s,a,n,l,i,u,h){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.hiddenUpdates=Ca(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=h,this.incompleteTransitions=new Map}function _0(e,s,a,n,l,i,u,h,y,$,Q,I){return e=new Lh(e,s,a,u,h,y,$,I),s=1,i===!0&&(s|=24),i=Dt(3,null,null,s),e.current=i,i.stateNode=e,s=wr(),s.refCount++,e.pooledCache=s,s.refCount++,i.memoizedState={element:n,isDehydrated:a,cache:s},Ar(i),e}function Q0(e){return e?(e=Qa,e):Qa}function G0(e,s,a,n,l,i){l=Q0(l),n.context===null?n.context=l:n.pendingContext=l,n=$s(s),n.payload={element:a},i=i===void 0?null:i,i!==null&&(n.callback=i),a=Rs(e,n,s),a!==null&&(Ut(a,e,s),_n(a,e,s))}function V0(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function Gc(e,s){V0(e,s),(e=e.alternate)&&V0(e,s)}function Z0(e){if(e.tag===13){var s=_a(e,67108864);s!==null&&Ut(s,e,67108864),Gc(e,67108864)}}var wi=!0;function Dh(e,s,a,n){var l=N.T;N.T=null;var i=B.p;try{B.p=2,Vc(e,s,a,n)}finally{B.p=i,N.T=l}}function Bh(e,s,a,n){var l=N.T;N.T=null;var i=B.p;try{B.p=8,Vc(e,s,a,n)}finally{B.p=i,N.T=l}}function Vc(e,s,a,n){if(wi){var l=Zc(n);if(l===null)zc(e,s,n,Si,a),I0(e,n);else if(Rh(l,e,s,a,n))n.stopPropagation();else if(I0(e,n),s&4&&-1<$h.indexOf(e)){for(;l!==null;){var i=Ma(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var u=ms(i.pendingLanes);if(u!==0){var h=i;for(h.pendingLanes|=2,h.entangledLanes|=2;u;){var y=1<<31-je(u);h.entanglements[1]|=y,u&=~y}rs(i),(Ze&6)===0&&(ri=Ct()+500,nl(0))}}break;case 13:h=_a(i,2),h!==null&&Ut(h,i,2),oi(),Gc(i,2)}if(i=Zc(n),i===null&&zc(e,s,n,Si,a),i===l)break;l=i}l!==null&&n.stopPropagation()}else zc(e,s,n,null,a)}}function Zc(e){return e=Ji(e),Yc(e)}var Si=null;function Yc(e){if(Si=null,e=Ta(e),e!==null){var s=x(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=g(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Si=e,null}function Y0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case ta:return 2;case ka:return 8;case Es:case pn:return 32;case ds:return 268435456;default:return 32}default:return 32}}var Ic=!1,Js=null,Ws=null,Fs=null,ml=new Map,xl=new Map,Ps=[],$h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I0(e,s){switch(e){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":ml.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(s.pointerId)}}function hl(e,s,a,n,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:s,domEventName:a,eventSystemFlags:n,nativeEvent:i,targetContainers:[l]},s!==null&&(s=Ma(s),s!==null&&Z0(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),e)}function Rh(e,s,a,n,l){switch(s){case"focusin":return Js=hl(Js,e,s,a,n,l),!0;case"dragenter":return Ws=hl(Ws,e,s,a,n,l),!0;case"mouseover":return Fs=hl(Fs,e,s,a,n,l),!0;case"pointerover":var i=l.pointerId;return ml.set(i,hl(ml.get(i)||null,e,s,a,n,l)),!0;case"gotpointercapture":return i=l.pointerId,xl.set(i,hl(xl.get(i)||null,e,s,a,n,l)),!0}return!1}function K0(e){var s=Ta(e.target);if(s!==null){var a=x(s);if(a!==null){if(s=a.tag,s===13){if(s=g(a),s!==null){e.blockedOn=s,$e(e.priority,function(){if(a.tag===13){var n=qt();n=ve(n);var l=_a(a,n);l!==null&&Ut(l,a,n),Gc(a,n)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ki(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=Zc(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Xi=n,a.target.dispatchEvent(n),Xi=null}else return s=Ma(a),s!==null&&Z0(s),e.blockedOn=a,!1;s.shift()}return!0}function X0(e,s,a){ki(e)&&a.delete(s)}function qh(){Ic=!1,Js!==null&&ki(Js)&&(Js=null),Ws!==null&&ki(Ws)&&(Ws=null),Fs!==null&&ki(Fs)&&(Fs=null),ml.forEach(X0),xl.forEach(X0)}function Ci(e,s){e.blockedOn===s&&(e.blockedOn=null,Ic||(Ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qh)))}var Ai=null;function J0(e){Ai!==e&&(Ai=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ai===e&&(Ai=null);for(var s=0;s<e.length;s+=3){var a=e[s],n=e[s+1],l=e[s+2];if(typeof n!="function"){if(Yc(n||a)===null)continue;break}var i=Ma(a);i!==null&&(e.splice(s,3),s-=3,Yr(i,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function gl(e){function s(y){return Ci(y,e)}Js!==null&&Ci(Js,e),Ws!==null&&Ci(Ws,e),Fs!==null&&Ci(Fs,e),ml.forEach(s),xl.forEach(s);for(var a=0;a<Ps.length;a++){var n=Ps[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ps.length&&(a=Ps[0],a.blockedOn===null);)K0(a),a.blockedOn===null&&Ps.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],i=a[n+1],u=l[ut]||null;if(typeof i=="function")u||J0(a);else if(u){var h=null;if(i&&i.hasAttribute("formAction")){if(l=i,u=i[ut]||null)h=u.formAction;else if(Yc(l)!==null)continue}else h=u.action;typeof h=="function"?a[n+1]=h:(a.splice(n,3),n-=3),J0(a)}}}function Kc(e){this._internalRoot=e}Ti.prototype.render=Kc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,n=qt();G0(a,n,e,s,null,null)},Ti.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;G0(e.current,2,null,e,null,null),oi(),s[xs]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var s=ze();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Ps.length&&s!==0&&s<Ps[a].priority;a++);Ps.splice(a,0,e),a===0&&K0(e)}};var W0=d.version;if(W0!=="19.1.0")throw Error(o(527,W0,"19.1.0"));B.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=f(s),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Uh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mi.isDisabled&&Mi.supportsFiber)try{us=Mi.inject(Uh),gt=Mi}catch(e){}}return fl.createRoot=function(e,s){if(!m(e))throw Error(o(299));var a=!1,n="",l=xu,i=hu,u=gu,h=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(l=s.onUncaughtError),s.onCaughtError!==void 0&&(i=s.onCaughtError),s.onRecoverableError!==void 0&&(u=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(h=s.unstable_transitionCallbacks)),s=_0(e,1,!1,null,null,a,n,l,i,u,h,null),e[xs]=s.current,Ec(e),new Kc(s)},fl.hydrateRoot=function(e,s,a){if(!m(e))throw Error(o(299));var n=!1,l="",i=xu,u=hu,h=gu,y=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(u=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(y=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),s=_0(e,1,!0,s,a!=null?a:null,n,l,i,u,h,y,$),s.context=Q0(null),a=s.current,n=qt(),n=ve(n),l=$s(n),l.callback=null,Rs(a,l,n),a=n,s.current.lanes=a,U(s,a),rs(s),e[xs]=s.current,Ec(e),new Ti(s)},fl.version="19.1.0",fl}var lm;function sg(){if(lm)return Xc.exports;lm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(d){console.error(d)}}return r(),Xc.exports=tg(),Xc.exports}var ag=sg();const ng=xm(ag);var ht=(r=>(r.Easy="easy",r.Normal="normal",r.Hard="hard",r))(ht||{});const gm={easy:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1},normal:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1},hard:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1}},ja={trueFalse:10,multipleChoice:10,fillInTheBlanks:10,sentenceScramble:10,memoryCardGame:2},Ie=(r,d)=>H(null,null,function*(){const c=new hm({apiKey:d}),o="gemini-2.5-flash";try{const m=yield c.models.generateContent({model:o,contents:r,config:{responseMimeType:"application/json"}});if(!m.text)throw new Error("AI  API ");let x=m.text.trim();const g=new RegExp("^```(\\w*)?\\s*\\n?(.*?)\\n?\\s*```$","s"),j=x.match(g);if(j&&j[2]&&(x=j[2].trim()),!x.startsWith("{")&&!x.startsWith("[")&&(x.includes("{")||x.includes("["))){const f=x.indexOf("{"),b=x.indexOf("[");let p=-1,k=-1;f!==-1&&(b===-1||f<b)?(p=f,k=x.lastIndexOf("}")):b!==-1&&(p=b,k=x.lastIndexOf("]")),p!==-1&&k!==-1&&k>p&&(x=x.substring(p,k+1))}try{return JSON.parse(x)}catch(f){throw console.error("AI  (JSON parse ):",m.text),new Error("AI  ( JSON)")}}catch(m){let x="";if(m instanceof Error&&(x+=`  ${m.message}`),m&&typeof m=="object"&&"message"in m){const g=m;g.message.includes("API key not valid")||g.message.includes("API_KEY_INVALID")?x="Gemini API ":g.message.includes("quota")||g.message.includes("RESOURCE_EXHAUSTED")?x=" API ":(g.message.toLowerCase().includes("json")||g.message.includes("Unexpected token"))&&(x="AI  ( JSON)")}throw new Error(x)}}),fm=(r,d)=>H(null,null,function*(){const c=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${r}".
    The objectives should be based on scaffolding theory and gamification, and written in the primary language of the topic.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${r}", 
        "description": "${r}...", 
        "teachingExample": "${r}..." 
      },
      { 
        "objective": "${r}", 
        "description": "...", 
        "teachingExample": "${r}..." 
      },
      { 
        "objective": "${r}", 
        "description": "${r}...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(c,d)}),lg=(r,d,c)=>H(null,null,function*(){const o=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(r),m=`
    Based on the following learning objectives: ${JSON.stringify(c)}
    Please break down the topic "${r}" into at least 3 (but more is better if appropriate) micro-units. For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    
    ${o?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5 (array of 3-5 teaching example sentences)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "A", 
        "details": "A...", 
        "teachingExample": "A...",
        "coreConcept": "...",
        "teachingSentences": ["1", "2", "3", "4", "5"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "A", "details": "A...", "teachingExample": "A..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(m,d)}),ig=(r,d,c)=>H(null,null,function*(){const o=`
    Based on the following learning objectives: ${JSON.stringify(c)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties students may have with "${r}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "",
        "clarification": "",
        "teachingExample": "",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "",
            "wrong": "", 
            "explanation": ""
          }
        ],
        "preventionStrategy": " - ",
        "correctionMethod": " - ",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    Requirements:
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on practical teaching guidance that educators can immediately apply
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(o,d)}),rg=(r,d,c)=>H(null,null,function*(){const o=`
    Based on the following learning objectives: ${JSON.stringify(c)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${r}".
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "1",
        "description": "1...",
        "objective": "1...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(o,d)}),cg=(r,d,c)=>H(null,null,function*(){const o=`
    Based on the following learning objectives: ${JSON.stringify(c)}
    Please generate quiz content for "${r}" in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame  1 pairs  5  */ },
      "hard": { /* same structure as easy, memoryCardGame  1 pairs  5  */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${r}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. Only output the JSON object, no explanation or extra text.
  `;return yield Ie(o,d)}),og=(r,d,c)=>H(null,null,function*(){const o=`
    Based on the following learning objectives: ${JSON.stringify(c)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${r}" (use English translation if topic is not English).
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${r}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${r}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(o,d)}),dg=(r,d,c)=>H(null,null,function*(){const o=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${r}" appropriate for learning level "${d.name}" (${d.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to the learner's level and capabilities described in: "${d.description}".
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${r}${d.name}", 
        "description": "${d.name}...", 
        "teachingExample": "..." 
      },
      { 
        "objective": "${r}${d.name}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      { 
        "objective": "${r}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(o,c)}),ug=(r,d,c,o)=>H(null,null,function*(){const m=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(r),x=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Please break down the topic "${r}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${d.name}" level learners (${d.description}). For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    The content depth and complexity should match the level description: "${d.description}".
    
    ${m?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5 (array of 3-5 teaching example sentences)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "${d.name}A", 
        "details": "A${d.name}...", 
        "teachingExample": "A...",
        "coreConcept": "...",
        "teachingSentences": ["1", "2", "3", "4", "5"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "${d.name}A", "details": "A${d.name}...", "teachingExample": "A..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(x,c)}),mg=(r,d,c,o)=>H(null,null,function*(){const m=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${d.name}" level learners (${d.description}) may have with "${r}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "${d.name}",
        "clarification": "${d.description}",
        "teachingExample": "",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "${d.name}",
            "wrong": "", 
            "explanation": ""
          }
        ],
        "preventionStrategy": "${d.name}",
        "correctionMethod": "",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    Requirements:
    - All content should be appropriate for "${d.description}"
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes at this level
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 level-appropriate targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on confusion points specific to "${d.name}" level: "${d.description}"
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(m,c)}),xg=(r,d,c,o)=>H(null,null,function*(){const m=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${r}" suitable for "${d.name}" level learners (${d.description}).
    Activities should match the complexity and capabilities described in: "${d.description}".
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "${d.name}1",
        "description": "1...",
        "objective": "1${d.name}...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(m,c)}),hg=(r,d,c,o)=>H(null,null,function*(){const m=`
    ${r}${d.name}(${d.description})
    ${JSON.stringify(o)}
    
    ${d.name}
    ${d.description}
    
     JSON 
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /*  easymemoryCardGame  1 pairs  5  */ },
      "hard": { /*  easymemoryCardGame  1 pairs  5  */ }
    }
    
     (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble) (easy, normal, hard)  5 
     memoryCardGame 1  "pairs"  5 ${r}/
     memoryCardGame  "instructions" 
     JSON 
  `;return yield Ie(m,c)}),gg=(r,d,c,o)=>H(null,null,function*(){const m=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${r}" (use English translation if topic is not English) appropriate for "${d.name}" level learners (${d.description}).
    Language complexity and vocabulary should match: "${d.description}".
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${r}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${r}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(m,c)}),pm=(r,d,c)=>H(null,null,function*(){const o=`
    Based on the topic "${r}" and learning objectives: ${JSON.stringify(c)}
    Please generate 3-4 learning levels that are specific to this topic. Each level should have a unique name, description, and order.
    The levels should progress from basic understanding to advanced mastery, tailored specifically to the subject matter.
    
    Output MUST be a valid JSON object with this exact structure:
    {
      "suggestedLevels": [
        {
          "id": "beginner",
          "name": "",
          "description": "${r}",
          "order": 1
        },
        {
          "id": "intermediate", 
          "name": "",
          "description": "${r}",
          "order": 2
        },
        {
          "id": "advanced",
          "name": "", 
          "description": "${r}",
          "order": 3
        }
      ],
      "defaultLevelId": "beginner"
    }
    
    Make sure to:
    1. Create level names and descriptions that are specific to the topic (not generic)
    2. Use appropriate terminology for the subject area
    3. Ensure descriptions explain what learners at each level can do
    4. Use the primary language of the topic for names and descriptions
    
    Do NOT include any explanation or extra text. Only output the JSON object.
  `;return yield Ie(o,d)}),fg=r=>{const d=["english","grammar","vocabulary","pronunciation","speaking","writing","reading","listening","conversation","toefl","ielts","toeic","english literature","business english","academic english","phrasal verbs","idioms","prepositions","tenses","articles","adjectives","adverbs","nouns","verbs","","","","","","","","","","","","","","","","","","","","","","","","",""],c=r.toLowerCase();return d.some(o=>c.includes(o.toLowerCase()))},pg=(r,d)=>H(null,null,function*(){if(!d)throw new Error("Gemini API ");const c=yield fm(r,d);return yield pm(r,d,c)}),bg=(r,d,c)=>H(null,null,function*(){if(!c)throw new Error("Gemini API ");const o=yield dg(r,d,c),[m,x,g,j,f,b]=yield Promise.all([ug(r,d,c,o),mg(r,d,c,o),xg(r,d,c,o),hg(r,d,c,o),gg(r,d,c,o),lo(r,c,o,d)]);return{learningObjectives:o,contentBreakdown:m,confusingPoints:x,classroomActivities:g,onlineInteractiveQuiz:j,englishConversation:f,writingPractice:b}}),vg=(r,d,c,o)=>H(null,null,function*(){if(!o)throw new Error("Gemini API ");const m=yield jg(r,d,c,o),[x,g,j,f,b,p]=yield Promise.all([yg(r,d,c,o,m),Ng(r,d,c,o,m),wg(r,d,c,o,m),Sg(r,d,c,o,m),kg(r,d,c,o,m),lo(r,o,m,d,c)]);return{learningObjectives:m,contentBreakdown:x,confusingPoints:g,classroomActivities:j,onlineInteractiveQuiz:f,englishConversation:b,writingPractice:p}}),jg=(r,d,c,o)=>H(null,null,function*(){const m=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${r}" appropriate for learning level "${d.name}" (${d.description}) and English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to both the learner's level and vocabulary constraints.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${c.wordCount} most common English words
    - Adjust language complexity to match ${c.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${r}${d.name}${c.wordCount}", 
        "description": "${d.name}${c.name}...", 
        "teachingExample": "${c.wordCount}..." 
      },
      { 
        "objective": "${r}${d.name}${c.name}", 
        "description": "...", 
        "teachingExample": "${c.wordCount}..." 
      },
      { 
        "objective": "${r}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(m,o)}),yg=(r,d,c,o,m)=>H(null,null,function*(){const x=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(r),g=`
    Based on the following learning objectives: ${JSON.stringify(m)}
    Please break down the topic "${r}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${d.name}" level learners (${d.description}) with English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${c.wordCount} most common English words
    - Teaching examples should match ${c.description}
    - Avoid complex words that exceed this vocabulary level
    - Sentence structures should be appropriate for ${c.name} learners
    
    ${x?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5${c.wordCount} (array of 3-5 teaching sentences using vocabulary within ${c.wordCount} words)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "${c.name}A", 
        "details": "A${c.wordCount}...", 
        "teachingExample": "A${c.name}...",
        "coreConcept": "...",
        "teachingSentences": ["Simple example 1", "Easy sentence 2", "Basic example 3"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "${c.name}A", "details": "A${c.wordCount}...", "teachingExample": "A${c.name}..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(g,o)}),Ng=(r,d,c,o,m)=>H(null,null,function*(){const x=`
    Based on the following learning objectives: ${JSON.stringify(m)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${d.name}" level learners (${d.description}) with English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}) may have with "${r}".
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All explanations must use vocabulary within the ${c.wordCount} most common English words
    - Examples should be appropriate for ${c.description}
    - Focus on confusion points that arise specifically at this vocabulary level
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "${c.name}",
        "clarification": "${c.wordCount}",
        "teachingExample": "${c.name}",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "${c.wordCount}",
            "wrong": "",
            "explanation": ""
          }
        ],
        "preventionStrategy": "${c.name}",
        "correctionMethod": "",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    All English content must stay within the ${c.wordCount} word vocabulary limit and match ${d.description}.
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(x,o)}),wg=(r,d,c,o,m)=>H(null,null,function*(){const x=`
    Based on the following learning objectives: ${JSON.stringify(m)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${r}" suitable for "${d.name}" level learners (${d.description}) with English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - Activity instructions must use vocabulary within the ${c.wordCount} most common English words
    - Activity content should match ${c.description}
    - Consider vocabulary limitations when designing complexity
    
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "${c.name}1",
        "description": "1${c.wordCount}...",
        "objective": "1${c.name}...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(x,o)}),Sg=(r,d,c,o,m)=>H(null,null,function*(){const x=`
    Based on the following learning objectives: ${JSON.stringify(m)}
    Please generate quiz content for "${r}" suitable for learning level "${d.name}" (${d.description}) and English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text in quiz questions, options, and examples must use vocabulary within the ${c.wordCount} most common English words
    - Sentence structures should be appropriate for ${c.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame  1 pairs  5  */ },
      "hard": { /* same structure as easy, memoryCardGame  1 pairs  5  */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${r}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. For English learning topics, limit English vocabulary to ${c.wordCount} most common words. Only output the JSON object, no explanation or extra text.
  `;return yield Ie(x,o)}),kg=(r,d,c,o,m)=>H(null,null,function*(){const x=`
    Based on the following learning objectives: ${JSON.stringify(m)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${r}" (use English translation if topic is not English) appropriate for "${d.name}" level learners (${d.description}) with English vocabulary level "${c.name}" (${c.wordCount} words: ${c.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS:
    - Use ONLY vocabulary within the ${c.wordCount} most common English words
    - Sentence structures must be appropriate for ${c.description}
    - Conversation complexity should match ${c.name} level
    - Avoid advanced vocabulary that exceeds this level
    - Keep sentences simple and clear for ${c.name} learners
    
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${r} using simple words for ${c.name} level." },
      { "speaker": "Speaker B", "line": "Great idea! What should we discuss first about ${r}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return yield Ie(x,o)}),Cg=(r,d)=>H(null,null,function*(){if(!d)throw new Error("Gemini API ");const c=yield fm(r,d),[o,m,x,g,j,f,b]=yield Promise.all([lg(r,d,c),ig(r,d,c),rg(r,d,c),cg(r,d,c),og(r,d,c),pm(r,d,c),lo(r,d,c)]);return{learningObjectives:c,contentBreakdown:o,confusingPoints:m,classroomActivities:x,onlineInteractiveQuiz:g,englishConversation:j,learningLevels:f,writingPractice:b}}),Ag=r=>{const d=c=>({trueFalse:Math.max(0,Math.min(c.trueFalse,ja.trueFalse)),multipleChoice:Math.max(0,Math.min(c.multipleChoice,ja.multipleChoice)),fillInTheBlanks:Math.max(0,Math.min(c.fillInTheBlanks,ja.fillInTheBlanks)),sentenceScramble:Math.max(0,Math.min(c.sentenceScramble,ja.sentenceScramble)),memoryCardGame:Math.max(0,Math.min(c.memoryCardGame,ja.memoryCardGame))});return{easy:d(r.easy),normal:d(r.normal),hard:d(r.hard)}},Tg=(r,d,c,o,m,x)=>H(null,null,function*(){const g=Ag(o),j=k=>H(null,null,function*(){const T=g[k];let v="";m&&(v=`${m.name} (${m.description}) `);let w="";x&&(w=`
      CRITICAL VOCABULARY CONSTRAINTS for English content:
      - All English text must use vocabulary within the ${x.wordCount} most common English words
      - Examples should be appropriate for ${x.description}
      `);const E=`
      Based on the following learning objectives: ${JSON.stringify(c)}
      Please generate ${v}quiz content for "${r}" with the following specific quantities:
      
      - True/False questions: ${T.trueFalse} questions
      - Multiple choice questions: ${T.multipleChoice} questions  
      - Fill in the blanks questions: ${T.fillInTheBlanks} questions
      - Sentence scramble questions: ${T.sentenceScramble} questions
      - Memory card game questions: ${T.memoryCardGame} questions
      
      ${w}
      
      Output MUST be a valid JSON object with this exact structure:
      {
        "trueFalse": [${T.trueFalse>0?`
          { "statement": "", "isTrue": true, "explanation": "" }
          //  ${T.trueFalse} `:"//  0 "}],
        "multipleChoice": [${T.multipleChoice>0?`
          { "question": "", "options": ["A", "B", "C", "D"], "correctAnswerIndex": 0 }
          //  ${T.multipleChoice} `:"//  0 "}],
        "fillInTheBlanks": [${T.fillInTheBlanks>0?`
          { "sentenceWithBlank": " ____ ", "correctAnswer": "" }
          //  ${T.fillInTheBlanks} `:"//  0 "}],
        "sentenceScramble": [${T.sentenceScramble>0?`
          { "originalSentence": "", "scrambledWords": ["", "", "", ""] }
          //  ${T.sentenceScramble} `:"//  0 "}],
        "memoryCardGame": [${T.memoryCardGame>0?`
          { "pairs": [{"question": "", "answer": ""}, ...], "instructions": "" }
          //  ${T.memoryCardGame}  5 `:"//  0 "}]
      }
      
      IMPORTANT: 
      - Generate EXACTLY the number of questions specified for each type (supports up to 10 questions for most types, 2 for memory card games)
      - If a question type is set to 0, provide an empty array []
      - For memoryCardGame, each question should contain at least 5 pairs in the "pairs" array
      - Maximum limits: trueFalse/multipleChoice/fillInTheBlanks/sentenceScramble up to 10 questions, memoryCardGame up to 2 questions
      - All text must be in the primary language of the topic
      - Do NOT include any explanation or extra text, only output the JSON object
    `;return yield Ie(E,d)}),[f,b,p]=yield Promise.all([j("easy"),j("normal"),j("hard")]);return{easy:f,normal:b,hard:p}}),Mg=(r,d,c,o,m,x)=>H(null,null,function*(){return yield Tg(r,d,c,o,m,x)}),lo=(r,d,c,o,m)=>H(null,null,function*(){const x=`
    Based on the topic "${r}" and learning objectives: ${JSON.stringify(c)}
    Generate 6 sentence-making practice prompts (2 easy, 2 normal, 2 hard difficulty).
    
    ${o?`The content should be suitable for "${o.name}" level learners (${o.description}).`:""}
    ${m?`
    VOCABULARY CONSTRAINTS for English content:
    - All instructions and keywords must use vocabulary within the ${m.wordCount} most common English words
    - Examples should be appropriate for ${m.description}
    `:""}
    
    Output MUST be a valid JSON array:
    [
      {
        "id": "sentence_1",
        "instruction": "",
        "keywords": ["1", "2", "3"],
        "exampleSentence": "",
        "hints": ["1", "2"],
        "difficulty": "easy"
      }
    ]
    
    Requirements:
    - Each prompt should include 2-4 keywords that must be used
    - Provide clear instructions in the primary language of the topic
    - Include helpful hints for sentence construction
    - Example sentences should demonstrate proper usage
    - Progressive difficulty from easy to hard
    
    Do NOT include explanation, only output the JSON array.
  `,g=`
    Based on the topic "${r}" and learning objectives: ${JSON.stringify(c)}
    Generate 6 writing practice prompts (2 easy, 2 normal, 2 hard difficulty).
    
    ${o?`The content should be suitable for "${o.name}" level learners (${o.description}).`:""}
    ${m?`
    VOCABULARY CONSTRAINTS for English content:
    - All instructions and suggested keywords must use vocabulary within the ${m.wordCount} most common English words
    - Writing requirements should match ${m.description}
    `:""}
    
    Output MUST be a valid JSON array:
    [
      {
        "id": "writing_1", 
        "title": "",
        "instruction": "",
        "structure": ["1", "2", "3"],
        "keywords": ["1", "2"],
        "minLength": 100,
        "maxLength": 300,
        "exampleOutline": "",
        "difficulty": "easy"
      }
    ]
    
    Requirements:
    - Easy: 100-200 words, simple structure
    - Normal: 200-400 words, moderate complexity  
    - Hard: 300-600 words, complex structure
    - Provide clear writing guidelines and structure suggestions
    - Include relevant vocabulary recommendations
    - All text in the primary language of the topic
    
    Do NOT include explanation, only output the JSON array.
  `,[j,f]=yield Promise.all([Ie(x,d),Ie(g,d)]);return{sentencePractice:j,writingPractice:f,instructions:"AI"}}),Eg=(r,d,c,o,m)=>H(null,null,function*(){const x=/[a-zA-Z]/.test(r),g=x?"English":"Chinese",j=`
    Please provide detailed feedback for this ${d} practice work:
    
    Original Prompt: ${JSON.stringify(c)}
    Student Work: "${r}"
    
    ${m&&x?`
    VOCABULARY LEVEL CONTEXT:
    - Target level: ${m.name} (${m.wordCount} words: ${m.description})
    - Evaluate if vocabulary usage matches this level
    `:""}
    
    Provide comprehensive feedback in JSON format:
    {
      "score": 85,
      "strengths": ["1", "2"],
      "improvements": ["1", "2"],
      "grammarCorrections": [
        {
          "original": "",
          "corrected": "", 
          "explanation": ""
        }
      ],
      "vocabularyTips": ["1", "2"],
      "structureFeedback": "",
      "overallComment": ""
    }
    
    Evaluation Criteria:
    - Content relevance and completion of requirements
    - Grammar and language accuracy
    - Vocabulary usage and variety
    - Structure and organization (for writing)
    - Creativity and expression
    
    ${d==="sentence"?`
    For sentence practice:
    - Check if required keywords are used correctly
    - Evaluate sentence structure and grammar
    - Assess creativity in sentence construction
    `:`
    For writing practice:
    - Evaluate if word count requirements are met
    - Assess paragraph structure and flow
    - Check adherence to suggested outline
    - Evaluate argument development and coherence
    `}
    
    Provide feedback in Traditional Chinese for better understanding.
    Be encouraging and constructive. Score range: 0-100.
    
    Do NOT include explanation, only output the JSON object.
  `;return yield Ie(j,o)}),zi=(r,d)=>H(null,null,function*(){const c=`
    Transform the following teacher-oriented learning objective into student-friendly, engaging content suitable for interactive learning:
    
    Original Learning Objective:
    ${JSON.stringify(r)}
    
    Transform it into student-centered language that:
    1. Uses "" (you) instead of "" (students)
    2. Makes it personally relevant and motivating
    3. Explains WHY this learning is important to the student
    4. Uses encouraging, accessible language
    5. Includes concrete examples that students can relate to
    6. Makes the learning goal feel achievable and exciting
    
    Output MUST be a valid JSON object with this structure:
    {
      "objective": "",
      "description": "",
      "teachingExample": "",
      "personalRelevance": "",
      "encouragement": ""
    }
    
    Make the content engaging, personal, and motivational. Use Traditional Chinese.
    Do NOT include any explanation or extra text. Only output the JSON object.
  `;return yield Ie(c,d)}),Oi=(r,d)=>H(null,null,function*(){const c=`
    Transform the following teacher-oriented content breakdown into student-friendly, digestible learning content:
    
    Original Content Breakdown:
    ${JSON.stringify(r)}
    
    Transform it into student-centered content that:
    1. Uses conversational, friendly tone
    2. Explains concepts in simple, relatable terms
    3. Connects to real-world applications students care about
    4. Includes step-by-step learning guidance
    5. Makes complex topics feel approachable
    6. Uses analogies and examples from student life
    
    Output MUST be a valid JSON object with this structure:
    {
      "title": "",
      "introduction": "",
      "keyPoints": ["1", "2", "3"],
      "realLifeExamples": ["1", "2", "3"],
      "learningTips": "",
      "nextSteps": "",
      "encouragement": ""
    }
    
    Make the content feel like a friendly tutor explaining concepts personally to the student.
    Use Traditional Chinese. Do NOT include any explanation or extra text. Only output the JSON object.
  `;return yield Ie(c,d)}),Li=(r,d)=>H(null,null,function*(){const c=`
    Transform the following teacher-oriented confusing point analysis into student-friendly, helpful guidance:
    
    Original Confusing Point:
    ${JSON.stringify(r)}
    
    Transform it into student-centered guidance that:
    1. Acknowledges that confusion is normal and okay
    2. Explains the common mistake without making students feel bad
    3. Provides clear, memorable strategies to avoid the mistake
    4. Uses positive, encouraging language
    5. Includes memorable tricks or mnemonics
    6. Shows both wrong and right examples in a supportive way
    
    Output MUST be a valid JSON object with this structure:
    {
      "title": "",
      "normalizeConfusion": "",
      "commonMistake": "",
      "whyItHappens": "",
      "clearExplanation": "",
      "rememberingTricks": ["1", "2", "3"],
      "practiceExamples": [
        {
          "situation": "",
          "wrongThinking": "",
          "rightThinking": "",
          "explanation": ""
        }
      ],
      "confidenceBooster": ""
    }
    
    Make the content supportive and empowering, helping students learn from mistakes without judgment.
    Use Traditional Chinese. Do NOT include any explanation or extra text. Only output the JSON object.
  `;return yield Ie(c,d)}),zg=r=>{const d=[];for(const c of r){if(!c.pairs||!Array.isArray(c.pairs))continue;const o=c.pairs.map(f=>{var b;return(b=f.left)==null?void 0:b.toLowerCase().trim()}).filter(Boolean),m=c.pairs.map(f=>{var b;return(b=f.right)==null?void 0:b.toLowerCase().trim()}).filter(Boolean),x=o.filter((f,b)=>o.indexOf(f)!==b);x.length>0&&d.push(`: ${x.join(", ")}`);const g=m.filter((f,b)=>m.indexOf(f)!==b);g.length>0&&d.push(`: ${g.join(", ")}`);const j=o.filter(f=>m.includes(f));j.length>0&&d.push(`: ${j.join(", ")}`)}return{isValid:d.length===0,issues:d}},Og=(r,d,c,o)=>H(null,null,function*(){const m=`
    Based on the following transformed student-friendly content, generate quiz questions that help students practice and reinforce their understanding:
    
    Step Type: ${d}
    Content: ${JSON.stringify(r)}
    
    Generate EXACTLY the requested number of questions for each type:
    - True/False: ${o.trueFalse} questions
    - Multiple Choice: ${o.multipleChoice} questions  
    - Memory Card Game: ${o.memoryCardGame} pair set(s)
    
    Quiz Design Principles:
    1. Questions should directly test understanding of the content provided
    2. Use student-friendly language that matches the transformed content tone
    3. Make questions engaging and practical
    4. Include clear explanations for correct answers
    5. For memory card games, create concept-definition or question-answer pairs
    6. Avoid trick questions; focus on genuine comprehension
    
    CRITICAL for Memory Card Games:
    - Each "left" and "right" content must be COMPLETELY UNIQUE across all pairs
    - NO duplicate content on either left or right side
    - Each pair should test a different concept or knowledge point
    - Students should never be confused about which card matches which
    - All content in left column must be distinct from each other
    - All content in right column must be distinct from each other
    - Create clear, unambiguous one-to-one relationships
    
    Output MUST be a valid JSON object with this exact structure:
    {
      "trueFalse": [
        { 
          "statement": "...", 
          "isTrue": true, 
          "explanation": "/..."
        }
        // exactly ${o.trueFalse} items
      ],
      "multipleChoice": [
        { 
          "question": "...", 
          "options": ["A", "B", "C", "D"], 
          "correctAnswerIndex": 0,
          "explanation": "..."
        }
        // exactly ${o.multipleChoice} items
      ],
      "memoryCardGame": [
        {
          "title": "",
          "pairs": [
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" }
            // at least 5 pairs per game
          ]
        }
        // exactly ${o.memoryCardGame} games
      ]
    }
    
    All content should be in Traditional Chinese and directly related to the provided learning content.
    Make questions that genuinely help students practice and remember the key concepts.
    Do NOT include any explanation or extra text outside the JSON structure.
  `,x=yield Ie(m,c);if(x.memoryCardGame&&Array.isArray(x.memoryCardGame)){const g=zg(x.memoryCardGame);g.isValid||(console.warn(":",g.issues),x._validationWarnings=g.issues)}return x}),Lg=({topic:r,setTopic:d,onGenerate:c,onGenerateWithLevels:o,isLoading:m})=>{const x=j=>{j.preventDefault(),!m&&r.trim()&&c()},g=j=>{j.preventDefault(),!m&&r.trim()&&o&&o()};return t.jsxs("form",{onSubmit:x,className:"mb-8 p-6 bg-white shadow-lg rounded-xl",children:[t.jsx("label",{htmlFor:"topic-input",className:"block text-xl font-semibold text-slate-700 mb-3",children:""}),t.jsxs("div",{className:"flex flex-col space-y-3",children:[t.jsx("input",{id:"topic-input",type:"text",value:r,onChange:j=>d(j.target.value),placeholder:"JavaScript Promises",className:"w-full p-3 border border-slate-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-600 transition-shadow bg-slate-50 text-slate-800 placeholder-slate-500",disabled:m,"aria-label":""}),t.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[o&&t.jsx("button",{type:"button",onClick:g,disabled:m||!r.trim(),className:"flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center",children:m?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):" "}),t.jsx("button",{type:"submit",disabled:m||!r.trim(),className:"flex-1 px-6 py-3 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center","aria-live":"polite",children:m?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):" "})]}),o&&t.jsxs("div",{className:"text-sm text-slate-600 bg-slate-50 p-3 rounded-lg",children:[t.jsxs("p",{children:[t.jsx("strong",{children:" "})," "]}),t.jsxs("p",{children:[t.jsx("strong",{children:" "})," "]})]})]})]})},Ot=()=>t.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-sky-600"}),t.jsx("p",{className:"text-sky-700",children:"..."})]}),es=({title:r,icon:d,children:c,className:o})=>t.jsxs("div",{className:`bg-white shadow-lg rounded-xl p-6 mb-6 ${o||""}`,children:[t.jsxs("h2",{className:"text-2xl font-semibold text-sky-700 mb-4 flex items-center",children:[d&&t.jsx("span",{className:"mr-3 text-sky-600",children:d}),r]}),t.jsx("div",{className:"text-slate-700 space-y-3",children:c})]}),Hi=(r,d)=>H(null,null,function*(){const c=new hm({apiKey:d}),o="gemini-2.5-flash";try{const m=yield c.models.generateContent({model:o,contents:r,config:{responseMimeType:"application/json"}});if(!m.text)throw new Error("AI  API ");let x=m.text.trim();const g=new RegExp("^```(\\w*)?\\s*\\n?(.*?)\\n?\\s*```$","s"),j=x.match(g);if(j&&j[2]&&(x=j[2].trim()),!x.startsWith("{")&&!x.startsWith("[")&&(x.includes("{")||x.includes("["))){const f=x.indexOf("{"),b=x.indexOf("[");let p=-1,k=-1;f!==-1&&(b===-1||f<b)?(p=f,k=x.lastIndexOf("}")):b!==-1&&(p=b,k=x.lastIndexOf("]")),p!==-1&&k!==-1&&k>p&&(x=x.substring(p,k+1))}try{return JSON.parse(x)}catch(f){throw console.error("AI  (JSON parse ):",m.text),new Error("AI  ( JSON)")}}catch(m){let x="";throw m instanceof Error&&(x+=`  ${m.message}`),new Error(x)}}),Dg=r=>{const d=new Map;return r.forEach(c=>{d.has(c.questionType)||d.set(c.questionType,{questionType:c.questionType,totalQuestions:0,correctCount:0,accuracy:0,averageTime:0,commonErrors:[],difficultyBreakdown:{easy:{total:0,correct:0,accuracy:0},normal:{total:0,correct:0,accuracy:0},hard:{total:0,correct:0,accuracy:0}}})}),r.forEach(c=>{const o=d.get(c.questionType);o.totalQuestions++,c.isCorrect&&o.correctCount++;const m=o.difficultyBreakdown[c.difficulty];m.total++,c.isCorrect&&m.correct++,m.accuracy=m.total>0?Math.round(m.correct/m.total*100):0}),d.forEach(c=>{c.accuracy=c.totalQuestions>0?Math.round(c.correctCount/c.totalQuestions*100):0;const m=r.filter(x=>x.questionType===c.questionType).filter(x=>x.responseTime).map(x=>x.responseTime);c.averageTime=m.length>0?Math.round(m.reduce((x,g)=>x+g,0)/m.length):void 0}),Array.from(d.values())},bm=r=>{if(r.length===0)return 0;const d=r.filter(c=>c.isCorrect).length;return Math.round(d/r.length*100)},Bg=r=>r>=80?"advanced":r>=60?"intermediate":"beginner",$g=(r,d,c,o)=>H(null,null,function*(){const m=d.filter(b=>!b.isCorrect),x=d.filter(b=>b.isCorrect),g=m.map(b=>`
    : ${b.questionType}
    : ${b.difficulty}
    : ${JSON.stringify(b.userAnswer)}
    : ${JSON.stringify(b.correctAnswer)}
    : ${b.attempts||1}`).join(`
`),j=x.map(b=>`
    : ${b.questionType}
    : ${b.difficulty}
    : ${JSON.stringify(b.userAnswer)}`).join(`
`),f=`
    ${r}
    
    
    - ${x.length}
    - ${m.length}
    - ${Math.round(x.length/d.length*100)}%
    
    ${g}
    
    ${j}
    
     JSON 
    {
      "strengths": [
        {
          "area": "",
          "description": "",
          "level": "good|excellent|outstanding",
          "examples": [""],
          "leverageOpportunities": [""]
        }
      ],
      "weaknesses": [
        {
          "area": "",
          "description": "",
          "severity": "low|medium|high",
          "affectedTopics": [""],
          "recommendedActions": [""]
        }
      ],
      "learningStyle": "",
      "cognitivePattern": ""
    }
    
    
  `;try{return yield Hi(f,o)}catch(b){return console.error("AI :",b),{strengths:[],weaknesses:[],learningStyle:"",cognitivePattern:""}}}),Rg=(r,d,c,o,m,x)=>H(null,null,function*(){const g=`
    Generate personalized learning recommendations for a student based on their performance analysis.
    
    Context:
    - Topic: "${r}"
    - Overall Score: ${d}%
    - Learning Level: ${c}
    - Key Strengths: ${o.map(j=>j.area).join(", ")}
    - Areas for Improvement: ${m.map(j=>j.area).join(", ")}
    
    Please provide 3-5 personalized recommendations in the following JSON structure (no explanation, no extra text):
    {
      "recommendations": [
        {
          "category": "immediate|short-term|long-term",
          "priority": "high|medium|low",
          "title": "",
          "description": "",
          "actionSteps": ["1", "2"],
          "expectedOutcome": "",
          "estimatedTime": "",
          "resources": [""]
        }
      ]
    }
    
    Focus on actionable, specific recommendations that consider the student's current level and identified strengths/weaknesses.
    Respond in Traditional Chinese ().
  `;try{return(yield Hi(g,x)).recommendations||[]}catch(j){return console.error("AI :",j),[]}}),qg=(r,d,c,o,m,x,g,j,f)=>H(null,null,function*(){const p=((f==null?void 0:f.filter(T=>!T.isCorrect))||[]).map(T=>`
  - ${T.questionType} (: ${T.difficulty}): ${JSON.stringify(T.userAnswer)}${JSON.stringify(T.correctAnswer)}`).join(""),k=`
    ${r}
    
    
    - ${d}%
    - ${c}
    - ${m.map(T=>T.area).join("")}
    - ${x.map(T=>T.area).join("")}
    
    ${p}
    
     JSON 
    {
      "encouragementMessage": "",
      "keyStrengths": ["", "", ""],
      "improvementAreas": ["", ""],
      "nextSteps": ["", "", ""],
      "studyTips": ["", "", ""],
      "motivationalQuote": ""
    }
    
    
    
  `;try{const T=yield Hi(k,g);return{studentId:j,overallScore:d,overallLevel:c,encouragementMessage:T.encouragementMessage||"",keyStrengths:T.keyStrengths||[],improvementAreas:T.improvementAreas||[],nextSteps:T.nextSteps||[],studyTips:T.studyTips||[],motivationalQuote:T.motivationalQuote||""}}catch(T){return console.error("AI :",T),{studentId:j,overallScore:d,overallLevel:c,encouragementMessage:"",keyStrengths:["",""],improvementAreas:[""],nextSteps:["","",""],studyTips:["","",""],motivationalQuote:""}}}),Ug=(r,d,c,o,m,x,g)=>H(null,null,function*(){const f=((g==null?void 0:g.filter(p=>!p.isCorrect))||[]).map(p=>`
  - : ${p.questionType}, : ${p.difficulty}
    : ${JSON.stringify(p.userAnswer)}
    : ${JSON.stringify(p.correctAnswer)}
    : ${p.attempts||1}`).join(""),b=`
    ${r}
    
    
    - ${d}%
    - ${o.map(p=>p.area).join("")}
    - ${m.map(p=>p.area).join("")}
    - ${c.map(p=>`${p.questionType}: ${p.accuracy}%`).join("")}
    
    ${f}
    
     JSON 
    {
      "immediateInterventions": ["", ""],
      "instructionalStrategies": ["", "", ""],
      "differentiation": ["", ""],
      "parentGuidance": ["", ""]
    }
    
    
    
  `;try{const p=yield Hi(b,x);return{immediateInterventions:p.immediateInterventions||[],instructionalStrategies:p.instructionalStrategies||[],differentiation:p.differentiation||[],parentGuidance:p.parentGuidance||[]}}catch(p){return console.error("AI :",p),{immediateInterventions:[],instructionalStrategies:[],differentiation:[],parentGuidance:[]}}}),Hg=(o,m,...x)=>H(null,[o,m,...x],function*(r,d,c={includeDetailedAnalysis:!0,includeComparativeData:!1,includeVisualCharts:!1,language:"zh-TW",reportFormat:"standard"}){try{const g=Dg(r.responses),j=bm(r.responses),f=Bg(j),b=yield $g(r.topic,r.responses,g,d),p=yield Rg(r.topic,j,f,b.strengths,b.weaknesses,d),k=yield qg(r.topic,j,f,g,b.strengths,b.weaknesses,d,r.studentId,r.responses),T=yield Ug(r.topic,j,g,b.strengths,b.weaknesses,d,r.responses),v={studentId:r.studentId,assessmentDate:new Date().toISOString(),topic:r.topic,overallPerformance:{totalScore:j,level:f,timeSpent:r.endTime&&r.startTime?Math.round((new Date(r.endTime).getTime()-new Date(r.startTime).getTime())/6e4):0},performanceByType:g,learningAnalysis:b,teachingRecommendations:T,personalizedRecommendations:p,progressTracking:{keyMetrics:["","",""],checkpoints:["","",""],reassessmentSuggestion:" 2-3 "}};return{session:r,studentFeedback:k,teacherReport:v,rawData:{responses:r.responses,statistics:g}}}catch(g){throw console.error(":",g),new Error("")}}),$i=(r,d)=>({sessionId:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:d,topic:r,startTime:new Date().toISOString(),responses:[],isCompleted:!1,metadata:{userAgent:navigator.userAgent,deviceType:/Mobi|Android/i.test(navigator.userAgent)?"mobile":"desktop"}}),Di=r=>me(ie({},r),{endTime:new Date().toISOString(),isCompleted:!0}),to=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.31M8.25 18.75a12.064 12.064 0 0 0 7.5 0M12 6.75a2.25 2.25 0 1 1 0 4.5 2.25 2.5 0 0 1 0-4.5ZM12 6.75V3.75m0 3a12.022 12.022 0 0 0-5.483 1.348M12 6.75a12.022 12.022 0 0 1 5.483 1.348"})}),Ri=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V3.75m0 12.15V21"})}),pl=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 7.756a4.5 4.5 0 1 0 0 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),cs=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),wa=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ts=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),_g=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Zm3.75 11.625a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),Qg=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),Gg=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),Vg=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15c-1.13 0-2.25-.264-3.25-.73A4.505 4.505 0 0 1 5.25 9.75V8.25A6.75 6.75 0 0 1 12 1.5a6.75 6.75 0 0 1 6.75 6.75v1.5a4.505 4.505 0 0 1-3.5 4.52M12 15V8.25"})}),Zg=({className:r})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.254 9.254 9 9.563 9h4.874c.309 0 .563.254.563.563v4.874c0 .309-.254.563-.563.563H9.563A.562.562 0 0 1 9 14.437V9.564Z"})]}),so=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-2.184-2.183a1.724 1.724 0 0 0-1.235-.517H7.72c-1.137 0-2.1-.847-2.193-1.98A11.974 11.974 0 0 1 5.5 13H4.75a2.25 2.25 0 0 1-2.25-2.25V6.75a2.25 2.25 0 0 1 2.25-2.25h4.718c.468 0 .92.052 1.354.143L12 6l2.454-2.454L16.5 6h1.252a2.25 2.25 0 0 1 2.25 2.25v.233Z"})}),hn=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),ao=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Fc=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),Yg=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),qi=({className:r})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),im=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 1-4.243-4.243m4.242 4.242L9.88 9.88"})}),vm=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),Pc=({className:r})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),rm=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),Ig=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),ya=({className:r})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r||"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),io=({question:r,itemNumber:d,onAnswer:c})=>{const[o,m]=S.useState(null),[x,g]=S.useState(null),[j,f]=S.useState(0);S.useEffect(()=>{m(null),g(null),f(Date.now())},[r]);const b=p=>{m(p);const k=p===r.isTrue;let T=k?"":"";k||(T+=` ${r.isTrue?" (True)":" (False)"}`),g({isCorrect:k,message:T,explanation:r.explanation});const v=j>0?Date.now()-j:void 0;c&&c(p,k,v)};return t.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[t.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[d,". ",r.statement||"..."]}),t.jsxs("div",{className:"flex space-x-3 mb-3",children:[t.jsx("button",{onClick:()=>b(!0),className:`px-6 py-2 rounded-md font-medium transition-all
            ${o===!0?x!=null&&x.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":o===!0,disabled:x!==null,children:" (True)"}),t.jsx("button",{onClick:()=>b(!1),className:`px-6 py-2 rounded-md font-medium transition-all
            ${o===!1?x!=null&&x.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":o===!1,disabled:x!==null,children:" (False)"})]}),x&&t.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex flex-col items-start ${x.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[t.jsxs("div",{className:"flex items-center",children:[x.isCorrect?t.jsx(cs,{className:"w-5 h-5 mr-2"}):t.jsx(wa,{className:"w-5 h-5 mr-2"}),x.message]}),x.explanation&&t.jsx("p",{className:"mt-1 pl-7 text-xs italic",children:x.explanation})]})]})},ro=({question:r,itemNumber:d,onAnswer:c})=>{const[o,m]=S.useState(null),[x,g]=S.useState(null),[j,f]=S.useState(0);S.useEffect(()=>{m(null),g(null),f(Date.now())},[r]);const b=()=>{if(o===null){g({isCorrect:!1,message:""});return}const p=o===r.correctAnswerIndex;g({isCorrect:p,message:p?"":` ${(r.options||[])[r.correctAnswerIndex]||""}`});const k=j>0?Date.now()-j:void 0;c&&c(o,p,k)};return t.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[t.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[d,". ",r.question]}),t.jsx("div",{className:"space-y-2 mb-3",children:(r.options||[]).map((p,k)=>t.jsxs("label",{className:`flex items-center p-2 border rounded-md cursor-pointer hover:bg-sky-50 transition-colors ${o===k?"bg-sky-100 border-sky-500":"border-slate-300"} ${x!==null?"cursor-not-allowed opacity-70":""}`,children:[t.jsx("input",{type:"radio",name:`mcq-${d}-${r.question}`,value:k,checked:o===k,onChange:()=>{x===null&&m(k)},className:"mr-2 h-4 w-4 text-sky-600 focus:ring-sky-500 border-slate-400",disabled:x!==null}),p]},k))}),t.jsx("button",{onClick:b,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:x!==null||o===null,children:""}),x&&t.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${x.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[x.isCorrect?t.jsx(cs,{className:"w-5 h-5 mr-2"}):t.jsx(wa,{className:"w-5 h-5 mr-2"}),x.message]})]})},jm=({question:r,itemNumber:d,onAnswer:c})=>{var k;const[o,m]=S.useState(""),[x,g]=S.useState(null),[j,f]=S.useState(0);S.useEffect(()=>{m(""),g(null),f(Date.now())},[r]);const b=T=>{if(T.preventDefault(),!o.trim()){g({isCorrect:!1,message:""});return}const v=o.trim().toLowerCase()===r.correctAnswer.toLowerCase();g({isCorrect:v,message:v?"":` ${r.correctAnswer}`});const w=j>0?Date.now()-j:void 0;c&&c(o.trim(),v,w)},p=((k=r.sentenceWithBlank)==null?void 0:k.split("____"))||["",""];return t.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[t.jsxs("form",{onSubmit:b,className:"space-y-2",children:[t.jsxs("label",{htmlFor:`fillblank-${d}-${r.sentenceWithBlank}`,className:"font-medium text-slate-700 mb-1 block",children:[d,". ",p[0],t.jsx("input",{id:`fillblank-${d}-${r.sentenceWithBlank}`,type:"text",value:o,onChange:T=>{x===null&&m(T.target.value)},className:"mx-1 p-1 border-b-2 border-slate-400 focus:border-sky-500 outline-none w-24 sm:w-32 bg-transparent",placeholder:"",disabled:x!==null}),p[1]]}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:x!==null||!o.trim(),children:""})]}),x&&t.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${x.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[x.isCorrect?t.jsx(cs,{className:"w-5 h-5 mr-2"}):t.jsx(wa,{className:"w-5 h-5 mr-2"}),x.message]})]})},ym=({question:r,itemNumber:d,onAnswer:c})=>{const[o,m]=S.useState([]),[x,g]=S.useState([]),[j,f]=S.useState(null),[b,p]=S.useState(0);S.useEffect(()=>{const E=r.scrambledWords||[];g([...E].sort(()=>Math.random()-.5)),m([]),f(null),p(Date.now())},[r]);const k=(E,A)=>{m([...o,E]);const X=[...x];X.splice(A,1),g(X),j&&f(null)},T=(E,A)=>{g([...x,E]);const X=[...o];X.splice(A,1),m(X),j&&f(null)},v=()=>{const E=r.scrambledWords||[];g([...E].sort(()=>Math.random()-.5)),m([]),j&&f(null)},w=()=>{const E=o.join(" ").trim(),A=F=>F.toLowerCase().replace(/[.,!?;:]/g,"").replace(/\s+/g," ").trim(),X=A(E)===A(r.originalSentence);f({isCorrect:X,message:X?"":` "${r.originalSentence}"`});const oe=b>0?Date.now()-b:void 0;c&&c(E,X,oe)};return t.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[t.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[d,". "]}),t.jsx("div",{className:"mb-3 p-3 border border-dashed border-slate-400 rounded-md min-h-[40px] bg-white flex flex-wrap gap-2",children:o.length>0?o.map((E,A)=>t.jsx("button",{onClick:()=>T(E,A),className:"px-2 py-1 bg-sky-200 text-sky-800 rounded-md hover:bg-sky-300 transition-colors",children:E},`${E}-${A}-constructed`)):t.jsx("span",{className:"text-slate-400 italic",children:""})}),t.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:x.map((E,A)=>t.jsx("button",{onClick:()=>k(E,A),className:"px-2 py-1 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 transition-colors",children:E},`${E}-${A}-available`))}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:w,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors",children:""}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-slate-500 text-white rounded-md hover:bg-slate-600 transition-colors",children:""})]}),j&&t.jsxs("div",{className:`mt-3 p-2 rounded-md text-sm flex items-center ${j.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[j.isCorrect?t.jsx(cs,{className:"w-5 h-5 mr-2"}):t.jsx(wa,{className:"w-5 h-5 mr-2"}),j.message]})]})};function Kg(r){const d=[...r];for(let c=d.length-1;c>0;c--){const o=Math.floor(Math.random()*(c+1));[d[c],d[o]]=[d[o],d[c]]}return d}const co=({question:r,itemNumber:d,onAnswer:c})=>{const[o,m]=S.useState([]),[x,g]=S.useState([]),[j,f]=S.useState(0),[b,p]=S.useState(0),[k,T]=S.useState(!1),[v,w]=S.useState(0);S.useEffect(()=>{let X=0;const oe=(r.pairs||[]).flatMap((F,J)=>[{id:X++,content:F.left||F.question,pairId:J,isFlipped:!1,isMatched:!1},{id:X++,content:F.right||F.answer,pairId:J,isFlipped:!1,isMatched:!1}]);m(Kg(oe)),g([]),f(0),p(0),T(!1),w(Date.now())},[r]);const E=X=>{if(o[X].isFlipped||o[X].isMatched||x.length===2||k)return;const oe=o.map((J,fe)=>fe===X?me(ie({},J),{isFlipped:!0}):J),F=[...x,X];if(m(oe),g(F),F.length===2&&p(J=>J+1),F.length===2){const[J,fe]=F;oe[J].pairId===oe[fe].pairId?setTimeout(()=>{m(P=>P.map((z,_)=>_===J||_===fe?me(ie({},z),{isMatched:!0}):z)),g([]),f(P=>P+1)},600):setTimeout(()=>{m(P=>P.map((z,_)=>_===J||_===fe?me(ie({},z),{isFlipped:!1}):z)),g([])},900)}},A=j===(r.pairs||[]).length;return S.useEffect(()=>{if(A&&!k&&c){T(!0);const X=v>0?Date.now()-v:void 0;c(b,!0,X)}},[A,k,b,c,v]),t.jsxs("div",{className:"mb-4 p-4 border rounded bg-slate-50",children:[t.jsxs("div",{className:"font-semibold mb-2",children:[d,". "]}),r.instructions&&t.jsx("div",{className:"mb-2 text-sky-700 text-sm",children:r.instructions}),t.jsxs("div",{className:"mb-3 text-sm text-gray-600 flex justify-between items-center",children:[t.jsxs("span",{children:[": ",j,"/",(r.pairs||[]).length]}),t.jsxs("span",{children:[": ",b]}),A&&t.jsx("span",{className:"text-green-600 font-medium",children:" "})]}),t.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-xl mx-auto mb-2",children:o.map((X,oe)=>t.jsxs("button",{className:`relative h-20 w-full rounded shadow border transition-transform duration-200 ${X.isMatched?"bg-green-200 border-green-400":"bg-white border-slate-300"} ${X.isFlipped||X.isMatched?"":"hover:scale-105"}`,onClick:()=>E(oe),disabled:X.isFlipped||X.isMatched||x.length===2,style:{perspective:"600px"},children:[t.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-base font-medium transition-all duration-300 ${X.isFlipped||X.isMatched?"opacity-100 rotate-y-0":"opacity-0 rotate-y-180"}`,style:{backfaceVisibility:"hidden",transform:X.isFlipped||X.isMatched?"rotateY(0deg)":"rotateY(180deg)"},children:X.content}),t.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-2xl font-bold text-sky-600 transition-all duration-300 ${X.isFlipped||X.isMatched?"opacity-0 rotate-y-180":"opacity-100 rotate-y-0"}`,style:{backfaceVisibility:"hidden",transform:X.isFlipped||X.isMatched?"rotateY(180deg)":"rotateY(0deg)"},children:"?"})]},X.id))}),A&&t.jsx("div",{className:"text-green-600 font-semibold mt-2",children:""})]})},vl="https://api.jsonbin.io/v3/b",fn="$2a$10$0PieG5Wm.V.6svtN4PbaTuVxU4LY0nL2Vaz4N3g2aYlb0cL1NG4Qa";function Ui(r){return H(this,null,function*(){const c=yield(yield fetch(vl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":fn,"X-Bin-Private":"false"},body:JSON.stringify(r)})).json();if(!c||!c.metadata||!c.metadata.id)throw new Error(" jsonbin id");return c.metadata.id})}function _i(r){return H(this,null,function*(){const c=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}/latest`,{})).json();if(!c||!c.record)throw new Error("");return c.record})}function Xg(r){return H(this,null,function*(){const d={type:"quiz",quiz:r.quiz,topic:r.topic,apiKey:r.apiKey,metadata:r.metadata,createdAt:new Date().toISOString(),supportsDiagnostic:!!r.apiKey},o=yield(yield fetch(vl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":fn,"X-Bin-Private":"false"},body:JSON.stringify(d)})).json();if(!o||!o.metadata||!o.metadata.id)throw new Error("");return o.metadata.id})}function Jg(r){return H(this,null,function*(){const c=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}/latest`,{})).json();if(!c||!c.record)throw new Error("");const o=c.record;if(o.type!=="quiz")throw new Error("");return{quiz:o.quiz,topic:o.topic,apiKey:o.apiKey,supportsDiagnostic:o.supportsDiagnostic||!1,metadata:o.metadata}})}function Wg(r){return H(this,null,function*(){const d={type:"writing",writingPractice:r.writingPractice,topic:r.topic,metadata:r.metadata,createdAt:new Date().toISOString()},o=yield(yield fetch(vl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":fn,"X-Bin-Private":"false"},body:JSON.stringify(d)})).json();if(!o||!o.metadata||!o.metadata.id)throw new Error("");return o.metadata.id})}function Fg(r){return H(this,null,function*(){const c=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}/latest`,{})).json();if(!c||!c.record)throw new Error("");const o=c.record;if(o.type!=="writing")throw new Error("");return{writingPractice:o.writingPractice,topic:o.topic,metadata:o.metadata}})}function Pg(r){return H(this,null,function*(){const d=me(ie({type:"student-results"},r),{createdAt:new Date().toISOString()}),o=yield(yield fetch(vl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":fn,"X-Bin-Private":"false"},body:JSON.stringify(d)})).json();if(!o||!o.metadata||!o.metadata.id)throw new Error("");return o.metadata.id})}function Nm(r){return H(this,null,function*(){const c=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}/latest`,{})).json();if(!c||!c.record)throw new Error("");const o=c.record;if(o.type!=="student-results")throw new Error("");return{studentName:o.studentName,topic:o.topic,difficulty:o.difficulty,responses:o.responses,overallScore:o.overallScore,completedAt:o.completedAt,quizBinId:o.quizBinId,quizContent:o.quizContent,metadata:o.metadata,diagnosticReport:o.diagnosticReport}})}function ef(r,d){return H(this,null,function*(){const c=yield Nm(r),o=me(ie({},c),{diagnosticReport:me(ie({},d),{generatedAt:new Date().toISOString(),resultsBinId:r}),updatedAt:new Date().toISOString()}),m=ie({type:"student-results"},o),g=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":fn},body:JSON.stringify(m)})).json();if(!g||!g.metadata)throw new Error("")})}function wm(r){return H(this,null,function*(){const d={type:"conversation-practice",practice:r.practice,metadata:r.metadata,createdAt:new Date().toISOString()},o=yield(yield fetch(vl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":fn,"X-Bin-Private":"false"},body:JSON.stringify(d)})).json();if(!o||!o.metadata||!o.metadata.id)throw new Error("");return o.metadata.id})}function tf(r){return H(this,null,function*(){const c=yield(yield fetch(`https://api.jsonbin.io/v3/b/${r}/latest`,{})).json();if(!c||!c.record)throw new Error("");return c.record})}const sf=({feedback:r,onContinueLearning:d,onRetakeQuiz:c,showActions:o=!0})=>{const m=b=>b>=80?"text-green-600 bg-green-100":b>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",x=b=>b>=80?"border-green-200":b>=60?"border-yellow-200":"border-red-200",g=b=>{switch(b){case"advanced":return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25s4.544.16 6.75.471v1.515M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228V2.721A48.133 48.133 0 0 0 12 2.25c-2.291 0-4.544.16-6.75.471v1.515M7.73 9.728l3.75.814.97 4.286c.078.348.14.699.185 1.053m8.272-6.842-3.75.814-.97 4.286a24.216 24.216 0 0 1-.185 1.053M12 19.5a2.25 2.25 0 0 1-2.25-2.25V14.25m4.5 5.25a2.25 2.25 0 0 1 2.25-2.25V14.25"})});case"intermediate":return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-yellow-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})});default:return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443a55.381 55.381 0 0 1 5.25 2.882V15"})})}},j=b=>{switch(b){case"advanced":return"";case"intermediate":return"";default:return""}},f=b=>{switch(b){case"advanced":return"";case"intermediate":return"";default:return""}};return t.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl shadow-lg",children:[t.jsxs("div",{className:`text-center mb-8 p-6 bg-white rounded-lg shadow-md border-2 ${x(r.overallScore)}`,children:[t.jsxs("div",{className:"flex items-center justify-center mb-4",children:[g(r.overallLevel),t.jsx("div",{className:"ml-4",children:t.jsxs("div",{className:`text-4xl font-bold px-4 py-2 rounded-full ${m(r.overallScore)}`,children:[r.overallScore,""]})})]}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:j(r.overallLevel)}),t.jsx("p",{className:"text-lg text-gray-600",children:f(r.overallLevel)})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-blue-500",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-blue-500 mt-1 flex-shrink-0",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),t.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:r.encouragementMessage})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})})," "]}),r.keyStrengths.length>0?t.jsx("ul",{className:"space-y-3",children:r.keyStrengths.map((b,p)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-green-500 mt-1.5",children:""}),t.jsx("span",{className:"text-gray-700",children:b})]},p))}):t.jsx("p",{className:"text-gray-500 italic",children:""})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-orange-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})," "]}),r.improvementAreas.length>0?t.jsx("ul",{className:"space-y-3",children:r.improvementAreas.map((b,p)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-orange-500 mt-1.5",children:""}),t.jsx("span",{className:"text-gray-700",children:b})]},p))}):t.jsx("p",{className:"text-gray-500 italic",children:""})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-blue-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})})," "]}),r.nextSteps.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.nextSteps.map((b,p)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:p+1}),t.jsx("span",{className:"text-gray-700",children:b})]},p))}):t.jsx("p",{className:"text-gray-500 italic",children:""})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-md p-6 mb-6 border border-purple-200",children:[t.jsxs("h3",{className:"text-xl font-bold text-purple-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})," "]}),r.studyTips.length>0?t.jsx("ul",{className:"space-y-2",children:r.studyTips.map((b,p)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-purple-500 mt-1",children:""}),t.jsx("span",{className:"text-gray-700",children:b})]},p))}):t.jsx("p",{className:"text-gray-500 italic",children:""})]}),t.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg shadow-lg p-6 text-center text-white mb-6",children:[t.jsx("div",{className:"flex items-center justify-center mb-3",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})})}),t.jsxs("p",{className:"text-xl font-medium italic",children:['"',r.motivationalQuote,'"']})]}),o&&t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs("button",{onClick:d,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-2 font-medium",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12l-7.5 7.5M3 12h16.5"})}),""]}),t.jsxs("button",{onClick:c,className:"px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-2 font-medium",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]})]})]})},af=({report:r,onExportReport:d,onSaveReport:c,showExportOptions:o=!0})=>{const[m,x]=S.useState("overview"),g=v=>v>=80?"text-green-600 bg-green-50 border-green-200":v>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",j=v=>{switch(v){case"high":return"text-red-600 bg-red-100 border-red-200";case"medium":return"text-yellow-600 bg-yellow-100 border-yellow-200";case"low":return"text-blue-600 bg-blue-100 border-blue-200"}},f=v=>{switch(v){case"outstanding":return"text-purple-600 bg-purple-100 border-purple-200";case"excellent":return"text-green-600 bg-green-100 border-green-200";case"good":return"text-blue-600 bg-blue-100 border-blue-200"}},b=v=>{switch(v){case"high":return"text-red-600 bg-red-50 border-l-red-500";case"medium":return"text-yellow-600 bg-yellow-50 border-l-yellow-500";case"low":return"text-green-600 bg-green-50 border-l-green-500"}},p=v=>({trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""})[v]||v,k=v=>new Date(v).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=[{key:"overview",label:"",icon:""},{key:"performance",label:"",icon:""},{key:"analysis",label:"",icon:""},{key:"recommendations",label:"",icon:""},{key:"teaching",label:"",icon:""}];return t.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),t.jsxs("p",{className:"text-gray-600",children:["",t.jsx("span",{className:"font-semibold",children:r.topic})]}),t.jsxs("p",{className:"text-gray-600",children:["",k(r.assessmentDate)]}),r.studentId&&t.jsxs("p",{className:"text-gray-600",children:["ID",t.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:r.studentId})]})]}),o&&t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),""]}),t.jsxs("button",{onClick:d,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-blue-700 mb-1",children:""}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[r.overallPerformance.totalScore,""]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-purple-700 mb-1",children:""}),t.jsx("p",{className:"text-lg font-semibold text-purple-600 capitalize",children:r.overallPerformance.level})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-green-700 mb-1",children:""}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.learningAnalysis.strengths.length})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-700 mb-1",children:""}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.learningAnalysis.weaknesses.length})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:t.jsx("div",{className:"flex overflow-x-auto",children:T.map(v=>t.jsxs("button",{onClick:()=>x(v.key),className:`flex-shrink-0 px-6 py-4 font-medium text-sm border-b-2 transition-colors ${m===v.key?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx("span",{className:"mr-2",children:v.icon}),v.label]},v.key))})}),t.jsxs("div",{className:"space-y-6",children:[m==="overview"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:""}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsxs("span",{className:"font-semibold",children:[r.overallPerformance.totalScore,"/100"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"font-semibold capitalize",children:r.overallPerformance.level})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsxs("span",{className:"font-semibold",children:[r.overallPerformance.timeSpent," "]})]}),r.overallPerformance.percentile&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsxs("span",{className:"font-semibold",children:[" ",100-r.overallPerformance.percentile,"%"]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:""}),t.jsxs("div",{className:"space-y-3",children:[r.learningAnalysis.learningStyle&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"ml-2 font-semibold",children:r.learningAnalysis.learningStyle})]}),r.learningAnalysis.cognitivePattern&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"ml-2 font-semibold",children:r.learningAnalysis.cognitivePattern})]}),t.jsx("div",{className:"pt-2",children:t.jsx("p",{className:"text-sm text-gray-500",children:""})})]})]})]}),m==="performance"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:""}),t.jsx("div",{className:"space-y-6",children:r.performanceByType.map(v=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:p(v.questionType)}),t.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g(v.accuracy)}`,children:[v.accuracy,"% "]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:""}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:v.totalQuestions})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:""}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.correctCount})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:""}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.averageTime?`${Math.round(v.averageTime/1e3)}`:"N/A"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[t.jsx("p",{className:"text-xs text-green-700 font-medium",children:""}),t.jsxs("p",{className:"text-lg font-bold text-green-600",children:[v.difficultyBreakdown.easy.accuracy,"%"]}),t.jsxs("p",{className:"text-xs text-gray-600",children:[v.difficultyBreakdown.easy.correct,"/",v.difficultyBreakdown.easy.total]})]}),t.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[t.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:""}),t.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[v.difficultyBreakdown.normal.accuracy,"%"]}),t.jsxs("p",{className:"text-xs text-gray-600",children:[v.difficultyBreakdown.normal.correct,"/",v.difficultyBreakdown.normal.total]})]}),t.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg border border-red-200",children:[t.jsx("p",{className:"text-xs text-red-700 font-medium",children:""}),t.jsxs("p",{className:"text-lg font-bold text-red-600",children:[v.difficultyBreakdown.hard.accuracy,"%"]}),t.jsxs("p",{className:"text-xs text-gray-600",children:[v.difficultyBreakdown.hard.correct,"/",v.difficultyBreakdown.hard.total]})]})]}),v.commonErrors.length>0&&t.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:v.commonErrors.map((w,E)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-red-500 mt-1",children:""}),w]},E))})]})]},v.questionType))})]}),m==="analysis"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25s4.544.16 6.75.471v1.515M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228V2.721A48.133 48.133 0 0 0 12 2.25c-2.291 0-4.544.16-6.75.471v1.515M7.73 9.728l3.75.814.97 4.286c.078.348.14.699.185 1.053m8.272-6.842-3.75.814-.97 4.286a24.216 24.216 0 0 1-.185 1.053M12 19.5a2.25 2.25 0 0 1-2.25-2.25V14.25m4.5 5.25a2.25 2.25 0 0 1 2.25-2.25V14.25"})}),""]}),t.jsx("div",{className:"space-y-4",children:r.learningAnalysis.strengths.map((v,w)=>t.jsxs("div",{className:`p-4 rounded-lg border ${f(v.level)}`,children:[t.jsx("h4",{className:"font-semibold mb-2",children:v.area}),t.jsx("p",{className:"text-sm mb-3",children:v.description}),v.examples.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),t.jsx("ul",{className:"text-xs space-y-1",children:v.examples.map((E,A)=>t.jsxs("li",{className:"flex items-start gap-1",children:[t.jsx("span",{className:"text-green-500 mt-1",children:""}),E]},A))})]}),v.leverageOpportunities.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),t.jsx("ul",{className:"text-xs space-y-1",children:v.leverageOpportunities.map((E,A)=>t.jsxs("li",{className:"flex items-start gap-1",children:[t.jsx("span",{className:"text-blue-500 mt-1",children:""}),E]},A))})]})]},w))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-red-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),""]}),t.jsx("div",{className:"space-y-4",children:r.learningAnalysis.weaknesses.map((v,w)=>t.jsxs("div",{className:`p-4 rounded-lg border ${j(v.severity)}`,children:[t.jsx("h4",{className:"font-semibold mb-2",children:v.area}),t.jsx("p",{className:"text-sm mb-3",children:v.description}),v.affectedTopics.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:v.affectedTopics.map((E,A)=>t.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 rounded-full",children:E},A))})]}),v.recommendedActions.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),t.jsx("ul",{className:"text-xs space-y-1",children:v.recommendedActions.map((E,A)=>t.jsxs("li",{className:"flex items-start gap-1",children:[t.jsx("span",{className:"text-orange-500 mt-1",children:""}),E]},A))})]})]},w))})]})]}),m==="recommendations"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-blue-700 mb-6",children:""}),t.jsx("div",{className:"space-y-6",children:r.personalizedRecommendations.map((v,w)=>t.jsxs("div",{className:`p-6 rounded-lg border-l-4 ${b(v.priority)}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-1",children:v.title}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsx("span",{className:`px-2 py-1 rounded-full border ${v.category==="immediate"?"text-red-600 bg-red-100 border-red-200":v.category==="short-term"?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-blue-600 bg-blue-100 border-blue-200"}`,children:v.category==="immediate"?"":v.category==="short-term"?"":""}),t.jsx("span",{className:`px-2 py-1 rounded-full border ${v.priority==="high"?"text-red-600 bg-red-100 border-red-200":v.priority==="medium"?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-green-600 bg-green-100 border-green-200"}`,children:v.priority==="high"?"":v.priority==="medium"?"":""})]})]}),t.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:v.estimatedTime})]}),t.jsx("p",{className:"text-gray-700 mb-4",children:v.description}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("ol",{className:"text-sm space-y-1",children:v.actionSteps.map((E,A)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:A+1}),E]},A))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:v.expectedOutcome}),v.resources&&v.resources.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("ul",{className:"text-sm space-y-1",children:v.resources.map((E,A)=>t.jsxs("li",{className:"flex items-start gap-1",children:[t.jsx("span",{className:"text-green-500 mt-1",children:""}),E]},A))})]})]})]})]},w))})]}),m==="teaching"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-red-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),""]}),t.jsx("ul",{className:"space-y-3",children:r.teachingRecommendations.immediateInterventions.map((v,w)=>t.jsxs("li",{className:"flex items-start gap-3 p-3 bg-red-50 rounded-lg border border-red-200",children:[t.jsx("span",{className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"!"}),t.jsx("span",{className:"text-gray-700",children:v})]},w))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-blue-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443a55.381 55.381 0 0 1 5.25 2.882V15"})}),""]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.teachingRecommendations.instructionalStrategies.map((v,w)=>t.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:w+1}),t.jsx("span",{className:"text-gray-700",children:v})]})},w))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-purple-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})}),""]}),t.jsx("ul",{className:"space-y-3",children:r.teachingRecommendations.differentiation.map((v,w)=>t.jsxs("li",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[t.jsx("span",{className:"bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:""}),t.jsx("span",{className:"text-gray-700",children:v})]},w))})]}),r.teachingRecommendations.parentGuidance&&r.teachingRecommendations.parentGuidance.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),""]}),t.jsx("ul",{className:"space-y-3",children:r.teachingRecommendations.parentGuidance.map((v,w)=>t.jsxs("li",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[t.jsx("span",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:""}),t.jsx("span",{className:"text-gray-700",children:v})]},w))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-indigo-700 mb-4 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})}),""]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),t.jsx("ul",{className:"text-sm space-y-1",children:r.progressTracking.keyMetrics.map((v,w)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),v]},w))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),t.jsx("ul",{className:"text-sm space-y-1",children:r.progressTracking.checkpoints.map((v,w)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),v]},w))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-sm text-gray-600",children:r.progressTracking.reassessmentSuggestion})]})]})]})]})]})]})},oo=({topic:r,quizData:d,studentId:c,apiKey:o,mode:m="both",onClose:x,onRetakeQuiz:g,onContinueLearning:j,initialResponses:f=[],existingReport:b,resultsBinId:p,onReportSaved:k})=>{const[T,v]=S.useState(null),[w,E]=S.useState(!1),[A,X]=S.useState(null),[oe,F]=S.useState(m==="teacher"?"teacher":"student"),[J,fe]=S.useState(null),P=S.useCallback(te=>H(null,null,function*(){if(!o){X(" API Key ");return}E(!0),X(null);try{const xe=yield Hg(te,o,{includeDetailedAnalysis:!0,includeComparativeData:!1,includeVisualCharts:!1,language:"zh-TW",reportFormat:"standard"}),ce=me(ie({},xe),{generatedAt:new Date().toISOString(),resultsBinId:p});if(v(ce),p)try{yield ef(p,ce),console.log(""),k==null||k(ce)}catch(Y){console.warn(":",Y)}}catch(Ne){console.error(":",Ne),X(Ne instanceof Error?Ne.message:"")}finally{E(!1)}}),[o,p,k]);S.useEffect(()=>{if(b){v(b);const te=$i(r,c);te.responses=f,fe(Di(te))}else if(r&&f.length>0){const te=$i(r,c);te.responses=f,fe(Di(te)),P(te)}},[r,c,f,b,P]),S.useCallback(te=>{if(!J)return;const Ne=me(ie({},J),{responses:[...J.responses,te]});fe(Ne)},[J]),S.useCallback(()=>{if(!J)return;const te=Di(J);fe(te),P(te)},[J,P]);const z=S.useCallback(()=>{if(!T)return;const te={studentFeedback:T.studentFeedback,teacherReport:T.teacherReport,exportDate:new Date().toISOString()},Ne=JSON.stringify(te,null,2),xe="data:application/json;charset=utf-8,"+encodeURIComponent(Ne),ce=`learning_diagnostic_${r}_${new Date().toISOString().split("T")[0]}.json`,Y=document.createElement("a");Y.setAttribute("href",xe),Y.setAttribute("download",ce),Y.click()},[T,r]),_=S.useCallback(()=>{if(!T)return;const te=JSON.parse(localStorage.getItem("learningDiagnosticReports")||"[]");te.push({id:`report_${Date.now()}`,topic:r,studentId:c,createdAt:new Date().toISOString(),result:T}),localStorage.setItem("learningDiagnosticReports",JSON.stringify(te)),alert("")},[T,r,c]);return w?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ot,{}),t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:""}),t.jsx("p",{className:"text-gray-600",children:"AI ..."}),t.jsx("div",{className:"flex items-center justify-center space-x-1 mt-4",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}):A?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600 mb-6",children:A}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsx("button",{onClick:()=>J&&P(J),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),x&&t.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})]})]})}):T?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:""}),m==="both"&&t.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[t.jsx("button",{onClick:()=>F("student"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${oe==="student"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""}),t.jsx("button",{onClick:()=>F("teacher"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${oe==="teacher"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[oe==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:_,className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),""]}),t.jsxs("button",{onClick:z,className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]})]}),x&&t.jsx("button",{onClick:x,className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:""})]})]})})}),t.jsxs("div",{className:"py-8",children:[(m==="student"||m==="both"&&oe==="student")&&t.jsx(sf,{feedback:T.studentFeedback,onContinueLearning:j,onRetakeQuiz:g,showActions:m!=="both"}),(m==="teacher"||m==="both"&&oe==="teacher")&&t.jsx(af,{report:T.teacherReport,onExportReport:z,onSaveReport:_,showExportOptions:m!=="both"})]}),m==="both"&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsxs("button",{onClick:g,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 font-medium",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]}),t.jsxs("button",{onClick:j,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center gap-2 font-medium",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12l-7.5 7.5M3 12h16.5"})}),""]})]})})})]}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600 mb-6",children:""}),x&&t.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})]})})},nf=({quizzes:r,topic:d,studentId:c,apiKey:o,onDiagnosticComplete:m,enableDiagnostic:x=!0})=>{const[g,j]=S.useState(ht.Easy),[f,b]=S.useState(null),[p,k]=S.useState([]),[T,v]=S.useState(!1),[w,E]=S.useState(new Set),A=S.useRef(null);S.useEffect(()=>{if(x&&d&&!f){const ce=$i(d,c);b(ce),A.current=Date.now()}},[d,c,x,f]);const X=()=>{if(!r||!_)return 0;let ce=0;return Object.values(_).forEach(Y=>{Array.isArray(Y)&&(ce+=Y.length)}),ce},oe=()=>{const ce=g.toLowerCase();return p.filter(Y=>Y.difficulty===ce).length},F=()=>{const ce=g.toLowerCase();return p.filter(Y=>Y.difficulty===ce)},J=S.useCallback((ce,Y,K,V,N,B)=>{if(!x||!f)return;const ne=A.current?Date.now()-A.current:void 0,L={questionId:ce,questionType:Y,difficulty:K,userAnswer:V,correctAnswer:N,isCorrect:B,responseTime:ne,attempts:1};k(O=>O.find(W=>W.questionId===ce)?O.map(W=>W.questionId===ce?me(ie({},L),{attempts:(W.attempts||0)+1}):W):[...O,L]),E(O=>new Set([...O,ce])),A.current=Date.now()},[x,f]),fe=S.useCallback(()=>{if(!f||!x)return;const ce=Di(f);ce.responses=p,b(ce),v(!0),m&&m({session:ce,responses:p})},[f,p,x,m]),P=S.useCallback(()=>{v(!1);const ce=g.toLowerCase();if(k(Y=>Y.filter(K=>K.difficulty!==ce)),E(Y=>{const K=new Set(Y),V=g.toLowerCase();return Array.from(Y).forEach(N=>{N.startsWith(`${V}-`)&&K.delete(N)}),K}),x){const Y=$i(d,c);b(Y),A.current=Date.now()}},[x,d,c,g]),z=S.useCallback(()=>{v(!1)},[]);if(T&&x){const ce=g===ht.Easy?"":g===ht.Normal?"":"";return t.jsx(oo,{topic:`${d} (${ce})`,quizData:r,studentId:c,apiKey:o,mode:"both",onRetakeQuiz:P,onContinueLearning:z,onClose:()=>v(!1),initialResponses:F()})}if(!r)return t.jsx(es,{title:"",icon:t.jsx(pl,{}),children:""});const _=r[g],te=[{key:ht.Easy,label:""},{key:ht.Normal,label:""},{key:ht.Hard,label:""}],Ne={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},xe=()=>{const ce=X(),Y=oe();return ce>0?Y/ce*100:0};return t.jsxs(es,{title:"",icon:t.jsx(pl,{className:"w-7 h-7"}),children:[x&&t.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:""}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:[": ",oe()," / ",X()]}),t.jsxs("button",{onClick:fe,disabled:oe()===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),""]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${xe()}%`}})}),t.jsx("p",{className:"text-xs text-gray-600 mt-2",children:" "})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-300 pb-3 mb-4",children:te.map(({key:ce,label:Y})=>t.jsx("button",{onClick:()=>j(ce),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors
                ${g===ce?"bg-sky-600 text-white shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:Y},ce))})}),_?Object.keys(Ne).map(ce=>{if(!_.hasOwnProperty(ce))return null;const Y=_[ce];return!Y||Y.length===0?null:t.jsxs("div",{className:"mb-8",children:[t.jsxs("h4",{className:"text-xl font-semibold text-slate-700 mb-3 border-b-2 border-sky-200 pb-1 flex items-center justify-between",children:[t.jsx("span",{children:Ne[ce]}),x&&t.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:[": ",p.filter(K=>K.questionType===ce&&K.difficulty===g).length," / ",Y.length]})]}),ce==="trueFalse"&&Y.map((K,V)=>{const N=`${g}-tf-${V}`;return t.jsx("div",{className:w.has(N)?"opacity-75":"",children:t.jsx(io,{question:K,itemNumber:V+1,onAnswer:x?(B,ne)=>{J(N,"trueFalse",g,B,K.isTrue,ne)}:void 0})},N)}),ce==="multipleChoice"&&Y.map((K,V)=>{const N=`${g}-mc-${V}`;return t.jsx("div",{className:w.has(N)?"opacity-75":"",children:t.jsx(ro,{question:K,itemNumber:V+1,onAnswer:x?(B,ne)=>{J(N,"multipleChoice",g,B,K.correctAnswerIndex,ne)}:void 0})},N)}),ce==="fillInTheBlanks"&&Y.map((K,V)=>{const N=`${g}-fb-${V}`;return t.jsx("div",{className:w.has(N)?"opacity-75":"",children:t.jsx(jm,{question:K,itemNumber:V+1,onAnswer:x?(B,ne)=>{J(N,"fillInTheBlanks",g,B,K.correctAnswer,ne)}:void 0})},N)}),ce==="sentenceScramble"&&Y.map((K,V)=>{const N=`${g}-ss-${V}`;return t.jsx("div",{className:w.has(N)?"opacity-75":"",children:t.jsx(ym,{question:K,itemNumber:V+1,onAnswer:x?(B,ne)=>{J(N,"sentenceScramble",g,B,K.originalSentence,ne)}:void 0})},N)}),ce==="memoryCardGame"&&Y.map((K,V)=>{const N=`${g}-mcg-${V}`;return t.jsx("div",{className:w.has(N)?"opacity-75":"",children:t.jsx(co,{question:K,itemNumber:V+1,onAnswer:x?(B,ne)=>{J(N,"memoryCardGame",g,B,K.pairs,ne)}:void 0})},N)})]},`${g}-${ce}`)}):t.jsx("p",{children:""}),x&&oe()>0&&t.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:""}),t.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:[" ",oe()," AI "]})]})]})})]})},lf=({dialogue:r})=>{const[d,c]=S.useState(null),[o,m]=S.useState(null),[x,g]=S.useState(!1),[j,f]=S.useState(""),[b,p]=S.useState(null),[k,T]=S.useState(!1),[v,w]=S.useState({tts:!0,sr:!0}),E=S.useRef(null),A=S.useRef(null);S.useEffect(()=>{const P="speechSynthesis"in window,z="SpeechRecognition"in window||"webkitSpeechRecognition"in window;if(w({tts:P,sr:z}),z){const _=window.SpeechRecognition||window.webkitSpeechRecognition;E.current=new _,E.current.continuous=!1,E.current.interimResults=!1,E.current.lang="en-US",E.current.onresult=te=>{const Ne=te.results[0][0].transcript;f(Ne),fe(Ne)},E.current.onerror=te=>{console.error("Speech recognition error:",te.error),p({type:"error",message:`: ${te.error==="no-speech"?"":te.error==="audio-capture"?"":te.error==="not-allowed"?"":""}`}),g(!1)},E.current.onend=()=>{g(!1)}}return()=>{window.speechSynthesis&&window.speechSynthesis.speaking&&window.speechSynthesis.cancel()}},[]);const X=(P,z)=>{if(!v.tts||!P)return;window.speechSynthesis.speaking&&window.speechSynthesis.cancel();const _=new SpeechSynthesisUtterance(P);_.lang="en-US";const te=window.speechSynthesis.getVoices(),Ne=te.find(xe=>xe.lang.startsWith("en")&&xe.name.includes("Google")&&xe.localService)||te.find(xe=>xe.lang.startsWith("en")&&xe.localService)||te.find(xe=>xe.lang.startsWith("en"));Ne&&(_.voice=Ne),_.onstart=()=>{T(!0),c(z)},_.onend=()=>{T(!1),c(null)},_.onerror=xe=>{console.error("Speech synthesis error:",xe),T(!1),c(null),p({type:"error",message:""})},A.current=_,window.speechSynthesis.speak(_)},oe=P=>{if(!(!v.sr||!E.current||x)){m(P),f(""),p(null),g(!0);try{E.current.start()}catch(z){console.error("Error starting recognition: ",z),g(!1),p({type:"error",message:""})}}},F=()=>{E.current&&x&&(E.current.stop(),g(!1))},J=P=>P.toLowerCase().replace(/[.,!?;:"']/g,"").trim(),fe=P=>{if(o===null)return;const z=r[o].line;J(P)===J(z)?p({type:"success",message:`: "${P}"`}):p({type:"error",message:`: "${P}": "${z}"`})};return!r||r.length===0?t.jsx(es,{title:"",icon:t.jsx(so,{className:"w-7 h-7"}),children:t.jsx("p",{className:"text-slate-600",children:""})}):t.jsxs(es,{title:"",icon:t.jsx(so,{className:"w-7 h-7"}),children:[!v.tts&&t.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md",children:" (TTS)"}),!v.sr&&t.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md mt-2",children:" (SR) Chrome  Edge"}),t.jsx("div",{className:"space-y-4",children:r.map((P,z)=>t.jsxs("div",{className:`p-3 rounded-lg ${P.speaker==="Speaker A"?"bg-sky-50":"bg-indigo-50"} border ${P.speaker==="Speaker A"?"border-sky-200":"border-indigo-200"}`,children:[t.jsxs("p",{className:"font-semibold text-sm mb-1 ${item.speaker === 'Speaker A' ? 'text-sky-700' : 'text-indigo-700'}",children:[P.speaker,":"]}),t.jsx("p",{className:"text-slate-800 mb-2",children:P.line}),t.jsxs("div",{className:"flex items-center space-x-2",children:[v.tts&&t.jsx("button",{onClick:()=>X(P.line,z),disabled:k&&d!==z,className:`p-1.5 rounded-full hover:bg-slate-200 transition-colors disabled:opacity-50 ${k&&d===z?"text-sky-500 animate-pulse":"text-slate-600"}`,"aria-label":` ${P.speaker} `,children:t.jsx(Gg,{className:"w-5 h-5"})}),v.sr&&(x&&o===z?t.jsx("button",{onClick:F,className:"p-1.5 rounded-full text-red-600 hover:bg-red-100 transition-colors","aria-label":"",children:t.jsx(Zg,{className:"w-5 h-5"})}):t.jsx("button",{onClick:()=>oe(z),disabled:x||k,className:"p-1.5 rounded-full text-slate-600 hover:bg-slate-200 transition-colors disabled:opacity-50","aria-label":` ${P.speaker} `,children:t.jsx(Vg,{className:"w-5 h-5"})}))]}),o===z&&j&&t.jsxs("p",{className:"mt-2 text-sm text-slate-600 italic",children:[': "',j,'"']}),o===z&&b&&t.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-start ${b.type==="success"?"bg-green-100 text-green-700":b.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:[b.type==="success"&&t.jsx(cs,{className:"w-5 h-5 mr-2 flex-shrink-0"}),b.type==="error"&&t.jsx(wa,{className:"w-5 h-5 mr-2 flex-shrink-0"}),t.jsx("span",{children:b.message})]})]},z))}),x&&t.jsx("p",{className:"mt-4 text-center text-sky-600 font-medium animate-pulse",children:"..."})]})},Sm=({content:r,apiKey:d,vocabularyLevel:c,isStudentMode:o=!1})=>{const[m,x]=S.useState("sentence"),[g,j]=S.useState({}),[f,b]=S.useState({}),[p,k]=S.useState({}),T=S.useCallback((A,X)=>{j(oe=>me(ie({},oe),{[A]:X}))},[]),v=S.useCallback((A,X)=>H(null,null,function*(){if(!d){alert(" API Key  AI ");return}const oe=g[A.id];if(!(oe!=null&&oe.trim())){alert("");return}k(F=>me(ie({},F),{[A.id]:!0}));try{const F=yield Eg(oe,X,A,d,c);b(J=>me(ie({},J),{[A.id]:F}))}catch(F){console.error("AI :",F),alert("AI  API Key ")}finally{k(F=>me(ie({},F),{[A.id]:!1}))}}),[d,g,c]),w=()=>t.jsx("div",{className:"space-y-6",children:r.sentencePractice.map((A,X)=>{var oe;return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-blue-200",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:[" ",X+1,t.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${A.difficulty==="easy"?"bg-green-100 text-green-700":A.difficulty==="normal"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:A.difficulty==="easy"?"":A.difficulty==="normal"?"":""})]}),t.jsx("p",{className:"text-gray-700 mb-3",children:A.instruction}),A.keywords.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:A.keywords.map((F,J)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:F},J))})]}),A.exampleSentence&&t.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),t.jsx("p",{className:"text-gray-700 italic",children:A.exampleSentence})]}),A.hints&&A.hints.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:A.hints.map((F,J)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-1",children:""}),F]},J))})]})]})}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("textarea",{value:g[A.id]||"",onChange:F=>T(A.id,F.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"..."}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsxs("span",{className:"text-sm text-gray-500",children:[": ",(g[A.id]||"").length]}),d&&t.jsx("button",{onClick:()=>v(A,"sentence"),disabled:!((oe=g[A.id])!=null&&oe.trim())||p[A.id],className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p[A.id]?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:""}),"AI ..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})," AI "]})})]})]}),f[A.id]&&t.jsx(cm,{feedback:f[A.id]})]},A.id)})}),E=()=>t.jsx("div",{className:"space-y-6",children:r.writingPractice.map((A,X)=>{var oe;return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-purple-200",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:[A.title,t.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${A.difficulty==="easy"?"bg-green-100 text-green-700":A.difficulty==="normal"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:A.difficulty==="easy"?"":A.difficulty==="normal"?"":""})]}),t.jsx("p",{className:"text-gray-700 mb-3",children:A.instruction}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:""}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:A.structure.map((F,J)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-purple-500 mt-1",children:""}),F]},J))})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2",children:[": ",A.minLength," - ",A.maxLength," "]}),A.keywords&&A.keywords.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.keywords.map((F,J)=>t.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs",children:F},J))})]})]})]}),A.exampleOutline&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),t.jsx("p",{className:"text-gray-700 text-sm",children:A.exampleOutline})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("textarea",{value:g[A.id]||"",onChange:F=>T(A.id,F.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:8,placeholder:"..."}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:[t.jsxs("span",{children:[": ",(g[A.id]||"").length]}),t.jsx("span",{className:"ml-4",children:(g[A.id]||"").length<A.minLength?` ${A.minLength-(g[A.id]||"").length} `:(g[A.id]||"").length>A.maxLength?` ${(g[A.id]||"").length-A.maxLength} `:""})]}),d&&t.jsx("button",{onClick:()=>v(A,"writing"),disabled:!((oe=g[A.id])!=null&&oe.trim())||p[A.id],className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p[A.id]?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:""}),"AI ..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})," AI "]})})]})]}),f[A.id]&&t.jsx(cm,{feedback:f[A.id]})]},A.id)})});return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mt-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:" AI "}),t.jsx("p",{className:"text-gray-600 text-sm",children:r.instructions})]})]}),!o&&t.jsxs("div",{className:"text-sm text-gray-500 bg-white px-3 py-2 rounded-lg border",children:[t.jsxs("div",{children:[": ",r.sentencePractice.length," "]}),t.jsxs("div",{children:[": ",r.writingPractice.length," "]})]})]}),t.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[t.jsxs("button",{onClick:()=>x("sentence"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${m==="sentence"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[" (",r.sentencePractice.length,")"]}),t.jsxs("button",{onClick:()=>x("writing"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${m==="writing"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[" (",r.writingPractice.length,")"]})]}),m==="sentence"?w():E()]})},cm=({feedback:r})=>t.jsxs("div",{className:"mt-4 border-t pt-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4",children:[t.jsxs("h5",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-green-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.847a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.847.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),"AI ",t.jsxs("div",{className:`ml-2 px-3 py-1 rounded-full text-sm font-bold ${r.score>=85?"bg-green-100 text-green-800":r.score>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[r.score," "]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.strengths.length>0&&t.jsxs("div",{children:[t.jsx("h6",{className:"font-medium text-green-700 mb-2",children:" "}),t.jsx("ul",{className:"space-y-1",children:r.strengths.map((d,c)=>t.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-green-500 mt-1",children:""}),d]},c))})]}),r.improvements.length>0&&t.jsxs("div",{children:[t.jsx("h6",{className:"font-medium text-orange-700 mb-2",children:" "}),t.jsx("ul",{className:"space-y-1",children:r.improvements.map((d,c)=>t.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-orange-500 mt-1",children:""}),d]},c))})]})]}),r.grammarCorrections&&r.grammarCorrections.length>0&&t.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[t.jsx("h6",{className:"font-medium text-yellow-800 mb-2",children:" "}),r.grammarCorrections.map((d,c)=>t.jsxs("div",{className:"mb-2 last:mb-0",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-red-600 line-through",children:d.original}),t.jsx("span",{className:"mx-2",children:""}),t.jsx("span",{className:"text-green-600 font-medium",children:d.corrected})]}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:d.explanation})]},c))]}),r.vocabularyTips&&r.vocabularyTips.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h6",{className:"font-medium text-blue-700 mb-2",children:" "}),t.jsx("ul",{className:"space-y-1",children:r.vocabularyTips.map((d,c)=>t.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-1",children:""}),d]},c))})]}),r.structureFeedback&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h6",{className:"font-medium text-purple-700 mb-2",children:" "}),t.jsx("p",{className:"text-sm text-gray-700",children:r.structureFeedback})]}),t.jsxs("div",{className:"border-t pt-3",children:[t.jsx("h6",{className:"font-medium text-gray-800 mb-2",children:" "}),t.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:r.overallComment})]})]}),rf=r=>`
    <div class="tabs">
      <button class="tab-btn active" data-tab-target="easy-quiz-content" data-difficulty="easy"></button>
      <button class="tab-btn" data-tab-target="normal-quiz-content" data-difficulty="normal"></button>
      <button class="tab-btn" data-tab-target="hard-quiz-content" data-difficulty="hard"></button>
    </div>
    <div id="easy-quiz-content" class="tab-content active">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="easy"></div>
    </div>
    <div id="normal-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="normal"></div>
    </div>
    <div id="hard-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="hard"></div>
    </div>
    <script type="application/json" id="quizDataStore">
      ${r}
    <\/script>
  `,cf=(r,d)=>{const c=r.learningObjectives&&r.learningObjectives.length>0?r.learningObjectives.map(w=>`
        <div class="objective-item" style="margin-bottom:20px; padding:16px; background:#f0fdf4; border-left:4px solid #10b981; border-radius:6px;">
          <h3 style="color:#059669; margin-bottom:8px; font-size:1.1em; font-weight:600;">${w.objective}</h3>
          <p style="color:#047857; margin-bottom:8px; line-height:1.6;">${w.description}</p>
          ${w.teachingExample?`
            <div style="background:#ecfdf5; border:1px solid #a7f3d0; padding:12px; border-radius:4px; margin-top:8px;">
              <strong style="color:#065f46; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#047857; font-size:0.9em;">${w.teachingExample}</span>
            </div>`:""}
        </div>`).join(""):"<p></p>",o=r.contentBreakdown&&r.contentBreakdown.length>0?r.contentBreakdown.map(w=>`
        <div class="breakdown-item" style="margin-bottom:24px; padding-bottom:20px; border-bottom:1px solid #e2e8f0;">
          <h3 style="color:#0369a1; margin-bottom:8px;">${w.topic}</h3>
          <p style="margin-bottom:12px; color:#475569;">${w.details}</p>
          
          ${w.coreConcept?`
            <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#1e40af; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#1e3a8a; font-size:0.9em;">${w.coreConcept}</span>
            </div>`:""}
          
          ${w.teachingSentences&&w.teachingSentences.length>0?`
            <div style="background:#eef2ff; border-left:4px solid #6366f1; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#4338ca; font-size:0.85em; display:block; margin-bottom:8px;"></strong>
              <div style="line-height:1.6;">
                ${w.teachingSentences.map((E,A)=>`
                  <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                    <span style="color:#6366f1; font-family:monospace;">${A+1}.</span> ${E}
                  </div>
                `).join("")}
              </div>
            </div>`:""}
          
          ${w.teachingTips?`
            <div style="background:#faf5ff; border-left:4px solid #8b5cf6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#7c3aed; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#6b21a8; font-size:0.9em;">${w.teachingTips}</span>
            </div>`:""}
          
          ${w.teachingExample?`
            <div style="background:#f0f9ff; border-left:4px solid #0ea5e9; padding:12px; border-radius:4px;">
              <strong style="color:#0284c7; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#0c4a6e; font-size:0.9em;">${w.teachingExample}</span>
            </div>`:""}
        </div>`).join(""):"<p></p>",m=r.confusingPoints&&r.confusingPoints.length>0?r.confusingPoints.map(w=>`
        <div class="confusing-point-item" style="border:1px solid #e2e8f0; border-radius:8px; padding:20px; margin-bottom:24px; background:#fefefe;">
          <h3 style="color:#b91c1c; margin-bottom:12px; font-size:1.3em; font-weight:600;">${w.point}</h3>
          <p style="margin-bottom:16px; color:#475569; line-height:1.6;">${w.clarification}</p>
          
          ${w.errorType?`
          <div style="background:#fff7ed; border-left:4px solid #f97316; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#c2410c; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#9a3412; font-size:0.9em;">${w.errorType}</span>
          </div>`:""}
          
          ${w.commonErrors&&w.commonErrors.length>0?`
          <div style="background:#fef2f2; border-left:4px solid #ef4444; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            <div style="margin-left:0;">
              ${w.commonErrors.map((E,A)=>`
                <div style="color:#991b1b; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#dc2626; font-family:monospace; margin-right:6px;">${A+1}.</span>${E}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${w.correctVsWrong&&w.correctVsWrong.length>0?`
          <div style="background:#fefce8; border-left:4px solid #eab308; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#a16207; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            ${w.correctVsWrong.map((E,A)=>`
              <div style="border:1px solid #fde047; background:#fffbeb; padding:12px; margin-bottom:8px; border-radius:6px;">
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:8px;">
                  <div style="background:#f0fdf4; padding:10px; border-radius:4px; border:1px solid #bbf7d0;">
                    <strong style="color:#166534; font-size:0.8em; display:block; margin-bottom:4px;"> </strong>
                    <span style="color:#15803d; font-size:0.9em;">${E.correct}</span>
                  </div>
                  <div style="background:#fef2f2; padding:10px; border-radius:4px; border:1px solid #fecaca;">
                    <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:4px;"> </strong>
                    <span style="color:#991b1b; font-size:0.9em;">${E.wrong}</span>
                  </div>
                </div>
                <div style="background:#eff6ff; padding:10px; border-radius:4px; border:1px solid #bfdbfe;">
                  <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
                  <span style="color:#1e40af; font-size:0.9em;">${E.explanation}</span>
                </div>
              </div>
            `).join("")}
          </div>`:""}
          
          ${w.preventionStrategy?`
          <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#1e40af; font-size:0.9em;">${w.preventionStrategy}</span>
          </div>`:""}
          
          ${w.correctionMethod?`
          <div style="background:#faf5ff; border-left:4px solid #a855f7; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#7c3aed; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#6b21a8; font-size:0.9em;">${w.correctionMethod}</span>
          </div>`:""}
          
          ${w.practiceActivities&&w.practiceActivities.length>0?`
          <div style="background:#f0f9ff; border-left:4px solid #6366f1; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#4338ca; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            <div style="margin-left:0;">
              ${w.practiceActivities.map((E,A)=>`
                <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#4338ca; font-family:monospace; margin-right:6px;">${A+1}.</span>${E}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${w.teachingExample?`
          <div style="background:#f9fafb; border-left:4px solid #6b7280; padding:12px; border-radius:4px;">
            <strong style="color:#374151; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#111827; font-size:0.9em;">${w.teachingExample}</span>
          </div>`:""}
        </div>`).join(""):"<p></p>",x=r.classroomActivities&&r.classroomActivities.length>0?r.classroomActivities.map(w=>`
        <div class="activity-item" style="border:1px solid #e0e7ef; border-radius:6px; padding:16px; margin-bottom:16px; background:#f8fafc;">
          <h3 style="color:#2563eb; margin-bottom:8px; font-size:1.2em;">${w.title}</h3>
          <p style="margin-bottom:12px; color:#475569;">${w.description}</p>
          
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px;">
            ${w.objective?`
              <div>
                <strong style="color:#0f172a;"></strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${w.objective}</p>
              </div>`:""}
            ${w.timing?`
              <div>
                <strong style="color:#0f172a;"></strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${w.timing}</p>
              </div>`:""}
            ${w.materials?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${w.materials}</p>
            </div>`:""}
            ${w.environment?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${w.environment}</p>
            </div>`:""}
          </div>
          
          ${w.steps&&w.steps.length>0?`
            <div style="margin-bottom:12px;">
              <strong style="color:#0f172a;"></strong>
              <ol style="margin:8px 0 0 20px; padding:0;">
                ${w.steps.map(E=>`<li style="margin-bottom:4px; font-size:0.9em;">${E}</li>`).join("")}
              </ol>
            </div>`:""}
          
          ${w.assessmentPoints&&w.assessmentPoints.length>0?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <ul style="margin:8px 0 0 20px; padding:0;">
                ${w.assessmentPoints.map(E=>`<li style="margin-bottom:4px; font-size:0.9em;">${E}</li>`).join("")}
              </ul>
            </div>`:""}
        </div>
      `).join(""):"<p></p>",g=r.englishConversation&&r.englishConversation.length>0?r.englishConversation.map(w=>`
        <div class="dialogue-line ${w.speaker==="Speaker A"?"speakerA":"speakerB"}">
          <span class="speaker">${w.speaker}:</span> ${w.line}
        </div>`).join("")+"<p><small><em></em></small></p>":"<p></p>",j=r.learningLevels&&r.learningLevels.suggestedLevels&&r.learningLevels.suggestedLevels.length>0?r.learningLevels.suggestedLevels.sort((w,E)=>w.order-E.order).map(w=>`
          <div class="level-item" style="border:1px solid #e0e7ef; border-radius:8px; padding:16px; margin-bottom:12px; background:${w.id===r.learningLevels.defaultLevelId?"#eff8ff":"#f8fafc"}; border-left: 4px solid ${w.id===r.learningLevels.defaultLevelId?"#0ea5e9":"#e2e8f0"};">
            <div style="display:flex; align-items:center; margin-bottom:8px;">
              <div style="width:32px; height:32px; border-radius:50%; background-color:${w.id===r.learningLevels.defaultLevelId?"#0ea5e9":"#94a3b8"}; color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; margin-right:12px;">${w.order}</div>
              <h3 style="margin:0; color:${w.id===r.learningLevels.defaultLevelId?"#0c4a6e":"#334155"};">${w.name}</h3>
              ${w.id===r.learningLevels.defaultLevelId?'<span style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:4px; font-size:0.8em; margin-left:8px;"></span>':""}
            </div>
            <p style="margin:0; color:#64748b; line-height:1.5;">${w.description}</p>
          </div>
        `).join(""):"<p></p>",f=JSON.stringify(r.onlineInteractiveQuiz||{}),b=rf(f),p=`
    <!DOCTYPE html>
    <html lang="zh-Hant">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${d}</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 20px; line-height: 1.6; background-color: #f4f7f9; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #3498db; margin-top: 30px; border-bottom: 1px solid #eee; padding-bottom: 8px;}
        h3 { color: #2980b9; margin-top: 20px; }
        h4 { color: #16a085; margin-top:15px; font-size: 1.1em; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed #bdc3c7;}
        ul { list-style-type: disc; padding-left: 20px; }
        li { margin-bottom: 8px; }
        p { margin-bottom: 10px; }
        .section { margin-bottom: 25px; }
        .breakdown-item, .confusing-point-item { border-left: 3px solid #3498db; padding-left: 15px; margin-bottom: 15px; background-color: #fdfdfe; padding:10px; border-radius: 0 4px 4px 0;}
        .dialogue-line { margin-bottom: 8px; padding: 10px; border-radius: 5px; }
        .dialogue-line .speaker { font-weight: bold; color: #0056b3; }
        .dialogue-line.speakerA { background-color: #e7f3ff; border-left: 3px solid #79a6dc; }
        .dialogue-line.speakerB { background-color: #e6fff0; border-left: 3px solid #68d19a; }
        
        .tabs { display: flex; margin-bottom: 0; border-bottom: 1px solid #ccc;}
        .tabs button { padding: 10px 15px; cursor: pointer; border: 1px solid #ccc; background-color: #f0f0f0; margin-right: 0px; border-bottom: none; border-radius: 5px 5px 0 0; font-size: 1em;}
        .tabs button.active { background-color: #fff; border-bottom: 1px solid #fff; color: #3498db; font-weight: bold; position:relative; top:1px;}
        .tab-content { display: none; padding: 15px; border: 1px solid #ccc; border-top: none; background-color:#fff; border-radius: 0 0 5px 5px;}
        .tab-content.active { display: block; }

        .quiz-item { border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 15px; border-radius: 5px; background: #f9f9f9; }
        .quiz-question { font-weight: 500; margin-bottom: 8px; color: #333; }
        .quiz-item p:first-child { margin-top: 0; }
        .quiz-feedback { padding: 8px; margin-top: 10px; border-radius: 4px; font-size: 0.9em; }
        .quiz-feedback.correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .quiz-feedback.incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .quiz-feedback em { color: #555;}
        
        .tf-options button { margin-right: 10px; padding: 8px 12px; border-radius: 4px; border: 1px solid #ccc; cursor: pointer; }
        .tf-options button.selected.correct, .tf-options button.correct { background-color: #28a745; color: white; border-color: #28a745; }
        .tf-options button.selected.incorrect, .tf-options button.incorrect { background-color: #dc3545; color: white; border-color: #dc3545; }
        .tf-options button:disabled { opacity: 0.7; cursor: not-allowed; }

        .mc-options label { display: block; margin-bottom: 8px; padding: 8px; border: 1px solid #eee; border-radius: 4px; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; }
        .mc-options label:hover { background-color: #f0f8ff; }
        .mc-options input[type="radio"] { margin-right: 8px; }
        .mc-options label.selected { background-color: #e0f0ff; border-color: #79a6dc; }
        .mc-options label.correct-answer { background-color: #d4edda !important; border-color: #c3e6cb !important; color: #155724;}
        .mc-options label.incorrect-selection { background-color: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24;}
        .mc-options label.disabled { cursor: not-allowed; opacity: 0.7; }


        .fb-input { padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin: 0 5px; min-width:100px; }
        .fb-input:disabled { background-color: #eee; }

        .ss-word-bank, .ss-constructed-sentence-area { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; border: 1px dashed #ccc; border-radius: 4px; min-height: 40px; margin-bottom: 10px; }
        .ss-word-bank { background-color: #f0f8ff; }
        .ss-constructed-sentence-area { background-color: #e6fff0; }
        .ss-word-bank button, .ss-constructed-sentence-area button { padding: 5px 10px; background-color: #add8e6; border: none; border-radius: 4px; cursor: pointer; font-size: 0.95em;}
        .ss-word-bank button:hover, .ss-constructed-sentence-area button:hover { background-color: #90cce0; }
        .ss-constructed-sentence-area button { background-color: #a2d2ff; }


        .quiz-item button.check-answer-btn, .quiz-item button.ss-action-btn {
          background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; margin-top: 10px; transition: background-color 0.2s;
        }
        .quiz-item button.check-answer-btn:hover, .quiz-item button.ss-action-btn:hover { background-color: #2980b9; }
        .quiz-item button.ss-action-btn.ss-clear { background-color: #e74c3c; margin-left: 5px;}
        .quiz-item button.ss-action-btn.ss-clear:hover { background-color: #c0392b; }
        .quiz-item button:disabled, .quiz-item button.check-answer-btn:disabled, .quiz-item button.ss-action-btn:disabled { background-color: #bdc3c7; cursor: not-allowed; opacity: 0.7;}
        
        footer { text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd; font-size: 0.9em; color: #777; }
      </style>
    </head>
    <body>
      <div class="container">
        <h1>${d}</h1>

        <div class="section">
          <h2></h2>
          ${j}
        </div>

        <div class="section">
          <h2></h2>
          ${c}
        </div>

        <div class="section">
          <h2></h2>
          ${o}
        </div>

        <div class="section">
          <h2></h2>
          ${m}
        </div>

        <div class="section">
          <h2></h2>
          ${x}
        </div>
        
        <div class="section">
          <h2></h2>
          ${g}
        </div>

        <div class="section">
          <h2></h2>
          ${b}
        </div>
        
        <footer>
          <p> AI ${new Date().toLocaleString()}</p>
        </footer>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const quizData = JSON.parse(document.getElementById('quizDataStore').textContent || '{}');
          let sentenceScrambleStates = {}; // To store dynamic state for sentence scramble

          const normalizeText = (str) => {
            if (typeof str !== 'string') return '';
            // Corrected regex for multiple spaces: s+ instead of \\s+
            return str.toLowerCase().replace(/[.,!?;:'"'""]/g, '').replace(/s+/g, ' ').trim();
          };

          const renderQuizzesForDifficulty = (difficulty) => {
            const container = document.querySelector(\`.quiz-items-container[data-difficulty="\${difficulty}"]\`);
            if (!container) return;
            container.innerHTML = ''; 
            sentenceScrambleStates[difficulty] = {}; // Reset states for this difficulty

            const difficultyData = quizData[difficulty];
            if (!difficultyData || Object.keys(difficultyData).every(type => !difficultyData[type] || difficultyData[type].length === 0)) {
              container.innerHTML = '<p></p>';
              return;
            }

            let itemGlobalIndex = 0;
            const typeLabels = { trueFalse: "", multipleChoice: "", fillInTheBlanks: "", sentenceScramble: ""};

            const createHtml = (type, q, index) => {
              const questionId = \`\${difficulty}-\${type}-\${index}\`;
              let itemHtml = \`<div class="quiz-item \${type}-item" id="item-\${questionId}">\`;
              
              if (type === 'trueFalse') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.statement}</p>\`;
                itemHtml += \`<div class="tf-options">\`;
                itemHtml += \`<button data-value="true" data-question-id="\${questionId}"> (True)</button>\`;
                itemHtml += \`<button data-value="false" data-question-id="\${questionId}"> (False)</button>\`;
                itemHtml += \`</div>\`;
              } else if (type === 'multipleChoice') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.question}</p>\`;
                itemHtml += \`<div class="mc-options">\`;
                q.options.forEach((opt, optIndex) => {
                  itemHtml += \`<label><input type="radio" name="mc-\${questionId}" value="\${optIndex}"> \${String.fromCharCode(65 + optIndex)}. \${opt}</label>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<button class="check-answer-btn mc-check" data-question-id="\${questionId}"></button>\`;
              } else if (type === 'fillInTheBlanks') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.sentenceWithBlank.replace('____', '<input type="text" class="fb-input" id="fb-input-\${questionId}" placeholder="">')}</p>\`;
                itemHtml += \`<button class="check-answer-btn fb-check" data-question-id="\${questionId}"></button>\`;
              } else if (type === 'sentenceScramble') {
                sentenceScrambleStates[difficulty][questionId] = {
                    availableWords: q.scrambledWords.slice().sort(() => Math.random() - 0.5),
                    constructedWords: []
                };
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. </p>\`;
                itemHtml += \`<p class="ss-instruction"></p>\`
                itemHtml += \`<div class="ss-word-bank" id="ss-bank-\${questionId}">\`;
                sentenceScrambleStates[difficulty][questionId].availableWords.forEach(word => {
                   itemHtml += \`<button class="ss-word" data-word="\${word}" data-question-id="\${questionId}" data-source="bank">\${word}</button>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<p class="quiz-question"></p><div class="ss-constructed-sentence-area" id="ss-area-\${questionId}"></div>\`;
                itemHtml += \`<button class="check-answer-btn ss-check" data-question-id="\${questionId}"></button>\`;
                itemHtml += \`<button class="ss-action-btn ss-clear" data-question-id="\${questionId}"></button>\`;
              }
              itemHtml += \`<div class="quiz-feedback" id="feedback-\${questionId}"></div></div>\`;
              itemGlobalIndex++;
              return itemHtml;
            };
            
            const quizTypes = ['trueFalse', 'multipleChoice', 'fillInTheBlanks', 'sentenceScramble'];
            let hasContentForDifficulty = false;

            quizTypes.forEach(type => {
              if (difficultyData[type] && difficultyData[type].length > 0) {
                hasContentForDifficulty = true;
                const typeHeader = document.createElement('h4');
                typeHeader.textContent = typeLabels[type];
                container.appendChild(typeHeader);
                difficultyData[type].forEach((q, i) => {
                  const questionElement = document.createElement('div');
                  questionElement.innerHTML = createHtml(type, q, i);
                  container.appendChild(questionElement.firstChild);
                });
              }
            });
             if (!hasContentForDifficulty) {
                 container.innerHTML = '<p></p>';
            }
          };

          const tabButtons = document.querySelectorAll('.tabs .tab-btn');
          const tabContents = document.querySelectorAll('.tab-content');

          tabButtons.forEach(button => {
            button.addEventListener('click', () => {
              tabButtons.forEach(btn => btn.classList.remove('active'));
              tabContents.forEach(content => content.classList.remove('active'));

              button.classList.add('active');
              const targetContentId = button.getAttribute('data-tab-target');
              document.getElementById(targetContentId).classList.add('active');
              
              const difficulty = button.getAttribute('data-difficulty');
              renderQuizzesForDifficulty(difficulty);
            });
          });
          
          // Initial render for the default active tab
          renderQuizzesForDifficulty('easy');


          // Event delegation for quiz interactions
          document.querySelector('.container').addEventListener('click', (event) => {
            const target = event.target;
            // Ensure target is an HTMLElement before trying to access attributes or match selectors
            if (!(target instanceof HTMLElement)) return;

            const questionId = target.getAttribute('data-question-id');
            if (!questionId) return;

            const [difficulty, type, indexStr] = questionId.split('-');
            const index = parseInt(indexStr);
            const questionData = quizData[difficulty]?.[type]?.[index];
            const feedbackEl = document.getElementById(\`feedback-\${questionId}\`);

            if (!questionData || !feedbackEl) return;

            // True/False
            if (target.matches('.tf-options button')) {
              const selectedValue = target.getAttribute('data-value') === 'true';
              const isCorrect = selectedValue === questionData.isTrue;
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '' : \`\${questionData.isTrue ? ' (True)' : ' (False)'}\`;
              if (questionData.explanation) message += \` <em>\${questionData.explanation}</em>\`;
              feedbackEl.innerHTML = message;
              
              target.classList.add('selected', isCorrect ? 'correct' : 'incorrect');
              Array.from(target.parentElement.children).forEach(btn => btn.disabled = true);
            }

            // Multiple Choice Check
            else if (target.matches('.mc-check')) {
              const selectedRadio = document.querySelector(\`input[name="mc-\${questionId}"]:checked\`);
              if (!selectedRadio) {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '';
                return;
              }
              const selectedOptionIndex = parseInt(selectedRadio.value);
              const isCorrect = selectedOptionIndex === questionData.correctAnswerIndex;
              
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '' : \`\${String.fromCharCode(65 + questionData.correctAnswerIndex)}. \${questionData.options[questionData.correctAnswerIndex]}\`;
              feedbackEl.innerHTML = message;

              // Visually mark options
              const optionLabels = document.querySelectorAll(\`#item-\${questionId} .mc-options label\`);
              optionLabels.forEach((label, idx) => {
                label.classList.add('disabled');
                const radioInLabel = label.querySelector('input');
                if (radioInLabel) radioInLabel.disabled = true;

                if (idx === questionData.correctAnswerIndex) {
                    label.classList.add('correct-answer');
                }
                if (idx === selectedOptionIndex && !isCorrect) {
                    label.classList.add('incorrect-selection');
                }
                 if (idx === selectedOptionIndex) {
                    label.classList.add('selected');
                }
              });
              target.disabled = true;
            }

            // Fill in the Blanks Check
            else if (target.matches('.fb-check')) {
              const inputEl = document.getElementById(\`fb-input-\${questionId}\`);
              // Add null check for inputEl
              if (!inputEl) {
                  console.error('Fill-in-the-blanks input element not found for ID:', \`fb-input-\${questionId}\`);
                  feedbackEl.className = 'quiz-feedback incorrect';
                  feedbackEl.textContent = '';
                  return;
              }
              const userAnswer = inputEl.value.trim();
              if (userAnswer === '') {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '';
                return;
              }
              const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.correctAnswer);
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              feedbackEl.textContent = isCorrect ? '' : \` "\${questionData.correctAnswer}"\`;
              inputEl.disabled = true;
              target.disabled = true;
            }
            
            // Sentence Scramble
            else if (target.matches('.ss-word') || target.matches('.ss-check') || target.matches('.ss-clear')) {
                const state = sentenceScrambleStates[difficulty][questionId];
                if (!state) return; // Should not happen if initialized correctly

                const bankEl = document.getElementById(\`ss-bank-\${questionId}\`);
                const areaEl = document.getElementById(\`ss-area-\${questionId}\`);
                
                if(!bankEl || !areaEl) return;


                const redrawScramble = () => {
                    bankEl.innerHTML = '';
                    state.availableWords.forEach(w => {
                        bankEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="bank">\${w}</button>\`;
                    });
                    areaEl.innerHTML = '';
                    state.constructedWords.forEach(w => {
                        areaEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="area">\${w}</button>\`;
                    });
                };

                if (target.matches('.ss-word')) {
                    const word = target.getAttribute('data-word');
                    const source = target.getAttribute('data-source');
                    if (source === 'bank') {
                        state.constructedWords.push(word);
                        // Correctly remove only one instance of the word from availableWords
                        const wordIndexInBank = state.availableWords.indexOf(word);
                        if (wordIndexInBank > -1) {
                            state.availableWords.splice(wordIndexInBank, 1);
                        }
                    } else { // source === 'area'
                        state.availableWords.push(word);
                        // Correctly remove only one instance of the word from constructedWords
                        const wordIndexInArea = state.constructedWords.indexOf(word);
                        if (wordIndexInArea > -1) {
                            state.constructedWords.splice(wordIndexInArea, 1);
                        }
                    }
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                } else if (target.matches('.ss-check')) {
                    const userAnswer = state.constructedWords.join(' ').trim();
                    const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.originalSentence);
                    feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
                    feedbackEl.textContent = isCorrect ? '' : \` "\${questionData.originalSentence}"\`;
                    target.disabled = true;
                    const clearButton = document.querySelector(\`#item-\${questionId} .ss-clear\`);
                    if(clearButton) clearButton.disabled = true;
                    
                    bankEl.querySelectorAll('button').forEach(b => b.disabled = true);
                    areaEl.querySelectorAll('button').forEach(b => b.disabled = true);

                } else if (target.matches('.ss-clear')) {
                    state.availableWords = questionData.scrambledWords.slice().sort(() => Math.random() - 0.5);
                    state.constructedWords = [];
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                }
            }

          });
        });
      <\/script>
    </body>
    </html>
  `,k=new Blob([p],{type:"text/html;charset=utf-8"}),T=URL.createObjectURL(k),v=document.createElement("a");v.href=T,v.download=`learning-plan-${d.replace(/\s+/g,"_")||"untitled"}.html`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(T)},uo="AES-GCM",of=256,no=12;function km(r,d){return H(this,null,function*(){const c=new TextEncoder,o=yield crypto.subtle.importKey("raw",c.encode(r),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:1e5,hash:"SHA-256"},o,{name:uo,length:of},!1,["encrypt","decrypt"])})}function df(r,d="ai-page-gen-2024"){return H(this,null,function*(){try{const o=new TextEncoder().encode(r),m=crypto.getRandomValues(new Uint8Array(16)),x=crypto.getRandomValues(new Uint8Array(no)),g=yield km(d,m),j=yield crypto.subtle.encrypt({name:uo,iv:x},g,o),f=new Uint8Array(m.length+x.length+j.byteLength);return f.set(m,0),f.set(x,m.length),f.set(new Uint8Array(j),m.length+x.length),mf(f)}catch(c){throw console.error(" API Key :",c),new Error("")}})}function uf(r,d="ai-page-gen-2024"){return H(this,null,function*(){try{const c=xf(r),o=c.slice(0,16),m=c.slice(16,16+no),x=c.slice(16+no),g=yield km(d,o),j=yield crypto.subtle.decrypt({name:uo,iv:m},g,x);return new TextDecoder().decode(j)}catch(c){throw console.error(" API Key :",c),new Error("")}})}function mf(r){const d=new Uint8Array(r);let c="";for(let o=0;o<d.byteLength;o++)c+=String.fromCharCode(d[o]);return btoa(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function xf(r){const d="=".repeat((4-r.length%4)%4),c=r.replace(/-/g,"+").replace(/_/g,"/")+d,o=atob(c),m=new Uint8Array(o.length);for(let x=0;x<o.length;x++)m[x]=o.charCodeAt(x);return m}function Cm(){return typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof crypto.subtle.encrypt=="function"}function om(r){return H(this,null,function*(){if(!Cm())return console.warn("Web Crypto API "),`apikey=${encodeURIComponent(r)}`;const d=yield df(r);return`enckey=${encodeURIComponent(d)}`})}function Am(r){return H(this,null,function*(){const d=r.get("enckey");if(d&&Cm())try{return yield uf(decodeURIComponent(d))}catch(o){console.error(" API Key :",o)}const c=r.get("apikey");return c?decodeURIComponent(c):null})}const hf=({tabs:r,current:d,onChange:c,children:o})=>t.jsxs("div",{children:[t.jsx("div",{className:"flex border-b mb-4",children:r.map(m=>t.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium transition-colors focus:outline-none ${d===m.key?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-slate-500 hover:text-indigo-600"}`,onClick:()=>c(m.key),type:"button",children:m.label},m.key))}),t.jsx("div",{children:o[r.findIndex(m=>m.key===d)]})]});class gf{generateConversationPractice(d,c){return H(this,null,function*(){const o=this.buildConversationPrompt(d),m=yield Ie(o,c),x=`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return ie({id:x},m)})}buildConversationPrompt(d){return`
Generate an English conversation practice exercise with the following specifications:

Topic: "${d.topic}"
Scenario: "${d.scenario}"
Difficulty Level: ${d.difficulty}
Number of Participants: ${d.participantCount}
Target Duration: ${d.duration} minutes
${d.focusAreas?`Focus Areas: ${d.focusAreas.join(", ")}`:""}
${d.culturalContext?`Cultural Context: ${d.culturalContext}`:""}

Please generate a comprehensive conversation practice in the following JSON structure (output ONLY the JSON, no explanation):

{
  "title": "Conversation title in English",
  "scenario": "Detailed scenario description",
  "description": "What students will learn from this practice",
  "difficulty": "${d.difficulty}",
  "duration": ${d.duration},
  "participants": ["Role 1", "Role 2"${d.participantCount===3?', "Role 3"':""}],
  "dialogue": [
    {
      "id": "turn_001",
      "speaker": "Role name",
      "text": "English dialogue text",
      "translation": "Chinese translation",
      "pronunciation": "Phonetic transcription for difficult words",
      "keyWords": ["key", "vocabulary", "words"],
      "difficulty": "easy|normal|hard",
      "practicePoint": "What to focus on in this turn",
      "expectedResponseHints": ["Hint 1 for student response", "Hint 2"]
    }
    // Generate at least 8-12 dialogue turns for ${d.difficulty} level
    // Easy: 8-10 turns, Normal: 10-14 turns, Hard: 12-16 turns
  ],
  "vocabulary": [
    {
      "word": "vocabulary word",
      "pronunciation": "/fnetk/",
      "meaning": "",
      "example": "Example sentence in English",
      "difficulty": "easy|normal|hard"
    }
    // Include at least 10-15 vocabulary items relevant to the conversation
  ],
  "practiceGoals": [
    "Learning objective 1",
    "Learning objective 2",
    "Learning objective 3"
    // At least 3-5 clear learning objectives
  ],
  "evaluationCriteria": {
    "pronunciation": 0.3,
    "grammar": 0.25,
    "fluency": 0.25,
    "appropriateness": 0.2
  },
  "culturalNotes": [
    "Cultural insight 1",
    "Cultural insight 2"
    // 2-4 cultural notes if relevant
  ],
  "commonMistakes": [
    "Common mistake 1 with correction",
    "Common mistake 2 with correction"
    // 3-5 common mistakes students might make
  ]
}

Requirements for dialogue generation:
1. Each dialogue turn should be natural and contextually appropriate
2. Include varied sentence structures appropriate for ${d.difficulty} level
3. Incorporate the vocabulary items naturally in the dialogue
4. Provide helpful hints for expected student responses
5. Progress the conversation logically toward a natural conclusion
6. Include appropriate greetings, transitions, and closings
7. For ${d.difficulty} level:
   - Easy: Simple present/past tense, basic vocabulary, short sentences
   - Normal: Mixed tenses, moderate vocabulary, compound sentences
   - Hard: Complex grammar, advanced vocabulary, sophisticated expressions

All text content should be natural English with accurate Chinese translations.
Focus on practical, real-world communication that students can apply.
`}generateConversationFeedback(d,c,o,m){return H(this,null,function*(){const x=`
Evaluate this English conversation practice response:

Context: ${o.practicePoint}
Expected Response Hints: ${o.expectedHints.join(", ")}
Difficulty Level: ${o.difficulty}

Original Prompt/Situation: "${d}"
Student Response: "${c}"

Please provide detailed feedback in the following JSON format (output ONLY JSON):

{
  "overallScore": [0-100 integer],
  "pronunciationScore": [0-100 integer, based on word choice and structure],
  "grammarScore": [0-100 integer],
  "fluencyScore": [0-100 integer, based on coherence and naturalness],
  "appropriatenessScore": [0-100 integer, based on context appropriateness],
  "feedback": [
    "Positive feedback point 1",
    "Positive feedback point 2",
    "Area for improvement 1",
    "Area for improvement 2"
  ],
  "suggestions": [
    "Specific suggestion 1",
    "Specific suggestion 2",
    "Alternative expression suggestion"
  ],
  "encouragement": "Encouraging message for the student"
}

Evaluation criteria:
- Pronunciation: Judge based on likely pronunciation of written response
- Grammar: Check sentence structure, tenses, word order
- Fluency: Assess naturalness and coherence of response  
- Appropriateness: How well the response fits the conversational context
- Be constructive and encouraging while providing specific improvement suggestions
- Consider the difficulty level when scoring (more lenient for easy level)
`;return yield Ie(x,m)})}getConversationTemplates(){return[{category:" (Daily Life)",scenarios:[{title:"",scenario:"Student plays customer ordering coffee and snacks",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Tourist asking for directions to nearby attractions",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Shopping for groceries and asking about products",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Business English)",scenarios:[{title:"",scenario:"Job interview for entry-level position",suggestedDifficulty:"hard",participants:["",""]},{title:"",scenario:"Team meeting discussing project progress",suggestedDifficulty:"hard",participants:["","A","B"]},{title:"",scenario:"Handling customer complaints and inquiries",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Travel English)",scenarios:[{title:"",scenario:"Checking in at the airport and asking about flights",suggestedDifficulty:"normal",participants:["",""]},{title:"",scenario:"Checking into hotel and requesting services",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Visiting tourist attractions and asking about information",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Academic English)",scenarios:[{title:"",scenario:"Participating in classroom discussion about a topic",suggestedDifficulty:"hard",participants:["",""]},{title:"",scenario:"Asking librarian for help finding resources",suggestedDifficulty:"normal",participants:["",""]}]}]}getDifficultyLevels(){return[{level:"easy",description:" - ",characteristics:["","","","",""]},{level:"normal",description:" - ",characteristics:["","","","",""]},{level:"hard",description:" - ",characteristics:["","","","",""]}]}}const Bi=new gf,ff=({config:r,onConfigChange:d,onRegenerate:c,isGenerating:o})=>{const m={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},x=(b,p)=>{const k=ja[b],T=Math.max(0,Math.min(k,p)),v={easy:me(ie({},r.easy),{[b]:T}),normal:me(ie({},r.normal),{[b]:T}),hard:me(ie({},r.hard),{[b]:T})};d(v)},g=()=>{d(gm)},j=()=>{const b=Object.values(r.easy).reduce((T,v)=>T+v,0),p=Object.values(r.normal).reduce((T,v)=>T+v,0),k=Object.values(r.hard).reduce((T,v)=>T+v,0);return b+p+k},f=b=>r.easy[b]+r.normal[b]+r.hard[b];return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-indigo-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-indigo-600",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["  : ",t.jsx("span",{className:"font-semibold text-indigo-600",children:j()})," "]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:g,className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:""}),t.jsx("button",{onClick:c,disabled:o,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-md flex items-center gap-2 font-medium",children:o?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:""}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]})})]})]}),t.jsx("div",{className:"space-y-6",children:Object.keys(m).map(b=>{const p=ja[b],k=r.easy[b],T=f(b);return t.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 rounded-lg p-5 border border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),t.jsx("h4",{className:"font-semibold text-lg text-gray-800",children:m[b]}),t.jsxs("span",{className:"text-sm text-gray-500 bg-white px-2 py-1 rounded-full border",children:[": 0-",p," "]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:[": ",t.jsx("span",{className:"font-mono font-medium",children:k})," "]}),t.jsxs("div",{className:"text-xs text-indigo-600",children:[": ",t.jsx("span",{className:"font-semibold",children:T})," "]})]})]}),t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsx("button",{onClick:()=>x(b,k-1),className:"w-10 h-10 rounded-full bg-red-100 hover:bg-red-200 flex items-center justify-center text-red-600 font-bold text-lg transition-colors shadow-sm",disabled:k<=0,children:"-"}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:k}),t.jsx("div",{className:"text-xs text-gray-500",children:""})]}),t.jsx("button",{onClick:()=>x(b,k+1),className:"w-10 h-10 rounded-full bg-green-100 hover:bg-green-200 flex items-center justify-center text-green-600 font-bold text-lg transition-colors shadow-sm",disabled:k>=p,children:"+"})]}),t.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-700 text-sm font-semibold mb-1",children:r.easy[b]}),t.jsx("div",{className:"text-xs text-green-700",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-700 text-sm font-semibold mb-1",children:r.normal[b]}),t.jsx("div",{className:"text-xs text-yellow-700",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-red-700 text-sm font-semibold mb-1",children:r.hard[b]}),t.jsx("div",{className:"text-xs text-red-700",children:""})]})]})]},b)})}),t.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-blue-600 mt-0.5 flex-shrink-0",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsx("p",{className:"font-medium mb-2",children:" "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),t.jsx("p",{children:""})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),t.jsx("p",{children:": 0-10 | : 0-2"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),t.jsx("p",{children:" 0 "})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),t.jsx("p",{children:" 1-2 "})]})]})]})]})})]})};var pf=Zh();const dm=xm(pf),xn=({url:r,title:d="QR Code",size:c=256,className:o="",showDownload:m=!0,onError:x})=>{const[g,j]=S.useState(""),[f,b]=S.useState(!0),[p,k]=S.useState(null),T=S.useRef(null);S.useEffect(()=>{r&&H(null,null,function*(){try{b(!0),k(null);const A={width:c,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"},X=yield dm.toDataURL(r,A);j(X),T.current&&(yield dm.toCanvas(T.current,r,A))}catch(A){const X=A instanceof Error?A.message:"QR Code ";k(X),x==null||x(X)}finally{b(!1)}})},[r,c,x]);const v=()=>{if(T.current)try{const E=document.createElement("a");E.download=`qrcode-${Date.now()}.png`,E.href=T.current.toDataURL(),document.body.appendChild(E),E.click(),document.body.removeChild(E)}catch(E){console.error(" QR Code :",E)}},w=()=>H(null,null,function*(){if(T.current)try{T.current.toBlob(E=>H(null,null,function*(){if(E&&navigator.clipboard)try{yield navigator.clipboard.write([new ClipboardItem({"image/png":E})]),alert("QR Code ")}catch(A){console.error(":",A),alert("")}}))}catch(E){console.error(" QR Code :",E)}});return f?t.jsxs("div",{className:`flex flex-col items-center p-4 ${o}`,children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-3"}),t.jsx("p",{className:"text-sm text-gray-600",children:" QR Code ..."})]}):p?t.jsxs("div",{className:`flex flex-col items-center p-4 text-red-600 ${o}`,children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 mb-2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),t.jsx("p",{className:"text-sm text-center",children:p})]}):t.jsxs("div",{className:`flex flex-col items-center ${o}`,children:[d&&t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 text-center",children:d}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border",children:t.jsx("img",{src:g,alt:`QR Code for ${d}`,className:"block",style:{width:c,height:c}})}),t.jsx("canvas",{ref:T,style:{display:"none"},width:c,height:c}),t.jsx("div",{className:"mt-3 max-w-xs w-full",children:t.jsx("p",{className:"text-xs text-gray-500 text-center break-all",children:r})}),m&&t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]}),t.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),""]})]})]})},um=[{key:"objectives",label:""},{key:"breakdown",label:""},{key:"confusing",label:""},{key:"activities",label:""},{key:"conversation",label:""},{key:"writing",label:""},{key:"quiz",label:""}],mo=({content:r,topic:d,selectedLevel:c,selectedVocabularyLevel:o,apiKey:m,onContentUpdate:x})=>{const[g,j]=Me.useState(""),[f,b]=Me.useState(""),[p,k]=Me.useState(um[0].key),[T,v]=Me.useState(!1),[w,E]=Me.useState(""),[A,X]=Me.useState(""),[oe,F]=Me.useState(!1),[J,fe]=Me.useState(""),[P,z]=Me.useState(""),[_,te]=Me.useState(!1),[Ne,xe]=Me.useState(!1),[ce,Y]=Me.useState(""),[K,V]=Me.useState(""),[N,B]=Me.useState(!1),[ne,L]=Me.useState(!1),[O,G]=Me.useState(""),[W,ge]=Me.useState(""),[Te,Ae]=Me.useState(!1),[ee,de]=Me.useState(!1),[ue,pe]=Me.useState(""),[We,Ge]=Me.useState(""),[et,at]=Me.useState(!1),[St,Ht]=Me.useState(gm),[os,Ct]=Me.useState(!1),[Sa,ta]=Me.useState(!1),ka=()=>{navigator.clipboard.writeText(JSON.stringify(r,null,2)).then(()=>{j("JSON "),setTimeout(()=>j(""),2e3)}).catch(se=>{j(""),console.error("Failed to copy: ",se),setTimeout(()=>j(""),2e3)})},Es=()=>{try{cf(r,d),b("HTML "),setTimeout(()=>b(""),3e3)}catch(se){console.error("Failed to export HTML:",se),b(" HTML "),setTimeout(()=>b(""),3e3)}},pn=()=>H(null,null,function*(){v(!0),E(""),X("");try{const se=me(ie({},r),{topic:d,selectedLevel:c,selectedVocabularyLevel:o,sharedAt:new Date().toISOString()}),je=yield Ui(se),qe=`${window.location.origin}/ai-page-gen/share?binId=${je}`;X(qe)}catch(se){E(se.message||"")}finally{v(!1)}}),ds=()=>H(null,null,function*(){if(F(!0),fe(""),z(""),!r.onlineInteractiveQuiz){fe(""),F(!1);return}try{const se=yield Xg({quiz:r.onlineInteractiveQuiz,topic:d,apiKey:m,metadata:{selectedLevel:c==null?void 0:c.name,selectedVocabularyLevel:o==null?void 0:o.name,createdAt:new Date().toISOString(),supportsDiagnostic:!!m}});let je=`${window.location.origin}/ai-page-gen/quiz?binId=${se}`;if(m)try{const qe=yield om(m);je+=`&${qe}`}catch(qe){console.warn(" API Key  API Key:",qe)}z(je)}catch(se){fe(se.message||"")}finally{F(!1)}}),sa=()=>H(null,null,function*(){if(xe(!0),Y(""),V(""),!r.writingPractice){Y(""),xe(!1);return}try{const se=yield Wg({writingPractice:r.writingPractice,topic:d,metadata:{selectedLevel:c==null?void 0:c.name,selectedVocabularyLevel:o==null?void 0:o.name,createdAt:new Date().toISOString()}});let je=`${window.location.origin}/ai-page-gen/writing?binId=${se}`;if(m)try{const qe=yield om(m);je+=`&${qe}`}catch(qe){console.warn(" API Key  API Key:",qe)}V(je)}catch(se){Y(se.message||"")}finally{xe(!1)}}),bn=()=>H(null,null,function*(){L(!0),G(""),ge("");try{const se=me(ie({},r),{topic:d,selectedLevel:c,selectedVocabularyLevel:o,sharedAt:new Date().toISOString()}),je=yield Ui(se),qe=`${window.location.origin}/ai-page-gen/teacher-interactive-prep?binId=${je}`;ge(qe)}catch(se){G(se.message||"")}finally{L(!1)}}),us=()=>H(null,null,function*(){if(!r.learningObjectives){alert("");return}const se=localStorage.getItem("gemini_api_key")||m;if(!se){alert(" Gemini API ");return}Ct(!0);try{const je=yield Mg(d,se,r.learningObjectives,St,c,o),qe=me(ie({},r),{onlineInteractiveQuiz:je});x&&x(qe),ta(!1),alert("")}catch(je){console.error(":",je),alert(": "+(je.message||""))}finally{Ct(!1)}}),gt=()=>H(null,null,function*(){var se;if(!m){pe(" Gemini API ");return}if(!r.learningObjectives||r.learningObjectives.length===0){pe("");return}de(!0),pe(""),Ge("");try{const je={topic:d,scenario:`Practice conversation based on learning objectives: ${r.learningObjectives.map(Ee=>Ee.objective).join(", ")}`,difficulty:(c==null?void 0:c.name)===""?"easy":(c==null?void 0:c.name)===""?"hard":"normal",participantCount:2,duration:10,focusAreas:r.learningObjectives.map(Ee=>Ee.objective),culturalContext:(se=r.contentBreakdown)==null?void 0:se.map(Ee=>Ee.details).join("; ")},it={practice:yield Bi.generateConversationPractice(je,m),metadata:{basedOnTopic:d,createdFrom:"lesson-plan",selectedLevel:c==null?void 0:c.name,selectedVocabularyLevel:o==null?void 0:o.name,createdAt:new Date().toISOString()}},vn=yield wm(it),zs=`${window.location.origin}/ai-page-gen/conversation-practice/${vn}`;Ge(zs)}catch(je){console.error("Failed to generate advanced conversation practice:",je),pe(je.message||"")}finally{de(!1)}});return t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-2 mb-4",children:[t.jsxs("button",{onClick:ka,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors flex items-center text-sm","aria-label":" JSON ",children:[t.jsx(Qg,{className:"w-4 h-4 mr-2"}),"  JSON"]}),t.jsxs("button",{onClick:Es,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center text-sm","aria-label":" HTML ",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})," HTML"]}),t.jsx("button",{onClick:pn,className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:T,children:T?t.jsxs("span",{className:"flex items-center",children:[t.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):t.jsx("span",{children:""})}),t.jsx("button",{onClick:bn,className:"px-4 py-2 bg-emerald-500 text-white rounded-md hover:bg-emerald-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:ne,children:ne?t.jsxs("span",{className:"flex items-center",children:[t.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):t.jsxs("span",{className:"flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),""]})}),g&&t.jsx("span",{className:"text-sm text-green-600",children:g}),f&&t.jsx("span",{className:"text-sm text-blue-600",children:f}),w&&t.jsx("span",{className:"text-sm text-red-600",children:w}),O&&t.jsx("span",{className:"text-sm text-red-600",children:O})]}),A&&t.jsxs("div",{className:"mb-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsx("p",{className:"text-sm text-purple-700 mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:A,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-purple-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(A)}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(A),className:"px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm",children:""})]})]}),W&&t.jsxs("div",{className:"mb-4 p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[t.jsx("p",{className:"text-sm text-emerald-700 mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{type:"text",value:W,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-emerald-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(W)}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(W),className:"px-3 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm",children:""}),t.jsxs("button",{onClick:()=>Ae(!Te),className:"px-3 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm flex items-center gap-1",children:[t.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"})]}),"QR"]})]}),Te&&t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(xn,{url:W,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),t.jsx("div",{className:"text-xs text-emerald-600 bg-emerald-100 px-3 py-2 rounded-lg",children:" "})]}),t.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-lg shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(to,{className:"w-5 h-5 text-indigo-600 flex-shrink-0"}),t.jsx("span",{className:"text-sm font-medium text-indigo-600",children:""})]}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-0 truncate",children:d})]}),(c||o)&&t.jsxs("div",{className:"flex gap-3 ml-6 flex-shrink-0",children:[c&&t.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-indigo-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(ts,{className:"w-4 h-4 text-indigo-500"}),t.jsx("span",{className:"text-xs font-medium text-indigo-600",children:""})]}),t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c.name}),t.jsx("div",{className:"text-xs text-gray-500 truncate max-w-32",title:c.description,children:c.description.length>20?c.description.substring(0,20)+"...":c.description})]}),o&&t.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Ri,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-xs font-medium text-blue-600",children:""})]}),t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:[o.wordCount," "]})]})]})]})}),t.jsxs(hf,{tabs:um,current:p,onChange:k,children:[t.jsx(es,{title:"",icon:t.jsx(ts,{className:"w-7 h-7"}),children:r.learningObjectives&&r.learningObjectives.length>0?r.learningObjectives.map((se,je)=>t.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 last:border-b-0 last:pb-0",children:[t.jsx("h4",{className:"font-semibold text-lg text-green-800 mb-1",children:se.objective}),t.jsx("p",{className:"text-slate-700 mb-2",children:se.description}),se.teachingExample&&t.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-3 rounded-md mt-2",children:[t.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:""}),t.jsx("span",{className:"text-green-900 text-sm",children:se.teachingExample})]})]},je)):t.jsx("p",{children:""})}),t.jsx(es,{title:"",icon:t.jsx(Ri,{className:"w-7 h-7"}),children:r.contentBreakdown&&r.contentBreakdown.length>0?r.contentBreakdown.map((se,je)=>t.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[t.jsx("h4",{className:"font-semibold text-lg text-sky-800 mb-1",children:se.topic}),t.jsx("p",{className:"text-slate-700 mb-3",children:se.details}),se.coreConcept&&t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),t.jsx("span",{className:"text-blue-900 text-sm",children:se.coreConcept})]}),se.teachingSentences&&se.teachingSentences.length>0&&t.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:""}),t.jsx("div",{className:"space-y-1",children:se.teachingSentences.map((qe,it)=>t.jsxs("div",{className:"text-indigo-900 text-sm",children:[t.jsxs("span",{className:"font-mono text-indigo-600",children:[it+1,"."]})," ",qe]},it))})]}),se.teachingTips&&t.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:""}),t.jsx("span",{className:"text-purple-900 text-sm",children:se.teachingTips})]}),se.teachingExample&&t.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-400 p-3 rounded-md",children:[t.jsx("span",{className:"block text-xs font-semibold text-sky-700 mb-1",children:""}),t.jsx("span",{className:"text-sky-900 text-sm",children:se.teachingExample})]})]},je)):t.jsx("p",{children:""})}),t.jsx(es,{title:"",icon:t.jsx(to,{className:"w-7 h-7"}),children:r.confusingPoints&&r.confusingPoints.length>0?r.confusingPoints.map((se,je)=>t.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[t.jsx("h4",{className:"font-semibold text-lg text-red-700 mb-2",children:se.point}),t.jsx("p",{className:"text-slate-700 mb-3",children:se.clarification}),se.errorType&&t.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-orange-700 mb-1",children:""}),t.jsx("span",{className:"text-orange-900 text-sm",children:se.errorType})]}),se.commonErrors&&se.commonErrors.length>0&&t.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-2",children:""}),t.jsx("div",{className:"space-y-1",children:se.commonErrors.map((qe,it)=>t.jsxs("div",{className:"text-red-900 text-sm",children:[t.jsxs("span",{className:"font-mono text-red-600",children:[it+1,"."]})," ",qe]},it))})]}),se.correctVsWrong&&se.correctVsWrong.length>0&&t.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-yellow-700 mb-2",children:""}),t.jsx("div",{className:"space-y-3",children:se.correctVsWrong.map((qe,it)=>t.jsxs("div",{className:"border border-yellow-200 rounded-md p-2 bg-white",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-2",children:[t.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:[t.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:" "}),t.jsx("span",{className:"text-green-900 text-sm",children:qe.correct})]}),t.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[t.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-1",children:" "}),t.jsx("span",{className:"text-red-900 text-sm",children:qe.wrong})]})]}),t.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[t.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),t.jsx("span",{className:"text-blue-900 text-sm",children:qe.explanation})]})]},it))})]}),se.preventionStrategy&&t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),t.jsx("span",{className:"text-blue-900 text-sm",children:se.preventionStrategy})]}),se.correctionMethod&&t.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:""}),t.jsx("span",{className:"text-purple-900 text-sm",children:se.correctionMethod})]}),se.practiceActivities&&se.practiceActivities.length>0&&t.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[t.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:""}),t.jsx("div",{className:"space-y-1",children:se.practiceActivities.map((qe,it)=>t.jsxs("div",{className:"text-indigo-900 text-sm",children:[t.jsxs("span",{className:"font-mono text-indigo-600",children:[it+1,"."]})," ",qe]},it))})]}),se.teachingExample&&t.jsxs("div",{className:"bg-gray-50 border-l-4 border-gray-400 p-3 rounded-md",children:[t.jsx("span",{className:"block text-xs font-semibold text-gray-700 mb-1",children:""}),t.jsx("span",{className:"text-gray-900 text-sm",children:se.teachingExample})]})]},je)):t.jsx("p",{children:""})}),t.jsx(es,{title:"",icon:t.jsx(_g,{className:"w-7 h-7"}),children:r.classroomActivities&&r.classroomActivities.length>0?t.jsx("div",{className:"space-y-6",children:r.classroomActivities.map((se,je)=>t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:[t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-6 py-4 border-b border-slate-200 rounded-t-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-sky-500 text-white rounded-full font-bold text-sm",children:je+1}),t.jsx("h4",{className:"font-bold text-xl text-sky-800",children:se.title})]}),t.jsx("p",{className:"mt-3 text-slate-700 leading-relaxed",children:se.description})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[se.objective&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"font-semibold text-green-800 text-sm",children:""})]}),t.jsx("p",{className:"text-green-900 text-sm leading-relaxed",children:se.objective})]}),se.timing&&t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),t.jsx("span",{className:"font-semibold text-purple-800 text-sm",children:""})]}),t.jsx("p",{className:"text-purple-900 text-sm leading-relaxed",children:se.timing})]}),se.materials&&t.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),t.jsx("span",{className:"font-semibold text-orange-800 text-sm",children:""})]}),t.jsx("p",{className:"text-orange-900 text-sm leading-relaxed",children:se.materials})]}),se.environment&&t.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"}),t.jsx("span",{className:"font-semibold text-teal-800 text-sm",children:""})]}),t.jsx("p",{className:"text-teal-900 text-sm leading-relaxed",children:se.environment})]})]}),se.steps&&se.steps.length>0&&t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-blue-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),t.jsx("span",{className:"font-semibold text-blue-800",children:""})]}),t.jsx("div",{className:"space-y-3",children:se.steps.map((qe,it)=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full font-semibold text-xs flex-shrink-0 mt-0.5",children:it+1}),t.jsx("p",{className:"text-blue-900 text-sm leading-relaxed flex-1",children:qe})]},it))})]})}),se.assessmentPoints&&se.assessmentPoints.length>0&&t.jsx("div",{children:t.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-indigo-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),t.jsx("span",{className:"font-semibold text-indigo-800",children:""})]}),t.jsx("div",{className:"space-y-2",children:se.assessmentPoints.map((qe,it)=>t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),t.jsx("p",{className:"text-indigo-900 text-sm leading-relaxed",children:qe})]},it))})]})})]})]},je))}):t.jsx("p",{children:""})}),t.jsx(es,{title:"",icon:t.jsx(so,{className:"w-7 h-7"}),children:r.englishConversation&&r.englishConversation.length>0?t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:""}),t.jsx(lf,{dialogue:r.englishConversation})]}),m&&t.jsxs("div",{className:"border-t pt-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"AI"})]}),t.jsx("button",{onClick:gt,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2 text-sm",disabled:ee||!m,children:ee?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]})})]}),ue&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ue}),We&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-green-800 mb-1",children:""}),t.jsx("div",{className:"text-xs text-green-600",children:""})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>navigator.clipboard.writeText(We),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:""}),t.jsx("button",{onClick:()=>at(!et),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"QR Code"})]})]}),et&&t.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:t.jsx(xn,{url:We,title:`${d} - `})})]})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-600 mb-4",children:""}),m&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:""}),t.jsx("button",{onClick:gt,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2 mx-auto",disabled:ee,children:ee?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]})}),ue&&t.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm max-w-md mx-auto",children:ue}),We&&t.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg max-w-md mx-auto",children:[t.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:""}),t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsx("button",{onClick:()=>navigator.clipboard.writeText(We),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:""}),t.jsx("button",{onClick:()=>at(!et),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"QR Code"})]}),et&&t.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:t.jsx(xn,{url:We,title:`${d} - `})})]})]})]})}),r.writingPractice?t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-end mb-4",children:t.jsx("button",{onClick:sa,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 text-sm",disabled:Ne,children:Ne?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:""}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),""]})})}),ce&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:ce}),K&&t.jsxs("div",{className:"mb-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("p",{className:"text-sm text-purple-700",children:""}),m&&t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:K,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-purple-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(K)}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[t.jsx("button",{onClick:()=>navigator.clipboard.writeText(K),className:"flex-1 px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm transition-colors",children:""}),t.jsxs("button",{onClick:()=>B(!N),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm flex items-center justify-center gap-1 transition-colors",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]}),N&&t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(xn,{url:K,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),m&&t.jsx("p",{className:"text-xs text-purple-600 mt-2",children:"  API Key AI "})]}),t.jsx(Sm,{content:r.writingPractice,apiKey:m,vocabularyLevel:o||void 0})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-200",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),t.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:""}),t.jsx("p",{className:"text-gray-500",children:""})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-2 mb-4",children:[t.jsx("button",{onClick:ds,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:oe,children:oe?t.jsxs("span",{className:"flex items-center",children:[t.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):t.jsxs("span",{className:"flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),""]})}),t.jsxs("button",{onClick:()=>ta(!Sa),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-colors flex items-center text-sm","aria-label":"",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]})]}),J&&t.jsx("span",{className:"text-sm text-red-600",children:J}),P&&t.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("p",{className:"text-sm text-orange-700",children:""}),m&&t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:P,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-orange-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(P)}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[t.jsxs("button",{onClick:()=>navigator.clipboard.writeText(P),className:"flex-1 px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm flex items-center justify-center gap-1",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),""]}),t.jsxs("button",{onClick:()=>te(!_),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm flex items-center justify-center gap-1",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]}),_&&t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(xn,{url:P,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),m&&t.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"  API Key AI "})]}),Sa&&t.jsx(ff,{config:St,onConfigChange:Ht,onRegenerate:us,isGenerating:os}),t.jsx(nf,{quizzes:r.onlineInteractiveQuiz,topic:d,apiKey:m,enableDiagnostic:!!m})]})]})]})},bf=({learningLevels:r,onLevelSelect:d,onGenerateWithLevel:c,selectedLevelId:o,isLoading:m=!1})=>{var b;const[x,g]=S.useState(o||r.defaultLevelId),j=p=>{g(p.id),d==null||d(p)},f=[...r.suggestedLevels].sort((p,k)=>p.order-k.order);return t.jsx(es,{title:"",icon:t.jsx(ts,{className:"w-7 h-7"}),children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-slate-600 mb-4",children:""}),t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:f.map(p=>t.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${x===p.id?"border-sky-500 bg-sky-50 shadow-md":"border-slate-300 bg-white hover:border-sky-300 hover:shadow-sm"}
              `,onClick:()=>j(p),children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`
                  flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                  ${x===p.id?"bg-sky-500 text-white":"bg-slate-200 text-slate-700"}
                `,children:p.order}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:`
                    text-lg font-semibold mb-2
                    ${x===p.id?"text-sky-700":"text-slate-700"}
                  `,children:p.name}),t.jsx("p",{className:`
                    text-sm leading-relaxed
                    ${x===p.id?"text-sky-600":"text-slate-600"}
                  `,children:p.description})]})]}),x===p.id&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("div",{className:"w-3 h-3 bg-sky-500 rounded-full flex items-center justify-center",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},p.id))}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("span",{children:["",t.jsx("strong",{children:(b=f.find(p=>p.id===x))==null?void 0:b.name})]})]})}),c&&t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>{const p=f.find(k=>k.id===x);p&&c(p)},disabled:m,className:"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:m?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})})})]})]})})},eo=[{id:"beginner",name:" (100-500)",wordCount:500,description:""},{id:"elementary",name:" (500-1000)",wordCount:1e3,description:""},{id:"pre-intermediate",name:" (1000-2000)",wordCount:2e3,description:""},{id:"intermediate",name:" (2000-3500)",wordCount:3500,description:""},{id:"upper-intermediate",name:" (3500-5000)",wordCount:5e3,description:""},{id:"advanced",name:" (5000-7000)",wordCount:7e3,description:""}],vf=({onVocabularyLevelSelect:r,selectedLevel:d,isVisible:c=!0})=>{var g,j;const[o,m]=S.useState((d==null?void 0:d.id)||"intermediate"),x=f=>{m(f.id),r(f)};return c?t.jsx(es,{title:"",icon:t.jsx(Ri,{className:"w-7 h-7"}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-slate-600",children:""}),t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:eo.map(f=>t.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${o===f.id?"border-green-500 bg-green-50 shadow-md":"border-slate-300 bg-white hover:border-green-300 hover:shadow-sm"}
              `,onClick:()=>x(f),children:[t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`
                    flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                    ${o===f.id?"bg-green-500 text-white":"bg-slate-200 text-slate-700"}
                  `,children:f.wordCount>=1e3?`${f.wordCount/1e3}k`:f.wordCount}),t.jsx("h4",{className:`
                    text-sm font-semibold
                    ${o===f.id?"text-green-700":"text-slate-700"}
                  `,children:f.name})]}),t.jsx("p",{className:`
                  text-xs leading-relaxed
                  ${o===f.id?"text-green-600":"text-slate-600"}
                `,children:f.description})]}),o===f.id&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},f.id))}),t.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[t.jsx(Ri,{className:"w-4 h-4"}),t.jsxs("span",{children:["",t.jsx("strong",{children:(g=eo.find(f=>f.id===o))==null?void 0:g.name}),"",(j=eo.find(f=>f.id===o))==null?void 0:j.wordCount," "]})]})})]})}):null},Tm=({isOpen:r,onSave:d})=>{const[c,o]=S.useState("");return r?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-sky-700",children:" Gemini API "}),t.jsx("input",{type:"password",className:"w-full border border-slate-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-sky-400",placeholder:" Gemini API Key...",value:c,onChange:m=>o(m.target.value)}),t.jsx("button",{className:"w-full bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 rounded transition",onClick:()=>{c.trim()&&(d(c.trim()),o(""))},children:""}),t.jsx("p",{className:"text-xs text-slate-500 mt-3",children:""})]})}):null},mm=({onClose:r,className:d=""})=>{const[c,o]=S.useState(""),[m,x]=S.useState(!1),[g,j]=S.useState(!1),[f,b]=S.useState(!1);S.useEffect(()=>{const E=localStorage.getItem("gemini_api_key");E?(o(E),b(!0)):j(!0)},[]);const p=()=>{const E=c.trim();E&&(localStorage.setItem("gemini_api_key",E),o(E),b(!0),j(!1),r&&r())},k=()=>{j(!0),x(!0)},T=()=>{confirm(" API Key  AI ")&&(localStorage.removeItem("gemini_api_key"),o(""),b(!1),j(!0),x(!1))},v=()=>{if(f){const E=localStorage.getItem("gemini_api_key");o(E||""),j(!1),x(!1)}r&&r()},w=m?c:c.replace(/./g,"");return t.jsx("div",{className:`bg-white rounded-lg shadow-lg border border-gray-200 ${d}`,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vm,{className:"w-5 h-5 text-blue-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Gemini API Key "})]}),r&&t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ig,{className:"w-5 h-5"})})]}),f&&!g&&t.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(cs,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-800",children:"API Key "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"text-sm text-gray-700 bg-white px-2 py-1 rounded border flex-1",children:w}),t.jsx("button",{onClick:()=>x(!m),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:m?" API Key":" API Key",children:m?t.jsx(im,{className:"w-4 h-4"}):t.jsx(qi,{className:"w-4 h-4"})})]})]}),g&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:m?"text":"password",value:c,onChange:E=>o(E.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" Gemini API Key"}),t.jsx("button",{onClick:()=>x(!m),className:"px-3 py-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-lg transition-colors",title:m?"":"",children:m?t.jsx(im,{className:"w-4 h-4"}):t.jsx(qi,{className:"w-4 h-4"})})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",t.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google AI Studio"}),"  API Key"]})]}),t.jsx("div",{className:"flex gap-2 justify-end",children:g?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:v,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),t.jsx("button",{onClick:p,disabled:!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:T,className:"px-4 py-2 text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:""}),t.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})}),t.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:" API Key"}),t.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[t.jsx("li",{children:" API Key "}),t.jsx("li",{children:"  Google AI "}),t.jsx("li",{children:"  API Key"})]})]})]})})},jf=({className:r="",compact:d=!1})=>{const[c,o]=S.useState(!1),[m,x]=S.useState(!1),[g,j]=S.useState("");S.useEffect(()=>{f()},[]);const f=()=>{const p=localStorage.getItem("gemini_api_key");if(p&&p.trim()){o(!0);const k=p.length>10?`${p.substring(0,6)}...${p.substring(p.length-4)}`:"";j(k)}else o(!1),j("")},b=()=>{x(!1),f()};return d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`flex items-center ${r}`,children:c?t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-3 py-2 text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors text-sm",title:" API Key",children:[t.jsx(cs,{className:"w-4 h-4"}),t.jsx("span",{children:"API Key "}),t.jsx(Pc,{className:"w-3 h-3"})]}):t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-3 py-2 text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors text-sm",title:" API Key",children:[t.jsx(rm,{className:"w-4 h-4"}),t.jsx("span",{children:" API Key"}),t.jsx(Pc,{className:"w-3 h-3"})]})}),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsx(mm,{onClose:b})})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 ${r}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(vm,{className:`w-5 h-5 ${c?"text-green-600":"text-gray-400"}`}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"API Key "}),c?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(cs,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"text-xs text-green-600",children:""}),t.jsx("code",{className:"text-xs text-gray-500",children:g})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(rm,{className:"w-4 h-4 text-yellow-600"}),t.jsx("span",{className:"text-xs text-yellow-600",children:" -  AI "})]})]})]}),t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[t.jsx(Pc,{className:"w-4 h-4"}),c?"":""]})]})}),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsx(mm,{onClose:b})})})]})};class yf{constructor(){this.dbName="AILearningPageGenerator",this.version=1,this.storeName="lessonPlans",this.db=null}init(){return H(this,null,function*(){return new Promise((d,c)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=()=>{c(new Error("Failed to open IndexedDB"))},o.onsuccess=m=>{this.db=m.target.result,d()},o.onupgradeneeded=m=>{const x=m.target.result;if(!x.objectStoreNames.contains(this.storeName)){const g=x.createObjectStore(this.storeName,{keyPath:"id"});g.createIndex("topic","topic",{unique:!1}),g.createIndex("createdAt","createdAt",{unique:!1}),g.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1})}}})})}ensureDB(){return H(this,null,function*(){if(this.db||(yield this.init()),!this.db)throw new Error("Database not initialized");return this.db})}saveLessonPlan(d){return H(this,null,function*(){const c=yield this.ensureDB();return new Promise((o,m)=>{const j=c.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(d);j.onsuccess=()=>o(),j.onerror=()=>m(new Error("Failed to save lesson plan"))})})}getAllLessonPlans(){return H(this,null,function*(){const d=yield this.ensureDB();return new Promise((c,o)=>{const j=d.transaction([this.storeName],"readonly").objectStore(this.storeName).index("lastAccessedAt").openCursor(null,"prev"),f=[];j.onsuccess=b=>{const p=b.target.result;p?(f.push(p.value),p.continue()):c(f)},j.onerror=()=>o(new Error("Failed to get lesson plans"))})})}getLessonPlan(d){return H(this,null,function*(){const c=yield this.ensureDB();return new Promise((o,m)=>{const j=c.transaction([this.storeName],"readonly").objectStore(this.storeName).get(d);j.onsuccess=()=>{const f=j.result;o(f||null)},j.onerror=()=>m(new Error("Failed to get lesson plan"))})})}updateLastAccessed(d){return H(this,null,function*(){const c=yield this.getLessonPlan(d);c&&(c.lastAccessedAt=new Date().toISOString(),yield this.saveLessonPlan(c))})}deleteLessonPlan(d){return H(this,null,function*(){const c=yield this.ensureDB();return new Promise((o,m)=>{const j=c.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(d);j.onsuccess=()=>o(),j.onerror=()=>m(new Error("Failed to delete lesson plan"))})})}searchLessonPlans(d){return H(this,null,function*(){const c=yield this.getAllLessonPlans(),o=d.toLowerCase();return c.filter(m=>m.topic.toLowerCase().includes(o))})}getSharedLessonPlans(){return H(this,null,function*(){return(yield this.getAllLessonPlans()).filter(c=>{var o;return((o=c.metadata)==null?void 0:o.isShared)===!0})})}getLocalLessonPlans(){return H(this,null,function*(){return(yield this.getAllLessonPlans()).filter(c=>{var o;return!((o=c.metadata)!=null&&o.isShared)})})}cleanupOldLessonPlans(d=50){return H(this,null,function*(){const c=yield this.getAllLessonPlans();if(c.length>d){const o=c.slice(d);for(const m of o)yield this.deleteLessonPlan(m.id)}})}getStorageStats(){return H(this,null,function*(){var c,o;const d=yield this.getAllLessonPlans();return{totalCount:d.length,totalSizeEstimate:JSON.stringify(d).length,oldestPlan:(c=d[d.length-1])==null?void 0:c.topic,newestPlan:(o=d[0])==null?void 0:o.topic}})}}const wt=new yf,Nf=r=>{const d=Date.now(),c=Math.random().toString(36).substr(2,9);return`lesson_${d}_${c}`},wf=(r,d)=>{const c=new Date().toISOString();return{id:Nf(),topic:r,createdAt:c,lastAccessedAt:c,content:d,metadata:{totalSections:[d.learningObjectives,d.contentBreakdown,d.confusionPoints,d.classroomActivities,d.quiz,d.writingPractice].filter(Boolean).length,hasQuiz:!!d.quiz,hasWriting:!!d.writingPractice}}},Sf=({quiz:r,topic:d,apiKey:c,supportsDiagnostic:o=!1,quizBinId:m})=>{const[x,g]=S.useState(ht.Easy),[j,f]=S.useState([]),[b,p]=S.useState(!1),[k,T]=S.useState(""),[v,w]=S.useState(!1),[E,A]=S.useState(""),[X,oe]=S.useState(!1),[F,J]=S.useState(!1),fe=S.useCallback((Y,K,V,N,B,ne)=>{if(!o)return;const L=`${x}-${Y}-${K}`,O={questionId:L,questionType:Y,difficulty:x.toLowerCase(),userAnswer:V,correctAnswer:N,isCorrect:B,responseTime:ne,attempts:1};f(G=>{const W=G.findIndex(ge=>ge.questionId===L);if(W>=0){const ge=[...G];return ge[W]=me(ie({},ge[W]),{userAnswer:V,isCorrect:B,attempts:(ge[W].attempts||1)+1}),ge}return[...G,O]})},[x,o]),P=(Y,K)=>{switch(Y){case"trueFalse":return K.isTrue;case"multipleChoice":return K.options[K.correctAnswerIndex];case"fillInTheBlanks":return K.correctAnswers;case"sentenceScramble":return K.originalSentence;case"memoryCardGame":return K.pairs;default:return null}},z=()=>{const Y=x.toLowerCase();return j.filter(K=>K.difficulty===Y)},_=S.useCallback(()=>H(null,null,function*(){const Y=z();if(Y.length===0){alert("");return}if(!k.trim()){oe(!0);return}w(!0);try{const K=bm(Y),V=x===ht.Easy?"":x===ht.Normal?"":"",N=(r==null?void 0:r[x])||{},B=yield Pg({studentName:k.trim(),topic:d,difficulty:V,responses:Y,overallScore:K,completedAt:new Date().toISOString(),quizBinId:m,quizContent:N,metadata:{totalQuestions:Y.length,correctAnswers:Y.filter(O=>O.isCorrect).length,selectedDifficulty:x}}),L=`${window.location.origin}/ai-page-gen/student-results?binId=${B}`;A(L),navigator.clipboard&&window.isSecureContext?(yield navigator.clipboard.writeText(L),alert("")):alert("")}catch(K){console.error(":",K),alert("")}finally{w(!1)}}),[z,k,d,x,m]);if(b&&o&&c&&z().length>0)return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(hn,{className:"w-8 h-8 text-indigo-600"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),t.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 text-sm font-medium rounded-full",children:[x===ht.Easy?"":x===ht.Normal?"":""," "]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(ts,{className:"w-5 h-5"}),t.jsx("span",{className:"text-lg font-medium",children:d})]})]})}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t.jsx(oo,{topic:`${d} (${x===ht.Easy?"":x===ht.Normal?"":""})`,apiKey:c,mode:"student",initialResponses:z(),onClose:()=>p(!1),onRetakeQuiz:()=>{const Y=x.toLowerCase();f(K=>K.filter(V=>V.difficulty!==Y)),p(!1)},onContinueLearning:()=>p(!1)})})]});if(!r)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx(pl,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600 text-lg",children:""})]});const te=r[x],Ne=[{key:ht.Easy,label:"",color:"bg-green-500 hover:bg-green-600"},{key:ht.Normal,label:"",color:"bg-yellow-500 hover:bg-yellow-600"},{key:ht.Hard,label:"",color:"bg-red-500 hover:bg-red-600"}],xe={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},ce=(Y,K)=>{if(!K||K.length===0)return null;const V=N=>o?(B,ne,L)=>{const O=P(Y,K[N]);fe(Y,N,B,O,ne,L)}:void 0;switch(Y){case"trueFalse":return t.jsx("div",{className:"space-y-4",children:K.map((N,B)=>t.jsx(io,{question:N,itemNumber:B+1,onAnswer:V(B)},`${x}-tf-${B}`))});case"multipleChoice":return t.jsx("div",{className:"space-y-4",children:K.map((N,B)=>t.jsx(ro,{question:N,itemNumber:B+1,onAnswer:V(B)},`${x}-mc-${B}`))});case"fillInTheBlanks":return t.jsx("div",{className:"space-y-4",children:K.map((N,B)=>t.jsx(jm,{question:N,itemNumber:B+1,onAnswer:V(B)},`${x}-fb-${B}`))});case"sentenceScramble":return t.jsx("div",{className:"space-y-4",children:K.map((N,B)=>t.jsx(ym,{question:N,itemNumber:B+1,onAnswer:V(B)},`${x}-ss-${B}`))});case"memoryCardGame":return t.jsx("div",{className:"space-y-4",children:K.map((N,B)=>t.jsx(co,{question:N,itemNumber:B+1,onAnswer:V(B)},`${x}-mcg-${B}`))});default:return null}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(pl,{className:"w-8 h-8 text-indigo-600"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsx(ya,{className:"w-4 h-4"}),""]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(ts,{className:"w-5 h-5"}),t.jsx("span",{className:"text-lg font-medium",children:d}),o&&t.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[o&&z().length>0&&t.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx(hn,{className:"w-5 h-5"})," (",z().length,")"]}),z().length>0&&t.jsxs("button",{onClick:_,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),v?"...":` (${z().length})`]})]})]})]})}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[o&&t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(hn,{className:"w-5 h-5 text-blue-400 mt-0.5"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm text-blue-700 font-medium",children:" AI "}),t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:""})]})]})}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:""}),t.jsx("div",{className:"flex flex-wrap gap-3",children:Ne.map(({key:Y,label:K,color:V})=>t.jsx("button",{onClick:()=>g(Y),className:`px-6 py-3 rounded-lg text-white font-medium transition-all transform hover:scale-105 shadow-md
                  ${x===Y?`${V} ring-4 ring-opacity-50`:"bg-gray-400 hover:bg-gray-500"}
                `,children:K},Y))})]}),te&&t.jsx("div",{className:"space-y-8",children:Object.keys(xe).map(Y=>{const K=te[Y],V=ce(Y,K);return V?t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-3 border-b border-gray-200",children:[t.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:xe[Y]})]}),V]},Y):null})}),(!te||Object.values(te).every(Y=>!Y||Y.length===0))&&t.jsx("div",{className:"text-center py-12",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[t.jsx(pl,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600 text-lg",children:""}),t.jsx("p",{className:"text-slate-500 text-sm mt-2",children:""})]})})]}),X&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Y=>{Y.target===Y.currentTarget&&oe(!1)},children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),t.jsx("button",{onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:""}),t.jsx("input",{type:"text",value:k,onChange:Y=>T(Y.target.value),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",onKeyPress:Y=>Y.key==="Enter"&&_()}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>oe(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:""}),t.jsx("button",{onClick:_,disabled:!k.trim()||v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?"...":""})]})]})}),E&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Y=>{Y.target===Y.currentTarget&&(A(""),J(!1))},children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" "}),t.jsx("button",{onClick:()=>{A(""),J(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:""}),t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:E,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded text-sm"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[t.jsx("button",{onClick:()=>H(null,null,function*(){navigator.clipboard&&window.isSecureContext&&(yield navigator.clipboard.writeText(E),alert(""))}),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:""}),t.jsxs("button",{onClick:()=>J(!F),className:"flex-1 px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors flex items-center justify-center gap-1",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]})}),F&&t.jsx("div",{className:"mb-4 flex justify-center",children:t.jsx(xn,{url:E,title:" QR Code",size:200,className:"bg-white"})}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:t.jsxs("p",{className:"text-sm text-blue-700",children:[" ",t.jsx("strong",{children:""}),t.jsx("br",{})," ",k," ",d,"(",x===ht.Easy?"":x===ht.Normal?"":"",")  AI "]})}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>{A(""),J(!1)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})})]})}),t.jsx("footer",{className:"bg-white border-t mt-12 py-6",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:t.jsx("p",{className:"text-sm text-gray-500",children:" AI   "})})})]})},kf=()=>{const[r]=Na(),d=r.get("binId"),[c,o]=Me.useState(null),[m,x]=Me.useState(""),[g,j]=Me.useState(""),[f,b]=Me.useState(!1),[p,k]=Me.useState(!1),[T,v]=Me.useState("");return Me.useEffect(()=>{if(!d){v("ID");return}H(null,null,function*(){k(!0);try{const E=yield Jg(d);o(E.quiz),x(E.topic);let A=E.apiKey||"";try{const X=yield Am(r);X&&(A=X,console.log(" URL  API Key "))}catch(X){console.warn(" URL API Key :",X)}j(A),b(!!A)}catch(E){v(E.message||"")}finally{k(!1)}})},[d,r]),p?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ot,{}),t.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):T?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600 mb-4",children:T}),t.jsx("p",{className:"text-sm text-gray-500",children:""})]})}):!c||!m?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[t.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600",children:""})]})}):t.jsx(Sf,{quiz:c,topic:m,apiKey:g,supportsDiagnostic:f,quizBinId:d})},Cf=()=>{const[r]=Na(),[d,c]=S.useState(null),[o,m]=S.useState(!0),[x,g]=S.useState(null),[j,f]=S.useState(""),[b,p]=S.useState("manual"),k=r.get("binId");S.useEffect(()=>{H(null,null,function*(){if(!k){g(" ID"),m(!1);return}try{m(!0);const w=yield Fg(k);c(w.writingPractice);try{const E=yield Am(r);E&&(f(E),p("url"),localStorage.setItem("gemini_api_key",E),console.log(" URL  API Key  AI "))}catch(E){console.warn(" URL API Key :",E)}}catch(w){console.error(":",w),g("")}finally{m(!1)}})},[k,r]),S.useEffect(()=>{if(!j){const v=localStorage.getItem("gemini_api_key");v&&(f(v),p("localStorage"))}},[]);const T=v=>{v.preventDefault();const w=j.trim();w&&(localStorage.setItem("gemini_api_key",w),f(w),p("manual"))};return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ot,{}),t.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):x?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600 mb-6",children:x}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100",children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1 text-center",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 text-blue-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:" "}),t.jsx("p",{className:"text-gray-600",children:" AI "})]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsx(ya,{className:"w-4 h-4"}),""]})]}),!j&&t.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:" API Key  AI "}),t.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:[" Google Gemini API Key  AI ",t.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:" API Key"})]})]})]}),t.jsxs("form",{onSubmit:T,className:"flex gap-3",children:[t.jsx("input",{type:"password",value:j,onChange:v=>f(v.target.value),placeholder:" Gemini API Key",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("button",{type:"submit",disabled:!j.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""})]})]}),j&&t.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium",children:"API Key  AI "}),b==="url"&&t.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{children:" -  AI "})]}),b==="localStorage"&&t.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{children:""})]})]})]}),t.jsx("button",{onClick:()=>{localStorage.removeItem("gemini_api_key"),f(""),p("manual")},className:"text-sm text-green-600 hover:text-green-800 underline",children:""})]})})]}),d&&t.jsx(Sm,{content:d,apiKey:j,isStudentMode:!0}),t.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[t.jsx("p",{children:"  Google Gemini AI "}),t.jsx("p",{className:"mt-1",children:"  AI "})]})]})})},Af=({responses:r,quizContent:d})=>{const c=(g,j)=>{if(!d)return null;const f=g.questionType,b=d[f];if(!b||!Array.isArray(b))return null;let p=j;if(g.questionId&&typeof g.questionId=="string"){const k=g.questionId.match(/\d+$/);k&&(p=parseInt(k[0]))}return b[p]||null},o=(g,j)=>{var f,b;if(!g)return t.jsx("div",{className:"text-gray-400 italic",children:""});switch(j){case"trueFalse":return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"font-medium",children:" :"}),t.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:g.statement}),g.explanation&&t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("div",{className:"font-medium",children:": "}),t.jsx("div",{children:g.explanation})]})]});case"multipleChoice":return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"font-medium",children:" :"}),t.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:g.question}),t.jsx("div",{className:"font-medium",children:":"}),t.jsx("div",{className:"space-y-1",children:(f=g.options)==null?void 0:f.map((p,k)=>t.jsxs("div",{className:`p-2 rounded text-sm ${k===g.correctAnswerIndex?"bg-green-100 border border-green-300":"bg-gray-50"}`,children:[String.fromCharCode(65+k),". ",p,k===g.correctAnswerIndex&&t.jsx("span",{className:"ml-2 text-green-600",children:" "})]},k))})]});case"fillInTheBlanks":return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"font-medium",children:" :"}),t.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:g.sentence}),t.jsxs("div",{className:"text-sm text-green-700",children:[t.jsx("span",{className:"font-medium",children:": "}),Array.isArray(g.correctAnswers)?g.correctAnswers.join(", "):g.correctAnswers]})]});case"sentenceScramble":return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"font-medium",children:" :"}),t.jsx("div",{className:"text-sm text-gray-600",children:":"}),t.jsx("div",{className:"bg-yellow-50 p-2 rounded text-sm",children:Array.isArray(g.scrambledWords)?g.scrambledWords.join(" | "):""}),t.jsxs("div",{className:"text-sm text-green-700",children:[t.jsx("span",{className:"font-medium",children:": "}),g.correctSentence]})]});case"memoryCardGame":return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"font-medium",children:" :"}),g.instructions&&t.jsx("div",{className:"text-sm text-sky-700 bg-sky-50 p-2 rounded",children:g.instructions}),t.jsx("div",{className:"space-y-1",children:(b=g.pairs)==null?void 0:b.map((p,k)=>t.jsxs("div",{className:"flex items-center justify-between bg-purple-50 p-2 rounded text-sm",children:[t.jsxs("span",{children:[" ",p.question]}),t.jsx("span",{className:"text-purple-600",children:""}),t.jsxs("span",{children:[" ",p.answer]})]},k))})]});default:return t.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(g,null,2)})}},m=(g,j)=>j==="memoryCardGame"&&typeof g=="number"?`: ${g}`:j==="multipleChoice"&&typeof g=="number"?` ${String.fromCharCode(65+g)} (${g})`:typeof g=="object"?JSON.stringify(g,null,2):String(g),x={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""};return t.jsx("div",{className:"space-y-6",children:r.map((g,j)=>{const f=c(g,j);return t.jsxs("div",{className:`p-6 rounded-lg border-2 ${g.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[g.isCorrect?t.jsx(cs,{className:"w-5 h-5 text-green-600"}):t.jsx(wa,{className:"w-5 h-5 text-red-600"}),t.jsxs("span",{className:"font-bold text-lg text-gray-800",children:[" ",j+1,"  - ",x[g.questionType]||g.questionType]})]}),t.jsx("div",{className:"text-sm text-gray-500",children:g.attempts&&g.attempts>1&&` ${g.attempts} `})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:" :"}),t.jsx("div",{className:"border-l-4 border-blue-300 pl-4",children:o(f,g.questionType)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:" :"}),t.jsx("div",{className:"bg-white p-3 rounded border",children:m(g.userAnswer,g.questionType)})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:g.isCorrect?" ":" "}),t.jsx("div",{className:`p-3 rounded border ${g.isCorrect?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:g.isCorrect?"":""})]})]})]},g.questionId||j)})})},Tf=()=>{var P,z;const[r]=Na(),d=r.get("binId"),[c,o]=S.useState(null),[m,x]=S.useState(!0),[g,j]=S.useState(null),[f,b]=S.useState(""),[p,k]=S.useState(!1),[T,v]=S.useState(!1),[w,E]=S.useState(!1);S.useEffect(()=>{H(null,null,function*(){if(!d){j("ID"),x(!1);return}try{x(!0);const te=yield Nm(d);o(te),k(!!te.diagnosticReport)}catch(te){console.error(":",te),j(te instanceof Error?te.message:"")}finally{x(!1)}})},[d]),S.useEffect(()=>{const _=localStorage.getItem("gemini_api_key");_?(b(_),console.log(" localStorage  API Key")):console.log(" API Key")},[]);const A=_=>{_.preventDefault();const te=f.trim();te&&(localStorage.setItem("gemini_api_key",te),b(te),E(!1))},X=()=>{if(!f){E(!0);return}v(!0)},oe=()=>{c!=null&&c.diagnosticReport&&v(!0)};if(m)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ot,{}),t.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})});if(g)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600 mb-6",children:g}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})});if(T&&c)return t.jsx(oo,{topic:`${c.topic} (${c.difficulty}) - ${c.studentName}`,apiKey:f,mode:"teacher",initialResponses:c.responses,quizData:c.quizContent?{topic:c.topic,[((z=(P=c.metadata)==null?void 0:P.selectedDifficulty)==null?void 0:z.toLowerCase())||"normal"]:c.quizContent}:void 0,existingReport:c.diagnosticReport,resultsBinId:d,onClose:()=>v(!1),onReportSaved:_=>{o(te=>te?me(ie({},te),{diagnosticReport:_}):null),k(!0)}});if(!c)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),t.jsx("p",{className:"text-gray-600",children:""})]})});const F=c.responses.filter(_=>_.isCorrect).length,J=c.responses.length,fe=new Date(c.completedAt).toLocaleString("zh-TW");return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ts,{className:"w-8 h-8 text-blue-600"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsx(ya,{className:"w-4 h-4"}),""]})]}),t.jsx("div",{className:"flex items-center gap-2 text-gray-600",children:t.jsx("span",{className:"text-lg font-medium",children:""})})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:[" ",c.studentName||""," "]}),t.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ts,{className:"w-4 h-4"}),t.jsxs("span",{children:["",c.topic]})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("span",{children:["",c.difficulty]})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ao,{className:"w-4 h-4"}),t.jsxs("span",{children:["",fe]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[c.overallScore,"%"]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[F,"/",J," "]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(cs,{className:"w-8 h-8 text-green-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-green-700",children:F}),t.jsx("div",{className:"text-sm text-green-600",children:""})]})]})}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(wa,{className:"w-8 h-8 text-red-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-red-700",children:J-F}),t.jsx("div",{className:"text-sm text-red-600",children:""})]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hn,{className:"w-8 h-8 text-blue-600"}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[c.overallScore,"%"]}),t.jsx("div",{className:"text-sm text-blue-600",children:""})]})]})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex gap-4 items-center",children:[p?t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-medium",children:[t.jsx(hn,{className:"w-5 h-5"})," AI "]}),t.jsx("button",{onClick:X,className:"flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-medium text-sm",children:" "})]}):t.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-medium",children:[t.jsx(hn,{className:"w-5 h-5"})," AI "]}),f?t.jsx("div",{className:"text-sm text-green-600 flex items-center gap-1",children:" API Key  AI "}):t.jsx("div",{className:"text-sm text-amber-600 flex items-center gap-1",children:"  API Key  AI "})]}),t.jsx("div",{className:"text-xs text-gray-500",children:p?t.jsx("span",{children:" "}):f?t.jsx("span",{children:"  API Key"}):null})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  ()"}),t.jsx(Af,{responses:c.responses,quizContent:c.quizContent})]})]}),w&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:_=>{_.target===_.currentTarget&&E(!1)},children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" API Key"}),t.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("p",{className:"text-gray-600 mb-4",children:[" AI  Google Gemini API Key",t.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600 ml-1",children:" API Key"})]}),t.jsxs("form",{onSubmit:A,children:[t.jsx("input",{type:"password",value:f,onChange:_=>b(_.target.value),placeholder:" Gemini API Key",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:!f.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""})]})]})]})})]})},Mf=()=>{const[r,d]=S.useState([]),[c,o]=S.useState(!0),[m,x]=S.useState(null),[g,j]=S.useState(""),[f,b]=S.useState(null),[p,k]=S.useState("list"),[T,v]=S.useState(null),[w,E]=S.useState(null);S.useEffect(()=>{const z=localStorage.getItem("gemini_api_key");E(z),A()},[]);const A=()=>H(null,null,function*(){try{o(!0),x(null),yield wt.init();const z=yield wt.getAllLessonPlans();d(z)}catch(z){console.error(":",z),x("")}finally{o(!1)}}),X=()=>H(null,null,function*(){if(!g.trim()){yield A();return}try{o(!0);const z=yield wt.searchLessonPlans(g);d(z)}catch(z){console.error(":",z),x("")}finally{o(!1)}}),oe=z=>H(null,null,function*(){b(z),k("view");try{yield wt.updateLastAccessed(z.id)}catch(_){console.error(":",_)}}),F=z=>H(null,null,function*(){if(!w){alert(" API Key ");return}v(z.id);try{const _=me(ie({},z.content),{topic:z.topic,selectedLevel:z.content.selectedLevel||null,selectedVocabularyLevel:z.content.selectedVocabularyLevel||null}),te=yield Ui(_,w,!0),Ne=`${window.location.origin}/ai-page-gen/share?binId=${te}`;if(navigator.clipboard&&window.isSecureContext)yield navigator.clipboard.writeText(Ne),alert("");else{const xe=document.createElement("textarea");xe.value=Ne,document.body.appendChild(xe),xe.select(),document.execCommand("copy"),document.body.removeChild(xe),alert(`\\n${Ne}`)}yield wt.updateLastAccessed(z.id)}catch(_){console.error(":",_),alert("")}finally{v(null)}}),J=z=>H(null,null,function*(){if(confirm(`${z.topic}`))try{yield wt.deleteLessonPlan(z.id),yield A()}catch(_){console.error(":",_),alert("")}}),fe=z=>new Date(z).toLocaleString("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=g.trim()?r.filter(z=>z.topic.toLowerCase().includes(g.toLowerCase())):r;return p==="view"&&f?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:()=>{k("list"),b(null)},className:"flex items-center gap-2 px-3 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),""]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx(ya,{className:"w-4 h-4"}),""]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:f.topic}),t.jsxs("p",{className:"text-sm text-gray-600",children:[" ",fe(f.createdAt)]})]}),t.jsxs("button",{onClick:()=>F(f),disabled:T===f.id,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[T===f.id?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(Fc,{className:"w-4 h-4"}),""]})]})})}),t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:t.jsx(mo,{content:f.content,topic:f.topic,selectedLevel:f.content.selectedLevel||null,selectedVocabularyLevel:f.content.selectedVocabularyLevel||null,apiKey:w||void 0,onContentUpdate:z=>H(null,null,function*(){const _=me(ie({},f),{content:z,lastAccessedAt:new Date().toISOString()});b(_);try{yield wt.saveLessonPlan(_),console.log(" IndexedDB")}catch(te){console.error(" IndexedDB :",te)}})})})]}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ts,{className:"w-8 h-8 text-indigo-600"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsx(ya,{className:"w-5 h-5"}),""]})]}),t.jsx("p",{className:"text-gray-600",children:""})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"text",value:g,onChange:z=>j(z.target.value),placeholder:"...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyPress:z=>z.key==="Enter"&&X()}),t.jsx("button",{onClick:X,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""}),t.jsx("button",{onClick:A,className:"px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:""})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:t.jsx(ts,{className:"w-6 h-6 text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length}),t.jsx("p",{className:"text-gray-600",children:""})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:t.jsx(ao,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(z=>{var _;return(_=z.metadata)==null?void 0:_.hasQuiz}).length}),t.jsx("p",{className:"text-gray-600",children:""})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-purple-600",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(z=>{var _;return(_=z.metadata)==null?void 0:_.hasWriting}).length}),t.jsx("p",{className:"text-gray-600",children:""})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:g.trim()?` (${P.length})`:""})}),c?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Ot,{}),t.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]}):m?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("p",{className:"text-red-600 mb-4",children:m}),t.jsx("button",{onClick:A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]}):P.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(ts,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 text-lg mb-2",children:g.trim()?"":""}),t.jsx("p",{className:"text-gray-500",children:g.trim()?"":""})]}):t.jsx("div",{className:"divide-y divide-gray-200",children:P.map(z=>{var _,te,Ne,xe;return t.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z.topic}),((_=z.metadata)==null?void 0:_.isShared)&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t.jsx(Fc,{className:"w-3 h-3"}),""]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ao,{className:"w-4 h-4"}),"",fe(z.createdAt)]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(qi,{className:"w-4 h-4"}),"",fe(z.lastAccessedAt)]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full",children:[((te=z.metadata)==null?void 0:te.totalSections)||0," "]}),((Ne=z.metadata)==null?void 0:Ne.hasQuiz)&&t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:""}),((xe=z.metadata)==null?void 0:xe.hasWriting)&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsxs("button",{onClick:()=>oe(z),className:"flex items-center gap-2 px-3 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:[t.jsx(qi,{className:"w-4 h-4"}),""]}),t.jsxs("a",{href:`/ai-page-gen/teacher-interactive-prep?contentId=${z.id}`,className:"flex items-center gap-2 px-3 py-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",target:"_blank",rel:"noopener noreferrer",children:[t.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]}),t.jsxs("button",{onClick:()=>F(z),disabled:T===z.id,className:"flex items-center gap-2 px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T===z.id?t.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):t.jsx(Fc,{className:"w-4 h-4"}),""]}),t.jsxs("button",{onClick:()=>J(z),className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[t.jsx(Yg,{className:"w-4 h-4"}),""]})]})]})},z.id)})})]})]})]})},xo=({content:r,className:d=""})=>t.jsx("div",{className:`prose prose-slate max-w-none ${d}`,children:t.jsx(Yh,{components:{h1:({children:c})=>t.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4 mt-6 leading-tight",children:c}),h2:({children:c})=>t.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-3 mt-5 leading-tight",children:c}),h3:({children:c})=>t.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-3 mt-4 leading-tight",children:c}),h4:({children:c})=>t.jsx("h4",{className:"text-base font-semibold text-slate-700 mb-2 mt-3 leading-tight",children:c}),p:({children:c})=>t.jsx("p",{className:"text-base leading-relaxed mb-4 text-slate-700",children:c}),ul:({children:c})=>t.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2 text-slate-700",children:c}),ol:({children:c})=>t.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-slate-700",children:c}),li:({children:c})=>t.jsx("li",{className:"leading-relaxed ml-4",children:c}),strong:({children:c})=>t.jsx("strong",{className:"font-bold text-slate-800",children:c}),em:({children:c})=>t.jsx("em",{className:"italic text-slate-700",children:c}),code:x=>{var g=x,{className:c,children:o}=g,m=tm(g,["className","children"]);return c?t.jsx("code",me(ie({className:"block bg-slate-100 text-slate-800 p-4 rounded-lg text-sm font-mono overflow-x-auto mb-4"},m),{children:o})):t.jsx("code",me(ie({className:"bg-slate-100 text-slate-800 px-2 py-1 rounded text-sm font-mono"},m),{children:o}))},blockquote:({children:c})=>t.jsx("blockquote",{className:"border-l-4 border-indigo-300 pl-4 my-4 italic text-slate-600 bg-indigo-50 py-2 rounded-r",children:c}),hr:()=>t.jsx("hr",{className:"my-6 border-slate-300"}),a:({href:c,children:o})=>t.jsx("a",{href:c,className:"text-indigo-600 hover:text-indigo-800 underline font-medium",target:"_blank",rel:"noopener noreferrer",children:o}),table:({children:c})=>t.jsx("div",{className:"overflow-x-auto mb-4",children:t.jsx("table",{className:"w-full border-collapse border border-slate-300 rounded-lg",children:c})}),thead:({children:c})=>t.jsx("thead",{className:"bg-slate-100",children:c}),tbody:({children:c})=>t.jsx("tbody",{children:c}),tr:({children:c})=>t.jsx("tr",{className:"border-b border-slate-200",children:c}),th:({children:c})=>t.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left font-semibold text-slate-700",children:c}),td:({children:c})=>t.jsx("td",{className:"border border-slate-300 px-4 py-2 text-slate-700",children:c})},children:r})}),Ef=()=>{const[r]=Na(),d=r.get("contentId"),c=r.get("binId"),[o,m]=S.useState(null),[x,g]=S.useState(!0),[j,f]=S.useState(null),[b,p]=S.useState(null),[k,T]=S.useState(0),[v,w]=S.useState([]),[E,A]=S.useState({}),[X,oe]=S.useState({});S.useEffect(()=>{F()},[d,c]);const F=()=>H(null,null,function*(){try{g(!0),f(null);let L;if(c)L=yield _i(c);else if(d){yield wt.init();const O=yield wt.getLessonPlan(d);if(!O)throw new Error("");L={topic:O.topic,learningObjectives:O.content.learningObjectives,contentBreakdown:O.content.contentBreakdown,confusingPoints:O.content.confusingPoints,classroomActivities:O.content.classroomActivities,onlineInteractiveQuiz:O.content.quiz,writingPractice:O.content.writingPractice}}else throw new Error("contentId  binId");m(L),J(L),yield fe(L)}catch(L){console.error(":",L),f(L.message||"")}finally{g(!1)}}),J=L=>{const O=[];L.learningObjectives&&L.learningObjectives.length>0&&L.learningObjectives.forEach((G,W)=>{O.push({id:`objective_${W}`,title:`  ${W+1}`,type:"objective",icon:"",description:G.objective.length>50?`${G.objective.substring(0,50)}...`:G.objective,data:G,index:W})}),L.contentBreakdown&&L.contentBreakdown.length>0&&L.contentBreakdown.forEach((G,W)=>{O.push({id:`breakdown_${W}`,title:`  ${W+1}`,type:"breakdown",icon:"",description:G.topic.length>50?`${G.topic.substring(0,50)}...`:G.topic,data:G,index:W})}),L.confusingPoints&&L.confusingPoints.length>0&&L.confusingPoints.forEach((G,W)=>{O.push({id:`confusing_${W}`,title:`  ${W+1}`,type:"confusing",icon:"",description:G.point.length>50?`${G.point.substring(0,50)}...`:G.point,data:G,index:W})}),O.push({id:"summary",title:" ",type:"summary",icon:"",description:""}),w(O)},fe=L=>H(null,null,function*(){const O=d||c||"unknown",G=`interactive_learning_${O}`;try{const W=localStorage.getItem(G);if(W){const ge=JSON.parse(W);p(ge)}else{const ge={contentId:O,topic:L.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};p(ge),localStorage.setItem(G,JSON.stringify(ge))}}catch(W){console.error(":",W);const ge={contentId:O,topic:L.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};p(ge)}}),P=L=>{const O=`interactive_learning_${b==null?void 0:b.contentId}`;L.updatedAt=Date.now(),L.progress.lastUpdateTime=Date.now(),p(L),localStorage.setItem(O,JSON.stringify(L))},z=L=>{L>=0&&L<v.length&&T(L)},_=()=>{k<v.length-1&&T(k+1)},te=()=>{k>0&&T(k-1)},Ne=()=>localStorage.getItem("gemini_api_key")||"",xe=L=>H(null,null,function*(){const O=Ne();if(!O)return console.warn(" API "),null;const G=`${L.type}_${L.index||0}`;if(E[G]||X[G])return E[G]||null;try{oe(ge=>me(ie({},ge),{[G]:!0}));let W=null;switch(L.type){case"objective":W=yield zi(L.data,O);break;case"breakdown":W=yield Oi(L.data,O);break;case"confusing":W=yield Li(L.data,O);break;default:return null}return A(ge=>me(ie({},ge),{[G]:W})),W}catch(W){return console.error(":",W),null}finally{oe(W=>me(ie({},W),{[G]:!1}))}}),ce=L=>{const O=`${L.type}_${L.index||0}`;return!!E[O]},Y=L=>{const O=`${L.type}_${L.index||0}`;return!!X[O]},K=L=>{const O=`${L.type}_${L.index||0}`;return E[O]||null},V=L=>L?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(G=>G.test(L)):!1,N=(L,O)=>V(L)?t.jsx(xo,{content:L,className:O}):t.jsx("span",{className:O,children:L});if(x)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:t.jsx(Ot,{})})});if(j)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),t.jsx("p",{children:j})]})})});if(!o||!b||v.length===0)return null;const B=v[k],ne=()=>{const L=K(B),O=ce(B),G=Y(B),W=!!Ne();switch(B.type){case"objective":const ge=B.data,Te=B.index||0,Ae=L||ge;return t.jsxs("div",{className:"max-w-4xl mx-auto",children:[W&&B.type!=="summary"&&t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:O?"":""}),t.jsx("p",{className:"text-sm text-slate-600",children:O?"":""})]})]}),!O&&t.jsx("button",{onClick:()=>xe(B),disabled:G,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:G?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),O&&t.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-sky-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:N(Ae.objective,"text-4xl font-bold leading-tight")}),Ae.description&&t.jsx("div",{className:"text-xl text-indigo-100 leading-relaxed max-w-3xl mx-auto",children:N(Ae.description,"text-xl text-indigo-100 leading-relaxed")})]}),O&&L?t.jsxs("div",{className:"space-y-8 mb-8",children:[L.personalRelevance&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:N(L.personalRelevance,"text-lg leading-relaxed text-purple-900")})]}),L.teachingExample&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:N(L.teachingExample,"text-lg leading-relaxed text-green-900")})]}),L.encouragement&&t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:N(L.encouragement,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}):Ae.teachingExample&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed",children:N(Ae.teachingExample,"text-lg leading-relaxed")})]}),t.jsx("div",{className:"text-center",children:b.progress.completedObjectives.includes(`objective_${Te}`)?t.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),t.jsx("p",{className:"text-green-600",children:""})]}):t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),t.jsxs("button",{onClick:()=>{var We;const ue=`objective_${Te}`,pe=ie({},b);if(!pe.progress.completedObjectives.includes(ue)){pe.progress.completedObjectives.push(ue),pe.progress.interactionCount+=1;const Ge=(We=o.learningObjectives)==null?void 0:We.findIndex((et,at)=>!pe.progress.completedObjectives.includes(`objective_${at}`)&&at>Te);Ge!==void 0&&Ge!==-1&&(pe.progress.currentObjectiveIndex=Ge)}P(pe)},className:"px-8 py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})})]});case"breakdown":const ee=B.data;return t.jsxs("div",{className:"max-w-5xl mx-auto",children:[W&&B.type!=="summary"&&t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:O?"":""}),t.jsx("p",{className:"text-sm text-slate-600",children:O?"":""})]})]}),!O&&t.jsx("button",{onClick:()=>xe(B),disabled:G,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:G?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),O&&t.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:O&&(L!=null&&L.title)?N(L.title,"text-4xl font-bold leading-tight"):N(ee.topic,"text-4xl font-bold leading-tight")}),O&&(L==null?void 0:L.introduction)&&t.jsx("div",{className:"text-xl text-sky-100 leading-relaxed max-w-3xl mx-auto",children:N(L.introduction,"text-xl text-sky-100 leading-relaxed")})]}),O&&L?t.jsxs("div",{className:"space-y-8 mb-8",children:[L.keyPoints&&L.keyPoints.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:L.keyPoints.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:N(ue,"text-lg text-indigo-900 leading-relaxed")})]},pe))})})]}),L.realLifeExamples&&L.realLifeExamples.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:L.realLifeExamples.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-green-900 leading-relaxed",children:N(ue,"text-lg text-green-900 leading-relaxed")})]},pe))})})]}),L.learningTips&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:N(L.learningTips,"text-lg leading-relaxed text-purple-900")})]}),L.nextSteps&&t.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-2xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-cyan-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-cyan-900",children:N(L.nextSteps,"text-lg leading-relaxed text-cyan-900")})]}),L.encouragement&&t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:L.encouragement})]})]}):t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-slate-700 bg-slate-50 rounded-xl p-6",children:N(ee.details,"text-lg leading-relaxed text-slate-700")})]}),!O&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[ee.coreConcept&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-sky-50 rounded-xl p-6 text-lg leading-relaxed text-sky-900",children:N(ee.coreConcept,"text-lg leading-relaxed text-sky-900")})]}),ee.teachingExample&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:N(ee.teachingExample,"text-lg leading-relaxed text-green-900")})]})]}),ee.teachingSentences&&ee.teachingSentences.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:ee.teachingSentences.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:N(ue,"text-lg text-indigo-900 leading-relaxed")})]},pe))})})]}),ee.teachingTips&&t.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-8 mt-8",children:[t.jsxs("h4",{className:"text-xl font-bold text-amber-700 mb-4 flex items-center",children:[t.jsx("span",{className:"text-2xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg text-amber-800 leading-relaxed",children:N(ee.teachingTips,"text-lg text-amber-800 leading-relaxed")})]})]})]});case"confusing":const de=B.data;return t.jsxs("div",{className:"max-w-5xl mx-auto",children:[W&&B.type!=="summary"&&t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:O?"":""}),t.jsx("p",{className:"text-sm text-slate-600",children:O?"":""})]})]}),!O&&t.jsx("button",{onClick:()=>xe(B),disabled:G,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:G?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),O&&t.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:O&&(L!=null&&L.title)?N(L.title,"text-4xl font-bold leading-tight"):N(de.point,"text-4xl font-bold leading-tight")}),t.jsx("p",{className:"text-xl text-amber-100 leading-relaxed max-w-3xl mx-auto",children:O&&(L!=null&&L.normalizeConfusion)?L.normalizeConfusion:""})]}),O&&L?t.jsxs("div",{className:"space-y-8 mb-8",children:[L.whyItHappens&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-amber-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-amber-50 rounded-xl p-6 text-lg leading-relaxed text-amber-900",children:N(L.whyItHappens,"text-lg leading-relaxed text-amber-900")})]}),L.clearExplanation&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:N(L.clearExplanation,"text-lg leading-relaxed text-green-900")})]}),L.rememberingTricks&&L.rememberingTricks.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:L.rememberingTricks.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-purple-900 leading-relaxed",children:N(ue,"text-lg text-purple-900 leading-relaxed")})]},pe))})})]}),L.practiceExamples&&L.practiceExamples.length>0&&t.jsx("div",{className:"space-y-6",children:L.practiceExamples.map((ue,pe)=>t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:[" ",pe+1]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 mb-6",children:[t.jsx("h5",{className:"text-lg font-bold text-slate-700 mb-3",children:""}),t.jsx("div",{className:"text-lg text-slate-800",children:N(ue.situation,"text-lg text-slate-800")})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-red-50 border-3 border-red-300 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),t.jsx("h5",{className:"text-xl font-bold text-red-700",children:""})]}),t.jsx("div",{className:"text-lg text-red-900 bg-white rounded-lg p-4",children:N(ue.wrongThinking,"text-lg text-red-900")})]}),t.jsxs("div",{className:"bg-green-50 border-3 border-green-300 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),t.jsx("h5",{className:"text-xl font-bold text-green-700",children:""})]}),t.jsx("div",{className:"text-lg text-green-900 bg-white rounded-lg p-4",children:N(ue.rightThinking,"text-lg text-green-900")})]})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[t.jsx("h5",{className:"text-lg font-bold text-blue-700 mb-3",children:""}),t.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:N(ue.explanation,"text-lg text-blue-900 leading-relaxed")})]})]},pe))}),L.confidenceBooster&&t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:N(L.confidenceBooster,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}):t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-amber-800 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-slate-700 bg-amber-50 rounded-xl p-6",children:N(de.clarification,"text-lg leading-relaxed text-slate-700")})]}),de.errorType&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-orange-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-orange-50 rounded-xl p-6 text-lg leading-relaxed text-orange-900",children:N(de.errorType,"text-lg leading-relaxed text-orange-900")})]}),de.correctVsWrong&&de.correctVsWrong.length>0&&t.jsx("div",{className:"space-y-8 mb-8",children:de.correctVsWrong.map((ue,pe)=>t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:[" ",pe+1]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-green-50 border-3 border-green-300 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),t.jsx("h5",{className:"text-xl font-bold text-green-700",children:""})]}),t.jsx("div",{className:"text-xl font-semibold text-green-900 bg-white rounded-lg p-4",children:N(ue.correct,"text-xl font-semibold text-green-900")})]}),t.jsxs("div",{className:"bg-red-50 border-3 border-red-300 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),t.jsx("h5",{className:"text-xl font-bold text-red-700",children:""})]}),t.jsx("div",{className:"text-xl font-semibold text-red-900 bg-white rounded-lg p-4",children:N(ue.wrong,"text-xl font-semibold text-red-900")})]})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[t.jsxs("h5",{className:"text-lg font-bold text-blue-700 mb-3 flex items-center",children:[t.jsx("span",{className:"text-xl mr-2",children:""}),""]}),t.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:N(ue.explanation,"text-lg text-blue-900 leading-relaxed")})]})]},pe))}),de.commonErrors&&de.commonErrors.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-red-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-red-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-3",children:de.commonErrors.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-red-900 leading-relaxed",children:N(ue,"text-lg text-red-900 leading-relaxed")})]},pe))})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[de.preventionStrategy&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:N(de.preventionStrategy,"text-lg leading-relaxed text-purple-900")})]}),de.correctionMethod&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-indigo-50 rounded-xl p-6 text-lg leading-relaxed text-indigo-900",children:N(de.correctionMethod,"text-lg leading-relaxed text-indigo-900")})]})]}),de.practiceActivities&&de.practiceActivities.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mt-8",children:[t.jsxs("h4",{className:"text-2xl font-bold text-cyan-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-cyan-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:de.practiceActivities.map((ue,pe)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-cyan-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:pe+1}),t.jsx("div",{className:"text-lg text-cyan-900 leading-relaxed",children:N(ue,"text-lg text-cyan-900 leading-relaxed")})]},pe))})})]})]});case"summary":return t.jsxs("div",{className:"text-center space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-12",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("h3",{className:"text-3xl font-bold text-green-700 mb-4",children:""}),t.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["",o.topic,""]}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-indigo-600 mb-2",children:""}),t.jsx("div",{className:"text-2xl font-bold text-slate-800",children:b.progress.completedObjectives.length}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-sky-600 mb-2",children:""}),t.jsx("div",{className:"text-2xl font-bold text-slate-800",children:Math.round((Date.now()-b.progress.startTime)/6e4)}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-green-600 mb-2",children:""}),t.jsx("div",{className:"text-2xl font-bold text-slate-800",children:b.progress.interactionCount}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-2xl font-semibold text-purple-700 mb-6",children:" "}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[o.onlineInteractiveQuiz&&t.jsxs("a",{href:c?`/ai-page-gen/quiz?binId=${c}`:`/ai-page-gen/quiz?contentId=${d}`,className:"px-8 py-4 bg-orange-500 text-white font-medium rounded-xl hover:bg-orange-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]}),o.writingPractice&&t.jsxs("a",{href:c?`/ai-page-gen/writing?binId=${c}`:`/ai-page-gen/writing?contentId=${d}`,className:"px-8 py-4 bg-purple-500 text-white font-medium rounded-xl hover:bg-purple-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})]});default:return t.jsx("div",{children:""})}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[t.jsx("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-sm border-b border-slate-200",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-slate-800",children:o.topic}),t.jsxs("p",{className:"text-sm text-slate-600",children:["   ",k+1,"  ",v.length," "]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Math.round((Date.now()-b.progress.startTime)/6e4)," "]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(k+1)/v.length*100}%`}})}),t.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:v.map((L,O)=>{const G=L.type==="objective",W=L.type==="breakdown",ge=L.type==="confusing",Te=L.type==="summary";return t.jsx("button",{onClick:()=>z(O),className:`
                      flex-shrink-0 w-8 h-8 rounded-full text-xs font-bold transition-all duration-200
                      ${O===k?"bg-indigo-500 text-white shadow-lg scale-110":O<k?"bg-green-400 text-white hover:bg-green-500":"bg-slate-300 text-slate-600 hover:bg-slate-400"}
                    `,title:L.title,children:G?(L.index||0)+1:W?"":ge?"":Te?"":O+1},L.id)})}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"text-xs text-slate-500",children:[B.type==="objective"&&" ",B.type==="breakdown"&&" ",B.type==="confusing"&&" ",B.type==="summary"&&" "]})})]})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:B.icon}),t.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:B.title}),t.jsx("div",{className:"text-lg text-slate-600",children:N(B.description,"text-lg text-slate-600")})]}),t.jsx("div",{className:"mb-8",children:ne()}),t.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[t.jsxs("button",{onClick:te,disabled:k===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-slate-600",children:[k+1," / ",v.length]})}),t.jsxs("button",{onClick:_,disabled:k===v.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})};class zf{constructor(){this.dbName="InteractiveContentDB",this.version=1,this.db=null}init(){return H(this,null,function*(){if(!this.db)return new Promise((d,c)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=()=>{c(new Error("Failed to open InteractiveContent database"))},o.onsuccess=()=>{this.db=o.result,d()},o.onupgradeneeded=m=>{const x=m.target.result;if(!x.objectStoreNames.contains("interactiveContent")){const g=x.createObjectStore("interactiveContent",{keyPath:"lessonPlanId"});g.createIndex("topic","topic",{unique:!1}),g.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1})}}})})}ensureDB(){if(!this.db)throw new Error("Database not initialized. Call init() first.");return this.db}saveVersion(d,c,o,m,x,g){return H(this,null,function*(){console.log("=== interactiveContentStorage.saveVersion  ==="),console.log(":",{lessonPlanId:d,topic:c,transformedData:o,selectedSteps:m,versionName:x,description:g});try{const j=this.ensureDB();console.log(" ");const f=`version_${Date.now()}`,b=new Date().toISOString();return console.log("ID:",f),new Promise((p,k)=>{const T=j.transaction(["interactiveContent"],"readwrite"),v=T.objectStore("interactiveContent");console.log(" ");const w=v.get(d);console.log(":",d),w.onsuccess=()=>{console.log(" ");const E=w.result;console.log(":",E?` ${E.versions.length} `:"");const A={id:f,name:x||` ${b.slice(0,19).replace("T"," ")}`,description:g,createdAt:b,lastModifiedAt:b,transformedData:o,selectedSteps:m};console.log(":",A);const X={lessonPlanId:d,topic:c,versions:E?[...E.versions,A]:[A],lastAccessedAt:b};console.log(":",X);const oe=v.put(X);oe.onsuccess=()=>{console.log(" "),p(f)},oe.onerror=F=>{var J;console.error(" :",F),console.error("putRequest.error:",oe.error),k(new Error(`Failed to save interactive content version: ${((J=oe.error)==null?void 0:J.message)||"Unknown error"}`))}},w.onerror=E=>{var A;console.error(" :",E),console.error("getRequest.error:",w.error),k(new Error(`Failed to get existing interactive content: ${((A=w.error)==null?void 0:A.message)||"Unknown error"}`))},T.onerror=E=>{var A;console.error(" :",E),k(new Error(`Database transaction failed: ${((A=T.error)==null?void 0:A.message)||"Unknown error"}`))}})}catch(j){throw console.error(" interactiveContentStorage.saveVersion :",j),j}})}getVersions(d){return H(this,null,function*(){const c=this.ensureDB();return new Promise((o,m)=>{const j=c.transaction(["interactiveContent"],"readonly").objectStore("interactiveContent").get(d);j.onsuccess=()=>{const f=j.result;o(f?f.versions:[])},j.onerror=()=>{m(new Error("Failed to get interactive content versions"))}})})}getVersion(d,c){return H(this,null,function*(){return(yield this.getVersions(d)).find(m=>m.id===c)||null})}updateVersion(d,c,o){return H(this,null,function*(){const m=this.ensureDB();return new Promise((x,g)=>{const f=m.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),b=f.get(d);b.onsuccess=()=>{const p=b.result;if(!p){g(new Error("Interactive content record not found"));return}const k=p.versions.findIndex(v=>v.id===c);if(k===-1){g(new Error("Version not found"));return}p.versions[k]=me(ie(ie({},p.versions[k]),o),{lastModifiedAt:new Date().toISOString()});const T=f.put(p);T.onsuccess=()=>x(),T.onerror=()=>g(new Error("Failed to update version"))},b.onerror=()=>{g(new Error("Failed to get interactive content"))}})})}deleteVersion(d,c){return H(this,null,function*(){const o=this.ensureDB();return new Promise((m,x)=>{const j=o.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),f=j.get(d);f.onsuccess=()=>{const b=f.result;if(!b){x(new Error("Interactive content record not found"));return}if(b.versions=b.versions.filter(p=>p.id!==c),b.versions.length===0){const p=j.delete(d);p.onsuccess=()=>m(),p.onerror=()=>x(new Error("Failed to delete record"))}else{const p=j.put(b);p.onsuccess=()=>m(),p.onerror=()=>x(new Error("Failed to update record"))}},f.onerror=()=>{x(new Error("Failed to get interactive content"))}})})}getAllRecords(){return H(this,null,function*(){const d=this.ensureDB();return new Promise((c,o)=>{const g=d.transaction(["interactiveContent"],"readonly").objectStore("interactiveContent").getAll();g.onsuccess=()=>{c(g.result)},g.onerror=()=>{o(new Error("Failed to get all interactive content records"))}})})}updateLastAccessed(d){return H(this,null,function*(){const c=this.ensureDB();return new Promise((o,m)=>{const g=c.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),j=g.get(d);j.onsuccess=()=>{const f=j.result;if(f){f.lastAccessedAt=new Date().toISOString();const b=g.put(f);b.onsuccess=()=>o(),b.onerror=()=>m(new Error("Failed to update last accessed time"))}else o()},j.onerror=()=>{m(new Error("Failed to get interactive content"))}})})}}const Ms=new zf,Of=()=>{var jn,yn,Ca;const[r]=Na(),d=r.get("contentId"),c=r.get("binId"),[o,m]=S.useState(null),[x,g]=S.useState(!0),[j,f]=S.useState(null),[b,p]=S.useState(0),[k,T]=S.useState([]),[v,w]=S.useState({}),[E,A]=S.useState("idle"),[X,oe]=S.useState(""),[F,J]=S.useState("idle"),[fe,P]=S.useState({current:0,total:0}),[z,_]=S.useState(new Set),[te,Ne]=S.useState([]),[xe,ce]=S.useState(null),[Y,K]=S.useState(!1),[V,N]=S.useState(""),[B,ne]=S.useState(!1),[L,O]=S.useState(""),[G,W]=S.useState({trueFalse:3,multipleChoice:3,memoryCardGame:1}),[ge,Te]=S.useState(!1),[Ae,ee]=S.useState(null),[de,ue]=S.useState("");S.useEffect(()=>{pe()},[d,c]);const pe=()=>H(null,null,function*(){try{g(!0),f(null);let U;if(c)U=yield _i(c);else if(d){yield wt.init();const le=yield wt.getLessonPlan(d);if(!le)throw new Error("");U={topic:le.topic,learningObjectives:le.content.learningObjectives,contentBreakdown:le.content.contentBreakdown,confusingPoints:le.content.confusingPoints,classroomActivities:le.content.classroomActivities,onlineInteractiveQuiz:le.content.quiz,writingPractice:le.content.writingPractice}}else throw new Error("contentId  binId");m(U),We(U);const re=ds();re&&(yield sa(re))}catch(U){console.error(":",U),f(U.message||"")}finally{g(!1)}}),We=U=>{const re=[],le={};U.learningObjectives&&U.learningObjectives.length>0&&U.learningObjectives.forEach((he,ve)=>{const ke=`objective_${ve}`;re.push({id:ke,title:` ${ve+1}`,type:"objective",icon:"",data:he,index:ve}),le[ke]={original:he,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),U.contentBreakdown&&U.contentBreakdown.length>0&&U.contentBreakdown.forEach((he,ve)=>{const ke=`breakdown_${ve}`;re.push({id:ke,title:` ${ve+1}`,type:"breakdown",icon:"",data:he,index:ve}),le[ke]={original:he,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),U.confusingPoints&&U.confusingPoints.length>0&&U.confusingPoints.forEach((he,ve)=>{const ke=`confusing_${ve}`;re.push({id:ke,title:` ${ve+1}`,type:"confusing",icon:"",data:he,index:ve}),le[ke]={original:he,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),T(re),w(le)},Ge=()=>localStorage.getItem("gemini_api_key")||"",et=U=>H(null,null,function*(){const re=Ge();if(!re){alert(" Gemini API ");return}const le=k.find(he=>he.id===U);if(le){w(he=>me(ie({},he),{[U]:me(ie({},he[U]),{isTransforming:!0})}));try{let he=null;switch(le.type){case"objective":he=yield zi(le.data,re);break;case"breakdown":he=yield Oi(le.data,re);break;case"confusing":he=yield Li(le.data,re);break}w(ve=>me(ie({},ve),{[U]:me(ie({},ve[U]),{transformed:he,isTransformed:!0,isTransforming:!1})}))}catch(he){console.error(":",he),w(ve=>me(ie({},ve),{[U]:me(ie({},ve[U]),{isTransforming:!1})})),alert("")}}}),at=U=>{w(re=>me(ie({},re),{[U]:me(ie({},re[U]),{transformed:null,isTransformed:!1,quiz:null,hasQuiz:!1})}))},St=U=>{O(U),ne(!0)},Ht=(U,re)=>H(null,null,function*(){const le=Ge();if(!le){alert(" Gemini API ");return}const he=parseInt(U.replace("step_","")),ve=k[he],ke=v[U];if(!ve||!(ke!=null&&ke.isTransformed)||!ke.transformed){alert("");return}w(ze=>me(ie({},ze),{[U]:me(ie({},ze[U]),{isGeneratingQuiz:!0})}));try{const ze=re||G,$e=yield Og(ke.transformed,ve.type,le,ze);w(Ue=>me(ie({},Ue),{[U]:me(ie({},Ue[U]),{quiz:$e,hasQuiz:!0,isGeneratingQuiz:!1})})),ne(!1)}catch(ze){console.error(":",ze),w($e=>me(ie({},$e),{[U]:me(ie({},$e[U]),{isGeneratingQuiz:!1})})),alert("")}}),os=U=>{const re=v[U];re!=null&&re.hasQuiz&&re.quiz&&(ee(re.quiz),ue(U),Te(!0))},Ct=U=>{w(re=>me(ie({},re),{[U]:me(ie({},re[U]),{quiz:null,hasQuiz:!1})}))},Sa=()=>H(null,null,function*(){var le;if(!o)return;const U=localStorage.getItem("gemini_api_key");if(!U){alert(" Gemini API Key");return}J("running");const re=k.length;P({current:0,total:re});try{for(let he=0;he<k.length;he++){const ve=k[he],ke=`step_${he}`;if(P({current:he+1,total:re,currentStep:ve.title}),!((le=v[ke])!=null&&le.isTransformed)){w(ze=>me(ie({},ze),{[ke]:me(ie({},ze[ke]),{isTransforming:!0})}));try{let ze;switch(ve.type){case"objective":ze=yield zi(ve.data,U);break;case"breakdown":ze=yield Oi(ve.data,U);break;case"confusing":ze=yield Li(ve.data,U);break}w($e=>me(ie({},$e),{[ke]:me(ie({},$e[ke]),{transformed:ze,isTransformed:!0,isTransforming:!1})}))}catch(ze){console.error(` ${ve.title} :`,ze),w($e=>me(ie({},$e),{[ke]:me(ie({},$e[ke]),{isTransforming:!1})}))}yield new Promise(ze=>setTimeout(ze,500))}}J("completed")}catch(he){console.error(":",he),J("error")}}),ta=U=>{_(re=>{const le=new Set(re);return le.has(U)?le.delete(U):le.add(U),le})},ka=()=>{const U=k.map((re,le)=>`step_${le}`);_(new Set(U))},Es=()=>{_(new Set)},pn=()=>H(null,null,function*(){var le;if(!o||z.size===0){alert("");return}const U=localStorage.getItem("gemini_api_key");if(!U){alert(" Gemini API Key");return}J("running");const re=z.size;P({current:0,total:re});try{let he=0;for(let ve=0;ve<k.length;ve++){const ke=k[ve],ze=`step_${ve}`;if(z.has(ze)&&(he++,P({current:he,total:re,currentStep:ke.title}),!((le=v[ze])!=null&&le.isTransformed))){w($e=>me(ie({},$e),{[ze]:me(ie({},$e[ze]),{isTransforming:!0})}));try{let $e;switch(ke.type){case"objective":$e=yield zi(ke.data,U);break;case"breakdown":$e=yield Oi(ke.data,U);break;case"confusing":$e=yield Li(ke.data,U);break}w(Ue=>me(ie({},Ue),{[ze]:me(ie({},Ue[ze]),{transformed:$e,isTransformed:!0,isTransforming:!1})}))}catch($e){console.error(` ${ke.title} :`,$e),w(Ue=>me(ie({},Ue),{[ze]:me(ie({},Ue[ze]),{isTransforming:!1})}))}yield new Promise($e=>setTimeout($e,500))}}J("completed")}catch(he){console.error(":",he),J("error")}}),ds=()=>d||c,sa=U=>H(null,null,function*(){try{yield Ms.init();const re=yield Ms.getVersions(U);Ne(re)}catch(re){console.error(":",re)}}),bn=()=>H(null,null,function*(){if(console.log("===  ==="),console.log("content:",!!o),console.log("contentId:",d),console.log("transformations:",v),!o){console.log("  content"),alert("");return}const U=ds();if(!U){console.log("  contentId"),alert("");return}console.log(" contentId:",U);const re={},le={};if(Object.entries(v).forEach(([he,ve])=>{console.log(` ${he}:`,{isTransformed:ve.isTransformed,hasTransformed:!!ve.transformed,hasQuiz:ve.hasQuiz,hasQuizData:!!ve.quiz}),ve.isTransformed&&ve.transformed&&(re[he]=ve.transformed),ve.hasQuiz&&ve.quiz&&(le[he]=ve.quiz)}),console.log(":",{transformedDataCount:Object.keys(re).length,quizDataCount:Object.keys(le).length,selectedStepsCount:z.size}),Object.keys(re).length===0){console.log(" "),alert("");return}try{console.log(" interactiveContentStorage..."),yield Ms.init(),console.log(" ");const he=V||` ${new Date().toLocaleString("zh-TW")}`,ve={transformedData:re,quizData:le};console.log(":",{actualContentId:U,topic:o.topic||"",versionName:he,versionData:ve,selectedSteps:Array.from(z)});const ke=yield Ms.saveVersion(U,o.topic||"",ve,Array.from(z),he,` ${Object.keys(re).length} ${Object.keys(le).length} `);console.log(" ID:",ke),N(""),yield sa(U),alert("")}catch(he){console.error(" :",he),console.error(":",he.stack),alert(`${he.message||he}`)}console.log("===  ===")}),us=U=>H(null,null,function*(){var le,he;const re=ds();if(re)try{yield Ms.init();const ve=yield Ms.getVersion(re,U);if(ve){w({});const ke={};k.forEach((Ue,_e)=>{const ut=`step_${_e}`;ke[ut]={original:Ue.data,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}});const ze=((le=ve.transformedData)==null?void 0:le.transformedData)||ve.transformedData,$e=((he=ve.transformedData)==null?void 0:he.quizData)||{};Object.entries(ze||{}).forEach(([Ue,_e])=>{ke[Ue]&&(ke[Ue]=me(ie({},ke[Ue]),{transformed:_e,isTransformed:!0}))}),Object.entries($e||{}).forEach(([Ue,_e])=>{ke[Ue]&&(ke[Ue]=me(ie({},ke[Ue]),{quiz:_e,hasQuiz:!0}))}),w(ke),_(new Set(ve.selectedSteps)),ce(U),K(!1),yield Ms.updateLastAccessed(re)}}catch(ve){console.error(":",ve),alert("")}}),gt=U=>H(null,null,function*(){const re=ds();if(!re)return;const le=te.find(he=>he.id===U);if(le&&confirm(`${le.name}`))try{yield Ms.init(),yield Ms.deleteVersion(re,U),yield sa(re),xe===U&&ce(null)}catch(he){console.error(":",he),alert("")}}),se=U=>U?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(le=>le.test(U)):!1,je=(U,re)=>se(U)?t.jsx(xo,{content:U,className:re}):t.jsx("span",{className:re,children:U}),qe=()=>H(null,null,function*(){if(o){A("publishing");try{const U={},re={},le={};if(Object.entries(v).forEach(([ze,$e])=>{if($e.isTransformed&&$e.transformed){U[ze]=$e.transformed,$e.hasQuiz&&$e.quiz&&(re[ze]=$e.quiz);const Ue=parseInt(ze.replace("step_","")),_e=k[Ue];if(_e)switch(_e.type){case"objective":le.learningObjectives||(le.learningObjectives=[]),le.learningObjectives.push(_e.data);break;case"breakdown":le.contentBreakdown||(le.contentBreakdown=[]),le.contentBreakdown.push(_e.data);break;case"confusing":le.confusingPoints||(le.confusingPoints=[]),le.confusingPoints.push(_e.data);break}}}),Object.keys(U).length===0){alert(""),A("idle");return}const he=me(ie({},le),{topic:o.topic,isInteractive:!0,transformedData:U,stepQuizData:re,includedSteps:Object.keys(U)}),ve=yield Ui(he),ke=`${window.location.origin}/ai-page-gen/student-interactive?binId=${ve}`;oe(ke),A("published")}catch(U){console.error(":",U),A("error")}}}),it=U=>{p(U)},vn=()=>{b<k.length-1&&p(b+1)},zs=()=>{b>0&&p(b-1)};if(x)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:t.jsx(Ot,{})})});if(j)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),t.jsx("p",{children:j})]})})});if(!o||k.length===0)return null;const Ee=k[b],ms=`step_${b}`,Ve=v[ms]||{original:Ee==null?void 0:Ee.data,transformed:null,isTransformed:!1},ss=Object.values(v).filter(U=>U.isTransformed).length,Os=k.length;return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[t.jsx("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-sm border-b border-slate-200",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-slate-800",children:""}),t.jsx("h2",{className:"text-lg font-semibold text-indigo-600",children:o.topic}),t.jsxs("p",{className:"text-sm text-slate-600",children:[" ",b+1,"  ",Os,"   ",ss,"/",Os]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[F==="running"&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-4 h-4 text-blue-600 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t.jsx("span",{className:"text-blue-800 font-medium",children:"..."})]}),t.jsx("div",{className:"text-xs text-blue-700",children:fe.currentStep&&`${fe.currentStep}`}),t.jsx("div",{className:"mt-1 bg-blue-200 rounded-full h-1",children:t.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${fe.current/fe.total*100}%`}})})]}),F==="completed"&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),t.jsx("span",{className:"text-green-800 font-medium text-sm",children:""})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:pn,disabled:F==="running"||z.size===0,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:F==="running"?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})," (",z.size,")"]})}),t.jsx("button",{onClick:Sa,disabled:F==="running"||ss===Os,className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2 text-sm",children:ss===Os?"":""})]}),E==="published"&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),t.jsx("span",{className:"text-green-800 font-medium",children:""})]}),t.jsx("div",{className:"text-xs text-green-700",children:t.jsx("a",{href:X,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:""})})]}),t.jsx("button",{onClick:qe,disabled:E==="publishing"||ss===0,className:"px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:E==="publishing"?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),""]})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(b+1)/Os*100}%`}})}),t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ka,className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:""}),t.jsx("span",{className:"text-slate-300",children:"|"}),t.jsx("button",{onClick:Es,className:"text-xs text-slate-600 hover:text-slate-800 font-medium",children:""})]}),t.jsxs("div",{className:"text-xs text-slate-500",children:[" ",z.size," / ",k.length," "]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[te.length>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-slate-500",children:":"}),t.jsx("button",{onClick:()=>K(!Y),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:xe?((jn=te.find(U=>U.id===xe))==null?void 0:jn.name)||"":`${te.length} `})]}),t.jsx("input",{type:"text",placeholder:"",value:V,onChange:U=>N(U.target.value),className:"px-2 py-1 text-xs border border-slate-300 rounded w-20"}),t.jsx("button",{onClick:()=>{console.log(" "),bn()},className:"text-green-600 hover:text-green-800 font-medium",children:""})]})]}),t.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:k.map((U,re)=>{var he,ve,ke,ze,$e,Ue,_e,ut,xs,Aa;const le=`step_${re}`;return t.jsx("div",{className:`
                      flex-shrink-0 p-2 rounded-lg border transition-all duration-200 bg-white
                      ${re===b?"border-indigo-500 bg-indigo-50":(he=v[le])!=null&&he.isTransformed?"border-green-200 bg-green-50":"border-slate-200"}
                    `,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:z.has(le),onChange:()=>ta(le),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t.jsxs("button",{onClick:()=>it(re),className:"flex items-center gap-1 text-xs font-medium hover:text-indigo-600 transition-colors",children:[t.jsx("span",{children:U.icon}),t.jsx("span",{children:U.title}),((ve=v[le])==null?void 0:ve.isTransformed)&&t.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),(ke=v[le])!=null&&ke.isTransformed?t.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.jsx("button",{onClick:()=>et(le),className:"text-xs text-blue-600 hover:text-blue-800 font-medium px-1 py-0.5 rounded hover:bg-blue-50",title:"",children:""}),t.jsx("button",{onClick:()=>at(le),className:"text-xs text-red-600 hover:text-red-800 font-medium px-1 py-0.5 rounded hover:bg-red-50",title:"",children:""}),(ze=v[le])!=null&&ze.hasQuiz?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-orange-600",title:"",children:""}),t.jsx("button",{onClick:()=>os(le),className:"text-xs text-blue-600 hover:text-blue-800 font-medium px-1 py-0.5 rounded hover:bg-blue-50",title:"",children:""}),t.jsx("button",{onClick:()=>St(le),disabled:($e=v[le])==null?void 0:$e.isGeneratingQuiz,className:"text-xs text-orange-600 hover:text-orange-800 font-medium px-1 py-0.5 rounded hover:bg-orange-50",title:"",children:(Ue=v[le])!=null&&Ue.isGeneratingQuiz?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"}),t.jsx("span",{children:""})]}):""}),t.jsx("button",{onClick:()=>Ct(le),className:"text-xs text-red-600 hover:text-red-800 font-medium px-1 py-0.5 rounded hover:bg-red-50",title:"",children:""})]}):t.jsx("button",{onClick:()=>St(le),disabled:(_e=v[le])==null?void 0:_e.isGeneratingQuiz,className:"text-xs text-orange-600 hover:text-orange-800 font-medium px-1 py-0.5 rounded hover:bg-orange-50 disabled:opacity-50",title:"",children:(ut=v[le])!=null&&ut.isGeneratingQuiz?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs",children:""})]}):""})]}):t.jsx("button",{onClick:()=>et(le),disabled:(xs=v[le])==null?void 0:xs.isTransforming,className:"text-xs text-green-600 hover:text-green-800 font-medium px-2 py-0.5 rounded hover:bg-green-50 disabled:opacity-50 ml-2",children:(Aa=v[le])!=null&&Aa.isTransforming?"":""})]})},U.id)})}),Y&&te.length>0&&t.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[t.jsx("h3",{className:"text-sm font-medium text-slate-800 mb-3",children:""}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:te.map(U=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border hover:bg-slate-50",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium",children:U.name}),xe===U.id&&t.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded",children:""})]}),t.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[U.description,"  ",new Date(U.createdAt).toLocaleString("zh-TW")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>us(U.id),className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:""}),t.jsx("button",{onClick:()=>gt(U.id),className:"text-xs text-red-600 hover:text-red-800 font-medium",children:""})]})]},U.id))}),t.jsx("button",{onClick:()=>K(!1),className:"mt-3 text-xs text-slate-600 hover:text-slate-800",children:""})]})]})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:Ee.icon}),t.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:Ee.title}),t.jsxs("p",{className:"text-lg text-slate-600",children:[Ee.type==="objective"&&"",Ee.type==="breakdown"&&"",Ee.type==="confusing"&&""]})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-2xl",children:Ve.isTransformed?"":""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:Ve.isTransformed?"":""}),t.jsx("p",{className:"text-sm text-slate-600",children:Ve.isTransformed?"":""})]})]}),t.jsx("div",{className:"text-sm text-slate-500",children:""})]})}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),""]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-sm text-slate-700 max-h-96 overflow-y-auto",children:[Ee.type==="objective"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.objective)]}),Ee.data.description&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.description)]}),Ee.data.teachingExample&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.teachingExample)]})]}),Ee.type==="breakdown"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.topic)]}),Ee.data.details&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.details)]}),Ee.data.teachingExample&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.teachingExample)]})]}),Ee.type==="confusing"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.point)]}),Ee.data.clarification&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.clarification)]}),Ee.data.teachingExample&&t.jsxs("div",{children:[t.jsx("strong",{children:""})," ",je(Ee.data.teachingExample)]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),""]}),t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-4 text-sm max-h-96 overflow-y-auto",children:Ve.isTransformed&&Ve.transformed?t.jsxs("div",{className:"space-y-4",children:[Ee.type==="objective"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-green-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.objective)})]}),Ve.transformed.description&&t.jsxs("div",{className:"text-blue-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.description)})]}),Ve.transformed.personalRelevance&&t.jsxs("div",{className:"text-purple-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.personalRelevance)})]}),Ve.transformed.encouragement&&t.jsxs("div",{className:"text-sky-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.encouragement)})]})]}),Ee.type==="breakdown"&&t.jsxs(t.Fragment,{children:[Ve.transformed.title&&t.jsxs("div",{className:"text-green-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.title)})]}),Ve.transformed.introduction&&t.jsxs("div",{className:"text-blue-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.introduction)})]}),Ve.transformed.keyPoints&&t.jsxs("div",{className:"text-indigo-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1 space-y-1",children:Ve.transformed.keyPoints.map((U,re)=>t.jsxs("div",{children:[" ",je(U)]},re))})]})]}),Ee.type==="confusing"&&t.jsxs(t.Fragment,{children:[Ve.transformed.title&&t.jsxs("div",{className:"text-amber-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.title)})]}),Ve.transformed.normalizeConfusion&&t.jsxs("div",{className:"text-green-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.normalizeConfusion)})]}),Ve.transformed.clearExplanation&&t.jsxs("div",{className:"text-blue-800",children:[t.jsx("strong",{children:""}),t.jsx("div",{className:"mt-1",children:je(Ve.transformed.clearExplanation)})]})]})]}):t.jsxs("div",{className:"text-slate-500 text-center py-8",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("p",{children:"  "})]})})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[t.jsxs("button",{onClick:zs,disabled:b===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-slate-600",children:[b+1," / ",Os]})}),t.jsxs("button",{onClick:vn,disabled:b===k.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),B&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:""}),t.jsx("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),t.jsx("input",{type:"number",min:"1",max:"10",value:G.trueFalse,onChange:U=>W(re=>me(ie({},re),{trueFalse:parseInt(U.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),t.jsx("input",{type:"number",min:"1",max:"10",value:G.multipleChoice,onChange:U=>W(re=>me(ie({},re),{multipleChoice:parseInt(U.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),t.jsx("input",{type:"number",min:"1",max:"3",value:G.memoryCardGame,onChange:U=>W(re=>me(ie({},re),{memoryCardGame:parseInt(U.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),t.jsx("div",{className:"p-6 border-t bg-slate-50 rounded-b-2xl",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>ne(!1),className:"flex-1 px-4 py-2 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors",children:""}),t.jsx("button",{onClick:()=>Ht(L,G),disabled:(yn=v[L])==null?void 0:yn.isGeneratingQuiz,className:"flex-1 px-4 py-2 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:(Ca=v[L])!=null&&Ca.isGeneratingQuiz?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):""})]})})]})}),ge&&Ae&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between rounded-t-2xl",children:[t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:" "}),t.jsx("button",{onClick:()=>Te(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[Ae._validationWarnings&&Ae._validationWarnings.length>0&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:" "}),t.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[t.jsx("ul",{className:"list-disc list-inside space-y-1",children:Ae._validationWarnings.map((U,re)=>t.jsx("li",{children:U},re))}),t.jsx("p",{className:"mt-2 font-medium",children:""})]})]})]})}),Ae.trueFalse&&Ae.trueFalse.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"  (",Ae.trueFalse.length," )"]}),t.jsx("div",{className:"space-y-3",children:Ae.trueFalse.map((U,re)=>t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[re+1,". ",U.statement]}),t.jsxs("div",{className:"text-sm text-slate-600",children:[t.jsx("strong",{children:""})," ",U.isTrue?"":""]}),U.explanation&&t.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[t.jsx("strong",{children:""})," ",U.explanation]})]},re))})]}),Ae.multipleChoice&&Ae.multipleChoice.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"  (",Ae.multipleChoice.length," )"]}),t.jsx("div",{className:"space-y-3",children:Ae.multipleChoice.map((U,re)=>t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[re+1,". ",U.question]}),t.jsx("div",{className:"ml-4 space-y-1",children:U.options.map((le,he)=>t.jsxs("div",{className:`text-sm ${he===U.correctAnswerIndex?"text-green-700 font-medium":"text-slate-600"}`,children:[String.fromCharCode(65+he),". ",le,he===U.correctAnswerIndex&&" "]},he))}),U.explanation&&t.jsxs("div",{className:"text-sm text-slate-600 mt-2",children:[t.jsx("strong",{children:""})," ",U.explanation]})]},re))})]}),Ae.memoryCardGame&&Ae.memoryCardGame.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"  (",Ae.memoryCardGame.length," )"]}),t.jsx("div",{className:"space-y-3",children:Ae.memoryCardGame.map((U,re)=>t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"font-medium text-slate-800 mb-3",children:[" ",re+1," ",U.title||""]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:U.pairs.map((le,he)=>t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("div",{className:"bg-blue-100 px-2 py-1 rounded flex-1",children:le.left}),t.jsx("div",{className:"text-slate-400",children:""}),t.jsx("div",{className:"bg-green-100 px-2 py-1 rounded flex-1",children:le.right})]},he))})]},re))})]})]}),t.jsx("div",{className:"sticky bottom-0 bg-slate-50 p-6 border-t rounded-b-2xl",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Te(!1),className:"flex-1 px-4 py-2 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors",children:""}),t.jsx("button",{onClick:()=>{Te(!1),St(de)},className:"flex-1 px-4 py-2 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors",children:""})]})})]})})]})},Lf=()=>{const[r]=Na(),d=r.get("binId"),[c,o]=S.useState(null),[m,x]=S.useState(!0),[g,j]=S.useState(null),[f,b]=S.useState(null),[p,k]=S.useState(0),[T,v]=S.useState([]),[w,E]=S.useState(!1),[A,X]=S.useState(null);S.useEffect(()=>{d?oe():(j("binId"),x(!1))},[d]),S.useEffect(()=>{c&&T.length>0&&J(c)},[c,T,d]);const oe=()=>H(null,null,function*(){try{x(!0),j(null);const O=yield _i(d);if(!O.isInteractive)throw new Error("");o(O),F(O)}catch(O){console.error(":",O),j(O.message||"")}finally{x(!1)}}),F=O=>{const G=[],W=O.transformedData||{};console.log("Initial content:",O),console.log("Transformed data keys:",Object.keys(W)),console.log("Transformed data:",W),O.originalContent&&console.log("Original content from JSON:",O.originalContent);const ge=Object.keys(W).sort((ee,de)=>{const ue=parseInt(ee.replace("step_","")),pe=parseInt(de.replace("step_",""));return ue-pe});console.log("Sorted step IDs:",ge);const Te=O.includedSteps||Object.keys(W);console.log("Included steps:",Te);const Ae={};if(O.originalContent)console.log("Using originalContent from JSON for mapping"),Object.keys(O.originalContent).forEach(ee=>{const de=O.originalContent[ee];de&&Te.includes(ee)&&(Ae[ee]={content:de.content,type:de.type,index:de.index||0})});else{console.log("Using fallback method to build original content mapping");const ee=[];O.learningObjectives&&O.learningObjectives.forEach((de,ue)=>{ee.push({content:de,type:"objective",typeIndex:ue})}),O.contentBreakdown&&O.contentBreakdown.forEach((de,ue)=>{ee.push({content:de,type:"breakdown",typeIndex:ue})}),O.confusingPoints&&O.confusingPoints.forEach((de,ue)=>{ee.push({content:de,type:"confusing",typeIndex:ue})}),console.log("All original content (fallback):",ee),Te.forEach((de,ue)=>{if(ue<ee.length){const pe=ee[ue];Ae[de]={content:pe.content,type:pe.type,index:pe.typeIndex},console.log(`Mapping ${de} to original content at index ${ue}:`,pe)}})}console.log("Original lookup:",Ae),ge.forEach(ee=>{var pe,We,Ge;const de=W[ee],ue=Ae[ee];if(de&&ue){let et="",at="",St="";switch(ue.type){case"objective":et=`  ${ue.index+1}`,at="",St=((pe=de.objective)==null?void 0:pe.length)>50?`${de.objective.substring(0,50)}...`:de.objective||ue.content.objective;break;case"breakdown":et=`  ${ue.index+1}`,at="",St=((We=de.title)==null?void 0:We.length)>50?`${de.title.substring(0,50)}...`:de.title||ue.content.topic;break;case"confusing":et=`  ${ue.index+1}`,at="",St=((Ge=de.title)==null?void 0:Ge.length)>50?`${de.title.substring(0,50)}...`:de.title||ue.content.point;break}console.log(`Creating step: ${ee}, type: ${ue.type}, title: ${et}`),G.push({id:ee,title:et,type:ue.type,icon:at,description:St,content:de,originalIndex:ue.index})}}),G.length>0&&G.push({id:"summary",title:" ",type:"summary",icon:"",description:"",content:null}),console.log("Final steps:",G),v(G)},J=O=>{const G=`student_interactive_${d}`;try{const W=localStorage.getItem(G);if(W){const ge=JSON.parse(W);b(ge);const Te=ge.progress.currentObjectiveIndex||0,Ae=Math.min(Math.max(0,Te),T.length-1);k(Ae)}else{const ge={contentId:d||"unknown",topic:O.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};b(ge),localStorage.setItem(G,JSON.stringify(ge))}}catch(W){console.error(":",W)}},fe=O=>{const G=`student_interactive_${d}`;O.updatedAt=Date.now(),O.progress.lastUpdateTime=Date.now(),b(O),localStorage.setItem(G,JSON.stringify(O))},P=O=>{if(!f)return;const G=ie({},f);G.progress.completedObjectives.includes(O)||(G.progress.completedObjectives.push(O),G.progress.interactionCount+=1),fe(G)},z=O=>{if(O>=0&&O<T.length&&T[O]&&(k(O),window.scrollTo({top:0,behavior:"smooth"}),f)){const G=ie({},f);G.progress.currentObjectiveIndex=O,fe(G)}},_=()=>{p<T.length-1&&z(p+1)},te=()=>{p>0&&z(p-1)},Ne=()=>{const O=T[p];if(!O||!(c!=null&&c.stepQuizData))return;const G=c.stepQuizData[O.id];G&&(X(G),E(!0))},xe=()=>{E(!1),X(null)},ce=()=>{const O=T[p];return O&&(c==null?void 0:c.stepQuizData)&&c.stepQuizData[O.id]},Y=O=>O?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(W=>W.test(O)):!1,K=(O,G)=>Y(O)?t.jsx(xo,{content:O,className:G}):t.jsx("span",{className:G,children:O});if(m)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:t.jsx(Ot,{})})});if(g)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),t.jsx("p",{children:g})]})})});if(!c||!f||T.length===0)return null;const V=T[p];if(!V)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded-lg shadow-md",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),t.jsx("p",{children:""}),t.jsx("p",{className:"mt-2 text-sm",children:""})]})})});const N=f.progress.completedObjectives.length,B=T.length-1,ne=B>0?N/B*100:0,L=()=>{const O=f.progress.completedObjectives.includes(V.id);switch(V.type){case"objective":return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-sky-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:K(V.content.objective,"text-4xl font-bold leading-tight text-white")}),V.content.description&&t.jsx("div",{className:"text-xl text-indigo-100 leading-relaxed max-w-3xl mx-auto",children:K(V.content.description,"text-xl text-indigo-100 leading-relaxed")})]}),t.jsxs("div",{className:"space-y-6",children:[V.content.personalRelevance&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:K(V.content.personalRelevance,"text-lg leading-relaxed text-purple-900")})]}),V.content.teachingExample&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:K(V.content.teachingExample,"text-lg leading-relaxed text-green-900")})]}),V.content.encouragement&&t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:K(V.content.encouragement,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[O?t.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),t.jsx("p",{className:"text-green-600",children:""})]}):t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),t.jsxs("button",{onClick:()=>P(V.id),className:"px-8 py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),ce()&&t.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),t.jsxs("button",{onClick:Ne,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"breakdown":return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:K(V.content.title||V.content.topic,"text-4xl font-bold leading-tight text-white")}),V.content.introduction&&t.jsx("div",{className:"text-xl text-sky-100 leading-relaxed max-w-3xl mx-auto",children:K(V.content.introduction,"text-xl text-sky-100 leading-relaxed")})]}),t.jsxs("div",{className:"space-y-6",children:[V.content.keyPoints&&V.content.keyPoints.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:V.content.keyPoints.map((G,W)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:W+1}),t.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:K(G,"text-lg text-indigo-900 leading-relaxed")})]},W))})})]}),V.content.realLifeExamples&&V.content.realLifeExamples.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:V.content.realLifeExamples.map((G,W)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:W+1}),t.jsx("div",{className:"text-lg text-green-900 leading-relaxed",children:K(G,"text-lg text-green-900 leading-relaxed")})]},W))})})]}),V.content.learningTips&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:K(V.content.learningTips,"text-lg leading-relaxed text-purple-900")})]}),V.content.nextSteps&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-orange-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-orange-50 rounded-xl p-6 text-lg leading-relaxed text-orange-900",children:K(V.content.nextSteps,"text-lg leading-relaxed text-orange-900")})]}),V.content.encouragement&&t.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-2xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-pink-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-pink-900 font-medium",children:K(V.content.encouragement,"text-lg leading-relaxed text-pink-900 font-medium")})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[O?t.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),t.jsx("p",{className:"text-green-600",children:""})]}):t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),t.jsxs("button",{onClick:()=>P(V.id),className:"px-8 py-4 bg-blue-500 hover:bg-blue-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),ce()&&t.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),t.jsxs("button",{onClick:Ne,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"confusing":return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:K(V.content.title||V.content.point,"text-4xl font-bold leading-tight text-white")}),V.content.normalizeConfusion&&t.jsx("div",{className:"text-xl text-amber-100 leading-relaxed max-w-3xl mx-auto",children:K(V.content.normalizeConfusion,"text-xl text-amber-100 leading-relaxed")})]}),t.jsxs("div",{className:"space-y-6",children:[V.content.commonMistake&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-red-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-red-50 rounded-xl p-6 text-lg leading-relaxed text-red-900",children:K(V.content.commonMistake,"text-lg leading-relaxed text-red-900")})]}),V.content.whyItHappens&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-amber-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-amber-50 rounded-xl p-6 text-lg leading-relaxed text-amber-900",children:K(V.content.whyItHappens,"text-lg leading-relaxed text-amber-900")})]}),V.content.clearExplanation&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:K(V.content.clearExplanation,"text-lg leading-relaxed text-green-900")})]}),V.content.practiceExamples&&V.content.practiceExamples.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-blue-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-blue-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-6",children:V.content.practiceExamples.map((G,W)=>t.jsx("div",{className:"border-l-4 border-blue-400 pl-4",children:t.jsxs("div",{className:"flex items-start mb-3",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:W+1}),t.jsx("div",{className:"flex-1",children:typeof G=="string"?t.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:K(G,"text-lg text-blue-900 leading-relaxed")}):t.jsxs("div",{className:"space-y-3",children:[G.situation&&t.jsxs("div",{children:[t.jsx("strong",{className:"text-blue-800",children:""}),t.jsx("span",{className:"text-blue-900 ml-2",children:K(G.situation,"text-blue-900")})]}),G.wrongThinking&&t.jsxs("div",{children:[t.jsx("strong",{className:"text-red-600",children:" "}),t.jsx("span",{className:"text-red-700 ml-2",children:K(G.wrongThinking,"text-red-700")})]}),G.rightThinking&&t.jsxs("div",{children:[t.jsx("strong",{className:"text-green-600",children:" "}),t.jsx("span",{className:"text-green-700 ml-2",children:K(G.rightThinking,"text-green-700")})]}),G.explanation&&t.jsxs("div",{children:[t.jsx("strong",{className:"text-purple-600",children:" "}),t.jsx("span",{className:"text-purple-700 ml-2",children:K(G.explanation,"text-purple-700")})]})]})})]})},W))})})]}),V.content.rememberingTricks&&V.content.rememberingTricks.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"bg-purple-50 rounded-xl p-6",children:t.jsx("div",{className:"space-y-4",children:V.content.rememberingTricks.map((G,W)=>t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:W+1}),t.jsx("div",{className:"text-lg text-purple-900 leading-relaxed",children:K(G,"text-lg text-purple-900 leading-relaxed")})]},W))})})]}),V.content.confidenceBooster&&t.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[t.jsxs("h3",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),t.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:K(V.content.confidenceBooster,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[O?t.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),t.jsx("p",{className:"text-green-600",children:""})]}):t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),t.jsxs("button",{onClick:()=>P(V.id),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),ce()&&t.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),t.jsxs("button",{onClick:Ne,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"summary":return t.jsxs("div",{className:"text-center space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-12",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("h3",{className:"text-3xl font-bold text-green-700 mb-4",children:""}),t.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["",c.topic,""]}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-indigo-600 mb-2",children:""}),t.jsx("div",{className:"text-2xl font-bold text-slate-800",children:N}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-sky-600 mb-2",children:""}),t.jsx("div",{className:"text-2xl font-bold text-slate-800",children:Math.round((Date.now()-f.progress.startTime)/6e4)}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[t.jsx("div",{className:"text-3xl text-green-600 mb-2",children:""}),t.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[Math.round(ne),"%"]}),t.jsx("div",{className:"text-sm text-slate-600",children:""})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-8",children:[t.jsx("h4",{className:"text-2xl font-semibold text-purple-700 mb-6",children:" "}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[c.onlineInteractiveQuiz&&t.jsxs("a",{href:`/ai-page-gen/quiz?binId=${d}`,className:"px-8 py-4 bg-orange-500 text-white font-medium rounded-xl hover:bg-orange-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]}),c.writingPractice&&t.jsxs("a",{href:`/ai-page-gen/writing?binId=${d}`,className:"px-8 py-4 bg-purple-500 text-white font-medium rounded-xl hover:bg-purple-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})]});default:return t.jsx("div",{children:""})}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[t.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b border-slate-200 shadow-sm",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:c.topic}),t.jsxs("p",{className:"text-xs text-slate-500",children:[" ",p+1,"  ",T.length," "]})]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Math.round((Date.now()-f.progress.startTime)/6e4)," "]})]}),t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-1",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${(p+1)/T.length*100}%`}})}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"text-xs text-slate-400",children:[" ",N,"/",B,"  ",Math.round(ne),"%"]})})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"text-5xl mb-4",children:V.icon}),t.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:V.title}),t.jsx("div",{className:"text-lg text-slate-600",children:K(V.description,"text-lg text-slate-600")})]}),t.jsx("div",{className:"mb-8",children:L()}),t.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[t.jsxs("button",{onClick:te,disabled:p===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-slate-600",children:[p+1," / ",T.length]})}),t.jsxs("button",{onClick:_,disabled:p===T.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),w&&A&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between rounded-t-2xl",children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),t.jsx("button",{onClick:xe,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 space-y-8",children:[A.trueFalse&&A.trueFalse.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," "]}),t.jsx("div",{className:"space-y-4",children:A.trueFalse.map((O,G)=>t.jsx(io,{question:O,questionIndex:G,showExplanations:!0},`tf-${G}`))})]}),A.multipleChoice&&A.multipleChoice.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," "]}),t.jsx("div",{className:"space-y-4",children:A.multipleChoice.map((O,G)=>t.jsx(ro,{question:O,questionIndex:G,showExplanations:!0},`mc-${G}`))})]}),A.memoryCardGame&&A.memoryCardGame.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," "]}),t.jsx("div",{className:"space-y-4",children:A.memoryCardGame.map((O,G)=>t.jsx(co,{question:O,itemNumber:G+1},`mcg-${G}`))})]})]}),t.jsx("div",{className:"sticky bottom-0 bg-slate-50 p-6 border-t rounded-b-2xl",children:t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:xe,className:"px-8 py-3 bg-indigo-500 hover:bg-indigo-600 text-white font-medium rounded-xl transition-colors",children:""})})})]})})]})};class Df{constructor(){this.synthesis=null,this.recognition=null,this.isRecording=!1,this.initializeSpeechSynthesis(),this.initializeSpeechRecognition()}initializeSpeechSynthesis(){"speechSynthesis"in window&&(this.synthesis=window.speechSynthesis)}isTTSSupported(){return this.synthesis!==null}getAvailableVoices(){return this.synthesis?this.synthesis.getVoices().filter(d=>d.lang.startsWith("en")):[]}speak(d,c={},o,m,x){return new Promise((g,j)=>{if(!this.synthesis){j(new Error("Text-to-Speech not supported in this browser"));return}this.synthesis.cancel();const f=new SpeechSynthesisUtterance(d),p=ie(ie({},{lang:"en-US",rate:1,pitch:1,volume:1}),c);f.lang=p.lang,f.rate=p.rate,f.pitch=p.pitch,f.volume=p.volume;const k=this.getAvailableVoices(),T=k.find(v=>v.lang===p.lang&&!v.name.includes("Google"))||k.find(v=>v.lang===p.lang)||k[0];T&&(f.voice=T),f.onstart=()=>{o==null||o()},f.onend=()=>{m==null||m(),g()},f.onerror=v=>{x==null||x(v),j(v)},this.synthesis.speak(f)})}stopSpeaking(){this.synthesis&&this.synthesis.cancel()}pauseSpeaking(){this.synthesis&&this.synthesis.pause()}resumeSpeaking(){this.synthesis&&this.synthesis.resume()}isSpeaking(){var d;return((d=this.synthesis)==null?void 0:d.speaking)||!1}initializeSpeechRecognition(){const d=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition;d&&(this.recognition=new d)}isSTTSupported(){return this.recognition!==null}startRecording(d={},c,o,m,x){return new Promise((g,j)=>{if(!this.recognition){j(new Error("Speech recognition not supported in this browser"));return}if(this.isRecording){j(new Error("Already recording"));return}const b=ie(ie({},{lang:"en-US",continuous:!1,interimResults:!0,maxAlternatives:3}),d);this.recognition.lang=b.lang,this.recognition.continuous=b.continuous,this.recognition.interimResults=b.interimResults,this.recognition.maxAlternatives=b.maxAlternatives,this.recognition.onstart=()=>{this.isRecording=!0,m==null||m()},this.recognition.onresult=p=>{for(let k=p.resultIndex;k<p.results.length;k++){const T=p.results[k][0].transcript,v=p.results[k][0].confidence;p.results[k].isFinal,c==null||c({text:T,confidence:v||.8,isFinal:p.results[k].isFinal})}},this.recognition.onerror=p=>{this.isRecording=!1,o==null||o(p),j(p)},this.recognition.onend=()=>{this.isRecording=!1,x==null||x(),g()};try{this.recognition.start()}catch(p){this.isRecording=!1,j(p)}})}stopRecording(){this.recognition&&this.isRecording&&this.recognition.stop()}isCurrentlyRecording(){return this.isRecording}analyzePronunciation(d,c){const o=d.toLowerCase().split(/\s+/),m=c.toLowerCase().split(/\s+/),x=[],g=[];o.forEach(b=>{const p=b.replace(/[.,!?;:]/g,"");m.some(k=>k.replace(/[.,!?;:]/g,"").includes(p)||p.includes(k.replace(/[.,!?;:]/g,"")))?x.push(b):g.push(b)});const j=o.length>0?x.length/o.length*100:0,f=[];return j<70&&f.push("Try speaking more slowly and clearly"),g.length>0&&f.push(`Practice these words: ${g.slice(0,3).join(", ")}`),c.length<d.length*.5&&f.push("Speak louder and closer to the microphone"),{accuracy:Math.round(j),suggestions:f,matchedWords:x,missedWords:g}}getSupportStatus(){const d=navigator.userAgent;let c="Unknown browser";return d.includes("Chrome")?c="Chrome":d.includes("Firefox")?c="Firefox":d.includes("Safari")?c="Safari":d.includes("Edge")&&(c="Edge"),{ttsSupported:this.isTTSSupported(),sttSupported:this.isSTTSupported(),browserInfo:c}}}const gn=new Df,Mm=({turn:r,isCurrentTurn:d,isStudentTurn:c,studentRole:o,onPlayComplete:m,showTranslation:x=!1,showHints:g=!1,voiceSettings:j={}})=>{const[f,b]=S.useState(!1),[p,k]=S.useState(!1),[T,v]=S.useState(x),[w,E]=S.useState(g),A=S.useCallback(()=>H(null,null,function*(){if(f){gn.stopSpeaking();return}try{b(!0),yield gn.speak(r.text,ie({lang:"en-US",rate:.9},j),void 0,()=>{b(!1),m==null||m()},F=>{console.error("Speech playback error:",F),b(!1)})}catch(F){console.error("Failed to play speech:",F),b(!1)}}),[r.text,f,j,m]),X=F=>{switch(F){case"easy":return"text-green-600 bg-green-50 border-green-200";case"normal":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"hard":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},oe=(F,J)=>{let fe=F;return J.forEach(P=>{const z=new RegExp(`\\b(${P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})\\b`,"gi");fe=fe.replace(z,'<mark class="bg-yellow-200 px-1 rounded">$1</mark>')}),fe};return t.jsxs("div",{className:`
      relative rounded-lg border-2 transition-all duration-300 mb-4
      ${d?"border-blue-400 shadow-lg bg-blue-50":"border-gray-200 bg-white"}
      ${c&&d?"border-green-400 bg-green-50":""}
    `,children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`
            w-10 h-10 rounded-full flex items-center justify-center text-white font-medium
            ${c?"bg-green-500":r.speaker==="Teacher"||r.speaker===""?"bg-blue-500":"bg-gray-500"}
          `,children:r.speaker.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-gray-900",children:[r.speaker,c&&t.jsx("span",{className:"ml-2 text-sm text-green-600 font-normal",children:"(Your turn)"})]}),d&&t.jsx("div",{className:"text-sm text-blue-600",children:"Current conversation turn"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`
            px-2 py-1 text-xs font-medium rounded-full border
            ${X(r.difficulty)}
          `,children:r.difficulty}),t.jsx("button",{onClick:A,disabled:c,className:`
              p-2 rounded-full transition-colors
              ${c?"bg-gray-100 text-gray-400 cursor-not-allowed":f?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"}
            `,title:c?"It's your turn to speak":f?"Stop":"Play audio",children:f?t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("button",{onClick:()=>k(!p),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",title:"Show/hide details",children:t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})})]})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"text-lg text-gray-900 leading-relaxed mb-3",children:r.keyWords.length>0?t.jsx("div",{dangerouslySetInnerHTML:{__html:oe(r.text,r.keyWords)}}):r.text}),t.jsx("div",{className:"flex items-center space-x-2 mb-3",children:t.jsx("button",{onClick:()=>v(!T),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:T?"":""})}),T&&t.jsx("div",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg mb-3 border border-gray-200",children:r.translation}),c&&r.expectedResponseHints&&r.expectedResponseHints.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("button",{onClick:()=>E(!w),className:"text-sm text-green-600 hover:text-green-800 font-medium mb-2",children:w?"":""}),w&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[t.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:" Response hints:"}),t.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:r.expectedResponseHints.map((F,J)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-green-500 mr-2",children:""}),t.jsx("span",{children:F})]},J))})]})]}),p&&t.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3 space-y-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Practice Point:"}),t.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 p-2 rounded border border-blue-200",children:r.practicePoint})]}),r.keyWords.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Key Words:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:r.keyWords.map((F,J)=>t.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-full border border-yellow-300",children:F},J))})]}),r.pronunciation&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Pronunciation:"}),t.jsx("div",{className:"text-sm text-gray-600 font-mono bg-gray-50 p-2 rounded border border-gray-200",children:r.pronunciation})]})]})]}),d&&t.jsx("div",{className:"absolute -left-1 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"w-2 h-8 bg-blue-400 rounded-r"})}),c&&d&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"})})]})},Bf=()=>{var P;const[r,d]=S.useState({topic:"",scenario:"",difficulty:"normal",participantCount:2,duration:10,focusAreas:[],culturalContext:""}),[c,o]=S.useState(""),[m,x]=S.useState(!1),[g,j]=S.useState(null),[f,b]=S.useState(null),[p,k]=S.useState(!1),[T,v]=S.useState(""),[w,E]=S.useState(0),A=Bi.getConversationTemplates(),X=Bi.getDifficultyLevels();S.useEffect(()=>{const z=localStorage.getItem("gemini_api_key");z&&o(z)},[]);const oe=z=>{d(me(ie({},r),{topic:z.title,scenario:z.scenario,difficulty:z.suggestedDifficulty,participantCount:z.participants.length}))},F=()=>H(null,null,function*(){if(!c.trim()){j("Please enter your Gemini API key");return}if(!r.topic.trim()||!r.scenario.trim()){j("Please provide both topic and scenario");return}x(!0),j(null);try{localStorage.setItem("gemini_api_key",c);const z=yield Bi.generateConversationPractice(r,c);b(z),E(0)}catch(z){console.error("Failed to generate conversation:",z),j("Failed to generate conversation. Please check your API key and try again.")}finally{x(!1)}}),J=()=>H(null,null,function*(){if(f){k(!0),j(null);try{const z={practice:f,metadata:{createdBy:"AI Page Gen",generatedAt:new Date().toISOString()}},_=yield wm(z),te=`${window.location.origin}/ai-page-gen/conversation-practice/${_}`;v(te)}catch(z){console.error("Failed to share conversation:",z),j("Failed to create shareable link")}finally{k(!1)}}}),fe=()=>{navigator.clipboard.writeText(T)};return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),t.jsx("p",{className:"text-gray-600",children:"Create interactive English conversation practices for your students"})]}),t.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm",children:[t.jsx(ya,{className:"w-4 h-4"}),""]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Configuration"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gemini API Key"}),t.jsx("input",{type:"password",value:c,onChange:z=>o(z.target.value),placeholder:"Enter your Gemini API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Templates"}),t.jsx("div",{className:"space-y-4",children:A.map(z=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:z.category}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:z.scenarios.slice(0,2).map((_,te)=>t.jsxs("button",{onClick:()=>oe(_),className:"text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors",children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:_.title}),t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[_.scenario.substring(0,60),"..."]})]},te))})]},z.category))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conversation Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic *"}),t.jsx("input",{type:"text",value:r.topic,onChange:z=>d(me(ie({},r),{topic:z.target.value})),placeholder:"e.g., Ordering food at a restaurant",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scenario *"}),t.jsx("textarea",{value:r.scenario,onChange:z=>d(me(ie({},r),{scenario:z.target.value})),placeholder:"Detailed description of the conversation context",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:X.map(z=>t.jsxs("button",{onClick:()=>d(me(ie({},r),{difficulty:z.level})),className:`p-3 rounded-lg border text-sm transition-colors ${r.difficulty===z.level?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[t.jsx("div",{className:"font-medium",children:z.level}),t.jsx("div",{className:"text-xs opacity-75 mt-1",children:z.description.split(" - ")[0]})]},z.level))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Participants"}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>d(me(ie({},r),{participantCount:2})),className:`px-4 py-2 rounded-lg border transition-colors ${r.participantCount===2?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"2 People"}),t.jsx("button",{onClick:()=>d(me(ie({},r),{participantCount:3})),className:`px-4 py-2 rounded-lg border transition-colors ${r.participantCount===3?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"3 People"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Duration (minutes)"}),t.jsx("input",{type:"number",min:"5",max:"30",value:r.duration,onChange:z=>d(me(ie({},r),{duration:parseInt(z.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Areas (optional)"}),t.jsx("input",{type:"text",value:((P=r.focusAreas)==null?void 0:P.join(", "))||"",onChange:z=>d(me(ie({},r),{focusAreas:z.target.value.split(",").map(_=>_.trim()).filter(_=>_)})),placeholder:"e.g., pronunciation, grammar, vocabulary",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{onClick:F,disabled:m||!c.trim(),className:"w-full px-4 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:m?t.jsxs(t.Fragment,{children:[t.jsx(Ot,{size:"sm"}),t.jsx("span",{children:"Generating..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),t.jsx("span",{children:"Generate Conversation"})]})})})]}),g&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"text-sm font-medium text-red-800",children:"Error"}),t.jsx("div",{className:"text-sm text-red-700 mt-1",children:g})]})]})})]}),t.jsx("div",{className:"space-y-6",children:f?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generated Conversation"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[t.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Title"}),t.jsx("div",{className:"text-blue-700",children:f.title})]}),t.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[t.jsx("div",{className:"text-sm font-medium text-green-800",children:"Difficulty"}),t.jsx("div",{className:"text-green-700",children:f.difficulty})]}),t.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[t.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Duration"}),t.jsxs("div",{className:"text-purple-700",children:[f.duration," min"]})]}),t.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[t.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Turns"}),t.jsx("div",{className:"text-orange-700",children:f.dialogue.length})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Participants"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:f.participants.map((z,_)=>t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:z},_))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("div",{className:"text-gray-600 text-sm",children:f.description})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preview"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>E(Math.max(0,w-1)),disabled:w===0,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),t.jsxs("span",{className:"text-sm text-gray-600",children:[w+1," / ",f.dialogue.length]}),t.jsx("button",{onClick:()=>E(Math.min(f.dialogue.length-1,w+1)),disabled:w===f.dialogue.length-1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})})]})]}),t.jsx(Mm,{turn:f.dialogue[w],isCurrentTurn:!0,isStudentTurn:!1,studentRole:"",showTranslation:!0,showHints:!0})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share with Students"}),T?t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Shareable Link"}),t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"text",value:T,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-gray-50"}),t.jsx("button",{onClick:fe,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-r-lg",children:"Copy"})]}),t.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Students can use this link to practice the conversation"})]}):t.jsx("button",{onClick:J,disabled:p,className:"w-full px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:p?t.jsxs(t.Fragment,{children:[t.jsx(Ot,{size:"sm"}),t.jsx("span",{children:"Creating Share Link..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"})}),t.jsx("span",{children:"Create Share Link"})]})})]})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[t.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),t.jsx("div",{className:"text-gray-600",children:"Generate a conversation to see the preview"})]})})]})]})})},$f=({targetText:r,onRecordingComplete:d,onRecordingStart:c,onRecordingStop:o,disabled:m=!1,language:x="en-US",placeholder:g="Click to start recording..."})=>{const[j,f]=S.useState(!1),[b,p]=S.useState(""),[k,T]=S.useState(0),[v,w]=S.useState(!0),[E,A]=S.useState(null),[X,oe]=S.useState(0),F=S.useRef(null),J=S.useRef([]),fe=S.useRef(),P=S.useRef({text:"",confidence:0});S.useEffect(()=>{const xe=gn.getSupportStatus();return w(xe.sttSupported),xe.sttSupported||A("Your browser does not support speech recognition"),()=>{fe.current&&cancelAnimationFrame(fe.current)}},[]);const z=()=>H(null,null,function*(){if(!(!v||m))try{A(null),p(""),T(0),J.current=[];const xe=yield navigator.mediaDevices.getUserMedia({audio:!0}),ce=new MediaRecorder(xe);F.current=ce,ce.ondataavailable=Y=>{Y.data.size>0&&J.current.push(Y.data)},ce.start(),yield gn.startRecording({lang:x,continuous:!1,interimResults:!0},Y=>{p(Y.text),T(Y.confidence),P.current={text:Y.text,confidence:Y.confidence},console.log("VoiceRecorder: Speech recognition result:",Y)},Y=>{console.error("Speech recognition error:",Y),A("Speech recognition failed. Please try again."),_()},()=>{c==null||c(),f(!0)},()=>{f(!1),o==null||o(),setTimeout(()=>{const Y=P.current.text,K=P.current.confidence;console.log(" VoiceRecorder: Preparing callback with:",{finalText:Y,finalConfidence:K}),console.log(" VoiceRecorder: About to call onRecordingComplete"),console.log(" VoiceRecorder: Triggering onRecordingComplete NOW"),d({text:Y,confidence:K,audioBlob:void 0}),F.current&&F.current.state!=="inactive"&&(F.current.stop(),F.current.onstop=()=>{const V=J.current.length>0?new Blob(J.current,{type:"audio/wav"}):void 0;V&&(console.log("VoiceRecorder: Updating with audio blob"),d({text:Y,confidence:K,audioBlob:V}))})},200)}),te(xe)}catch(xe){console.error("Failed to start recording:",xe),A("Failed to access microphone. Please check permissions.")}}),_=()=>{j&&(gn.stopRecording(),oe(0),fe.current&&cancelAnimationFrame(fe.current))},te=xe=>{const ce=new AudioContext,Y=ce.createAnalyser();ce.createMediaStreamSource(xe).connect(Y),Y.fftSize=256;const V=Y.frequencyBinCount,N=new Uint8Array(V),B=()=>{if(!j)return;Y.getByteFrequencyData(N);const ne=N.reduce((L,O)=>L+O,0)/V;oe(ne/255),fe.current=requestAnimationFrame(B)};B()},Ne=()=>{const xe="relative flex items-center justify-center w-16 h-16 rounded-full transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-offset-2";return m?t.jsx("button",{className:`${xe} bg-gray-300 cursor-not-allowed`,disabled:!0,children:t.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})}):j?t.jsxs("button",{onClick:_,className:`${xe} bg-red-500 hover:bg-red-600 text-white focus:ring-red-300 animate-pulse`,style:{transform:`scale(${1+X*.3})`},children:[t.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}),t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-red-300",style:{transform:`scale(${1.2+X*.5})`,opacity:X*.7}})]}):t.jsx("button",{onClick:z,className:`${xe} bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-300`,children:t.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})})};return v?t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[Ne(),t.jsx("div",{className:"text-sm text-gray-600 text-center",children:j?t.jsx("span",{className:"text-red-600 font-medium",children:"Recording..."}):g})]}),b&&t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"You said:"}),t.jsxs("div",{className:"text-gray-900",children:['"',b,'"']}),k>0&&t.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Confidence:"}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${k>.8?"bg-green-500":k>.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${k*100}%`}})}),t.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(k*100),"%"]})]})]})}),E&&t.jsx("div",{className:"text-red-600 text-sm bg-red-50 px-3 py-2 rounded-lg border border-red-200",children:E}),r&&b&&t.jsxs("div",{className:"w-full max-w-md text-xs text-gray-500 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[t.jsx("div",{className:"font-medium mb-1",children:"Expected:"}),t.jsxs("div",{className:"text-blue-700",children:['"',r,'"']})]})]}):t.jsxs("div",{className:"flex flex-col items-center space-y-2 p-4 bg-red-50 rounded-lg border border-red-200",children:[t.jsx("div",{className:"text-red-600 text-sm font-medium",children:"Speech recognition not supported"}),t.jsx("div",{className:"text-red-500 text-xs text-center",children:"Please use Chrome, Edge, or Safari for voice recording"})]})},Rf=()=>{const{binId:r}=Xh(),d=Jh(),[c,o]=S.useState(null),[m,x]=S.useState(null),[g,j]=S.useState(!0),[f,b]=S.useState(null),[p,k]=S.useState(0),[T,v]=S.useState(!1),[w,E]=S.useState(null),[A,X]=S.useState(!1),[oe,F]=S.useState(""),[J,fe]=S.useState(""),[P,z]=S.useState(null),[_,te]=S.useState([]),[Ne,xe]=S.useState(0),ce=(ee,de)=>{const ue=Ht=>Ht.toLowerCase().replace(/[^\w\s]/g,"").trim(),pe=ue(ee).split(/\s+/),We=ue(de).split(/\s+/);if(pe.length===0||We.length===0)return 0;let Ge=0;const et=new Set(pe);We.forEach(Ht=>{et.has(Ht)?Ge++:pe.forEach(os=>{os.length>=3&&Ht.length>=3&&(os.includes(Ht)||Ht.includes(os))&&(Ge+=.5)})});const at=Math.max(pe.length,We.length);return Math.min(Ge/at,1)},Y=ee=>H(null,null,function*(){try{yield gn.speak(ee,{lang:"en-US",rate:.8,pitch:1,volume:1})}catch(de){console.error("Failed to play demonstration:",de)}}),K=()=>{P!=null&&P.audioBlob&&new Audio(URL.createObjectURL(P.audioBlob)).play().catch(de=>{console.error("Failed to play recording:",de)})},V=ee=>ee>=.8?"text-green-600":ee>=.6?"text-yellow-600":"text-red-600",N=ee=>{const de=ee.split(/[.!?]+/).filter(We=>We.trim().length>0),ue=[];for(let We of de){const Ge=We.trim();if(Ge.length>50){const et=Ge.split(",").filter(at=>at.trim().length>0);et.length>1?ue.push(...et.map(at=>at.trim())):ue.push(Ge)}else Ge.length>0&&ue.push(Ge)}return ue.length>0?ue:[ee.trim()]},B=ee=>{if(!c||!m)return;const de=c.dialogue[ee];if(!de||de.speaker!==m.studentRole)return;const ue=N(de.text),pe=_.length===0||JSON.stringify(ue)!==JSON.stringify(_);te(ue),pe&&(xe(0),ue.length>0&&fe(ue[0]))},ne=S.useCallback(()=>H(null,null,function*(){if(!r){b("No practice ID provided"),j(!1);return}try{const ee=yield tf(r);if(ee.type!=="conversation-practice"){b("This is not a conversation practice link"),j(!1);return}o(ee.practice),ee.practice.participants.length>0&&F(ee.practice.participants[0]),j(!1)}catch(ee){console.error("Failed to load conversation practice:",ee),b("Failed to load conversation practice"),j(!1)}}),[r]);S.useEffect(()=>{ne()},[ne]),S.useEffect(()=>{if(m&&c&&c.dialogue.length>0){const ee=c.dialogue[p];ee&&ee.speaker===m.studentRole?B(p):(te([]),xe(0),fe(""))}},[m,c,p]),S.useEffect(()=>{},[J,Ne,_]);const L=()=>{if(!c||!oe)return;const ee={practiceId:c.id,startTime:Date.now(),currentTurnIndex:0,studentRole:oe,responses:[],completed:!1};x(ee),k(0),v(!1)},O=ee=>{if(!c||!m)return!1;const de=c.dialogue[ee];return(de==null?void 0:de.speaker)===m.studentRole},G=ee=>H(null,null,function*(){const de=_.length>0?_[Ne]:J;if(!(!c||!m||!de)){X(!0);try{const ue=ce(de,ee.text),pe={text:ee.text,audioBlob:ee.audioBlob,similarity:ue};z(pe);const Ge={turnId:c.dialogue[p].id,text:ee.text,confidence:ee.confidence,audioBlob:ee.audioBlob,timestamp:Date.now()},et=me(ie({},m),{responses:[...m.responses,Ge]});x(et)}catch(ue){console.error("Failed to process student response:",ue)}finally{X(!1)}}}),W=()=>{if(!(!c||!m)){if(v(!1),E(null),Ne<_.length-1){const ee=Ne+1,de=_[ee];z(null),xe(ee),fe(de);return}if(p<c.dialogue.length-1){const ee=p+1;z(null),te([]),xe(0),fe(""),k(ee)}else ge()}},ge=()=>{if(!m)return;const ee=me(ie({},m),{completed:!0});x(ee)};if(g)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ot,{}),t.jsx("div",{className:"mt-4 text-gray-600",children:"Loading conversation practice..."})]})});if(f)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[t.jsx("div",{className:"text-red-600 text-lg font-medium mb-2",children:"Error"}),t.jsx("div",{className:"text-gray-600 mb-4",children:f}),t.jsx("button",{onClick:()=>d("/"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Home"})]})});if(!c)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"text-gray-600",children:"No conversation found"})})});if(!m)return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:c.title}),t.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["",c.difficulty==="easy"?"":c.difficulty==="normal"?"":""]}),t.jsxs("span",{children:[c.duration," "]}),t.jsxs("span",{children:[c.dialogue.length," "]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),t.jsx("p",{className:"text-gray-700 mb-4",children:c.scenario}),t.jsx("p",{className:"text-gray-600",children:c.description})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.participants.map(ee=>t.jsxs("button",{onClick:()=>F(ee),className:`p-4 border rounded-lg text-left transition-all ${oe===ee?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("div",{className:"font-medium text-gray-900",children:ee}),t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[" ",ee," "]})]},ee))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),t.jsx("ul",{className:"space-y-2",children:c.practiceGoals.map((ee,de)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-green-500 mr-2 mt-0.5",children:""}),t.jsx("span",{className:"text-gray-700",children:ee})]},de))})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:L,disabled:!oe,className:`px-8 py-3 rounded-lg font-medium transition-colors ${oe?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:""})})]})});if(m.completed)return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[t.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:""}),t.jsx("p",{className:"text-gray-600 mb-6",children:""}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.responses.length}),t.jsx("div",{className:"text-sm text-gray-600",children:""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:Math.round((Date.now()-m.startTime)/1e3/60)}),t.jsx("div",{className:"text-sm text-gray-600",children:""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.difficulty==="easy"?"":c.difficulty==="normal"?"":""}),t.jsx("div",{className:"text-sm text-gray-600",children:""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.studentRole}),t.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4",children:[t.jsx("button",{onClick:()=>{x(null),k(0)},className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:""}),t.jsx("button",{onClick:()=>d("/"),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium",children:""})]})]})})});const Te=c.dialogue[p],Ae=O(p);return t.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h1",{className:"font-semibold text-gray-900",children:c.title}),t.jsxs("span",{className:"text-sm text-gray-600",children:[p+1," / ",c.dialogue.length]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(p+1)/c.dialogue.length*100}%`}})})]}),t.jsx(Mm,{turn:Te,isCurrentTurn:!0,isStudentTurn:Ae,studentRole:m.studentRole,showTranslation:!1,showHints:Ae}),Ae?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" "}),_.length>1&&t.jsxs("p",{className:"text-blue-600 text-sm mb-2",children:[" ",Ne+1,"  /  ",_.length," "]}),t.jsx("p",{className:"text-gray-600",children:""})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" "}),_.length>1&&t.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("div",{className:"text-sm text-blue-700 mb-1",children:""}),t.jsx("div",{className:"text-blue-900",children:Te.text})]}),J?t.jsx("div",{className:"p-4 border-2 border-green-500 bg-green-50 rounded-lg cursor-pointer transition-colors",onClick:()=>fe(J),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-900 text-lg font-medium",children:J}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:ee=>{ee.stopPropagation(),Y(J)},className:"p-2 text-blue-500 hover:bg-blue-100 rounded-full transition-colors",title:"",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})})})]})}):t.jsx("div",{className:"p-4 border-2 border-gray-300 bg-gray-50 rounded-lg",children:t.jsx("div",{className:"text-gray-500 text-center",children:"..."})}),Te.translation&&t.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("div",{className:"text-sm text-yellow-700 mb-1",children:" "}),t.jsx("div",{className:"text-yellow-900",children:Te.translation})]})]}),J&&t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:" "}),t.jsx($f,{targetText:_.length>0?_[Ne]:J,onRecordingComplete:G,onRecordingStart:()=>{},onRecordingStop:()=>{},disabled:A,language:"en-US",placeholder:""})]}),P&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),P.audioBlob&&t.jsxs("button",{onClick:K,className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})}),""]})]}),t.jsxs("div",{className:"text-gray-800 mb-3 p-2 bg-white rounded border",children:['"',P.text,'"']}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-600 mr-2",children:""}),t.jsxs("span",{className:`font-medium ${V(P.similarity||0)}`,children:[Math.round((P.similarity||0)*100),"%"]}),(P.similarity||0)>=.8&&t.jsx("span",{className:"ml-2",children:" "}),(P.similarity||0)>=.6&&(P.similarity||0)<.8&&t.jsx("span",{className:"ml-2",children:" "}),(P.similarity||0)<.6&&t.jsx("span",{className:"ml-2",children:" "})]}),!P.audioBlob&&t.jsx("div",{className:"text-xs text-red-500 mt-2",children:""})]}),P&&(P.similarity||0)>=.6&&t.jsx("div",{className:"mt-4",children:t.jsxs("button",{onClick:W,className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:(()=>{const ee=Ne>=_.length-1,de=p>=((c==null?void 0:c.dialogue.length)||0)-1;return ee?de?"":"":` (${Ne+2}/${_.length})`})()})]})}),P&&(P.similarity||0)<.6&&t.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("div",{className:"text-sm text-yellow-800 mb-3",children:" "}),t.jsx("button",{onClick:()=>z(null),className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white text-sm rounded transition-colors",children:" "})]})]})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["  ",Te.speaker," "]}),t.jsx("p",{className:"text-gray-600 mb-4",children:""}),t.jsxs("button",{onClick:W,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium flex items-center gap-2 mx-auto",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:""}),t.jsx("span",{children:""})]})]}),A&&t.jsxs("div",{className:"text-center mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx(Ot,{}),t.jsx("div",{className:"text-sm text-blue-600 mt-2",children:" ..."})]})]})})},bl="gemini_api_key",qf=()=>{const[r]=Na(),d=r.get("binId"),[c,o]=Me.useState(null),[m,x]=Me.useState(!1),[g,j]=Me.useState(""),[f,b]=Me.useState(null),[p,k]=Me.useState(!1);Me.useEffect(()=>{if(!d){j(" binId");return}x(!0),_i(d).then(w=>{o(w),T(w,d)}).catch(w=>j(w.message||"")).finally(()=>x(!1))},[d]);const T=(w,E)=>H(null,null,function*(){try{if(yield wt.init(),yield wt.getLessonPlan(`shared_${E}`)){yield wt.updateLastAccessed(`shared_${E}`);return}const X={id:`shared_${E}`,topic:w.topic||"",createdAt:new Date().toISOString(),lastAccessedAt:new Date().toISOString(),content:{learningObjectives:w.learningObjectives,contentBreakdown:w.contentBreakdown,confusingPoints:w.confusingPoints,classroomActivities:w.classroomActivities,quiz:w.onlineInteractiveQuiz,writingPractice:w.writingPractice},metadata:{totalSections:[w.learningObjectives,w.contentBreakdown,w.confusingPoints,w.classroomActivities,w.onlineInteractiveQuiz,w.writingPractice].filter(Boolean).length,hasQuiz:!!w.onlineInteractiveQuiz,hasWriting:!!w.writingPractice,isShared:!0,sharedBinId:E}};yield wt.saveLessonPlan(X),console.log(`: ${w.topic||""} (${E})`)}catch(A){console.error(":",A)}});Me.useEffect(()=>{const w=localStorage.getItem(bl);w?b(w):k(!0)},[]);const v=w=>{localStorage.setItem(bl,w),b(w),k(!1)};return m?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex justify-center my-10",children:t.jsx(Ot,{})})}):g?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsx("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:g})})}):c?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:[t.jsx(Tm,{isOpen:p,onSave:v}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("a",{href:"/ai-page-gen/",className:"inline-flex items-center gap-2 px-4 py-2 text-indigo-600 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm",children:[t.jsx(ya,{className:"w-4 h-4"}),""]})}),!f&&!p&&t.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0 0c.652-.286 1.323-.443 2.25-.443 1.38 0 2.652.24 3.75.697v-6a6 6 0 0 0-6 2.243M12 15.75V21m0-5.25c1.38 0 2.652-.24 3.75-.697v6a6 6 0 0 1-3.75-2.243M12 15.75L9 12"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:" API Key "}),t.jsx("p",{className:"text-yellow-700 text-xs mt-1",children:" AI "})]})]}),t.jsx("button",{onClick:()=>k(!0),className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" API Key"})]})}),t.jsx(mo,{content:c,topic:c.topic||"",selectedLevel:c.selectedLevel||null,selectedVocabularyLevel:c.selectedVocabularyLevel||null,apiKey:f||void 0,onContentUpdate:o})]})]}):null},Uf=()=>{const[r,d]=S.useState(""),[c,o]=S.useState(null),[m,x]=S.useState(!1),[g,j]=S.useState(null),[f,b]=S.useState(null),[p,k]=S.useState(!1),[T,v]=S.useState(null),[w,E]=S.useState(null),[A,X]=S.useState(null),[oe,F]=S.useState(!1),[J,fe]=S.useState(null),[P,z]=S.useState(!1),[_,te]=S.useState(!1);Me.useEffect(()=>{const B=new URLSearchParams(window.location.search).get("apikey");if(B){localStorage.setItem(bl,B),b(B),k(!1);const L=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,L);return}const ne=localStorage.getItem(bl);ne?b(ne):k(!0)},[]);const Ne=N=>{localStorage.setItem(bl,N),b(N),k(!1)},xe=(N,B)=>H(null,null,function*(){try{yield wt.init();const ne=wf(B,N);yield wt.saveLessonPlan(ne)}catch(ne){console.error(":",ne)}}),ce=S.useCallback(()=>H(null,null,function*(){if(!r.trim()){j("");return}if(!f){j(" Gemini API "),k(!0);return}x(!0),j(null),E(null),o(null),X(null),fe(null),z(!1);const N=fg(r);te(N);try{const B=yield pg(r,f);E(B),F(!0),N&&z(!0)}catch(B){console.error(B),j(B.message||"")}finally{x(!1)}}),[r,f]),Y=S.useCallback(N=>H(null,null,function*(){if(!f){j(" Gemini API "),k(!0);return}if(_&&!J){j("");return}x(!0),j(null),X(N),o(null);try{let B;_&&J?B=yield vg(r,N,J,f):B=yield bg(r,N,f),o(B),F(!1),z(!1),yield xe(B,r)}catch(B){console.error(B),j(B.message||"")}finally{x(!1)}}),[r,f,_,J]),K=S.useCallback(()=>H(null,null,function*(){if(!r.trim()){j("");return}if(!f){j(" Gemini API "),k(!0);return}x(!0),j(null),o(null),F(!1),z(!1),te(!1);try{const N=yield Cg(r,f);o(N),yield xe(N,r)}catch(N){console.error(N),j(N.message||""),o(null)}finally{x(!1)}}),[r,f]),V=()=>H(null,null,function*(){if(!f){v(" API ");return}const N=`${window.location.origin}/ai-page-gen/?apikey=${encodeURIComponent(f)}`;try{yield navigator.clipboard.writeText(N),v("")}catch(B){v("")}setTimeout(()=>v(null),2e3)});return t.jsx(Wh,{basename:"/ai-page-gen/",children:t.jsxs(Fh,{children:[t.jsx(Pt,{path:"share",element:t.jsx(qf,{})}),t.jsx(Pt,{path:"quiz",element:t.jsx(kf,{})}),t.jsx(Pt,{path:"writing",element:t.jsx(Cf,{})}),t.jsx(Pt,{path:"student-results",element:t.jsx(Tf,{})}),t.jsx(Pt,{path:"lesson-plans",element:t.jsx(Mf,{})}),t.jsx(Pt,{path:"interactive-learning",element:t.jsx(Ef,{})}),t.jsx(Pt,{path:"teacher-interactive-prep",element:t.jsx(Of,{})}),t.jsx(Pt,{path:"student-interactive",element:t.jsx(Lf,{})}),t.jsx(Pt,{path:"conversation-prep",element:t.jsx(Bf,{})}),t.jsx(Pt,{path:"conversation-practice/:binId",element:t.jsx(Rf,{})}),t.jsx(Pt,{path:"/",element:t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:[t.jsx(Tm,{isOpen:p,onSave:Ne}),t.jsxs("header",{className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-4xl sm:text-5xl font-extrabold text-sky-700 tracking-tight",children:["AI  ",t.jsx("span",{className:"text-indigo-600",children:""})]}),t.jsx("p",{className:"mt-3 text-lg text-slate-600 max-w-2xl mx-auto",children:" AI "}),t.jsxs("div",{className:"mt-6 max-w-2xl mx-auto bg-yellow-50 border-l-4 border-yellow-400 rounded-lg p-4 text-left shadow-sm",children:[t.jsxs("div",{className:"flex items-start mb-2",children:[t.jsx("svg",{className:"w-6 h-6 text-yellow-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z"})}),t.jsx("span",{className:"font-semibold text-yellow-800 text-base",children:""})]}),t.jsxs("ul",{className:"list-disc pl-8 text-yellow-900 text-sm space-y-1",children:[t.jsx("li",{children:"AI"}),t.jsx("li",{children:""})]})]})]}),t.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:t.jsx("div",{className:"flex justify-center",children:t.jsx(jf,{compact:!0})})}),t.jsxs("div",{className:"max-w-6xl mx-auto mb-8",children:[t.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[t.jsxs("a",{href:"/ai-page-gen/lesson-plans",className:"flex items-center gap-2 px-4 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-lg",children:[t.jsx(ts,{className:"w-5 h-5"}),""]}),t.jsxs("a",{href:"/ai-page-gen/conversation-prep",className:"flex items-center gap-2 px-4 py-3 bg-emerald-600 text-white font-medium rounded-lg hover:bg-emerald-700 transition-colors shadow-lg",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]}),t.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors shadow-lg",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),""]})]}),T&&t.jsx("div",{className:"mt-3 text-center",children:t.jsx("p",{className:`text-sm ${T.includes("")?"text-red-600":"text-green-600"}`,children:T})})]}),t.jsxs("main",{className:"max-w-4xl mx-auto",children:[t.jsx(Lg,{topic:r,setTopic:d,onGenerate:K,onGenerateWithLevels:ce,isLoading:m}),g&&!m&&t.jsxs("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:[t.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[t.jsx(to,{className:"w-6 h-6 mr-2 text-red-600"}),""]}),t.jsx("p",{children:g}),t.jsx("p",{className:"mt-2 text-sm",children:"AI  API "})]}),m&&t.jsx("div",{className:"flex justify-center my-10",children:t.jsx(Ot,{})}),oe&&w&&!m&&!g&&t.jsx(bf,{learningLevels:w,onLevelSelect:X,onGenerateWithLevel:Y,selectedLevelId:A==null?void 0:A.id,isLoading:m}),P&&_&&!m&&!g&&t.jsx(vf,{onVocabularyLevelSelect:fe,selectedLevel:J,isVisible:!0}),c&&!m&&!g&&!oe&&!P&&t.jsx(mo,{content:c,topic:r,selectedLevel:A,selectedVocabularyLevel:J,apiKey:f||void 0,onContentUpdate:o})]}),t.jsxs("footer",{className:"text-center mt-12 py-6 border-t border-slate-300",children:[t.jsx("p",{className:"text-sm text-slate-500",children:" Gemini API AI "}),t.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded shadow transition",onClick:V,disabled:!f,children:""}),T&&t.jsx("div",{className:"mt-2 text-green-600 text-sm",children:T})]})]})})]})})},Em=document.getElementById("root");if(!Em)throw new Error("Could not find root element to mount to");const Hf=ng.createRoot(Em);Hf.render(t.jsx(Me.StrictMode,{children:t.jsx(Uf,{})}))});export default _f();
