(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(s){if(s.ep)return;s.ep=!0;const f=o(s);fetch(s.href,f)}})();function Tg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fu={exports:{}},ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function F0(){if(Np)return ba;Np=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(a,s,f){var m=null;if(f!==void 0&&(m=""+f),s.key!==void 0&&(m=""+s.key),"key"in s){f={};for(var p in s)p!=="key"&&(f[p]=s[p])}else f=s;return s=f.ref,{$$typeof:n,type:a,key:m,ref:s!==void 0?s:null,props:f}}return ba.Fragment=e,ba.jsx=o,ba.jsxs=o,ba}var Rp;function Y0(){return Rp||(Rp=1,Fu.exports=F0()),Fu.exports}var x=Y0(),Yu={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function J0(){if(Dp)return ye;Dp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),C=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=C&&w[C]||w["@@iterator"],typeof w=="function"?w:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function q(w,H,te){this.props=w,this.context=H,this.refs=N,this.updater=te||E}q.prototype.isReactComponent={},q.prototype.setState=function(w,H){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,H,"setState")},q.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function O(){}O.prototype=q.prototype;function $(w,H,te){this.props=w,this.context=H,this.refs=N,this.updater=te||E}var F=$.prototype=new O;F.constructor=$,_(F,q.prototype),F.isPureReactComponent=!0;var Z=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function j(w,H,te,K,re,we){return te=we.ref,{$$typeof:n,type:w,key:H,ref:te!==void 0?te:null,props:we}}function ce(w,H){return j(w.type,H,void 0,void 0,void 0,w.props)}function Q(w){return typeof w=="object"&&w!==null&&w.$$typeof===n}function B(w){var H={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(te){return H[te]})}var le=/\/+/g;function _e(w,H){return typeof w=="object"&&w!==null&&w.key!=null?B(""+w.key):H.toString(36)}function Oe(){}function et(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Oe,Oe):(w.status="pending",w.then(function(H){w.status==="pending"&&(w.status="fulfilled",w.value=H)},function(H){w.status==="pending"&&(w.status="rejected",w.reason=H)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function Te(w,H,te,K,re){var we=typeof w;(we==="undefined"||we==="boolean")&&(w=null);var ge=!1;if(w===null)ge=!0;else switch(we){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(w.$$typeof){case n:case e:ge=!0;break;case v:return ge=w._init,Te(ge(w._payload),H,te,K,re)}}if(ge)return re=re(w),ge=K===""?"."+_e(w,0):K,Z(re)?(te="",ge!=null&&(te=ge.replace(le,"$&/")+"/"),Te(re,H,te,"",function(wn){return wn})):re!=null&&(Q(re)&&(re=ce(re,te+(re.key==null||w&&w.key===re.key?"":(""+re.key).replace(le,"$&/")+"/")+ge)),H.push(re)),1;ge=0;var St=K===""?".":K+":";if(Z(w))for(var $e=0;$e<w.length;$e++)K=w[$e],we=St+_e(K,$e),ge+=Te(K,H,te,we,re);else if($e=b(w),typeof $e=="function")for(w=$e.call(w),$e=0;!(K=w.next()).done;)K=K.value,we=St+_e(K,$e++),ge+=Te(K,H,te,we,re);else if(we==="object"){if(typeof w.then=="function")return Te(et(w),H,te,K,re);throw H=String(w),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ge}function V(w,H,te){if(w==null)return w;var K=[],re=0;return Te(w,K,"","",function(we){return H.call(te,we,re++)}),K}function X(w){if(w._status===-1){var H=w._result;H=H(),H.then(function(te){(w._status===0||w._status===-1)&&(w._status=1,w._result=te)},function(te){(w._status===0||w._status===-1)&&(w._status=2,w._result=te)}),w._status===-1&&(w._status=0,w._result=H)}if(w._status===1)return w._result.default;throw w._result}var se=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function Ve(){}return ye.Children={map:V,forEach:function(w,H,te){V(w,function(){H.apply(this,arguments)},te)},count:function(w){var H=0;return V(w,function(){H++}),H},toArray:function(w){return V(w,function(H){return H})||[]},only:function(w){if(!Q(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ye.Component=q,ye.Fragment=o,ye.Profiler=s,ye.PureComponent=$,ye.StrictMode=a,ye.Suspense=y,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,ye.__COMPILER_RUNTIME={__proto__:null,c:function(w){return Y.H.useMemoCache(w)}},ye.cache=function(w){return function(){return w.apply(null,arguments)}},ye.cloneElement=function(w,H,te){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var K=_({},w.props),re=w.key,we=void 0;if(H!=null)for(ge in H.ref!==void 0&&(we=void 0),H.key!==void 0&&(re=""+H.key),H)!ee.call(H,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&H.ref===void 0||(K[ge]=H[ge]);var ge=arguments.length-2;if(ge===1)K.children=te;else if(1<ge){for(var St=Array(ge),$e=0;$e<ge;$e++)St[$e]=arguments[$e+2];K.children=St}return j(w.type,re,void 0,void 0,we,K)},ye.createContext=function(w){return w={$$typeof:m,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:f,_context:w},w},ye.createElement=function(w,H,te){var K,re={},we=null;if(H!=null)for(K in H.key!==void 0&&(we=""+H.key),H)ee.call(H,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(re[K]=H[K]);var ge=arguments.length-2;if(ge===1)re.children=te;else if(1<ge){for(var St=Array(ge),$e=0;$e<ge;$e++)St[$e]=arguments[$e+2];re.children=St}if(w&&w.defaultProps)for(K in ge=w.defaultProps,ge)re[K]===void 0&&(re[K]=ge[K]);return j(w,we,void 0,void 0,null,re)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(w){return{$$typeof:p,render:w}},ye.isValidElement=Q,ye.lazy=function(w){return{$$typeof:v,_payload:{_status:-1,_result:w},_init:X}},ye.memo=function(w,H){return{$$typeof:h,type:w,compare:H===void 0?null:H}},ye.startTransition=function(w){var H=Y.T,te={};Y.T=te;try{var K=w(),re=Y.S;re!==null&&re(te,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Ve,se)}catch(we){se(we)}finally{Y.T=H}},ye.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},ye.use=function(w){return Y.H.use(w)},ye.useActionState=function(w,H,te){return Y.H.useActionState(w,H,te)},ye.useCallback=function(w,H){return Y.H.useCallback(w,H)},ye.useContext=function(w){return Y.H.useContext(w)},ye.useDebugValue=function(){},ye.useDeferredValue=function(w,H){return Y.H.useDeferredValue(w,H)},ye.useEffect=function(w,H,te){var K=Y.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(w,H)},ye.useId=function(){return Y.H.useId()},ye.useImperativeHandle=function(w,H,te){return Y.H.useImperativeHandle(w,H,te)},ye.useInsertionEffect=function(w,H){return Y.H.useInsertionEffect(w,H)},ye.useLayoutEffect=function(w,H){return Y.H.useLayoutEffect(w,H)},ye.useMemo=function(w,H){return Y.H.useMemo(w,H)},ye.useOptimistic=function(w,H){return Y.H.useOptimistic(w,H)},ye.useReducer=function(w,H,te){return Y.H.useReducer(w,H,te)},ye.useRef=function(w){return Y.H.useRef(w)},ye.useState=function(w){return Y.H.useState(w)},ye.useSyncExternalStore=function(w,H,te){return Y.H.useSyncExternalStore(w,H,te)},ye.useTransition=function(){return Y.H.useTransition()},ye.version="19.1.0",ye}var kp;function _c(){return kp||(kp=1,Yu.exports=J0()),Yu.exports}var k=_c();const je=Tg(k);var Ju={exports:{}},_a={},Zu={exports:{}},Qu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function Z0(){return Ip||(Ip=1,function(n){function e(V,X){var se=V.length;V.push(X);e:for(;0<se;){var Ve=se-1>>>1,w=V[Ve];if(0<s(w,X))V[Ve]=X,V[se]=w,se=Ve;else break e}}function o(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var X=V[0],se=V.pop();if(se!==X){V[0]=se;e:for(var Ve=0,w=V.length,H=w>>>1;Ve<H;){var te=2*(Ve+1)-1,K=V[te],re=te+1,we=V[re];if(0>s(K,se))re<w&&0>s(we,K)?(V[Ve]=we,V[re]=se,Ve=re):(V[Ve]=K,V[te]=se,Ve=te);else if(re<w&&0>s(we,se))V[Ve]=we,V[re]=se,Ve=re;else break e}}return X}function s(V,X){var se=V.sortIndex-X.sortIndex;return se!==0?se:V.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();n.unstable_now=function(){return m.now()-p}}var y=[],h=[],v=1,C=null,b=3,E=!1,_=!1,N=!1,q=!1,O=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function Z(V){for(var X=o(h);X!==null;){if(X.callback===null)a(h);else if(X.startTime<=V)a(h),X.sortIndex=X.expirationTime,e(y,X);else break;X=o(h)}}function Y(V){if(N=!1,Z(V),!_)if(o(y)!==null)_=!0,ee||(ee=!0,_e());else{var X=o(h);X!==null&&Te(Y,X.startTime-V)}}var ee=!1,j=-1,ce=5,Q=-1;function B(){return q?!0:!(n.unstable_now()-Q<ce)}function le(){if(q=!1,ee){var V=n.unstable_now();Q=V;var X=!0;try{e:{_=!1,N&&(N=!1,$(j),j=-1),E=!0;var se=b;try{t:{for(Z(V),C=o(y);C!==null&&!(C.expirationTime>V&&B());){var Ve=C.callback;if(typeof Ve=="function"){C.callback=null,b=C.priorityLevel;var w=Ve(C.expirationTime<=V);if(V=n.unstable_now(),typeof w=="function"){C.callback=w,Z(V),X=!0;break t}C===o(y)&&a(y),Z(V)}else a(y);C=o(y)}if(C!==null)X=!0;else{var H=o(h);H!==null&&Te(Y,H.startTime-V),X=!1}}break e}finally{C=null,b=se,E=!1}X=void 0}}finally{X?_e():ee=!1}}}var _e;if(typeof F=="function")_e=function(){F(le)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,et=Oe.port2;Oe.port1.onmessage=le,_e=function(){et.postMessage(null)}}else _e=function(){O(le,0)};function Te(V,X){j=O(function(){V(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(V){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var se=b;b=X;try{return V()}finally{b=se}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var se=b;b=V;try{return X()}finally{b=se}},n.unstable_scheduleCallback=function(V,X,se){var Ve=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ve+se:Ve):se=Ve,V){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=se+w,V={id:v++,callback:X,priorityLevel:V,startTime:se,expirationTime:w,sortIndex:-1},se>Ve?(V.sortIndex=se,e(h,V),o(y)===null&&V===o(h)&&(N?($(j),j=-1):N=!0,Te(Y,se-Ve))):(V.sortIndex=w,e(y,V),_||E||(_=!0,ee||(ee=!0,_e()))),V},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(V){var X=b;return function(){var se=b;b=X;try{return V.apply(this,arguments)}finally{b=se}}}}(Qu)),Qu}var Up;function Q0(){return Up||(Up=1,Zu.exports=Z0()),Zu.exports}var Xu={exports:{}},mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function X0(){if(Lp)return mt;Lp=1;var n=_c();function e(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");function f(y,h,v){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:C==null?null:""+C,children:y,containerInfo:h,implementation:v}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,mt.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return f(y,h,null,v)},mt.flushSync=function(y){var h=m.T,v=a.p;try{if(m.T=null,a.p=2,y)return y()}finally{m.T=h,a.p=v,a.d.f()}},mt.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(y,h))},mt.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},mt.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,C=p(v,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?a.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:C,integrity:b,fetchPriority:E}):v==="script"&&a.d.X(y,{crossOrigin:C,integrity:b,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},mt.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=p(h.as,h.crossOrigin);a.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(y)},mt.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,C=p(v,h.crossOrigin);a.d.L(y,v,{crossOrigin:C,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},mt.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=p(h.as,h.crossOrigin);a.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(y)},mt.requestFormReset=function(y){a.d.r(y)},mt.unstable_batchedUpdates=function(y,h){return y(h)},mt.useFormState=function(y,h,v){return m.H.useFormState(y,h,v)},mt.useFormStatus=function(){return m.H.useHostTransitionStatus()},mt.version="19.1.0",mt}var Op;function K0(){if(Op)return Xu.exports;Op=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xu.exports=X0(),Xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function W0(){if(Vp)return _a;Vp=1;var n=Q0(),e=_c(),o=K0();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function m(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(f(t)!==t)throw Error(a(188))}function y(t){var i=t.alternate;if(!i){if(i=f(t),i===null)throw Error(a(188));return i!==t?null:t}for(var l=t,r=i;;){var d=l.return;if(d===null)break;var g=d.alternate;if(g===null){if(r=d.return,r!==null){l=r;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===l)return p(d),t;if(g===r)return p(d),i;g=g.sibling}throw Error(a(188))}if(l.return!==r.return)l=d,r=g;else{for(var T=!1,S=d.child;S;){if(S===l){T=!0,l=d,r=g;break}if(S===r){T=!0,r=d,l=g;break}S=S.sibling}if(!T){for(S=g.child;S;){if(S===l){T=!0,l=g,r=d;break}if(S===r){T=!0,r=g,l=d;break}S=S.sibling}if(!T)throw Error(a(189))}}if(l.alternate!==r)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?t:i}function h(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=h(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,C=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function _e(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Oe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case q:return"Profiler";case N:return"StrictMode";case Y:return"Suspense";case ee:return"SuspenseList";case Q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case F:return(t.displayName||"Context")+".Provider";case $:return(t._context.displayName||"Context")+".Consumer";case Z:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return i=t.displayName||null,i!==null?i:et(t.type)||"Memo";case ce:i=t._payload,t=t._init;try{return et(t(i))}catch{}}return null}var Te=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ve=[],w=-1;function H(t){return{current:t}}function te(t){0>w||(t.current=Ve[w],Ve[w]=null,w--)}function K(t,i){w++,Ve[w]=t.current,t.current=i}var re=H(null),we=H(null),ge=H(null),St=H(null);function $e(t,i){switch(K(ge,i),K(we,t),K(re,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?ip(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=ip(i),t=op(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(re),K(re,t)}function wn(){te(re),te(we),te(ge)}function Rs(t){t.memoizedState!==null&&K(St,t);var i=re.current,l=op(i,t.type);i!==l&&(K(we,t),K(re,l))}function Pa(t){we.current===t&&(te(re),te(we)),St.current===t&&(te(St),va._currentValue=se)}var Ds=Object.prototype.hasOwnProperty,ks=n.unstable_scheduleCallback,Is=n.unstable_cancelCallback,by=n.unstable_shouldYield,_y=n.unstable_requestPaint,Zt=n.unstable_now,Ey=n.unstable_getCurrentPriorityLevel,Oc=n.unstable_ImmediatePriority,Vc=n.unstable_UserBlockingPriority,$a=n.unstable_NormalPriority,Ay=n.unstable_LowPriority,qc=n.unstable_IdlePriority,wy=n.log,My=n.unstable_setDisableYieldValue,Ao=null,bt=null;function Mn(t){if(typeof wy=="function"&&My(t),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Ao,t)}catch{}}var _t=Math.clz32?Math.clz32:Dy,Ny=Math.log,Ry=Math.LN2;function Dy(t){return t>>>=0,t===0?32:31-(Ny(t)/Ry|0)|0}var Ga=256,Ha=4194304;function ii(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fa(t,i,l){var r=t.pendingLanes;if(r===0)return 0;var d=0,g=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var S=r&134217727;return S!==0?(r=S&~g,r!==0?d=ii(r):(T&=S,T!==0?d=ii(T):l||(l=S&~t,l!==0&&(d=ii(l))))):(S=r&~g,S!==0?d=ii(S):T!==0?d=ii(T):l||(l=r&~t,l!==0&&(d=ii(l)))),d===0?0:i!==0&&i!==d&&(i&g)===0&&(g=d&-d,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:d}function wo(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ky(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zc(){var t=Ga;return Ga<<=1,(Ga&4194048)===0&&(Ga=256),t}function Bc(){var t=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),t}function Us(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function Mo(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Iy(t,i,l,r,d,g){var T=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var S=t.entanglements,A=t.expirationTimes,I=t.hiddenUpdates;for(l=T&~l;0<l;){var z=31-_t(l),G=1<<z;S[z]=0,A[z]=-1;var U=I[z];if(U!==null)for(I[z]=null,z=0;z<U.length;z++){var L=U[z];L!==null&&(L.lane&=-536870913)}l&=~G}r!==0&&Pc(t,r,0),g!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=g&~(T&~i))}function Pc(t,i,l){t.pendingLanes|=i,t.suspendedLanes&=~i;var r=31-_t(i);t.entangledLanes|=i,t.entanglements[r]=t.entanglements[r]|1073741824|l&4194090}function $c(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var r=31-_t(l),d=1<<r;d&i|t[r]&i&&(t[r]|=i),l&=~d}}function Ls(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Os(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gc(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:bp(t.type))}function Uy(t,i){var l=X.p;try{return X.p=t,i()}finally{X.p=l}}var Nn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Nn,yt="__reactProps$"+Nn,Ei="__reactContainer$"+Nn,Vs="__reactEvents$"+Nn,Ly="__reactListeners$"+Nn,Oy="__reactHandles$"+Nn,Hc="__reactResources$"+Nn,No="__reactMarker$"+Nn;function qs(t){delete t[ft],delete t[yt],delete t[Vs],delete t[Ly],delete t[Oy]}function Ai(t){var i=t[ft];if(i)return i;for(var l=t.parentNode;l;){if(i=l[Ei]||l[ft]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=rp(t);t!==null;){if(l=t[ft])return l;t=rp(t)}return i}t=l,l=t.parentNode}return null}function wi(t){if(t=t[ft]||t[Ei]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Ro(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Mi(t){var i=t[Hc];return i||(i=t[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ot(t){t[No]=!0}var Fc=new Set,Yc={};function oi(t,i){Ni(t,i),Ni(t+"Capture",i)}function Ni(t,i){for(Yc[t]=i,t=0;t<i.length;t++)Fc.add(i[t])}var Vy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jc={},Zc={};function qy(t){return Ds.call(Zc,t)?!0:Ds.call(Jc,t)?!1:Vy.test(t)?Zc[t]=!0:(Jc[t]=!0,!1)}function Ya(t,i,l){if(qy(i))if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var r=i.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+l)}}function Ja(t,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+l)}}function ln(t,i,l,r){if(r===null)t.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(i,l,""+r)}}var zs,Qc;function Ri(t){if(zs===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);zs=i&&i[1]||"",Qc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zs+t+Qc}var Bs=!1;function Ps(t,i){if(!t||Bs)return"";Bs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(i){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(L){var U=L}Reflect.construct(t,[],G)}else{try{G.call()}catch(L){U=L}t.call(G.prototype)}}else{try{throw Error()}catch(L){U=L}(G=t())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=r.DetermineComponentFrameRoot(),T=g[0],S=g[1];if(T&&S){var A=T.split(`
`),I=S.split(`
`);for(d=r=0;r<A.length&&!A[r].includes("DetermineComponentFrameRoot");)r++;for(;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;if(r===A.length||d===I.length)for(r=A.length-1,d=I.length-1;1<=r&&0<=d&&A[r]!==I[d];)d--;for(;1<=r&&0<=d;r--,d--)if(A[r]!==I[d]){if(r!==1||d!==1)do if(r--,d--,0>d||A[r]!==I[d]){var z=`
`+A[r].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=r&&0<=d);break}}}finally{Bs=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?Ri(l):""}function zy(t){switch(t.tag){case 26:case 27:case 5:return Ri(t.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Ps(t.type,!1);case 11:return Ps(t.type.render,!1);case 1:return Ps(t.type,!0);case 31:return Ri("Activity");default:return""}}function Xc(t){try{var i="";do i+=zy(t),t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kc(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function By(t){var i=Kc(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),r=""+t[i];if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,g=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(T){r=""+T,g.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Za(t){t._valueTracker||(t._valueTracker=By(t))}function Wc(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),r="";return t&&(r=Kc(t)?t.checked?"true":"false":t.value),t=r,t!==l?(i.setValue(t),!0):!1}function Qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Py=/[\n"\\]/g;function It(t){return t.replace(Py,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $s(t,i,l,r,d,g,T,S){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+kt(i)):t.value!==""+kt(i)&&(t.value=""+kt(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?Gs(t,T,kt(i)):l!=null?Gs(t,T,kt(l)):r!=null&&t.removeAttribute("value"),d==null&&g!=null&&(t.defaultChecked=!!g),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+kt(S):t.removeAttribute("name")}function jc(t,i,l,r,d,g,T,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;l=l!=null?""+kt(l):"",i=i!=null?""+kt(i):l,S||i===t.value||(t.value=i),t.defaultValue=i}r=r??d,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=S?t.checked:!!r,t.defaultChecked=!!r,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function Gs(t,i,l){i==="number"&&Qa(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Di(t,i,l,r){if(t=t.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<t.length;l++)d=i.hasOwnProperty("$"+t[l].value),t[l].selected!==d&&(t[l].selected=d),d&&r&&(t[l].defaultSelected=!0)}else{for(l=""+kt(l),i=null,d=0;d<t.length;d++){if(t[d].value===l){t[d].selected=!0,r&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function ef(t,i,l){if(i!=null&&(i=""+kt(i),i!==t.value&&(t.value=i),l==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=l!=null?""+kt(l):""}function tf(t,i,l,r){if(i==null){if(r!=null){if(l!=null)throw Error(a(92));if(Te(r)){if(1<r.length)throw Error(a(93));r=r[0]}l=r}l==null&&(l=""),i=l}l=kt(i),t.defaultValue=l,r=t.textContent,r===l&&r!==""&&r!==null&&(t.value=r)}function ki(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var $y=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(t,i,l){var r=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?r?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":r?t.setProperty(i,l):typeof l!="number"||l===0||$y.has(i)?i==="float"?t.cssFloat=l:t[i]=(""+l).trim():t[i]=l+"px"}function of(t,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,l!=null){for(var r in l)!l.hasOwnProperty(r)||i!=null&&i.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var d in i)r=i[d],i.hasOwnProperty(d)&&l[d]!==r&&nf(t,d,r)}else for(var g in i)i.hasOwnProperty(g)&&nf(t,g,i[g])}function Hs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(t){return Hy.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Fs=null;function Ys(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Ui=null;function af(t){var i=wi(t);if(i&&(t=i.stateNode)){var l=t[yt]||null;e:switch(t=i.stateNode,i.type){case"input":if($s(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+It(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var r=l[i];if(r!==t&&r.form===t.form){var d=r[yt]||null;if(!d)throw Error(a(90));$s(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<l.length;i++)r=l[i],r.form===t.form&&Wc(r)}break e;case"textarea":ef(t,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Di(t,!!l.multiple,i,!1)}}}var Js=!1;function lf(t,i,l){if(Js)return t(i,l);Js=!0;try{var r=t(i);return r}finally{if(Js=!1,(Ii!==null||Ui!==null)&&(Ll(),Ii&&(i=Ii,t=Ui,Ui=Ii=null,af(i),t)))for(i=0;i<t.length;i++)af(t[i])}}function Do(t,i){var l=t.stateNode;if(l===null)return null;var r=l[yt]||null;if(r===null)return null;l=r[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(sn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Zs=!1}var Rn=null,Qs=null,Ka=null;function sf(){if(Ka)return Ka;var t,i=Qs,l=i.length,r,d="value"in Rn?Rn.value:Rn.textContent,g=d.length;for(t=0;t<l&&i[t]===d[t];t++);var T=l-t;for(r=1;r<=T&&i[l-r]===d[g-r];r++);return Ka=d.slice(t,1<r?1-r:void 0)}function Wa(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ja(){return!0}function rf(){return!1}function vt(t){function i(l,r,d,g,T){this._reactName=l,this._targetInst=d,this.type=r,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(l=t[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ja:rf,this.isPropagationStopped=rf,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),i}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=vt(ai),Io=v({},ai,{view:0,detail:0}),Fy=vt(Io),Xs,Ks,Uo,tl=v({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uo&&(Uo&&t.type==="mousemove"?(Xs=t.screenX-Uo.screenX,Ks=t.screenY-Uo.screenY):Ks=Xs=0,Uo=t),Xs)},movementY:function(t){return"movementY"in t?t.movementY:Ks}}),uf=vt(tl),Yy=v({},tl,{dataTransfer:0}),Jy=vt(Yy),Zy=v({},Io,{relatedTarget:0}),Ws=vt(Zy),Qy=v({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Xy=vt(Qy),Ky=v({},ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wy=vt(Ky),jy=v({},ai,{data:0}),cf=vt(jy),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=nv[t])?!!i[t]:!1}function js(){return iv}var ov=v({},Io,{key:function(t){if(t.key){var i=ev[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(t){return t.type==="keypress"?Wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),av=vt(ov),lv=v({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=vt(lv),sv=v({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),rv=vt(sv),uv=v({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),cv=vt(uv),fv=v({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dv=vt(fv),mv=v({},ai,{newState:0,oldState:0}),pv=vt(mv),hv=[9,13,27,32],er=sn&&"CompositionEvent"in window,Lo=null;sn&&"documentMode"in document&&(Lo=document.documentMode);var gv=sn&&"TextEvent"in window&&!Lo,df=sn&&(!er||Lo&&8<Lo&&11>=Lo),mf=" ",pf=!1;function hf(t,i){switch(t){case"keyup":return hv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function yv(t,i){switch(t){case"compositionend":return gf(i);case"keypress":return i.which!==32?null:(pf=!0,mf);case"textInput":return t=i.data,t===mf&&pf?null:t;default:return null}}function vv(t,i){if(Li)return t==="compositionend"||!er&&hf(t,i)?(t=sf(),Ka=Qs=Rn=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return df&&i.locale!=="ko"?null:i.data;default:return null}}var xv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!xv[t.type]:i==="textarea"}function vf(t,i,l,r){Ii?Ui?Ui.push(r):Ui=[r]:Ii=r,i=Pl(i,"onChange"),0<i.length&&(l=new el("onChange","change",null,l,r),t.push({event:l,listeners:i}))}var Oo=null,Vo=null;function Tv(t){Wm(t,0)}function nl(t){var i=Ro(t);if(Wc(i))return t}function xf(t,i){if(t==="change")return i}var Tf=!1;if(sn){var tr;if(sn){var nr="oninput"in document;if(!nr){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),nr=typeof Cf.oninput=="function"}tr=nr}else tr=!1;Tf=tr&&(!document.documentMode||9<document.documentMode)}function Sf(){Oo&&(Oo.detachEvent("onpropertychange",bf),Vo=Oo=null)}function bf(t){if(t.propertyName==="value"&&nl(Vo)){var i=[];vf(i,Vo,t,Ys(t)),lf(Tv,i)}}function Cv(t,i,l){t==="focusin"?(Sf(),Oo=i,Vo=l,Oo.attachEvent("onpropertychange",bf)):t==="focusout"&&Sf()}function Sv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(Vo)}function bv(t,i){if(t==="click")return nl(i)}function _v(t,i){if(t==="input"||t==="change")return nl(i)}function Ev(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Et=typeof Object.is=="function"?Object.is:Ev;function qo(t,i){if(Et(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),r=Object.keys(i);if(l.length!==r.length)return!1;for(r=0;r<l.length;r++){var d=l[r];if(!Ds.call(i,d)||!Et(t[d],i[d]))return!1}return!0}function _f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ef(t,i){var l=_f(t);t=0;for(var r;l;){if(l.nodeType===3){if(r=t+l.textContent.length,t<=i&&r>=i)return{node:l,offset:i-t};t=r}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_f(l)}}function Af(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Af(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function wf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Qa(t.document);i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=Qa(t.document)}return i}function ir(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Av=sn&&"documentMode"in document&&11>=document.documentMode,Oi=null,or=null,zo=null,ar=!1;function Mf(t,i,l){var r=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ar||Oi==null||Oi!==Qa(r)||(r=Oi,"selectionStart"in r&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zo&&qo(zo,r)||(zo=r,r=Pl(or,"onSelect"),0<r.length&&(i=new el("onSelect","select",null,i,l),t.push({event:i,listeners:r}),i.target=Oi)))}function li(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var Vi={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},lr={},Nf={};sn&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function si(t){if(lr[t])return lr[t];if(!Vi[t])return t;var i=Vi[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in Nf)return lr[t]=i[l];return t}var Rf=si("animationend"),Df=si("animationiteration"),kf=si("animationstart"),wv=si("transitionrun"),Mv=si("transitionstart"),Nv=si("transitioncancel"),If=si("transitionend"),Uf=new Map,sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sr.push("scrollEnd");function $t(t,i){Uf.set(t,i),oi(i,[t])}var Lf=new WeakMap;function Ut(t,i){if(typeof t=="object"&&t!==null){var l=Lf.get(t);return l!==void 0?l:(i={value:t,source:i,stack:Xc(i)},Lf.set(t,i),i)}return{value:t,source:i,stack:Xc(i)}}var Lt=[],qi=0,rr=0;function il(){for(var t=qi,i=rr=qi=0;i<t;){var l=Lt[i];Lt[i++]=null;var r=Lt[i];Lt[i++]=null;var d=Lt[i];Lt[i++]=null;var g=Lt[i];if(Lt[i++]=null,r!==null&&d!==null){var T=r.pending;T===null?d.next=d:(d.next=T.next,T.next=d),r.pending=d}g!==0&&Of(l,d,g)}}function ol(t,i,l,r){Lt[qi++]=t,Lt[qi++]=i,Lt[qi++]=l,Lt[qi++]=r,rr|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function ur(t,i,l,r){return ol(t,i,l,r),al(t)}function zi(t,i){return ol(t,null,null,i),al(t)}function Of(t,i,l){t.lanes|=l;var r=t.alternate;r!==null&&(r.lanes|=l);for(var d=!1,g=t.return;g!==null;)g.childLanes|=l,r=g.alternate,r!==null&&(r.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(d=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,d&&i!==null&&(d=31-_t(l),t=g.hiddenUpdates,r=t[d],r===null?t[d]=[i]:r.push(i),i.lane=l|536870912),g):null}function al(t){if(50<ca)throw ca=0,hu=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Bi={};function Rv(t,i,l,r){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,i,l,r){return new Rv(t,i,l,r)}function cr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rn(t,i){var l=t.alternate;return l===null?(l=At(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Vf(t,i){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,i=l.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function ll(t,i,l,r,d,g){var T=0;if(r=t,typeof t=="function")cr(t)&&(T=1);else if(typeof t=="string")T=k0(t,l,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Q:return t=At(31,l,i,d),t.elementType=Q,t.lanes=g,t;case _:return ri(l.children,d,g,i);case N:T=8,d|=24;break;case q:return t=At(12,l,i,d|2),t.elementType=q,t.lanes=g,t;case Y:return t=At(13,l,i,d),t.elementType=Y,t.lanes=g,t;case ee:return t=At(19,l,i,d),t.elementType=ee,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O:case F:T=10;break e;case $:T=9;break e;case Z:T=11;break e;case j:T=14;break e;case ce:T=16,r=null;break e}T=29,l=Error(a(130,t===null?"null":typeof t,"")),r=null}return i=At(T,l,i,d),i.elementType=t,i.type=r,i.lanes=g,i}function ri(t,i,l,r){return t=At(7,t,r,i),t.lanes=l,t}function fr(t,i,l){return t=At(6,t,null,i),t.lanes=l,t}function dr(t,i,l){return i=At(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Pi=[],$i=0,sl=null,rl=0,Ot=[],Vt=0,ui=null,un=1,cn="";function ci(t,i){Pi[$i++]=rl,Pi[$i++]=sl,sl=t,rl=i}function qf(t,i,l){Ot[Vt++]=un,Ot[Vt++]=cn,Ot[Vt++]=ui,ui=t;var r=un;t=cn;var d=32-_t(r)-1;r&=~(1<<d),l+=1;var g=32-_t(i)+d;if(30<g){var T=d-d%5;g=(r&(1<<T)-1).toString(32),r>>=T,d-=T,un=1<<32-_t(i)+d|l<<d|r,cn=g+t}else un=1<<g|l<<d|r,cn=t}function mr(t){t.return!==null&&(ci(t,1),qf(t,1,0))}function pr(t){for(;t===sl;)sl=Pi[--$i],Pi[$i]=null,rl=Pi[--$i],Pi[$i]=null;for(;t===ui;)ui=Ot[--Vt],Ot[Vt]=null,cn=Ot[--Vt],Ot[Vt]=null,un=Ot[--Vt],Ot[Vt]=null}var pt=null,Ye=null,Re=!1,fi=null,Qt=!1,hr=Error(a(519));function di(t){var i=Error(a(418,""));throw $o(Ut(i,t)),hr}function zf(t){var i=t.stateNode,l=t.type,r=t.memoizedProps;switch(i[ft]=t,i[yt]=r,l){case"dialog":be("cancel",i),be("close",i);break;case"iframe":case"object":case"embed":be("load",i);break;case"video":case"audio":for(l=0;l<da.length;l++)be(da[l],i);break;case"source":be("error",i);break;case"img":case"image":case"link":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"input":be("invalid",i),jc(i,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Za(i);break;case"select":be("invalid",i);break;case"textarea":be("invalid",i),tf(i,r.value,r.defaultValue,r.children),Za(i)}l=r.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||r.suppressHydrationWarning===!0||np(i.textContent,l)?(r.popover!=null&&(be("beforetoggle",i),be("toggle",i)),r.onScroll!=null&&be("scroll",i),r.onScrollEnd!=null&&be("scrollend",i),r.onClick!=null&&(i.onclick=$l),i=!0):i=!1,i||di(t)}function Bf(t){for(pt=t.return;pt;)switch(pt.tag){case 5:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:pt=pt.return}}function Bo(t){if(t!==pt)return!1;if(!Re)return Bf(t),Re=!0,!1;var i=t.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Du(t.type,t.memoizedProps)),l=!l),l&&Ye&&di(t),Bf(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(l=t.data,l==="/$"){if(i===0){Ye=Ht(t.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;t=t.nextSibling}Ye=null}}else i===27?(i=Ye,Yn(t.type)?(t=Lu,Lu=null,Ye=t):Ye=i):Ye=pt?Ht(t.stateNode.nextSibling):null;return!0}function Po(){Ye=pt=null,Re=!1}function Pf(){var t=fi;return t!==null&&(Ct===null?Ct=t:Ct.push.apply(Ct,t),fi=null),t}function $o(t){fi===null?fi=[t]:fi.push(t)}var gr=H(null),mi=null,fn=null;function Dn(t,i,l){K(gr,i._currentValue),i._currentValue=l}function dn(t){t._currentValue=gr.current,te(gr)}function yr(t,i,l){for(;t!==null;){var r=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),t===l)break;t=t.return}}function vr(t,i,l,r){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=d;for(var A=0;A<i.length;A++)if(S.context===i[A]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),yr(g.return,l,t),r||(T=null);break e}g=S.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(a(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),yr(T,l,t),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===t){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Go(t,i,l,r){t=null;for(var d=i,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var S=d.type;Et(d.pendingProps.value,T.value)||(t!==null?t.push(S):t=[S])}}else if(d===St.current){if(T=d.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(va):t=[va])}d=d.return}t!==null&&vr(i,t,l,r),i.flags|=262144}function ul(t){for(t=t.firstContext;t!==null;){if(!Et(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pi(t){mi=t,fn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function dt(t){return $f(mi,t)}function cl(t,i){return mi===null&&pi(t),$f(t,i)}function $f(t,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},fn===null){if(t===null)throw Error(a(308));fn=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else fn=fn.next=i;return l}var Dv=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(l,r){t.push(r)}};this.abort=function(){i.aborted=!0,t.forEach(function(l){return l()})}},kv=n.unstable_scheduleCallback,Iv=n.unstable_NormalPriority,tt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xr(){return{controller:new Dv,data:new Map,refCount:0}}function Ho(t){t.refCount--,t.refCount===0&&kv(Iv,function(){t.controller.abort()})}var Fo=null,Tr=0,Gi=0,Hi=null;function Uv(t,i){if(Fo===null){var l=Fo=[];Tr=0,Gi=Su(),Hi={status:"pending",value:void 0,then:function(r){l.push(r)}}}return Tr++,i.then(Gf,Gf),i}function Gf(){if(--Tr===0&&Fo!==null){Hi!==null&&(Hi.status="fulfilled");var t=Fo;Fo=null,Gi=0,Hi=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Lv(t,i){var l=[],r={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return t.then(function(){r.status="fulfilled",r.value=i;for(var d=0;d<l.length;d++)(0,l[d])(i)},function(d){for(r.status="rejected",r.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),r}var Hf=V.S;V.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Uv(t,i),Hf!==null&&Hf(t,i)};var hi=H(null);function Cr(){var t=hi.current;return t!==null?t:ze.pooledCache}function fl(t,i){i===null?K(hi,hi.current):K(hi,i.pool)}function Ff(){var t=Cr();return t===null?null:{parent:tt._currentValue,pool:t}}var Yo=Error(a(460)),Yf=Error(a(474)),dl=Error(a(542)),Sr={then:function(){}};function Jf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ml(){}function Zf(t,i,l){switch(l=t[l],l===void 0?t.push(i):l!==i&&(i.then(ml,ml),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xf(t),t;default:if(typeof i.status=="string")i.then(ml,ml);else{if(t=ze,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(r){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=r}},function(r){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=r}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xf(t),t}throw Jo=i,Yo}}var Jo=null;function Qf(){if(Jo===null)throw Error(a(459));var t=Jo;return Jo=null,t}function Xf(t){if(t===Yo||t===dl)throw Error(a(483))}var kn=!1;function br(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _r(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function In(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Un(t,i,l){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(De&2)!==0){var d=r.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),r.pending=i,i=al(t),Of(t,null,l),i}return ol(t,r,i,l),al(t)}function Zo(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var r=i.lanes;r&=t.pendingLanes,l|=r,i.lanes=l,$c(t,l)}}function Er(t,i){var l=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,l===r)){var d=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?d=g=i:g=g.next=i}else d=g=i;l={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:r.shared,callbacks:r.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}var Ar=!1;function Qo(){if(Ar){var t=Hi;if(t!==null)throw t}}function Xo(t,i,l,r){Ar=!1;var d=t.updateQueue;kn=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var A=S,I=A.next;A.next=null,T===null?g=I:T.next=I,T=A;var z=t.alternate;z!==null&&(z=z.updateQueue,S=z.lastBaseUpdate,S!==T&&(S===null?z.firstBaseUpdate=I:S.next=I,z.lastBaseUpdate=A))}if(g!==null){var G=d.baseState;T=0,z=I=A=null,S=g;do{var U=S.lane&-536870913,L=U!==S.lane;if(L?(Ae&U)===U:(r&U)===U){U!==0&&U===Gi&&(Ar=!0),z!==null&&(z=z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var de=t,ue=S;U=i;var Le=l;switch(ue.tag){case 1:if(de=ue.payload,typeof de=="function"){G=de.call(Le,G,U);break e}G=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ue.payload,U=typeof de=="function"?de.call(Le,G,U):de,U==null)break e;G=v({},G,U);break e;case 2:kn=!0}}U=S.callback,U!==null&&(t.flags|=64,L&&(t.flags|=8192),L=d.callbacks,L===null?d.callbacks=[U]:L.push(U))}else L={lane:U,tag:S.tag,payload:S.payload,callback:S.callback,next:null},z===null?(I=z=L,A=G):z=z.next=L,T|=U;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;L=S,S=L.next,L.next=null,d.lastBaseUpdate=L,d.shared.pending=null}}while(!0);z===null&&(A=G),d.baseState=A,d.firstBaseUpdate=I,d.lastBaseUpdate=z,g===null&&(d.shared.lanes=0),$n|=T,t.lanes=T,t.memoizedState=G}}function Kf(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Wf(t,i){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Kf(l[t],i)}var Fi=H(null),pl=H(0);function jf(t,i){t=xn,K(pl,t),K(Fi,i),xn=t|i.baseLanes}function wr(){K(pl,xn),K(Fi,Fi.current)}function Mr(){xn=pl.current,te(Fi),te(pl)}var Ln=0,xe=null,Ie=null,Xe=null,hl=!1,Yi=!1,gi=!1,gl=0,Ko=0,Ji=null,Ov=0;function Ze(){throw Error(a(321))}function Nr(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!Et(t[l],i[l]))return!1;return!0}function Rr(t,i,l,r,d,g){return Ln=g,xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=t===null||t.memoizedState===null?Od:Vd,gi=!1,g=l(r,d),gi=!1,Yi&&(g=td(i,l,r,d)),ed(t),g}function ed(t){V.H=Sl;var i=Ie!==null&&Ie.next!==null;if(Ln=0,Xe=Ie=xe=null,hl=!1,Ko=0,Ji=null,i)throw Error(a(300));t===null||at||(t=t.dependencies,t!==null&&ul(t)&&(at=!0))}function td(t,i,l,r){xe=t;var d=0;do{if(Yi&&(Ji=null),Ko=0,Yi=!1,25<=d)throw Error(a(301));if(d+=1,Xe=Ie=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=Gv,g=i(l,r)}while(Yi);return g}function Vv(){var t=V.H,i=t.useState()[0];return i=typeof i.then=="function"?Wo(i):i,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(xe.flags|=1024),i}function Dr(){var t=gl!==0;return gl=0,t}function kr(t,i,l){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~l}function Ir(t){if(hl){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}hl=!1}Ln=0,Xe=Ie=xe=null,Yi=!1,Ko=gl=0,Ji=null}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?xe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function Ke(){if(Ie===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var i=Xe===null?xe.memoizedState:Xe.next;if(i!==null)Xe=i,Ie=t;else{if(t===null)throw xe.alternate===null?Error(a(467)):Error(a(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Xe===null?xe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ur(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(t){var i=Ko;return Ko+=1,Ji===null&&(Ji=[]),t=Zf(Ji,t,i),i=xe,(Xe===null?i.memoizedState:Xe.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?Od:Vd),t}function yl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wo(t);if(t.$$typeof===F)return dt(t)}throw Error(a(438,String(t)))}function Lr(t){var i=null,l=xe.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var r=xe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(i={data:r.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Ur(),xe.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(t),r=0;r<t;r++)l[r]=B;return i.index++,l}function mn(t,i){return typeof i=="function"?i(t):i}function vl(t){var i=Ke();return Or(i,Ie,t)}function Or(t,i,l){var r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=l;var d=t.baseQueue,g=r.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}i.baseQueue=d=g,r.pending=null}if(g=t.baseState,d===null)t.memoizedState=g;else{i=d.next;var S=T=null,A=null,I=i,z=!1;do{var G=I.lane&-536870913;if(G!==I.lane?(Ae&G)===G:(Ln&G)===G){var U=I.revertLane;if(U===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),G===Gi&&(z=!0);else if((Ln&U)===U){I=I.next,U===Gi&&(z=!0);continue}else G={lane:0,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(S=A=G,T=g):A=A.next=G,xe.lanes|=U,$n|=U;G=I.action,gi&&l(g,G),g=I.hasEagerState?I.eagerState:l(g,G)}else U={lane:G,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(S=A=U,T=g):A=A.next=U,xe.lanes|=G,$n|=G;I=I.next}while(I!==null&&I!==i);if(A===null?T=g:A.next=S,!Et(g,t.memoizedState)&&(at=!0,z&&(l=Hi,l!==null)))throw l;t.memoizedState=g,t.baseState=T,t.baseQueue=A,r.lastRenderedState=g}return d===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Vr(t){var i=Ke(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=t;var r=l.dispatch,d=l.pending,g=i.memoizedState;if(d!==null){l.pending=null;var T=d=d.next;do g=t(g,T.action),T=T.next;while(T!==d);Et(g,i.memoizedState)||(at=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,r]}function nd(t,i,l){var r=xe,d=Ke(),g=Re;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=i();var T=!Et((Ie||d).memoizedState,l);T&&(d.memoizedState=l,at=!0),d=d.queue;var S=ad.bind(null,r,d,t);if(jo(2048,8,S,[t]),d.getSnapshot!==i||T||Xe!==null&&Xe.memoizedState.tag&1){if(r.flags|=2048,Zi(9,xl(),od.bind(null,r,d,l,i),null),ze===null)throw Error(a(349));g||(Ln&124)!==0||id(r,i,l)}return l}function id(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=xe.updateQueue,i===null?(i=Ur(),xe.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function od(t,i,l,r){i.value=l,i.getSnapshot=r,ld(i)&&sd(t)}function ad(t,i,l){return l(function(){ld(i)&&sd(t)})}function ld(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!Et(t,l)}catch{return!0}}function sd(t){var i=zi(t,2);i!==null&&Dt(i,t,2)}function qr(t){var i=xt();if(typeof t=="function"){var l=t;if(t=l(),gi){Mn(!0);try{l()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:t},i}function rd(t,i,l,r){return t.baseState=l,Or(t,Ie,typeof r=="function"?r:mn)}function qv(t,i,l,r,d){if(Cl(t))throw Error(a(485));if(t=i.action,t!==null){var g={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};V.T!==null?l(!0):g.isTransition=!1,r(g),l=i.pending,l===null?(g.next=i.pending=g,ud(i,g)):(g.next=l.next,i.pending=l.next=g)}}function ud(t,i){var l=i.action,r=i.payload,d=t.state;if(i.isTransition){var g=V.T,T={};V.T=T;try{var S=l(d,r),A=V.S;A!==null&&A(T,S),cd(t,i,S)}catch(I){zr(t,i,I)}finally{V.T=g}}else try{g=l(d,r),cd(t,i,g)}catch(I){zr(t,i,I)}}function cd(t,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(r){fd(t,i,r)},function(r){return zr(t,i,r)}):fd(t,i,l)}function fd(t,i,l){i.status="fulfilled",i.value=l,dd(i),t.state=l,i=t.pending,i!==null&&(l=i.next,l===i?t.pending=null:(l=l.next,i.next=l,ud(t,l)))}function zr(t,i,l){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do i.status="rejected",i.reason=l,dd(i),i=i.next;while(i!==r)}t.action=null}function dd(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function md(t,i){return i}function pd(t,i){if(Re){var l=ze.formState;if(l!==null){e:{var r=xe;if(Re){if(Ye){t:{for(var d=Ye,g=Qt;d.nodeType!==8;){if(!g){d=null;break t}if(d=Ht(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Ye=Ht(d.nextSibling),r=d.data==="F!";break e}}di(r)}r=!1}r&&(i=l[0])}}return l=xt(),l.memoizedState=l.baseState=i,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:i},l.queue=r,l=Id.bind(null,xe,r),r.dispatch=l,r=qr(!1),g=Hr.bind(null,xe,!1,r.queue),r=xt(),d={state:i,dispatch:null,action:t,pending:null},r.queue=d,l=qv.bind(null,xe,d,g,l),d.dispatch=l,r.memoizedState=t,[i,l,!1]}function hd(t){var i=Ke();return gd(i,Ie,t)}function gd(t,i,l){if(i=Or(t,i,md)[0],t=vl(mn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var r=Wo(i)}catch(T){throw T===Yo?dl:T}else r=i;i=Ke();var d=i.queue,g=d.dispatch;return l!==i.memoizedState&&(xe.flags|=2048,Zi(9,xl(),zv.bind(null,d,l),null)),[r,g,t]}function zv(t,i){t.action=i}function yd(t){var i=Ke(),l=Ie;if(l!==null)return gd(i,l,t);Ke(),i=i.memoizedState,l=Ke();var r=l.queue.dispatch;return l.memoizedState=t,[i,r,!1]}function Zi(t,i,l,r){return t={tag:t,create:l,deps:r,inst:i,next:null},i=xe.updateQueue,i===null&&(i=Ur(),xe.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=t.next=t:(r=l.next,l.next=t,t.next=r,i.lastEffect=t),t}function xl(){return{destroy:void 0,resource:void 0}}function vd(){return Ke().memoizedState}function Tl(t,i,l,r){var d=xt();r=r===void 0?null:r,xe.flags|=t,d.memoizedState=Zi(1|i,xl(),l,r)}function jo(t,i,l,r){var d=Ke();r=r===void 0?null:r;var g=d.memoizedState.inst;Ie!==null&&r!==null&&Nr(r,Ie.memoizedState.deps)?d.memoizedState=Zi(i,g,l,r):(xe.flags|=t,d.memoizedState=Zi(1|i,g,l,r))}function xd(t,i){Tl(8390656,8,t,i)}function Td(t,i){jo(2048,8,t,i)}function Cd(t,i){return jo(4,2,t,i)}function Sd(t,i){return jo(4,4,t,i)}function bd(t,i){if(typeof i=="function"){t=t();var l=i(t);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function _d(t,i,l){l=l!=null?l.concat([t]):null,jo(4,4,bd.bind(null,i,t),l)}function Br(){}function Ed(t,i){var l=Ke();i=i===void 0?null:i;var r=l.memoizedState;return i!==null&&Nr(i,r[1])?r[0]:(l.memoizedState=[t,i],t)}function Ad(t,i){var l=Ke();i=i===void 0?null:i;var r=l.memoizedState;if(i!==null&&Nr(i,r[1]))return r[0];if(r=t(),gi){Mn(!0);try{t()}finally{Mn(!1)}}return l.memoizedState=[r,i],r}function Pr(t,i,l){return l===void 0||(Ln&1073741824)!==0?t.memoizedState=i:(t.memoizedState=l,t=Nm(),xe.lanes|=t,$n|=t,l)}function wd(t,i,l,r){return Et(l,i)?l:Fi.current!==null?(t=Pr(t,l,r),Et(t,i)||(at=!0),t):(Ln&42)===0?(at=!0,t.memoizedState=l):(t=Nm(),xe.lanes|=t,$n|=t,i)}function Md(t,i,l,r,d){var g=X.p;X.p=g!==0&&8>g?g:8;var T=V.T,S={};V.T=S,Hr(t,!1,i,l);try{var A=d(),I=V.S;if(I!==null&&I(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var z=Lv(A,r);ea(t,i,z,Rt(t))}else ea(t,i,r,Rt(t))}catch(G){ea(t,i,{then:function(){},status:"rejected",reason:G},Rt())}finally{X.p=g,V.T=T}}function Bv(){}function $r(t,i,l,r){if(t.tag!==5)throw Error(a(476));var d=Nd(t).queue;Md(t,d,i,se,l===null?Bv:function(){return Rd(t),l(r)})}function Nd(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:se},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:l},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Rd(t){var i=Nd(t).next.queue;ea(t,i,{},Rt())}function Gr(){return dt(va)}function Dd(){return Ke().memoizedState}function kd(){return Ke().memoizedState}function Pv(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var l=Rt();t=In(l);var r=Un(i,t,l);r!==null&&(Dt(r,i,l),Zo(r,i,l)),i={cache:xr()},t.payload=i;return}i=i.return}}function $v(t,i,l){var r=Rt();l={lane:r,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Cl(t)?Ud(i,l):(l=ur(t,i,l,r),l!==null&&(Dt(l,t,r),Ld(l,i,r)))}function Id(t,i,l){var r=Rt();ea(t,i,l,r)}function ea(t,i,l,r){var d={lane:r,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cl(t))Ud(i,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var T=i.lastRenderedState,S=g(T,l);if(d.hasEagerState=!0,d.eagerState=S,Et(S,T))return ol(t,i,d,0),ze===null&&il(),!1}catch{}finally{}if(l=ur(t,i,d,r),l!==null)return Dt(l,t,r),Ld(l,i,r),!0}return!1}function Hr(t,i,l,r){if(r={lane:2,revertLane:Su(),action:r,hasEagerState:!1,eagerState:null,next:null},Cl(t)){if(i)throw Error(a(479))}else i=ur(t,l,r,2),i!==null&&Dt(i,t,2)}function Cl(t){var i=t.alternate;return t===xe||i!==null&&i===xe}function Ud(t,i){Yi=hl=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function Ld(t,i,l){if((l&4194048)!==0){var r=i.lanes;r&=t.pendingLanes,l|=r,i.lanes=l,$c(t,l)}}var Sl={readContext:dt,use:yl,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze},Od={readContext:dt,use:yl,useCallback:function(t,i){return xt().memoizedState=[t,i===void 0?null:i],t},useContext:dt,useEffect:xd,useImperativeHandle:function(t,i,l){l=l!=null?l.concat([t]):null,Tl(4194308,4,bd.bind(null,i,t),l)},useLayoutEffect:function(t,i){return Tl(4194308,4,t,i)},useInsertionEffect:function(t,i){Tl(4,2,t,i)},useMemo:function(t,i){var l=xt();i=i===void 0?null:i;var r=t();if(gi){Mn(!0);try{t()}finally{Mn(!1)}}return l.memoizedState=[r,i],r},useReducer:function(t,i,l){var r=xt();if(l!==void 0){var d=l(i);if(gi){Mn(!0);try{l(i)}finally{Mn(!1)}}}else d=i;return r.memoizedState=r.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},r.queue=t,t=t.dispatch=$v.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var i=xt();return t={current:t},i.memoizedState=t},useState:function(t){t=qr(t);var i=t.queue,l=Id.bind(null,xe,i);return i.dispatch=l,[t.memoizedState,l]},useDebugValue:Br,useDeferredValue:function(t,i){var l=xt();return Pr(l,t,i)},useTransition:function(){var t=qr(!1);return t=Md.bind(null,xe,t.queue,!0,!1),xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,l){var r=xe,d=xt();if(Re){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),ze===null)throw Error(a(349));(Ae&124)!==0||id(r,i,l)}d.memoizedState=l;var g={value:l,getSnapshot:i};return d.queue=g,xd(ad.bind(null,r,g,t),[t]),r.flags|=2048,Zi(9,xl(),od.bind(null,r,g,l,i),null),l},useId:function(){var t=xt(),i=ze.identifierPrefix;if(Re){var l=cn,r=un;l=(r&~(1<<32-_t(r)-1)).toString(32)+l,i="«"+i+"R"+l,l=gl++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=Ov++,i="«"+i+"r"+l.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Gr,useFormState:pd,useActionState:pd,useOptimistic:function(t){var i=xt();i.memoizedState=i.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Hr.bind(null,xe,!0,l),l.dispatch=i,[t,i]},useMemoCache:Lr,useCacheRefresh:function(){return xt().memoizedState=Pv.bind(null,xe)}},Vd={readContext:dt,use:yl,useCallback:Ed,useContext:dt,useEffect:Td,useImperativeHandle:_d,useInsertionEffect:Cd,useLayoutEffect:Sd,useMemo:Ad,useReducer:vl,useRef:vd,useState:function(){return vl(mn)},useDebugValue:Br,useDeferredValue:function(t,i){var l=Ke();return wd(l,Ie.memoizedState,t,i)},useTransition:function(){var t=vl(mn)[0],i=Ke().memoizedState;return[typeof t=="boolean"?t:Wo(t),i]},useSyncExternalStore:nd,useId:Dd,useHostTransitionStatus:Gr,useFormState:hd,useActionState:hd,useOptimistic:function(t,i){var l=Ke();return rd(l,Ie,t,i)},useMemoCache:Lr,useCacheRefresh:kd},Gv={readContext:dt,use:yl,useCallback:Ed,useContext:dt,useEffect:Td,useImperativeHandle:_d,useInsertionEffect:Cd,useLayoutEffect:Sd,useMemo:Ad,useReducer:Vr,useRef:vd,useState:function(){return Vr(mn)},useDebugValue:Br,useDeferredValue:function(t,i){var l=Ke();return Ie===null?Pr(l,t,i):wd(l,Ie.memoizedState,t,i)},useTransition:function(){var t=Vr(mn)[0],i=Ke().memoizedState;return[typeof t=="boolean"?t:Wo(t),i]},useSyncExternalStore:nd,useId:Dd,useHostTransitionStatus:Gr,useFormState:yd,useActionState:yd,useOptimistic:function(t,i){var l=Ke();return Ie!==null?rd(l,Ie,t,i):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Lr,useCacheRefresh:kd},Qi=null,ta=0;function bl(t){var i=ta;return ta+=1,Qi===null&&(Qi=[]),Zf(Qi,t,i)}function na(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function _l(t,i){throw i.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function qd(t){var i=t._init;return i(t._payload)}function zd(t){function i(R,M){if(t){var D=R.deletions;D===null?(R.deletions=[M],R.flags|=16):D.push(M)}}function l(R,M){if(!t)return null;for(;M!==null;)i(R,M),M=M.sibling;return null}function r(R){for(var M=new Map;R!==null;)R.key!==null?M.set(R.key,R):M.set(R.index,R),R=R.sibling;return M}function d(R,M){return R=rn(R,M),R.index=0,R.sibling=null,R}function g(R,M,D){return R.index=D,t?(D=R.alternate,D!==null?(D=D.index,D<M?(R.flags|=67108866,M):D):(R.flags|=67108866,M)):(R.flags|=1048576,M)}function T(R){return t&&R.alternate===null&&(R.flags|=67108866),R}function S(R,M,D,P){return M===null||M.tag!==6?(M=fr(D,R.mode,P),M.return=R,M):(M=d(M,D),M.return=R,M)}function A(R,M,D,P){var ne=D.type;return ne===_?z(R,M,D.props.children,P,D.key):M!==null&&(M.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ce&&qd(ne)===M.type)?(M=d(M,D.props),na(M,D),M.return=R,M):(M=ll(D.type,D.key,D.props,null,R.mode,P),na(M,D),M.return=R,M)}function I(R,M,D,P){return M===null||M.tag!==4||M.stateNode.containerInfo!==D.containerInfo||M.stateNode.implementation!==D.implementation?(M=dr(D,R.mode,P),M.return=R,M):(M=d(M,D.children||[]),M.return=R,M)}function z(R,M,D,P,ne){return M===null||M.tag!==7?(M=ri(D,R.mode,P,ne),M.return=R,M):(M=d(M,D),M.return=R,M)}function G(R,M,D){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=fr(""+M,R.mode,D),M.return=R,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return D=ll(M.type,M.key,M.props,null,R.mode,D),na(D,M),D.return=R,D;case E:return M=dr(M,R.mode,D),M.return=R,M;case ce:var P=M._init;return M=P(M._payload),G(R,M,D)}if(Te(M)||_e(M))return M=ri(M,R.mode,D,null),M.return=R,M;if(typeof M.then=="function")return G(R,bl(M),D);if(M.$$typeof===F)return G(R,cl(R,M),D);_l(R,M)}return null}function U(R,M,D,P){var ne=M!==null?M.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ne!==null?null:S(R,M,""+D,P);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return D.key===ne?A(R,M,D,P):null;case E:return D.key===ne?I(R,M,D,P):null;case ce:return ne=D._init,D=ne(D._payload),U(R,M,D,P)}if(Te(D)||_e(D))return ne!==null?null:z(R,M,D,P,null);if(typeof D.then=="function")return U(R,M,bl(D),P);if(D.$$typeof===F)return U(R,M,cl(R,D),P);_l(R,D)}return null}function L(R,M,D,P,ne){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return R=R.get(D)||null,S(M,R,""+P,ne);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return R=R.get(P.key===null?D:P.key)||null,A(M,R,P,ne);case E:return R=R.get(P.key===null?D:P.key)||null,I(M,R,P,ne);case ce:var Ce=P._init;return P=Ce(P._payload),L(R,M,D,P,ne)}if(Te(P)||_e(P))return R=R.get(D)||null,z(M,R,P,ne,null);if(typeof P.then=="function")return L(R,M,D,bl(P),ne);if(P.$$typeof===F)return L(R,M,D,cl(M,P),ne);_l(M,P)}return null}function de(R,M,D,P){for(var ne=null,Ce=null,ae=M,fe=M=0,st=null;ae!==null&&fe<D.length;fe++){ae.index>fe?(st=ae,ae=null):st=ae.sibling;var Me=U(R,ae,D[fe],P);if(Me===null){ae===null&&(ae=st);break}t&&ae&&Me.alternate===null&&i(R,ae),M=g(Me,M,fe),Ce===null?ne=Me:Ce.sibling=Me,Ce=Me,ae=st}if(fe===D.length)return l(R,ae),Re&&ci(R,fe),ne;if(ae===null){for(;fe<D.length;fe++)ae=G(R,D[fe],P),ae!==null&&(M=g(ae,M,fe),Ce===null?ne=ae:Ce.sibling=ae,Ce=ae);return Re&&ci(R,fe),ne}for(ae=r(ae);fe<D.length;fe++)st=L(ae,R,fe,D[fe],P),st!==null&&(t&&st.alternate!==null&&ae.delete(st.key===null?fe:st.key),M=g(st,M,fe),Ce===null?ne=st:Ce.sibling=st,Ce=st);return t&&ae.forEach(function(Kn){return i(R,Kn)}),Re&&ci(R,fe),ne}function ue(R,M,D,P){if(D==null)throw Error(a(151));for(var ne=null,Ce=null,ae=M,fe=M=0,st=null,Me=D.next();ae!==null&&!Me.done;fe++,Me=D.next()){ae.index>fe?(st=ae,ae=null):st=ae.sibling;var Kn=U(R,ae,Me.value,P);if(Kn===null){ae===null&&(ae=st);break}t&&ae&&Kn.alternate===null&&i(R,ae),M=g(Kn,M,fe),Ce===null?ne=Kn:Ce.sibling=Kn,Ce=Kn,ae=st}if(Me.done)return l(R,ae),Re&&ci(R,fe),ne;if(ae===null){for(;!Me.done;fe++,Me=D.next())Me=G(R,Me.value,P),Me!==null&&(M=g(Me,M,fe),Ce===null?ne=Me:Ce.sibling=Me,Ce=Me);return Re&&ci(R,fe),ne}for(ae=r(ae);!Me.done;fe++,Me=D.next())Me=L(ae,R,fe,Me.value,P),Me!==null&&(t&&Me.alternate!==null&&ae.delete(Me.key===null?fe:Me.key),M=g(Me,M,fe),Ce===null?ne=Me:Ce.sibling=Me,Ce=Me);return t&&ae.forEach(function(H0){return i(R,H0)}),Re&&ci(R,fe),ne}function Le(R,M,D,P){if(typeof D=="object"&&D!==null&&D.type===_&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case b:e:{for(var ne=D.key;M!==null;){if(M.key===ne){if(ne=D.type,ne===_){if(M.tag===7){l(R,M.sibling),P=d(M,D.props.children),P.return=R,R=P;break e}}else if(M.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ce&&qd(ne)===M.type){l(R,M.sibling),P=d(M,D.props),na(P,D),P.return=R,R=P;break e}l(R,M);break}else i(R,M);M=M.sibling}D.type===_?(P=ri(D.props.children,R.mode,P,D.key),P.return=R,R=P):(P=ll(D.type,D.key,D.props,null,R.mode,P),na(P,D),P.return=R,R=P)}return T(R);case E:e:{for(ne=D.key;M!==null;){if(M.key===ne)if(M.tag===4&&M.stateNode.containerInfo===D.containerInfo&&M.stateNode.implementation===D.implementation){l(R,M.sibling),P=d(M,D.children||[]),P.return=R,R=P;break e}else{l(R,M);break}else i(R,M);M=M.sibling}P=dr(D,R.mode,P),P.return=R,R=P}return T(R);case ce:return ne=D._init,D=ne(D._payload),Le(R,M,D,P)}if(Te(D))return de(R,M,D,P);if(_e(D)){if(ne=_e(D),typeof ne!="function")throw Error(a(150));return D=ne.call(D),ue(R,M,D,P)}if(typeof D.then=="function")return Le(R,M,bl(D),P);if(D.$$typeof===F)return Le(R,M,cl(R,D),P);_l(R,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,M!==null&&M.tag===6?(l(R,M.sibling),P=d(M,D),P.return=R,R=P):(l(R,M),P=fr(D,R.mode,P),P.return=R,R=P),T(R)):l(R,M)}return function(R,M,D,P){try{ta=0;var ne=Le(R,M,D,P);return Qi=null,ne}catch(ae){if(ae===Yo||ae===dl)throw ae;var Ce=At(29,ae,null,R.mode);return Ce.lanes=P,Ce.return=R,Ce}finally{}}}var Xi=zd(!0),Bd=zd(!1),qt=H(null),Xt=null;function On(t){var i=t.alternate;K(nt,nt.current&1),K(qt,t),Xt===null&&(i===null||Fi.current!==null||i.memoizedState!==null)&&(Xt=t)}function Pd(t){if(t.tag===22){if(K(nt,nt.current),K(qt,t),Xt===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Xt=t)}}else Vn()}function Vn(){K(nt,nt.current),K(qt,qt.current)}function pn(t){te(qt),Xt===t&&(Xt=null),te(nt)}var nt=H(0);function El(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Uu(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Fr(t,i,l,r){i=t.memoizedState,l=l(r,i),l=l==null?i:v({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Yr={enqueueSetState:function(t,i,l){t=t._reactInternals;var r=Rt(),d=In(r);d.payload=i,l!=null&&(d.callback=l),i=Un(t,d,r),i!==null&&(Dt(i,t,r),Zo(i,t,r))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var r=Rt(),d=In(r);d.tag=1,d.payload=i,l!=null&&(d.callback=l),i=Un(t,d,r),i!==null&&(Dt(i,t,r),Zo(i,t,r))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=Rt(),r=In(l);r.tag=2,i!=null&&(r.callback=i),i=Un(t,r,l),i!==null&&(Dt(i,t,l),Zo(i,t,l))}};function $d(t,i,l,r,d,g,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,g,T):i.prototype&&i.prototype.isPureReactComponent?!qo(l,r)||!qo(d,g):!0}function Gd(t,i,l,r){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,r),i.state!==t&&Yr.enqueueReplaceState(i,i.state,null)}function yi(t,i){var l=i;if("ref"in i){l={};for(var r in i)r!=="ref"&&(l[r]=i[r])}if(t=t.defaultProps){l===i&&(l=v({},l));for(var d in t)l[d]===void 0&&(l[d]=t[d])}return l}var Al=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Hd(t){Al(t)}function Fd(t){console.error(t)}function Yd(t){Al(t)}function wl(t,i){try{var l=t.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(r){setTimeout(function(){throw r})}}function Jd(t,i,l){try{var r=t.onCaughtError;r(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Jr(t,i,l){return l=In(l),l.tag=3,l.payload={element:null},l.callback=function(){wl(t,i)},l}function Zd(t){return t=In(t),t.tag=3,t}function Qd(t,i,l,r){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var g=r.value;t.payload=function(){return d(g)},t.callback=function(){Jd(i,l,r)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Jd(i,l,r),typeof d!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})})}function Hv(t,i,l,r,d){if(l.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(i=l.alternate,i!==null&&Go(i,l,d,!0),l=qt.current,l!==null){switch(l.tag){case 13:return Xt===null?yu():l.alternate===null&&Je===0&&(Je=3),l.flags&=-257,l.flags|=65536,l.lanes=d,r===Sr?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([r]):i.add(r),xu(t,r,d)),!1;case 22:return l.flags|=65536,r===Sr?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([r])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([r]):l.add(r)),xu(t,r,d)),!1}throw Error(a(435,l.tag))}return xu(t,r,d),yu(),!1}if(Re)return i=qt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,r!==hr&&(t=Error(a(422),{cause:r}),$o(Ut(t,l)))):(r!==hr&&(i=Error(a(423),{cause:r}),$o(Ut(i,l))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,r=Ut(r,l),d=Jr(t.stateNode,r,d),Er(t,d),Je!==4&&(Je=2)),!1;var g=Error(a(520),{cause:r});if(g=Ut(g,l),ua===null?ua=[g]:ua.push(g),Je!==4&&(Je=2),i===null)return!0;r=Ut(r,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,t=d&-d,l.lanes|=t,t=Jr(l.stateNode,r,t),Er(l,t),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Gn===null||!Gn.has(g))))return l.flags|=65536,d&=-d,l.lanes|=d,d=Zd(d),Qd(d,t,l,r),Er(l,d),!1}l=l.return}while(l!==null);return!1}var Xd=Error(a(461)),at=!1;function rt(t,i,l,r){i.child=t===null?Bd(i,null,l,r):Xi(i,t.child,l,r)}function Kd(t,i,l,r,d){l=l.render;var g=i.ref;if("ref"in r){var T={};for(var S in r)S!=="ref"&&(T[S]=r[S])}else T=r;return pi(i),r=Rr(t,i,l,T,g,d),S=Dr(),t!==null&&!at?(kr(t,i,d),hn(t,i,d)):(Re&&S&&mr(i),i.flags|=1,rt(t,i,r,d),i.child)}function Wd(t,i,l,r,d){if(t===null){var g=l.type;return typeof g=="function"&&!cr(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,jd(t,i,g,r,d)):(t=ll(l.type,null,r,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(g=t.child,!tu(t,d)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:qo,l(T,r)&&t.ref===i.ref)return hn(t,i,d)}return i.flags|=1,t=rn(g,r),t.ref=i.ref,t.return=i,i.child=t}function jd(t,i,l,r,d){if(t!==null){var g=t.memoizedProps;if(qo(g,r)&&t.ref===i.ref)if(at=!1,i.pendingProps=r=g,tu(t,d))(t.flags&131072)!==0&&(at=!0);else return i.lanes=t.lanes,hn(t,i,d)}return Zr(t,i,l,r,d)}function em(t,i,l){var r=i.pendingProps,d=r.children,g=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if((i.flags&128)!==0){if(r=g!==null?g.baseLanes|l:l,t!==null){for(d=i.child=t.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;i.childLanes=g&~r}else i.childLanes=0,i.child=null;return tm(t,i,r,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&fl(i,g!==null?g.cachePool:null),g!==null?jf(i,g):wr(),Pd(i);else return i.lanes=i.childLanes=536870912,tm(t,i,g!==null?g.baseLanes|l:l,l)}else g!==null?(fl(i,g.cachePool),jf(i,g),Vn(),i.memoizedState=null):(t!==null&&fl(i,null),wr(),Vn());return rt(t,i,d,l),i.child}function tm(t,i,l,r){var d=Cr();return d=d===null?null:{parent:tt._currentValue,pool:d},i.memoizedState={baseLanes:l,cachePool:d},t!==null&&fl(i,null),wr(),Pd(i),t!==null&&Go(t,i,r,!0),null}function Ml(t,i){var l=i.ref;if(l===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(t===null||t.ref!==l)&&(i.flags|=4194816)}}function Zr(t,i,l,r,d){return pi(i),l=Rr(t,i,l,r,void 0,d),r=Dr(),t!==null&&!at?(kr(t,i,d),hn(t,i,d)):(Re&&r&&mr(i),i.flags|=1,rt(t,i,l,d),i.child)}function nm(t,i,l,r,d,g){return pi(i),i.updateQueue=null,l=td(i,r,l,d),ed(t),r=Dr(),t!==null&&!at?(kr(t,i,g),hn(t,i,g)):(Re&&r&&mr(i),i.flags|=1,rt(t,i,l,g),i.child)}function im(t,i,l,r,d){if(pi(i),i.stateNode===null){var g=Bi,T=l.contextType;typeof T=="object"&&T!==null&&(g=dt(T)),g=new l(r,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yr,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=r,g.state=i.memoizedState,g.refs={},br(i),T=l.contextType,g.context=typeof T=="object"&&T!==null?dt(T):Bi,g.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Fr(i,l,T,r),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Yr.enqueueReplaceState(g,g.state,null),Xo(i,r,g,d),Qo(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),r=!0}else if(t===null){g=i.stateNode;var S=i.memoizedProps,A=yi(l,S);g.props=A;var I=g.context,z=l.contextType;T=Bi,typeof z=="object"&&z!==null&&(T=dt(z));var G=l.getDerivedStateFromProps;z=typeof G=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||I!==T)&&Gd(i,g,r,T),kn=!1;var U=i.memoizedState;g.state=U,Xo(i,r,g,d),Qo(),I=i.memoizedState,S||U!==I||kn?(typeof G=="function"&&(Fr(i,l,G,r),I=i.memoizedState),(A=kn||$d(i,l,A,r,U,I,T))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=I),g.props=r,g.state=I,g.context=T,r=A):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{g=i.stateNode,_r(t,i),T=i.memoizedProps,z=yi(l,T),g.props=z,G=i.pendingProps,U=g.context,I=l.contextType,A=Bi,typeof I=="object"&&I!==null&&(A=dt(I)),S=l.getDerivedStateFromProps,(I=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==G||U!==A)&&Gd(i,g,r,A),kn=!1,U=i.memoizedState,g.state=U,Xo(i,r,g,d),Qo();var L=i.memoizedState;T!==G||U!==L||kn||t!==null&&t.dependencies!==null&&ul(t.dependencies)?(typeof S=="function"&&(Fr(i,l,S,r),L=i.memoizedState),(z=kn||$d(i,l,z,r,U,L,A)||t!==null&&t.dependencies!==null&&ul(t.dependencies))?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(r,L,A),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(r,L,A)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=L),g.props=r,g.state=L,g.context=A,r=z):(typeof g.componentDidUpdate!="function"||T===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),r=!1)}return g=r,Ml(t,i),r=(i.flags&128)!==0,g||r?(g=i.stateNode,l=r&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,t!==null&&r?(i.child=Xi(i,t.child,null,d),i.child=Xi(i,null,l,d)):rt(t,i,l,d),i.memoizedState=g.state,t=i.child):t=hn(t,i,d),t}function om(t,i,l,r){return Po(),i.flags|=256,rt(t,i,l,r),i.child}var Qr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xr(t){return{baseLanes:t,cachePool:Ff()}}function Kr(t,i,l){return t=t!==null?t.childLanes&~l:0,i&&(t|=zt),t}function am(t,i,l){var r=i.pendingProps,d=!1,g=(i.flags&128)!==0,T;if((T=g)||(T=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),T&&(d=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Re){if(d?On(i):Vn(),Re){var S=Ye,A;if(A=S){e:{for(A=S,S=Qt;A.nodeType!==8;){if(!S){S=null;break e}if(A=Ht(A.nextSibling),A===null){S=null;break e}}S=A}S!==null?(i.memoizedState={dehydrated:S,treeContext:ui!==null?{id:un,overflow:cn}:null,retryLane:536870912,hydrationErrors:null},A=At(18,null,null,0),A.stateNode=S,A.return=i,i.child=A,pt=i,Ye=null,A=!0):A=!1}A||di(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Uu(S)?i.lanes=32:i.lanes=536870912,null;pn(i)}return S=r.children,r=r.fallback,d?(Vn(),d=i.mode,S=Nl({mode:"hidden",children:S},d),r=ri(r,d,l,null),S.return=i,r.return=i,S.sibling=r,i.child=S,d=i.child,d.memoizedState=Xr(l),d.childLanes=Kr(t,T,l),i.memoizedState=Qr,r):(On(i),Wr(i,S))}if(A=t.memoizedState,A!==null&&(S=A.dehydrated,S!==null)){if(g)i.flags&256?(On(i),i.flags&=-257,i=jr(t,i,l)):i.memoizedState!==null?(Vn(),i.child=t.child,i.flags|=128,i=null):(Vn(),d=r.fallback,S=i.mode,r=Nl({mode:"visible",children:r.children},S),d=ri(d,S,l,null),d.flags|=2,r.return=i,d.return=i,r.sibling=d,i.child=r,Xi(i,t.child,null,l),r=i.child,r.memoizedState=Xr(l),r.childLanes=Kr(t,T,l),i.memoizedState=Qr,i=d);else if(On(i),Uu(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var I=T.dgst;T=I,r=Error(a(419)),r.stack="",r.digest=T,$o({value:r,source:null,stack:null}),i=jr(t,i,l)}else if(at||Go(t,i,l,!1),T=(l&t.childLanes)!==0,at||T){if(T=ze,T!==null&&(r=l&-l,r=(r&42)!==0?1:Ls(r),r=(r&(T.suspendedLanes|l))!==0?0:r,r!==0&&r!==A.retryLane))throw A.retryLane=r,zi(t,r),Dt(T,t,r),Xd;S.data==="$?"||yu(),i=jr(t,i,l)}else S.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=A.treeContext,Ye=Ht(S.nextSibling),pt=i,Re=!0,fi=null,Qt=!1,t!==null&&(Ot[Vt++]=un,Ot[Vt++]=cn,Ot[Vt++]=ui,un=t.id,cn=t.overflow,ui=i),i=Wr(i,r.children),i.flags|=4096);return i}return d?(Vn(),d=r.fallback,S=i.mode,A=t.child,I=A.sibling,r=rn(A,{mode:"hidden",children:r.children}),r.subtreeFlags=A.subtreeFlags&65011712,I!==null?d=rn(I,d):(d=ri(d,S,l,null),d.flags|=2),d.return=i,r.return=i,r.sibling=d,i.child=r,r=d,d=i.child,S=t.child.memoizedState,S===null?S=Xr(l):(A=S.cachePool,A!==null?(I=tt._currentValue,A=A.parent!==I?{parent:I,pool:I}:A):A=Ff(),S={baseLanes:S.baseLanes|l,cachePool:A}),d.memoizedState=S,d.childLanes=Kr(t,T,l),i.memoizedState=Qr,r):(On(i),l=t.child,t=l.sibling,l=rn(l,{mode:"visible",children:r.children}),l.return=i,l.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=l,i.memoizedState=null,l)}function Wr(t,i){return i=Nl({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Nl(t,i){return t=At(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function jr(t,i,l){return Xi(i,t.child,null,l),t=Wr(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function lm(t,i,l){t.lanes|=i;var r=t.alternate;r!==null&&(r.lanes|=i),yr(t.return,i,l)}function eu(t,i,l,r,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:l,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=l,g.tailMode=d)}function sm(t,i,l){var r=i.pendingProps,d=r.revealOrder,g=r.tail;if(rt(t,i,r.children,l),r=nt.current,(r&2)!==0)r=r&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lm(t,l,i);else if(t.tag===19)lm(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(K(nt,r),d){case"forwards":for(l=i.child,d=null;l!==null;)t=l.alternate,t!==null&&El(t)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),eu(i,!1,d,l,g);break;case"backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&El(t)===null){i.child=d;break}t=d.sibling,d.sibling=l,l=d,d=t}eu(i,!0,l,null,g);break;case"together":eu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function hn(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),$n|=i.lanes,(l&i.childLanes)===0)if(t!==null){if(Go(t,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,l=rn(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=rn(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function tu(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ul(t)))}function Fv(t,i,l){switch(i.tag){case 3:$e(i,i.stateNode.containerInfo),Dn(i,tt,t.memoizedState.cache),Po();break;case 27:case 5:Rs(i);break;case 4:$e(i,i.stateNode.containerInfo);break;case 10:Dn(i,i.type,i.memoizedProps.value);break;case 13:var r=i.memoizedState;if(r!==null)return r.dehydrated!==null?(On(i),i.flags|=128,null):(l&i.child.childLanes)!==0?am(t,i,l):(On(i),t=hn(t,i,l),t!==null?t.sibling:null);On(i);break;case 19:var d=(t.flags&128)!==0;if(r=(l&i.childLanes)!==0,r||(Go(t,i,l,!1),r=(l&i.childLanes)!==0),d){if(r)return sm(t,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),K(nt,nt.current),r)break;return null;case 22:case 23:return i.lanes=0,em(t,i,l);case 24:Dn(i,tt,t.memoizedState.cache)}return hn(t,i,l)}function rm(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps)at=!0;else{if(!tu(t,l)&&(i.flags&128)===0)return at=!1,Fv(t,i,l);at=(t.flags&131072)!==0}else at=!1,Re&&(i.flags&1048576)!==0&&qf(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var r=i.elementType,d=r._init;if(r=d(r._payload),i.type=r,typeof r=="function")cr(r)?(t=yi(r,t),i.tag=1,i=im(null,i,r,t,l)):(i.tag=0,i=Zr(null,i,r,t,l));else{if(r!=null){if(d=r.$$typeof,d===Z){i.tag=11,i=Kd(null,i,r,t,l);break e}else if(d===j){i.tag=14,i=Wd(null,i,r,t,l);break e}}throw i=et(r)||r,Error(a(306,i,""))}}return i;case 0:return Zr(t,i,i.type,i.pendingProps,l);case 1:return r=i.type,d=yi(r,i.pendingProps),im(t,i,r,d,l);case 3:e:{if($e(i,i.stateNode.containerInfo),t===null)throw Error(a(387));r=i.pendingProps;var g=i.memoizedState;d=g.element,_r(t,i),Xo(i,r,null,l);var T=i.memoizedState;if(r=T.cache,Dn(i,tt,r),r!==g.cache&&vr(i,[tt],l,!0),Qo(),r=T.element,g.isDehydrated)if(g={element:r,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=om(t,i,r,l);break e}else if(r!==d){d=Ut(Error(a(424)),i),$o(d),i=om(t,i,r,l);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ye=Ht(t.firstChild),pt=i,Re=!0,fi=null,Qt=!0,l=Bd(i,null,r,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Po(),r===d){i=hn(t,i,l);break e}rt(t,i,r,l)}i=i.child}return i;case 26:return Ml(t,i),t===null?(l=dp(i.type,null,i.pendingProps,null))?i.memoizedState=l:Re||(l=i.type,t=i.pendingProps,r=Gl(ge.current).createElement(l),r[ft]=i,r[yt]=t,ct(r,l,t),ot(r),i.stateNode=r):i.memoizedState=dp(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Rs(i),t===null&&Re&&(r=i.stateNode=up(i.type,i.pendingProps,ge.current),pt=i,Qt=!0,d=Ye,Yn(i.type)?(Lu=d,Ye=Ht(r.firstChild)):Ye=d),rt(t,i,i.pendingProps.children,l),Ml(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Re&&((d=r=Ye)&&(r=x0(r,i.type,i.pendingProps,Qt),r!==null?(i.stateNode=r,pt=i,Ye=Ht(r.firstChild),Qt=!1,d=!0):d=!1),d||di(i)),Rs(i),d=i.type,g=i.pendingProps,T=t!==null?t.memoizedProps:null,r=g.children,Du(d,g)?r=null:T!==null&&Du(d,T)&&(i.flags|=32),i.memoizedState!==null&&(d=Rr(t,i,Vv,null,null,l),va._currentValue=d),Ml(t,i),rt(t,i,r,l),i.child;case 6:return t===null&&Re&&((t=l=Ye)&&(l=T0(l,i.pendingProps,Qt),l!==null?(i.stateNode=l,pt=i,Ye=null,t=!0):t=!1),t||di(i)),null;case 13:return am(t,i,l);case 4:return $e(i,i.stateNode.containerInfo),r=i.pendingProps,t===null?i.child=Xi(i,null,r,l):rt(t,i,r,l),i.child;case 11:return Kd(t,i,i.type,i.pendingProps,l);case 7:return rt(t,i,i.pendingProps,l),i.child;case 8:return rt(t,i,i.pendingProps.children,l),i.child;case 12:return rt(t,i,i.pendingProps.children,l),i.child;case 10:return r=i.pendingProps,Dn(i,i.type,r.value),rt(t,i,r.children,l),i.child;case 9:return d=i.type._context,r=i.pendingProps.children,pi(i),d=dt(d),r=r(d),i.flags|=1,rt(t,i,r,l),i.child;case 14:return Wd(t,i,i.type,i.pendingProps,l);case 15:return jd(t,i,i.type,i.pendingProps,l);case 19:return sm(t,i,l);case 31:return r=i.pendingProps,l=i.mode,r={mode:r.mode,children:r.children},t===null?(l=Nl(r,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=rn(t.child,r),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return em(t,i,l);case 24:return pi(i),r=dt(tt),t===null?(d=Cr(),d===null&&(d=ze,g=xr(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=l),d=g),i.memoizedState={parent:r,cache:d},br(i),Dn(i,tt,d)):((t.lanes&l)!==0&&(_r(t,i),Xo(i,null,null,l),Qo()),d=t.memoizedState,g=i.memoizedState,d.parent!==r?(d={parent:r,cache:r},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Dn(i,tt,r)):(r=g.cache,Dn(i,tt,r),r!==d.cache&&vr(i,[tt],l,!0))),rt(t,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function gn(t){t.flags|=4}function um(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yp(i)){if(i=qt.current,i!==null&&((Ae&4194048)===Ae?Xt!==null:(Ae&62914560)!==Ae&&(Ae&536870912)===0||i!==Xt))throw Jo=Sr,Yf;t.flags|=8192}}function Rl(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Bc():536870912,t.lanes|=i,eo|=i)}function ia(t,i){if(!Re)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function He(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,r=0;if(i)for(var d=t.child;d!==null;)l|=d.lanes|d.childLanes,r|=d.subtreeFlags&65011712,r|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)l|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=r,t.childLanes=l,i}function Yv(t,i,l){var r=i.pendingProps;switch(pr(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(i),null;case 1:return He(i),null;case 3:return l=i.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),dn(tt),wn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Bo(i)?gn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pf())),He(i),null;case 26:return l=i.memoizedState,t===null?(gn(i),l!==null?(He(i),um(i,l)):(He(i),i.flags&=-16777217)):l?l!==t.memoizedState?(gn(i),He(i),um(i,l)):(He(i),i.flags&=-16777217):(t.memoizedProps!==r&&gn(i),He(i),i.flags&=-16777217),null;case 27:Pa(i),l=ge.current;var d=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==r&&gn(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return He(i),null}t=re.current,Bo(i)?zf(i):(t=up(d,r,l),i.stateNode=t,gn(i))}return He(i),null;case 5:if(Pa(i),l=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==r&&gn(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return He(i),null}if(t=re.current,Bo(i))zf(i);else{switch(d=Gl(ge.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?d.createElement("select",{is:r.is}):d.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?d.createElement(l,{is:r.is}):d.createElement(l)}}t[ft]=i,t[yt]=r;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=t;e:switch(ct(t,l,r),l){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&gn(i)}}return He(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==r&&gn(i);else{if(typeof r!="string"&&i.stateNode===null)throw Error(a(166));if(t=ge.current,Bo(i)){if(t=i.stateNode,l=i.memoizedProps,r=null,d=pt,d!==null)switch(d.tag){case 27:case 5:r=d.memoizedProps}t[ft]=i,t=!!(t.nodeValue===l||r!==null&&r.suppressHydrationWarning===!0||np(t.nodeValue,l)),t||di(i)}else t=Gl(t).createTextNode(r),t[ft]=i,i.stateNode=t}return He(i),null;case 13:if(r=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Bo(i),r!==null&&r.dehydrated!==null){if(t===null){if(!d)throw Error(a(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));d[ft]=i}else Po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;He(i),d=!1}else d=Pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(pn(i),i):(pn(i),null)}if(pn(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=r!==null,t=t!==null&&t.memoizedState!==null,l){r=i.child,d=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(d=r.alternate.memoizedState.cachePool.pool);var g=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),g!==d&&(r.flags|=2048)}return l!==t&&l&&(i.child.flags|=8192),Rl(i,i.updateQueue),He(i),null;case 4:return wn(),t===null&&Au(i.stateNode.containerInfo),He(i),null;case 10:return dn(i.type),He(i),null;case 19:if(te(nt),d=i.memoizedState,d===null)return He(i),null;if(r=(i.flags&128)!==0,g=d.rendering,g===null)if(r)ia(d,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(g=El(t),g!==null){for(i.flags|=128,ia(d,!1),t=g.updateQueue,i.updateQueue=t,Rl(i,t),i.subtreeFlags=0,t=l,l=i.child;l!==null;)Vf(l,t),l=l.sibling;return K(nt,nt.current&1|2),i.child}t=t.sibling}d.tail!==null&&Zt()>Il&&(i.flags|=128,r=!0,ia(d,!1),i.lanes=4194304)}else{if(!r)if(t=El(g),t!==null){if(i.flags|=128,r=!0,t=t.updateQueue,i.updateQueue=t,Rl(i,t),ia(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Re)return He(i),null}else 2*Zt()-d.renderingStartTime>Il&&l!==536870912&&(i.flags|=128,r=!0,ia(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(t=d.last,t!==null?t.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Zt(),i.sibling=null,t=nt.current,K(nt,r?t&1|2:t&1),i):(He(i),null);case 22:case 23:return pn(i),Mr(),r=i.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(i.flags|=8192):r&&(i.flags|=8192),r?(l&536870912)!==0&&(i.flags&128)===0&&(He(i),i.subtreeFlags&6&&(i.flags|=8192)):He(i),l=i.updateQueue,l!==null&&Rl(i,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(i.flags|=2048),t!==null&&te(hi),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),dn(tt),He(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Jv(t,i){switch(pr(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return dn(tt),wn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Pa(i),null;case 13:if(pn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Po()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return te(nt),null;case 4:return wn(),null;case 10:return dn(i.type),null;case 22:case 23:return pn(i),Mr(),t!==null&&te(hi),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return dn(tt),null;case 25:return null;default:return null}}function cm(t,i){switch(pr(i),i.tag){case 3:dn(tt),wn();break;case 26:case 27:case 5:Pa(i);break;case 4:wn();break;case 13:pn(i);break;case 19:te(nt);break;case 10:dn(i.type);break;case 22:case 23:pn(i),Mr(),t!==null&&te(hi);break;case 24:dn(tt)}}function oa(t,i){try{var l=i.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var d=r.next;l=d;do{if((l.tag&t)===t){r=void 0;var g=l.create,T=l.inst;r=g(),T.destroy=r}l=l.next}while(l!==d)}}catch(S){qe(i,i.return,S)}}function qn(t,i,l){try{var r=i.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var g=d.next;r=g;do{if((r.tag&t)===t){var T=r.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,d=i;var A=l,I=S;try{I()}catch(z){qe(d,A,z)}}}r=r.next}while(r!==g)}}catch(z){qe(i,i.return,z)}}function fm(t){var i=t.updateQueue;if(i!==null){var l=t.stateNode;try{Wf(i,l)}catch(r){qe(t,t.return,r)}}}function dm(t,i,l){l.props=yi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(r){qe(t,i,r)}}function aa(t,i){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof l=="function"?t.refCleanup=l(r):l.current=r}}catch(d){qe(t,i,d)}}function Kt(t,i){var l=t.ref,r=t.refCleanup;if(l!==null)if(typeof r=="function")try{r()}catch(d){qe(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){qe(t,i,d)}else l.current=null}function mm(t){var i=t.type,l=t.memoizedProps,r=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break e;case"img":l.src?r.src=l.src:l.srcSet&&(r.srcset=l.srcSet)}}catch(d){qe(t,t.return,d)}}function nu(t,i,l){try{var r=t.stateNode;p0(r,t.type,l,i),r[yt]=i}catch(d){qe(t,t.return,d)}}function pm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Yn(t.type)||t.tag===4}function iu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Yn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ou(t,i,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(t),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=$l));else if(r!==4&&(r===27&&Yn(t.type)&&(l=t.stateNode,i=null),t=t.child,t!==null))for(ou(t,i,l),t=t.sibling;t!==null;)ou(t,i,l),t=t.sibling}function Dl(t,i,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(r!==4&&(r===27&&Yn(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Dl(t,i,l),t=t.sibling;t!==null;)Dl(t,i,l),t=t.sibling}function hm(t){var i=t.stateNode,l=t.memoizedProps;try{for(var r=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);ct(i,r,l),i[ft]=t,i[yt]=l}catch(g){qe(t,t.return,g)}}var yn=!1,Qe=!1,au=!1,gm=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Zv(t,i){if(t=t.containerInfo,Nu=Ql,t=wf(t),ir(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var r=l.getSelection&&l.getSelection();if(r&&r.rangeCount!==0){l=r.anchorNode;var d=r.anchorOffset,g=r.focusNode;r=r.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,S=-1,A=-1,I=0,z=0,G=t,U=null;t:for(;;){for(var L;G!==l||d!==0&&G.nodeType!==3||(S=T+d),G!==g||r!==0&&G.nodeType!==3||(A=T+r),G.nodeType===3&&(T+=G.nodeValue.length),(L=G.firstChild)!==null;)U=G,G=L;for(;;){if(G===t)break t;if(U===l&&++I===d&&(S=T),U===g&&++z===r&&(A=T),(L=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=L}l=S===-1||A===-1?null:{start:S,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ru={focusedElem:t,selectionRange:l},Ql=!1,lt=i;lt!==null;)if(i=lt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,lt=t;else for(;lt!==null;){switch(i=lt,g=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=i,d=g.memoizedProps,g=g.memoizedState,r=l.stateNode;try{var de=yi(l.type,d,l.elementType===l.type);t=r.getSnapshotBeforeUpdate(de,g),r.__reactInternalSnapshotBeforeUpdate=t}catch(ue){qe(l,l.return,ue)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,l=t.nodeType,l===9)Iu(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Iu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,lt=t;break}lt=i.return}}function ym(t,i,l){var r=l.flags;switch(l.tag){case 0:case 11:case 15:zn(t,l),r&4&&oa(5,l);break;case 1:if(zn(t,l),r&4)if(t=l.stateNode,i===null)try{t.componentDidMount()}catch(T){qe(l,l.return,T)}else{var d=yi(l.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){qe(l,l.return,T)}}r&64&&fm(l),r&512&&aa(l,l.return);break;case 3:if(zn(t,l),r&64&&(t=l.updateQueue,t!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Wf(t,i)}catch(T){qe(l,l.return,T)}}break;case 27:i===null&&r&4&&hm(l);case 26:case 5:zn(t,l),i===null&&r&4&&mm(l),r&512&&aa(l,l.return);break;case 12:zn(t,l);break;case 13:zn(t,l),r&4&&Tm(t,l),r&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=i0.bind(null,l),C0(t,l))));break;case 22:if(r=l.memoizedState!==null||yn,!r){i=i!==null&&i.memoizedState!==null||Qe,d=yn;var g=Qe;yn=r,(Qe=i)&&!g?Bn(t,l,(l.subtreeFlags&8772)!==0):zn(t,l),yn=d,Qe=g}break;case 30:break;default:zn(t,l)}}function vm(t){var i=t.alternate;i!==null&&(t.alternate=null,vm(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&qs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ge=null,Tt=!1;function vn(t,i,l){for(l=l.child;l!==null;)xm(t,i,l),l=l.sibling}function xm(t,i,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Ao,l)}catch{}switch(l.tag){case 26:Qe||Kt(l,i),vn(t,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Qe||Kt(l,i);var r=Ge,d=Tt;Yn(l.type)&&(Ge=l.stateNode,Tt=!1),vn(t,i,l),pa(l.stateNode),Ge=r,Tt=d;break;case 5:Qe||Kt(l,i);case 6:if(r=Ge,d=Tt,Ge=null,vn(t,i,l),Ge=r,Tt=d,Ge!==null)if(Tt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(l.stateNode)}catch(g){qe(l,i,g)}else try{Ge.removeChild(l.stateNode)}catch(g){qe(l,i,g)}break;case 18:Ge!==null&&(Tt?(t=Ge,sp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Sa(t)):sp(Ge,l.stateNode));break;case 4:r=Ge,d=Tt,Ge=l.stateNode.containerInfo,Tt=!0,vn(t,i,l),Ge=r,Tt=d;break;case 0:case 11:case 14:case 15:Qe||qn(2,l,i),Qe||qn(4,l,i),vn(t,i,l);break;case 1:Qe||(Kt(l,i),r=l.stateNode,typeof r.componentWillUnmount=="function"&&dm(l,i,r)),vn(t,i,l);break;case 21:vn(t,i,l);break;case 22:Qe=(r=Qe)||l.memoizedState!==null,vn(t,i,l),Qe=r;break;default:vn(t,i,l)}}function Tm(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Sa(t)}catch(l){qe(i,i.return,l)}}function Qv(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new gm),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new gm),i;default:throw Error(a(435,t.tag))}}function lu(t,i){var l=Qv(t);i.forEach(function(r){var d=o0.bind(null,t,r);l.has(r)||(l.add(r),r.then(d,d))})}function wt(t,i){var l=i.deletions;if(l!==null)for(var r=0;r<l.length;r++){var d=l[r],g=t,T=i,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(Yn(S.type)){Ge=S.stateNode,Tt=!1;break e}break;case 5:Ge=S.stateNode,Tt=!1;break e;case 3:case 4:Ge=S.stateNode.containerInfo,Tt=!0;break e}S=S.return}if(Ge===null)throw Error(a(160));xm(g,T,d),Ge=null,Tt=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Cm(i,t),i=i.sibling}var Gt=null;function Cm(t,i){var l=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wt(i,t),Mt(t),r&4&&(qn(3,t,t.return),oa(3,t),qn(5,t,t.return));break;case 1:wt(i,t),Mt(t),r&512&&(Qe||l===null||Kt(l,l.return)),r&64&&yn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?r:l.concat(r))));break;case 26:var d=Gt;if(wt(i,t),Mt(t),r&512&&(Qe||l===null||Kt(l,l.return)),r&4){var g=l!==null?l.memoizedState:null;if(r=t.memoizedState,l===null)if(r===null)if(t.stateNode===null){e:{r=t.type,l=t.memoizedProps,d=d.ownerDocument||d;t:switch(r){case"title":g=d.getElementsByTagName("title")[0],(!g||g[No]||g[ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(r),d.head.insertBefore(g,d.querySelector("head > title"))),ct(g,r,l),g[ft]=t,ot(g),r=g;break e;case"link":var T=hp("link","href",d).get(r+(l.href||""));if(T){for(var S=0;S<T.length;S++)if(g=T[S],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(S,1);break t}}g=d.createElement(r),ct(g,r,l),d.head.appendChild(g);break;case"meta":if(T=hp("meta","content",d).get(r+(l.content||""))){for(S=0;S<T.length;S++)if(g=T[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(S,1);break t}}g=d.createElement(r),ct(g,r,l),d.head.appendChild(g);break;default:throw Error(a(468,r))}g[ft]=t,ot(g),r=g}t.stateNode=r}else gp(d,t.type,t.stateNode);else t.stateNode=pp(d,r,t.memoizedProps);else g!==r?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,r===null?gp(d,t.type,t.stateNode):pp(d,r,t.memoizedProps)):r===null&&t.stateNode!==null&&nu(t,t.memoizedProps,l.memoizedProps)}break;case 27:wt(i,t),Mt(t),r&512&&(Qe||l===null||Kt(l,l.return)),l!==null&&r&4&&nu(t,t.memoizedProps,l.memoizedProps);break;case 5:if(wt(i,t),Mt(t),r&512&&(Qe||l===null||Kt(l,l.return)),t.flags&32){d=t.stateNode;try{ki(d,"")}catch(L){qe(t,t.return,L)}}r&4&&t.stateNode!=null&&(d=t.memoizedProps,nu(t,d,l!==null?l.memoizedProps:d)),r&1024&&(au=!0);break;case 6:if(wt(i,t),Mt(t),r&4){if(t.stateNode===null)throw Error(a(162));r=t.memoizedProps,l=t.stateNode;try{l.nodeValue=r}catch(L){qe(t,t.return,L)}}break;case 3:if(Yl=null,d=Gt,Gt=Hl(i.containerInfo),wt(i,t),Gt=d,Mt(t),r&4&&l!==null&&l.memoizedState.isDehydrated)try{Sa(i.containerInfo)}catch(L){qe(t,t.return,L)}au&&(au=!1,Sm(t));break;case 4:r=Gt,Gt=Hl(t.stateNode.containerInfo),wt(i,t),Mt(t),Gt=r;break;case 12:wt(i,t),Mt(t);break;case 13:wt(i,t),Mt(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(du=Zt()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,lu(t,r)));break;case 22:d=t.memoizedState!==null;var A=l!==null&&l.memoizedState!==null,I=yn,z=Qe;if(yn=I||d,Qe=z||A,wt(i,t),Qe=z,yn=I,Mt(t),r&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(l===null||A||yn||Qe||vi(t)),l=null,i=t;;){if(i.tag===5||i.tag===26){if(l===null){A=l=i;try{if(g=A.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=A.stateNode;var G=A.memoizedProps.style,U=G!=null&&G.hasOwnProperty("display")?G.display:null;S.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(L){qe(A,A.return,L)}}}else if(i.tag===6){if(l===null){A=i;try{A.stateNode.nodeValue=d?"":A.memoizedProps}catch(L){qe(A,A.return,L)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}r&4&&(r=t.updateQueue,r!==null&&(l=r.retryQueue,l!==null&&(r.retryQueue=null,lu(t,l))));break;case 19:wt(i,t),Mt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,lu(t,r)));break;case 30:break;case 21:break;default:wt(i,t),Mt(t)}}function Mt(t){var i=t.flags;if(i&2){try{for(var l,r=t.return;r!==null;){if(pm(r)){l=r;break}r=r.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var d=l.stateNode,g=iu(t);Dl(t,g,d);break;case 5:var T=l.stateNode;l.flags&32&&(ki(T,""),l.flags&=-33);var S=iu(t);Dl(t,S,T);break;case 3:case 4:var A=l.stateNode.containerInfo,I=iu(t);ou(t,I,A);break;default:throw Error(a(161))}}catch(z){qe(t,t.return,z)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Sm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Sm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function zn(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ym(t,i.alternate,i),i=i.sibling}function vi(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:qn(4,i,i.return),vi(i);break;case 1:Kt(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&dm(i,i.return,l),vi(i);break;case 27:pa(i.stateNode);case 26:case 5:Kt(i,i.return),vi(i);break;case 22:i.memoizedState===null&&vi(i);break;case 30:vi(i);break;default:vi(i)}t=t.sibling}}function Bn(t,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var r=i.alternate,d=t,g=i,T=g.flags;switch(g.tag){case 0:case 11:case 15:Bn(d,g,l),oa(4,g);break;case 1:if(Bn(d,g,l),r=g,d=r.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(I){qe(r,r.return,I)}if(r=g,d=r.updateQueue,d!==null){var S=r.stateNode;try{var A=d.shared.hiddenCallbacks;if(A!==null)for(d.shared.hiddenCallbacks=null,d=0;d<A.length;d++)Kf(A[d],S)}catch(I){qe(r,r.return,I)}}l&&T&64&&fm(g),aa(g,g.return);break;case 27:hm(g);case 26:case 5:Bn(d,g,l),l&&r===null&&T&4&&mm(g),aa(g,g.return);break;case 12:Bn(d,g,l);break;case 13:Bn(d,g,l),l&&T&4&&Tm(d,g);break;case 22:g.memoizedState===null&&Bn(d,g,l),aa(g,g.return);break;case 30:break;default:Bn(d,g,l)}i=i.sibling}}function su(t,i){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Ho(l))}function ru(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ho(t))}function Wt(t,i,l,r){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bm(t,i,l,r),i=i.sibling}function bm(t,i,l,r){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Wt(t,i,l,r),d&2048&&oa(9,i);break;case 1:Wt(t,i,l,r);break;case 3:Wt(t,i,l,r),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ho(t)));break;case 12:if(d&2048){Wt(t,i,l,r),t=i.stateNode;try{var g=i.memoizedProps,T=g.id,S=g.onPostCommit;typeof S=="function"&&S(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(A){qe(i,i.return,A)}}else Wt(t,i,l,r);break;case 13:Wt(t,i,l,r);break;case 23:break;case 22:g=i.stateNode,T=i.alternate,i.memoizedState!==null?g._visibility&2?Wt(t,i,l,r):la(t,i):g._visibility&2?Wt(t,i,l,r):(g._visibility|=2,Ki(t,i,l,r,(i.subtreeFlags&10256)!==0)),d&2048&&su(T,i);break;case 24:Wt(t,i,l,r),d&2048&&ru(i.alternate,i);break;default:Wt(t,i,l,r)}}function Ki(t,i,l,r,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=t,T=i,S=l,A=r,I=T.flags;switch(T.tag){case 0:case 11:case 15:Ki(g,T,S,A,d),oa(8,T);break;case 23:break;case 22:var z=T.stateNode;T.memoizedState!==null?z._visibility&2?Ki(g,T,S,A,d):la(g,T):(z._visibility|=2,Ki(g,T,S,A,d)),d&&I&2048&&su(T.alternate,T);break;case 24:Ki(g,T,S,A,d),d&&I&2048&&ru(T.alternate,T);break;default:Ki(g,T,S,A,d)}i=i.sibling}}function la(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=t,r=i,d=r.flags;switch(r.tag){case 22:la(l,r),d&2048&&su(r.alternate,r);break;case 24:la(l,r),d&2048&&ru(r.alternate,r);break;default:la(l,r)}i=i.sibling}}var sa=8192;function Wi(t){if(t.subtreeFlags&sa)for(t=t.child;t!==null;)_m(t),t=t.sibling}function _m(t){switch(t.tag){case 26:Wi(t),t.flags&sa&&t.memoizedState!==null&&U0(Gt,t.memoizedState,t.memoizedProps);break;case 5:Wi(t);break;case 3:case 4:var i=Gt;Gt=Hl(t.stateNode.containerInfo),Wi(t),Gt=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=sa,sa=16777216,Wi(t),sa=i):Wi(t));break;default:Wi(t)}}function Em(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ra(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var r=i[l];lt=r,wm(r,t)}Em(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Am(t),t=t.sibling}function Am(t){switch(t.tag){case 0:case 11:case 15:ra(t),t.flags&2048&&qn(9,t,t.return);break;case 3:ra(t);break;case 12:ra(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,kl(t)):ra(t);break;default:ra(t)}}function kl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var r=i[l];lt=r,wm(r,t)}Em(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:qn(8,i,i.return),kl(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,kl(i));break;default:kl(i)}t=t.sibling}}function wm(t,i){for(;lt!==null;){var l=lt;switch(l.tag){case 0:case 11:case 15:qn(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var r=l.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Ho(l.memoizedState.cache)}if(r=l.child,r!==null)r.return=l,lt=r;else e:for(l=t;lt!==null;){r=lt;var d=r.sibling,g=r.return;if(vm(r),r===l){lt=null;break e}if(d!==null){d.return=g,lt=d;break e}lt=g}}}var Xv={getCacheForType:function(t){var i=dt(tt),l=i.data.get(t);return l===void 0&&(l=t(),i.data.set(t,l)),l}},Kv=typeof WeakMap=="function"?WeakMap:Map,De=0,ze=null,Se=null,Ae=0,ke=0,Nt=null,Pn=!1,ji=!1,uu=!1,xn=0,Je=0,$n=0,xi=0,cu=0,zt=0,eo=0,ua=null,Ct=null,fu=!1,du=0,Il=1/0,Ul=null,Gn=null,ut=0,Hn=null,to=null,no=0,mu=0,pu=null,Mm=null,ca=0,hu=null;function Rt(){if((De&2)!==0&&Ae!==0)return Ae&-Ae;if(V.T!==null){var t=Gi;return t!==0?t:Su()}return Gc()}function Nm(){zt===0&&(zt=(Ae&536870912)===0||Re?zc():536870912);var t=qt.current;return t!==null&&(t.flags|=32),zt}function Dt(t,i,l){(t===ze&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(io(t,0),Fn(t,Ae,zt,!1)),Mo(t,l),((De&2)===0||t!==ze)&&(t===ze&&((De&2)===0&&(xi|=l),Je===4&&Fn(t,Ae,zt,!1)),jt(t))}function Rm(t,i,l){if((De&6)!==0)throw Error(a(327));var r=!l&&(i&124)===0&&(i&t.expiredLanes)===0||wo(t,i),d=r?e0(t,i):vu(t,i,!0),g=r;do{if(d===0){ji&&!r&&Fn(t,i,0,!1);break}else{if(l=t.current.alternate,g&&!Wv(l)){d=vu(t,i,!1),g=!1;continue}if(d===2){if(g=i,t.errorRecoveryDisabledLanes&g)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var S=t;d=ua;var A=S.current.memoizedState.isDehydrated;if(A&&(io(S,T).flags|=256),T=vu(S,T,!1),T!==2){if(uu&&!A){S.errorRecoveryDisabledLanes|=g,xi|=g,d=4;break e}g=Ct,Ct=d,g!==null&&(Ct===null?Ct=g:Ct.push.apply(Ct,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){io(t,0),Fn(t,i,0,!0);break}e:{switch(r=t,g=d,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Fn(r,i,zt,!Pn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(d=du+300-Zt(),10<d)){if(Fn(r,i,zt,!Pn),Fa(r,0,!0)!==0)break e;r.timeoutHandle=ap(Dm.bind(null,r,l,Ct,Ul,fu,i,zt,xi,eo,Pn,g,2,-0,0),d);break e}Dm(r,l,Ct,Ul,fu,i,zt,xi,eo,Pn,g,0,-0,0)}}break}while(!0);jt(t)}function Dm(t,i,l,r,d,g,T,S,A,I,z,G,U,L){if(t.timeoutHandle=-1,G=i.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(ya={stylesheets:null,count:0,unsuspend:I0},_m(i),G=L0(),G!==null)){t.cancelPendingCommit=G(qm.bind(null,t,i,g,l,r,d,T,S,A,z,1,U,L)),Fn(t,g,T,!I);return}qm(t,i,g,l,r,d,T,S,A)}function Wv(t){for(var i=t;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var r=0;r<l.length;r++){var d=l[r],g=d.getSnapshot;d=d.value;try{if(!Et(g(),d))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fn(t,i,l,r){i&=~cu,i&=~xi,t.suspendedLanes|=i,t.pingedLanes&=~i,r&&(t.warmLanes|=i),r=t.expirationTimes;for(var d=i;0<d;){var g=31-_t(d),T=1<<g;r[g]=-1,d&=~T}l!==0&&Pc(t,l,i)}function Ll(){return(De&6)===0?(fa(0),!1):!0}function gu(){if(Se!==null){if(ke===0)var t=Se.return;else t=Se,fn=mi=null,Ir(t),Qi=null,ta=0,t=Se;for(;t!==null;)cm(t.alternate,t),t=t.return;Se=null}}function io(t,i){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,g0(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),gu(),ze=t,Se=l=rn(t.current,null),Ae=i,ke=0,Nt=null,Pn=!1,ji=wo(t,i),uu=!1,eo=zt=cu=xi=$n=Je=0,Ct=ua=null,fu=!1,(i&8)!==0&&(i|=i&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=i;0<r;){var d=31-_t(r),g=1<<d;i|=t[d],r&=~g}return xn=i,il(),l}function km(t,i){xe=null,V.H=Sl,i===Yo||i===dl?(i=Qf(),ke=3):i===Yf?(i=Qf(),ke=4):ke=i===Xd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nt=i,Se===null&&(Je=1,wl(t,Ut(i,t.current)))}function Im(){var t=V.H;return V.H=Sl,t===null?Sl:t}function Um(){var t=V.A;return V.A=Xv,t}function yu(){Je=4,Pn||(Ae&4194048)!==Ae&&qt.current!==null||(ji=!0),($n&134217727)===0&&(xi&134217727)===0||ze===null||Fn(ze,Ae,zt,!1)}function vu(t,i,l){var r=De;De|=2;var d=Im(),g=Um();(ze!==t||Ae!==i)&&(Ul=null,io(t,i)),i=!1;var T=Je;e:do try{if(ke!==0&&Se!==null){var S=Se,A=Nt;switch(ke){case 8:gu(),T=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(i=!0);var I=ke;if(ke=0,Nt=null,oo(t,S,A,I),l&&ji){T=0;break e}break;default:I=ke,ke=0,Nt=null,oo(t,S,A,I)}}jv(),T=Je;break}catch(z){km(t,z)}while(!0);return i&&t.shellSuspendCounter++,fn=mi=null,De=r,V.H=d,V.A=g,Se===null&&(ze=null,Ae=0,il()),T}function jv(){for(;Se!==null;)Lm(Se)}function e0(t,i){var l=De;De|=2;var r=Im(),d=Um();ze!==t||Ae!==i?(Ul=null,Il=Zt()+500,io(t,i)):ji=wo(t,i);e:do try{if(ke!==0&&Se!==null){i=Se;var g=Nt;t:switch(ke){case 1:ke=0,Nt=null,oo(t,i,g,1);break;case 2:case 9:if(Jf(g)){ke=0,Nt=null,Om(i);break}i=function(){ke!==2&&ke!==9||ze!==t||(ke=7),jt(t)},g.then(i,i);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Jf(g)?(ke=0,Nt=null,Om(i)):(ke=0,Nt=null,oo(t,i,g,7));break;case 5:var T=null;switch(Se.tag){case 26:T=Se.memoizedState;case 5:case 27:var S=Se;if(!T||yp(T)){ke=0,Nt=null;var A=S.sibling;if(A!==null)Se=A;else{var I=S.return;I!==null?(Se=I,Ol(I)):Se=null}break t}}ke=0,Nt=null,oo(t,i,g,5);break;case 6:ke=0,Nt=null,oo(t,i,g,6);break;case 8:gu(),Je=6;break e;default:throw Error(a(462))}}t0();break}catch(z){km(t,z)}while(!0);return fn=mi=null,V.H=r,V.A=d,De=l,Se!==null?0:(ze=null,Ae=0,il(),Je)}function t0(){for(;Se!==null&&!by();)Lm(Se)}function Lm(t){var i=rm(t.alternate,t,xn);t.memoizedProps=t.pendingProps,i===null?Ol(t):Se=i}function Om(t){var i=t,l=i.alternate;switch(i.tag){case 15:case 0:i=nm(l,i,i.pendingProps,i.type,void 0,Ae);break;case 11:i=nm(l,i,i.pendingProps,i.type.render,i.ref,Ae);break;case 5:Ir(i);default:cm(l,i),i=Se=Vf(i,xn),i=rm(l,i,xn)}t.memoizedProps=t.pendingProps,i===null?Ol(t):Se=i}function oo(t,i,l,r){fn=mi=null,Ir(i),Qi=null,ta=0;var d=i.return;try{if(Hv(t,d,i,l,Ae)){Je=1,wl(t,Ut(l,t.current)),Se=null;return}}catch(g){if(d!==null)throw Se=d,g;Je=1,wl(t,Ut(l,t.current)),Se=null;return}i.flags&32768?(Re||r===1?t=!0:ji||(Ae&536870912)!==0?t=!1:(Pn=t=!0,(r===2||r===9||r===3||r===6)&&(r=qt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Vm(i,t)):Ol(i)}function Ol(t){var i=t;do{if((i.flags&32768)!==0){Vm(i,Pn);return}t=i.return;var l=Yv(i.alternate,i,xn);if(l!==null){Se=l;return}if(i=i.sibling,i!==null){Se=i;return}Se=i=t}while(i!==null);Je===0&&(Je=5)}function Vm(t,i){do{var l=Jv(t.alternate,t);if(l!==null){l.flags&=32767,Se=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(t=t.sibling,t!==null)){Se=t;return}Se=t=l}while(t!==null);Je=6,Se=null}function qm(t,i,l,r,d,g,T,S,A){t.cancelPendingCommit=null;do Vl();while(ut!==0);if((De&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=rr,Iy(t,l,g,T,S,A),t===ze&&(Se=ze=null,Ae=0),to=i,Hn=t,no=l,mu=g,pu=d,Mm=r,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,a0($a,function(){return Gm(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||r){r=V.T,V.T=null,d=X.p,X.p=2,T=De,De|=4;try{Zv(t,i,l)}finally{De=T,X.p=d,V.T=r}}ut=1,zm(),Bm(),Pm()}}function zm(){if(ut===1){ut=0;var t=Hn,i=to,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var r=X.p;X.p=2;var d=De;De|=4;try{Cm(i,t);var g=Ru,T=wf(t.containerInfo),S=g.focusedElem,A=g.selectionRange;if(T!==S&&S&&S.ownerDocument&&Af(S.ownerDocument.documentElement,S)){if(A!==null&&ir(S)){var I=A.start,z=A.end;if(z===void 0&&(z=I),"selectionStart"in S)S.selectionStart=I,S.selectionEnd=Math.min(z,S.value.length);else{var G=S.ownerDocument||document,U=G&&G.defaultView||window;if(U.getSelection){var L=U.getSelection(),de=S.textContent.length,ue=Math.min(A.start,de),Le=A.end===void 0?ue:Math.min(A.end,de);!L.extend&&ue>Le&&(T=Le,Le=ue,ue=T);var R=Ef(S,ue),M=Ef(S,Le);if(R&&M&&(L.rangeCount!==1||L.anchorNode!==R.node||L.anchorOffset!==R.offset||L.focusNode!==M.node||L.focusOffset!==M.offset)){var D=G.createRange();D.setStart(R.node,R.offset),L.removeAllRanges(),ue>Le?(L.addRange(D),L.extend(M.node,M.offset)):(D.setEnd(M.node,M.offset),L.addRange(D))}}}}for(G=[],L=S;L=L.parentNode;)L.nodeType===1&&G.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<G.length;S++){var P=G[S];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}Ql=!!Nu,Ru=Nu=null}finally{De=d,X.p=r,V.T=l}}t.current=i,ut=2}}function Bm(){if(ut===2){ut=0;var t=Hn,i=to,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var r=X.p;X.p=2;var d=De;De|=4;try{ym(t,i.alternate,i)}finally{De=d,X.p=r,V.T=l}}ut=3}}function Pm(){if(ut===4||ut===3){ut=0,_y();var t=Hn,i=to,l=no,r=Mm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ut=5:(ut=0,to=Hn=null,$m(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Gn=null),Os(l),i=i.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Ao,i,void 0,(i.current.flags&128)===128)}catch{}if(r!==null){i=V.T,d=X.p,X.p=2,V.T=null;try{for(var g=t.onRecoverableError,T=0;T<r.length;T++){var S=r[T];g(S.value,{componentStack:S.stack})}}finally{V.T=i,X.p=d}}(no&3)!==0&&Vl(),jt(t),d=t.pendingLanes,(l&4194090)!==0&&(d&42)!==0?t===hu?ca++:(ca=0,hu=t):ca=0,fa(0)}}function $m(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ho(i)))}function Vl(t){return zm(),Bm(),Pm(),Gm()}function Gm(){if(ut!==5)return!1;var t=Hn,i=mu;mu=0;var l=Os(no),r=V.T,d=X.p;try{X.p=32>l?32:l,V.T=null,l=pu,pu=null;var g=Hn,T=no;if(ut=0,to=Hn=null,no=0,(De&6)!==0)throw Error(a(331));var S=De;if(De|=4,Am(g.current),bm(g,g.current,T,l),De=S,fa(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Ao,g)}catch{}return!0}finally{X.p=d,V.T=r,$m(t,i)}}function Hm(t,i,l){i=Ut(l,i),i=Jr(t.stateNode,i,2),t=Un(t,i,2),t!==null&&(Mo(t,2),jt(t))}function qe(t,i,l){if(t.tag===3)Hm(t,t,l);else for(;i!==null;){if(i.tag===3){Hm(i,t,l);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=Ut(l,t),l=Zd(2),r=Un(i,l,2),r!==null&&(Qd(l,r,i,t),Mo(r,2),jt(r));break}}i=i.return}}function xu(t,i,l){var r=t.pingCache;if(r===null){r=t.pingCache=new Kv;var d=new Set;r.set(i,d)}else d=r.get(i),d===void 0&&(d=new Set,r.set(i,d));d.has(l)||(uu=!0,d.add(l),t=n0.bind(null,t,i,l),i.then(t,t))}function n0(t,i,l){var r=t.pingCache;r!==null&&r.delete(i),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,ze===t&&(Ae&l)===l&&(Je===4||Je===3&&(Ae&62914560)===Ae&&300>Zt()-du?(De&2)===0&&io(t,0):cu|=l,eo===Ae&&(eo=0)),jt(t)}function Fm(t,i){i===0&&(i=Bc()),t=zi(t,i),t!==null&&(Mo(t,i),jt(t))}function i0(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),Fm(t,l)}function o0(t,i){var l=0;switch(t.tag){case 13:var r=t.stateNode,d=t.memoizedState;d!==null&&(l=d.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(i),Fm(t,l)}function a0(t,i){return ks(t,i)}var ql=null,ao=null,Tu=!1,zl=!1,Cu=!1,Ti=0;function jt(t){t!==ao&&t.next===null&&(ao===null?ql=ao=t:ao=ao.next=t),zl=!0,Tu||(Tu=!0,s0())}function fa(t,i){if(!Cu&&zl){Cu=!0;do for(var l=!1,r=ql;r!==null;){if(t!==0){var d=r.pendingLanes;if(d===0)var g=0;else{var T=r.suspendedLanes,S=r.pingedLanes;g=(1<<31-_t(42|t)+1)-1,g&=d&~(T&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Qm(r,g))}else g=Ae,g=Fa(r,r===ze?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(g&3)===0||wo(r,g)||(l=!0,Qm(r,g));r=r.next}while(l);Cu=!1}}function l0(){Ym()}function Ym(){zl=Tu=!1;var t=0;Ti!==0&&(h0()&&(t=Ti),Ti=0);for(var i=Zt(),l=null,r=ql;r!==null;){var d=r.next,g=Jm(r,i);g===0?(r.next=null,l===null?ql=d:l.next=d,d===null&&(ao=l)):(l=r,(t!==0||(g&3)!==0)&&(zl=!0)),r=d}fa(t)}function Jm(t,i){for(var l=t.suspendedLanes,r=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var T=31-_t(g),S=1<<T,A=d[T];A===-1?((S&l)===0||(S&r)!==0)&&(d[T]=ky(S,i)):A<=i&&(t.expiredLanes|=S),g&=~S}if(i=ze,l=Ae,l=Fa(t,t===i?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,l===0||t===i&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Is(r),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||wo(t,l)){if(i=l&-l,i===t.callbackPriority)return i;switch(r!==null&&Is(r),Os(l)){case 2:case 8:l=Vc;break;case 32:l=$a;break;case 268435456:l=qc;break;default:l=$a}return r=Zm.bind(null,t),l=ks(l,r),t.callbackPriority=i,t.callbackNode=l,i}return r!==null&&r!==null&&Is(r),t.callbackPriority=2,t.callbackNode=null,2}function Zm(t,i){if(ut!==0&&ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Vl()&&t.callbackNode!==l)return null;var r=Ae;return r=Fa(t,t===ze?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Rm(t,r,i),Jm(t,Zt()),t.callbackNode!=null&&t.callbackNode===l?Zm.bind(null,t):null)}function Qm(t,i){if(Vl())return null;Rm(t,i,!0)}function s0(){y0(function(){(De&6)!==0?ks(Oc,l0):Ym()})}function Su(){return Ti===0&&(Ti=zc()),Ti}function Xm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xa(""+t)}function Km(t,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,t.id&&l.setAttribute("form",t.id),i.parentNode.insertBefore(l,i),t=new FormData(t),l.parentNode.removeChild(l),t}function r0(t,i,l,r,d){if(i==="submit"&&l&&l.stateNode===d){var g=Xm((d[yt]||null).action),T=r.submitter;T&&(i=(i=T[yt]||null)?Xm(i.formAction):T.getAttribute("formAction"),i!==null&&(g=i,T=null));var S=new el("action","action",null,r,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ti!==0){var A=T?Km(d,T):new FormData(d);$r(l,{pending:!0,data:A,method:d.method,action:g},null,A)}}else typeof g=="function"&&(S.preventDefault(),A=T?Km(d,T):new FormData(d),$r(l,{pending:!0,data:A,method:d.method,action:g},g,A))},currentTarget:d}]})}}for(var bu=0;bu<sr.length;bu++){var _u=sr[bu],u0=_u.toLowerCase(),c0=_u[0].toUpperCase()+_u.slice(1);$t(u0,"on"+c0)}$t(Rf,"onAnimationEnd"),$t(Df,"onAnimationIteration"),$t(kf,"onAnimationStart"),$t("dblclick","onDoubleClick"),$t("focusin","onFocus"),$t("focusout","onBlur"),$t(wv,"onTransitionRun"),$t(Mv,"onTransitionStart"),$t(Nv,"onTransitionCancel"),$t(If,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(da));function Wm(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var r=t[l],d=r.event;r=r.listeners;e:{var g=void 0;if(i)for(var T=r.length-1;0<=T;T--){var S=r[T],A=S.instance,I=S.currentTarget;if(S=S.listener,A!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=I;try{g(d)}catch(z){Al(z)}d.currentTarget=null,g=A}else for(T=0;T<r.length;T++){if(S=r[T],A=S.instance,I=S.currentTarget,S=S.listener,A!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=I;try{g(d)}catch(z){Al(z)}d.currentTarget=null,g=A}}}}function be(t,i){var l=i[Vs];l===void 0&&(l=i[Vs]=new Set);var r=t+"__bubble";l.has(r)||(jm(i,t,2,!1),l.add(r))}function Eu(t,i,l){var r=0;i&&(r|=4),jm(l,t,r,i)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[Bl]){t[Bl]=!0,Fc.forEach(function(l){l!=="selectionchange"&&(f0.has(l)||Eu(l,!1,t),Eu(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bl]||(i[Bl]=!0,Eu("selectionchange",!1,i))}}function jm(t,i,l,r){switch(bp(i)){case 2:var d=q0;break;case 8:d=z0;break;default:d=Bu}l=d.bind(null,i,l,t),d=void 0,!Zs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),r?d!==void 0?t.addEventListener(i,l,{capture:!0,passive:d}):t.addEventListener(i,l,!0):d!==void 0?t.addEventListener(i,l,{passive:d}):t.addEventListener(i,l,!1)}function wu(t,i,l,r,d){var g=r;if((i&1)===0&&(i&2)===0&&r!==null)e:for(;;){if(r===null)return;var T=r.tag;if(T===3||T===4){var S=r.stateNode.containerInfo;if(S===d)break;if(T===4)for(T=r.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;S!==null;){if(T=Ai(S),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){r=g=T;continue e}S=S.parentNode}}r=r.return}lf(function(){var I=g,z=Ys(l),G=[];e:{var U=Uf.get(t);if(U!==void 0){var L=el,de=t;switch(t){case"keypress":if(Wa(l)===0)break e;case"keydown":case"keyup":L=av;break;case"focusin":de="focus",L=Ws;break;case"focusout":de="blur",L=Ws;break;case"beforeblur":case"afterblur":L=Ws;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=rv;break;case Rf:case Df:case kf:L=Xy;break;case If:L=cv;break;case"scroll":case"scrollend":L=Fy;break;case"wheel":L=dv;break;case"copy":case"cut":case"paste":L=Wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=ff;break;case"toggle":case"beforetoggle":L=pv}var ue=(i&4)!==0,Le=!ue&&(t==="scroll"||t==="scrollend"),R=ue?U!==null?U+"Capture":null:U;ue=[];for(var M=I,D;M!==null;){var P=M;if(D=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||D===null||R===null||(P=Do(M,R),P!=null&&ue.push(ma(M,P,D))),Le)break;M=M.return}0<ue.length&&(U=new L(U,de,null,l,z),G.push({event:U,listeners:ue}))}}if((i&7)===0){e:{if(U=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",U&&l!==Fs&&(de=l.relatedTarget||l.fromElement)&&(Ai(de)||de[Ei]))break e;if((L||U)&&(U=z.window===z?z:(U=z.ownerDocument)?U.defaultView||U.parentWindow:window,L?(de=l.relatedTarget||l.toElement,L=I,de=de?Ai(de):null,de!==null&&(Le=f(de),ue=de.tag,de!==Le||ue!==5&&ue!==27&&ue!==6)&&(de=null)):(L=null,de=I),L!==de)){if(ue=uf,P="onMouseLeave",R="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(ue=ff,P="onPointerLeave",R="onPointerEnter",M="pointer"),Le=L==null?U:Ro(L),D=de==null?U:Ro(de),U=new ue(P,M+"leave",L,l,z),U.target=Le,U.relatedTarget=D,P=null,Ai(z)===I&&(ue=new ue(R,M+"enter",de,l,z),ue.target=D,ue.relatedTarget=Le,P=ue),Le=P,L&&de)t:{for(ue=L,R=de,M=0,D=ue;D;D=lo(D))M++;for(D=0,P=R;P;P=lo(P))D++;for(;0<M-D;)ue=lo(ue),M--;for(;0<D-M;)R=lo(R),D--;for(;M--;){if(ue===R||R!==null&&ue===R.alternate)break t;ue=lo(ue),R=lo(R)}ue=null}else ue=null;L!==null&&ep(G,U,L,ue,!1),de!==null&&Le!==null&&ep(G,Le,de,ue,!0)}}e:{if(U=I?Ro(I):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var ne=xf;else if(yf(U))if(Tf)ne=_v;else{ne=Sv;var Ce=Cv}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?I&&Hs(I.elementType)&&(ne=xf):ne=bv;if(ne&&(ne=ne(t,I))){vf(G,ne,l,z);break e}Ce&&Ce(t,U,I),t==="focusout"&&I&&U.type==="number"&&I.memoizedProps.value!=null&&Gs(U,"number",U.value)}switch(Ce=I?Ro(I):window,t){case"focusin":(yf(Ce)||Ce.contentEditable==="true")&&(Oi=Ce,or=I,zo=null);break;case"focusout":zo=or=Oi=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,Mf(G,l,z);break;case"selectionchange":if(Av)break;case"keydown":case"keyup":Mf(G,l,z)}var ae;if(er)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else Li?hf(t,l)&&(fe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(fe="onCompositionStart");fe&&(df&&l.locale!=="ko"&&(Li||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&Li&&(ae=sf()):(Rn=z,Qs="value"in Rn?Rn.value:Rn.textContent,Li=!0)),Ce=Pl(I,fe),0<Ce.length&&(fe=new cf(fe,t,null,l,z),G.push({event:fe,listeners:Ce}),ae?fe.data=ae:(ae=gf(l),ae!==null&&(fe.data=ae)))),(ae=gv?yv(t,l):vv(t,l))&&(fe=Pl(I,"onBeforeInput"),0<fe.length&&(Ce=new cf("onBeforeInput","beforeinput",null,l,z),G.push({event:Ce,listeners:fe}),Ce.data=ae)),r0(G,t,I,l,z)}Wm(G,i)})}function ma(t,i,l){return{instance:t,listener:i,currentTarget:l}}function Pl(t,i){for(var l=i+"Capture",r=[];t!==null;){var d=t,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Do(t,l),d!=null&&r.unshift(ma(t,d,g)),d=Do(t,i),d!=null&&r.push(ma(t,d,g))),t.tag===3)return r;t=t.return}return[]}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ep(t,i,l,r,d){for(var g=i._reactName,T=[];l!==null&&l!==r;){var S=l,A=S.alternate,I=S.stateNode;if(S=S.tag,A!==null&&A===r)break;S!==5&&S!==26&&S!==27||I===null||(A=I,d?(I=Do(l,g),I!=null&&T.unshift(ma(l,I,A))):d||(I=Do(l,g),I!=null&&T.push(ma(l,I,A)))),l=l.return}T.length!==0&&t.push({event:i,listeners:T})}var d0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function tp(t){return(typeof t=="string"?t:""+t).replace(d0,`
`).replace(m0,"")}function np(t,i){return i=tp(i),tp(t)===i}function $l(){}function Ue(t,i,l,r,d,g){switch(l){case"children":typeof r=="string"?i==="body"||i==="textarea"&&r===""||ki(t,r):(typeof r=="number"||typeof r=="bigint")&&i!=="body"&&ki(t,""+r);break;case"className":Ja(t,"class",r);break;case"tabIndex":Ja(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ja(t,l,r);break;case"style":of(t,r,g);break;case"data":if(i!=="object"){Ja(t,"data",r);break}case"src":case"href":if(r===""&&(i!=="a"||l!=="href")){t.removeAttribute(l);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Xa(""+r),t.setAttribute(l,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&Ue(t,i,"name",d.name,d,null),Ue(t,i,"formEncType",d.formEncType,d,null),Ue(t,i,"formMethod",d.formMethod,d,null),Ue(t,i,"formTarget",d.formTarget,d,null)):(Ue(t,i,"encType",d.encType,d,null),Ue(t,i,"method",d.method,d,null),Ue(t,i,"target",d.target,d,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Xa(""+r),t.setAttribute(l,r);break;case"onClick":r!=null&&(t.onclick=$l);break;case"onScroll":r!=null&&be("scroll",t);break;case"onScrollEnd":r!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(l=r.__html,l!=null){if(d.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}l=Xa(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""+r):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":r===!0?t.setAttribute(l,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,r):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(l,r):t.removeAttribute(l);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(l):t.setAttribute(l,r);break;case"popover":be("beforetoggle",t),be("toggle",t),Ya(t,"popover",r);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ya(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Gy.get(l)||l,Ya(t,l,r))}}function Mu(t,i,l,r,d,g){switch(l){case"style":of(t,r,g);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(l=r.__html,l!=null){if(d.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"children":typeof r=="string"?ki(t,r):(typeof r=="number"||typeof r=="bigint")&&ki(t,""+r);break;case"onScroll":r!=null&&be("scroll",t);break;case"onScrollEnd":r!=null&&be("scrollend",t);break;case"onClick":r!=null&&(t.onclick=$l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),i=l.slice(2,d?l.length-7:void 0),g=t[yt]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(i,g,d),typeof r=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(i,r,d);break e}l in t?t[l]=r:r===!0?t.setAttribute(l,""):Ya(t,l,r)}}}function ct(t,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var r=!1,d=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":r=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ue(t,i,g,T,l,null)}}d&&Ue(t,i,"srcSet",l.srcSet,l,null),r&&Ue(t,i,"src",l.src,l,null);return;case"input":be("invalid",t);var S=g=T=d=null,A=null,I=null;for(r in l)if(l.hasOwnProperty(r)){var z=l[r];if(z!=null)switch(r){case"name":d=z;break;case"type":T=z;break;case"checked":A=z;break;case"defaultChecked":I=z;break;case"value":g=z;break;case"defaultValue":S=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,i));break;default:Ue(t,i,r,z,l,null)}}jc(t,g,S,A,I,T,d,!1),Za(t);return;case"select":be("invalid",t),r=T=g=null;for(d in l)if(l.hasOwnProperty(d)&&(S=l[d],S!=null))switch(d){case"value":g=S;break;case"defaultValue":T=S;break;case"multiple":r=S;default:Ue(t,i,d,S,l,null)}i=g,l=T,t.multiple=!!r,i!=null?Di(t,!!r,i,!1):l!=null&&Di(t,!!r,l,!0);return;case"textarea":be("invalid",t),g=d=r=null;for(T in l)if(l.hasOwnProperty(T)&&(S=l[T],S!=null))switch(T){case"value":r=S;break;case"defaultValue":d=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:Ue(t,i,T,S,l,null)}tf(t,r,d,g),Za(t);return;case"option":for(A in l)if(l.hasOwnProperty(A)&&(r=l[A],r!=null))switch(A){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Ue(t,i,A,r,l,null)}return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(r=0;r<da.length;r++)be(da[r],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in l)if(l.hasOwnProperty(I)&&(r=l[I],r!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ue(t,i,I,r,l,null)}return;default:if(Hs(i)){for(z in l)l.hasOwnProperty(z)&&(r=l[z],r!==void 0&&Mu(t,i,z,r,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(r=l[S],r!=null&&Ue(t,i,S,r,l,null))}function p0(t,i,l,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,S=null,A=null,I=null,z=null;for(L in l){var G=l[L];if(l.hasOwnProperty(L)&&G!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":A=G;default:r.hasOwnProperty(L)||Ue(t,i,L,null,r,G)}}for(var U in r){var L=r[U];if(G=l[U],r.hasOwnProperty(U)&&(L!=null||G!=null))switch(U){case"type":g=L;break;case"name":d=L;break;case"checked":I=L;break;case"defaultChecked":z=L;break;case"value":T=L;break;case"defaultValue":S=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,i));break;default:L!==G&&Ue(t,i,U,L,r,G)}}$s(t,T,S,A,I,z,g,d);return;case"select":L=T=S=U=null;for(g in l)if(A=l[g],l.hasOwnProperty(g)&&A!=null)switch(g){case"value":break;case"multiple":L=A;default:r.hasOwnProperty(g)||Ue(t,i,g,null,r,A)}for(d in r)if(g=r[d],A=l[d],r.hasOwnProperty(d)&&(g!=null||A!=null))switch(d){case"value":U=g;break;case"defaultValue":S=g;break;case"multiple":T=g;default:g!==A&&Ue(t,i,d,g,r,A)}i=S,l=T,r=L,U!=null?Di(t,!!l,U,!1):!!r!=!!l&&(i!=null?Di(t,!!l,i,!0):Di(t,!!l,l?[]:"",!1));return;case"textarea":L=U=null;for(S in l)if(d=l[S],l.hasOwnProperty(S)&&d!=null&&!r.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ue(t,i,S,null,r,d)}for(T in r)if(d=r[T],g=l[T],r.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":U=d;break;case"defaultValue":L=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(a(91));break;default:d!==g&&Ue(t,i,T,d,r,g)}ef(t,U,L);return;case"option":for(var de in l)if(U=l[de],l.hasOwnProperty(de)&&U!=null&&!r.hasOwnProperty(de))switch(de){case"selected":t.selected=!1;break;default:Ue(t,i,de,null,r,U)}for(A in r)if(U=r[A],L=l[A],r.hasOwnProperty(A)&&U!==L&&(U!=null||L!=null))switch(A){case"selected":t.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Ue(t,i,A,U,r,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in l)U=l[ue],l.hasOwnProperty(ue)&&U!=null&&!r.hasOwnProperty(ue)&&Ue(t,i,ue,null,r,U);for(I in r)if(U=r[I],L=l[I],r.hasOwnProperty(I)&&U!==L&&(U!=null||L!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(137,i));break;default:Ue(t,i,I,U,r,L)}return;default:if(Hs(i)){for(var Le in l)U=l[Le],l.hasOwnProperty(Le)&&U!==void 0&&!r.hasOwnProperty(Le)&&Mu(t,i,Le,void 0,r,U);for(z in r)U=r[z],L=l[z],!r.hasOwnProperty(z)||U===L||U===void 0&&L===void 0||Mu(t,i,z,U,r,L);return}}for(var R in l)U=l[R],l.hasOwnProperty(R)&&U!=null&&!r.hasOwnProperty(R)&&Ue(t,i,R,null,r,U);for(G in r)U=r[G],L=l[G],!r.hasOwnProperty(G)||U===L||U==null&&L==null||Ue(t,i,G,U,r,L)}var Nu=null,Ru=null;function Gl(t){return t.nodeType===9?t:t.ownerDocument}function ip(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function op(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Du(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ku=null;function h0(){var t=window.event;return t&&t.type==="popstate"?t===ku?!1:(ku=t,!0):(ku=null,!1)}var ap=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(t){return lp.resolve(null).then(t).catch(v0)}:ap;function v0(t){setTimeout(function(){throw t})}function Yn(t){return t==="head"}function sp(t,i){var l=i,r=0,d=0;do{var g=l.nextSibling;if(t.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<r&&8>r){l=r;var T=t.ownerDocument;if(l&1&&pa(T.documentElement),l&2&&pa(T.body),l&4)for(l=T.head,pa(l),T=l.firstChild;T;){var S=T.nextSibling,A=T.nodeName;T[No]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=S}}if(d===0){t.removeChild(g),Sa(i);return}d--}else l==="$"||l==="$?"||l==="$!"?d++:r=l.charCodeAt(0)-48;else r=0;l=g}while(l);Sa(i)}function Iu(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Iu(l),qs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function x0(t,i,l,r){for(;t.nodeType===1;){var d=l;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[No])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Ht(t.nextSibling),t===null)break}return null}function T0(t,i,l){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Ht(t.nextSibling),t===null))return null;return t}function Uu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function C0(t,i){var l=t.ownerDocument;if(t.data!=="$?"||l.readyState==="complete")i();else{var r=function(){i(),l.removeEventListener("DOMContentLoaded",r)};l.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Ht(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Lu=null;function rp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return t;i--}else l==="/$"&&i++}t=t.previousSibling}return null}function up(t,i,l){switch(i=Gl(l),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function pa(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);qs(t)}var Bt=new Map,cp=new Set;function Hl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Tn=X.d;X.d={f:S0,r:b0,D:_0,C:E0,L:A0,m:w0,X:N0,S:M0,M:R0};function S0(){var t=Tn.f(),i=Ll();return t||i}function b0(t){var i=wi(t);i!==null&&i.tag===5&&i.type==="form"?Rd(i):Tn.r(t)}var so=typeof document>"u"?null:document;function fp(t,i,l){var r=so;if(r&&typeof i=="string"&&i){var d=It(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),cp.has(d)||(cp.add(d),t={rel:t,crossOrigin:l,href:i},r.querySelector(d)===null&&(i=r.createElement("link"),ct(i,"link",t),ot(i),r.head.appendChild(i)))}}function _0(t){Tn.D(t),fp("dns-prefetch",t,null)}function E0(t,i){Tn.C(t,i),fp("preconnect",t,i)}function A0(t,i,l){Tn.L(t,i,l);var r=so;if(r&&t&&i){var d='link[rel="preload"][as="'+It(i)+'"]';i==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+It(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+It(l.imageSizes)+'"]')):d+='[href="'+It(t)+'"]';var g=d;switch(i){case"style":g=ro(t);break;case"script":g=uo(t)}Bt.has(g)||(t=v({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:t,as:i},l),Bt.set(g,t),r.querySelector(d)!==null||i==="style"&&r.querySelector(ha(g))||i==="script"&&r.querySelector(ga(g))||(i=r.createElement("link"),ct(i,"link",t),ot(i),r.head.appendChild(i)))}}function w0(t,i){Tn.m(t,i);var l=so;if(l&&t){var r=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+It(r)+'"][href="'+It(t)+'"]',g=d;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=uo(t)}if(!Bt.has(g)&&(t=v({rel:"modulepreload",href:t},i),Bt.set(g,t),l.querySelector(d)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ga(g)))return}r=l.createElement("link"),ct(r,"link",t),ot(r),l.head.appendChild(r)}}}function M0(t,i,l){Tn.S(t,i,l);var r=so;if(r&&t){var d=Mi(r).hoistableStyles,g=ro(t);i=i||"default";var T=d.get(g);if(!T){var S={loading:0,preload:null};if(T=r.querySelector(ha(g)))S.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},l),(l=Bt.get(g))&&Ou(t,l);var A=T=r.createElement("link");ot(A),ct(A,"link",t),A._p=new Promise(function(I,z){A.onload=I,A.onerror=z}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Fl(T,i,r)}T={type:"stylesheet",instance:T,count:1,state:S},d.set(g,T)}}}function N0(t,i){Tn.X(t,i);var l=so;if(l&&t){var r=Mi(l).hoistableScripts,d=uo(t),g=r.get(d);g||(g=l.querySelector(ga(d)),g||(t=v({src:t,async:!0},i),(i=Bt.get(d))&&Vu(t,i),g=l.createElement("script"),ot(g),ct(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(d,g))}}function R0(t,i){Tn.M(t,i);var l=so;if(l&&t){var r=Mi(l).hoistableScripts,d=uo(t),g=r.get(d);g||(g=l.querySelector(ga(d)),g||(t=v({src:t,async:!0,type:"module"},i),(i=Bt.get(d))&&Vu(t,i),g=l.createElement("script"),ot(g),ct(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(d,g))}}function dp(t,i,l,r){var d=(d=ge.current)?Hl(d):null;if(!d)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=ro(l.href),l=Mi(d).hoistableStyles,r=l.get(i),r||(r={type:"style",instance:null,count:0,state:null},l.set(i,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=ro(l.href);var g=Mi(d).hoistableStyles,T=g.get(t);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,T),(g=d.querySelector(ha(t)))&&!g._p&&(T.instance=g,T.state.loading=5),Bt.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bt.set(t,l),g||D0(d,t,l,T.state))),i&&r===null)throw Error(a(528,""));return T}if(i&&r!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(l),l=Mi(d).hoistableScripts,r=l.get(i),r||(r={type:"script",instance:null,count:0,state:null},l.set(i,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ro(t){return'href="'+It(t)+'"'}function ha(t){return'link[rel="stylesheet"]['+t+"]"}function mp(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function D0(t,i,l,r){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?r.loading=1:(i=t.createElement("link"),r.preload=i,i.addEventListener("load",function(){return r.loading|=1}),i.addEventListener("error",function(){return r.loading|=2}),ct(i,"link",l),ot(i),t.head.appendChild(i))}function uo(t){return'[src="'+It(t)+'"]'}function ga(t){return"script[async]"+t}function pp(t,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var r=t.querySelector('style[data-href~="'+It(l.href)+'"]');if(r)return i.instance=r,ot(r),r;var d=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),ot(r),ct(r,"style",d),Fl(r,l.precedence,t),i.instance=r;case"stylesheet":d=ro(l.href);var g=t.querySelector(ha(d));if(g)return i.state.loading|=4,i.instance=g,ot(g),g;r=mp(l),(d=Bt.get(d))&&Ou(r,d),g=(t.ownerDocument||t).createElement("link"),ot(g);var T=g;return T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),ct(g,"link",r),i.state.loading|=4,Fl(g,l.precedence,t),i.instance=g;case"script":return g=uo(l.src),(d=t.querySelector(ga(g)))?(i.instance=d,ot(d),d):(r=l,(d=Bt.get(g))&&(r=v({},l),Vu(r,d)),t=t.ownerDocument||t,d=t.createElement("script"),ot(d),ct(d,"link",r),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(r=i.instance,i.state.loading|=4,Fl(r,l.precedence,t));return i.instance}function Fl(t,i,l){for(var r=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=r.length?r[r.length-1]:null,g=d,T=0;T<r.length;T++){var S=r[T];if(S.dataset.precedence===i)g=S;else if(g!==d)break}g?g.parentNode.insertBefore(t,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(t,i.firstChild))}function Ou(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Vu(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Yl=null;function hp(t,i,l){if(Yl===null){var r=new Map,d=Yl=new Map;d.set(l,r)}else d=Yl,r=d.get(l),r||(r=new Map,d.set(l,r));if(r.has(t))return r;for(r.set(t,null),l=l.getElementsByTagName(t),d=0;d<l.length;d++){var g=l[d];if(!(g[No]||g[ft]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(i)||"";T=t+T;var S=r.get(T);S?S.push(g):r.set(T,[g])}}return r}function gp(t,i,l){t=t.ownerDocument||t,t.head.insertBefore(l,i==="title"?t.querySelector("head > title"):null)}function k0(t,i,l){if(l===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function yp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ya=null;function I0(){}function U0(t,i,l){if(ya===null)throw Error(a(475));var r=ya;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=ro(l.href),g=t.querySelector(ha(d));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=Jl.bind(r),t.then(r,r)),i.state.loading|=4,i.instance=g,ot(g);return}g=t.ownerDocument||t,l=mp(l),(d=Bt.get(d))&&Ou(l,d),g=g.createElement("link"),ot(g);var T=g;T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),ct(g,"link",l),i.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(r.count++,i=Jl.bind(r),t.addEventListener("load",i),t.addEventListener("error",i))}}function L0(){if(ya===null)throw Error(a(475));var t=ya;return t.stylesheets&&t.count===0&&qu(t,t.stylesheets),0<t.count?function(i){var l=setTimeout(function(){if(t.stylesheets&&qu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l)}}:null}function Jl(){if(this.count--,this.count===0){if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zl=null;function qu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zl=new Map,i.forEach(O0,t),Zl=null,Jl.call(t))}function O0(t,i){if(!(i.state.loading&4)){var l=Zl.get(t);if(l)var r=l.get(null);else{l=new Map,Zl.set(t,l);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),r=T)}r&&l.set(null,r)}d=i.instance,T=d.getAttribute("data-precedence"),g=l.get(T)||r,g===r&&l.set(null,d),l.set(T,d),this.count++,r=Jl.bind(this),d.addEventListener("load",r),d.addEventListener("error",r),g?g.parentNode.insertBefore(d,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var va={$$typeof:F,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function V0(t,i,l,r,d,g,T,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=r,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function vp(t,i,l,r,d,g,T,S,A,I,z,G){return t=new V0(t,i,l,T,S,A,I,G),i=1,g===!0&&(i|=24),g=At(3,null,null,i),t.current=g,g.stateNode=t,i=xr(),i.refCount++,t.pooledCache=i,i.refCount++,g.memoizedState={element:r,isDehydrated:l,cache:i},br(g),t}function xp(t){return t?(t=Bi,t):Bi}function Tp(t,i,l,r,d,g){d=xp(d),r.context===null?r.context=d:r.pendingContext=d,r=In(i),r.payload={element:l},g=g===void 0?null:g,g!==null&&(r.callback=g),l=Un(t,r,i),l!==null&&(Dt(l,t,i),Zo(l,t,i))}function Cp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function zu(t,i){Cp(t,i),(t=t.alternate)&&Cp(t,i)}function Sp(t){if(t.tag===13){var i=zi(t,67108864);i!==null&&Dt(i,t,67108864),zu(t,67108864)}}var Ql=!0;function q0(t,i,l,r){var d=V.T;V.T=null;var g=X.p;try{X.p=2,Bu(t,i,l,r)}finally{X.p=g,V.T=d}}function z0(t,i,l,r){var d=V.T;V.T=null;var g=X.p;try{X.p=8,Bu(t,i,l,r)}finally{X.p=g,V.T=d}}function Bu(t,i,l,r){if(Ql){var d=Pu(r);if(d===null)wu(t,i,r,Xl,l),_p(t,r);else if(P0(d,t,i,l,r))r.stopPropagation();else if(_p(t,r),i&4&&-1<B0.indexOf(t)){for(;d!==null;){var g=wi(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=ii(g.pendingLanes);if(T!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var A=1<<31-_t(T);S.entanglements[1]|=A,T&=~A}jt(g),(De&6)===0&&(Il=Zt()+500,fa(0))}}break;case 13:S=zi(g,2),S!==null&&Dt(S,g,2),Ll(),zu(g,2)}if(g=Pu(r),g===null&&wu(t,i,r,Xl,l),g===d)break;d=g}d!==null&&r.stopPropagation()}else wu(t,i,r,null,l)}}function Pu(t){return t=Ys(t),$u(t)}var Xl=null;function $u(t){if(Xl=null,t=Ai(t),t!==null){var i=f(t);if(i===null)t=null;else{var l=i.tag;if(l===13){if(t=m(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Xl=t,null}function bp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ey()){case Oc:return 2;case Vc:return 8;case $a:case Ay:return 32;case qc:return 268435456;default:return 32}default:return 32}}var Gu=!1,Jn=null,Zn=null,Qn=null,xa=new Map,Ta=new Map,Xn=[],B0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _p(t,i){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":xa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(i.pointerId)}}function Ca(t,i,l,r,d,g){return t===null||t.nativeEvent!==g?(t={blockedOn:i,domEventName:l,eventSystemFlags:r,nativeEvent:g,targetContainers:[d]},i!==null&&(i=wi(i),i!==null&&Sp(i)),t):(t.eventSystemFlags|=r,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function P0(t,i,l,r,d){switch(i){case"focusin":return Jn=Ca(Jn,t,i,l,r,d),!0;case"dragenter":return Zn=Ca(Zn,t,i,l,r,d),!0;case"mouseover":return Qn=Ca(Qn,t,i,l,r,d),!0;case"pointerover":var g=d.pointerId;return xa.set(g,Ca(xa.get(g)||null,t,i,l,r,d)),!0;case"gotpointercapture":return g=d.pointerId,Ta.set(g,Ca(Ta.get(g)||null,t,i,l,r,d)),!0}return!1}function Ep(t){var i=Ai(t.target);if(i!==null){var l=f(i);if(l!==null){if(i=l.tag,i===13){if(i=m(l),i!==null){t.blockedOn=i,Uy(t.priority,function(){if(l.tag===13){var r=Rt();r=Ls(r);var d=zi(l,r);d!==null&&Dt(d,l,r),zu(l,r)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kl(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=Pu(t.nativeEvent);if(l===null){l=t.nativeEvent;var r=new l.constructor(l.type,l);Fs=r,l.target.dispatchEvent(r),Fs=null}else return i=wi(l),i!==null&&Sp(i),t.blockedOn=l,!1;i.shift()}return!0}function Ap(t,i,l){Kl(t)&&l.delete(i)}function $0(){Gu=!1,Jn!==null&&Kl(Jn)&&(Jn=null),Zn!==null&&Kl(Zn)&&(Zn=null),Qn!==null&&Kl(Qn)&&(Qn=null),xa.forEach(Ap),Ta.forEach(Ap)}function Wl(t,i){t.blockedOn===i&&(t.blockedOn=null,Gu||(Gu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$0)))}var jl=null;function wp(t){jl!==t&&(jl=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){jl===t&&(jl=null);for(var i=0;i<t.length;i+=3){var l=t[i],r=t[i+1],d=t[i+2];if(typeof r!="function"){if($u(r||l)===null)continue;break}var g=wi(l);g!==null&&(t.splice(i,3),i-=3,$r(g,{pending:!0,data:d,method:l.method,action:r},r,d))}}))}function Sa(t){function i(A){return Wl(A,t)}Jn!==null&&Wl(Jn,t),Zn!==null&&Wl(Zn,t),Qn!==null&&Wl(Qn,t),xa.forEach(i),Ta.forEach(i);for(var l=0;l<Xn.length;l++){var r=Xn[l];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Xn.length&&(l=Xn[0],l.blockedOn===null);)Ep(l),l.blockedOn===null&&Xn.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(r=0;r<l.length;r+=3){var d=l[r],g=l[r+1],T=d[yt]||null;if(typeof g=="function")T||wp(l);else if(T){var S=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[yt]||null)S=T.formAction;else if($u(d)!==null)continue}else S=T.action;typeof S=="function"?l[r+1]=S:(l.splice(r,3),r-=3),wp(l)}}}function Hu(t){this._internalRoot=t}es.prototype.render=Hu.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,r=Rt();Tp(l,r,t,i,null,null)},es.prototype.unmount=Hu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Tp(t.current,2,null,t,null,null),Ll(),i[Ei]=null}};function es(t){this._internalRoot=t}es.prototype.unstable_scheduleHydration=function(t){if(t){var i=Gc();t={blockedOn:null,target:t,priority:i};for(var l=0;l<Xn.length&&i!==0&&i<Xn[l].priority;l++);Xn.splice(l,0,t),l===0&&Ep(t)}};var Mp=e.version;if(Mp!=="19.1.0")throw Error(a(527,Mp,"19.1.0"));X.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(i),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var G0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ts.isDisabled&&ts.supportsFiber)try{Ao=ts.inject(G0),bt=ts}catch{}}return _a.createRoot=function(t,i){if(!s(t))throw Error(a(299));var l=!1,r="",d=Hd,g=Fd,T=Yd,S=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=vp(t,1,!1,null,null,l,r,d,g,T,S,null),t[Ei]=i.current,Au(t),new Hu(i)},_a.hydrateRoot=function(t,i,l){if(!s(t))throw Error(a(299));var r=!1,d="",g=Hd,T=Fd,S=Yd,A=null,I=null;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(A=l.unstable_transitionCallbacks),l.formState!==void 0&&(I=l.formState)),i=vp(t,1,!0,i,l??null,r,d,g,T,S,A,I),i.context=xp(null),l=i.current,r=Rt(),r=Ls(r),d=In(r),d.callback=null,Un(l,d,r),l=r,i.current.lanes=l,Mo(i,l),jt(i),t[Ei]=i.current,Au(t),new es(i)},_a.version="19.1.0",_a}var qp;function j0(){if(qp)return Ju.exports;qp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ju.exports=W0(),Ju.exports}var ex=j0();const tx=Tg(ex);var Ne;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function o(s){throw new Error}n.assertNever=o,n.arrayToEnum=s=>{const f={};for(const m of s)f[m]=m;return f},n.getValidEnumValues=s=>{const f=n.objectKeys(s).filter(p=>typeof s[s[p]]!="number"),m={};for(const p of f)m[p]=s[p];return n.objectValues(m)},n.objectValues=s=>n.objectKeys(s).map(function(f){return s[f]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const f=[];for(const m in s)Object.prototype.hasOwnProperty.call(s,m)&&f.push(m);return f},n.find=(s,f)=>{for(const m of s)if(f(m))return m},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,f=" | "){return s.map(m=>typeof m=="string"?`'${m}'`:m).join(f)}n.joinValues=a,n.jsonStringifyReplacer=(s,f)=>typeof f=="bigint"?f.toString():f})(Ne||(Ne={}));var zp;(function(n){n.mergeShapes=(e,o)=>({...e,...o})})(zp||(zp={}));const ie=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wn=n=>{switch(typeof n){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(n)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(n)?ie.array:n===null?ie.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ie.promise:typeof Map<"u"&&n instanceof Map?ie.map:typeof Set<"u"&&n instanceof Set?ie.set:typeof Date<"u"&&n instanceof Date?ie.date:ie.object;default:return ie.unknown}},J=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const o=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,o):this.__proto__=o,this.name="ZodError",this.issues=e}format(e){const o=e||function(f){return f.message},a={_errors:[]},s=f=>{for(const m of f.issues)if(m.code==="invalid_union")m.unionErrors.map(s);else if(m.code==="invalid_return_type")s(m.returnTypeError);else if(m.code==="invalid_arguments")s(m.argumentsError);else if(m.path.length===0)a._errors.push(o(m));else{let p=a,y=0;for(;y<m.path.length;){const h=m.path[y];y===m.path.length-1?(p[h]=p[h]||{_errors:[]},p[h]._errors.push(o(m))):p[h]=p[h]||{_errors:[]},p=p[h],y++}}};return s(this),a}static assert(e){if(!(e instanceof bn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=o=>o.message){const o={},a=[];for(const s of this.issues)s.path.length>0?(o[s.path[0]]=o[s.path[0]]||[],o[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:o}}get formErrors(){return this.flatten()}}bn.create=n=>new bn(n);const ic=(n,e)=>{let o;switch(n.code){case J.invalid_type:n.received===ie.undefined?o="Required":o=`Expected ${n.expected}, received ${n.received}`;break;case J.invalid_literal:o=`Invalid literal value, expected ${JSON.stringify(n.expected,Ne.jsonStringifyReplacer)}`;break;case J.unrecognized_keys:o=`Unrecognized key(s) in object: ${Ne.joinValues(n.keys,", ")}`;break;case J.invalid_union:o="Invalid input";break;case J.invalid_union_discriminator:o=`Invalid discriminator value. Expected ${Ne.joinValues(n.options)}`;break;case J.invalid_enum_value:o=`Invalid enum value. Expected ${Ne.joinValues(n.options)}, received '${n.received}'`;break;case J.invalid_arguments:o="Invalid function arguments";break;case J.invalid_return_type:o="Invalid function return type";break;case J.invalid_date:o="Invalid date";break;case J.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(o=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(o=`${o} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?o=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?o=`Invalid input: must end with "${n.validation.endsWith}"`:Ne.assertNever(n.validation):n.validation!=="regex"?o=`Invalid ${n.validation}`:o="Invalid";break;case J.too_small:n.type==="array"?o=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?o=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?o=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?o=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:o="Invalid input";break;case J.too_big:n.type==="array"?o=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?o=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?o=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?o=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?o=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:o="Invalid input";break;case J.custom:o="Invalid input";break;case J.invalid_intersection_types:o="Intersection results could not be merged";break;case J.not_multiple_of:o=`Number must be a multiple of ${n.multipleOf}`;break;case J.not_finite:o="Number must be finite";break;default:o=e.defaultError,Ne.assertNever(n)}return{message:o}};let nx=ic;function ix(){return nx}const ox=n=>{const{data:e,path:o,errorMaps:a,issueData:s}=n,f=[...o,...s.path||[]],m={...s,path:f};if(s.message!==void 0)return{...s,path:f,message:s.message};let p="";const y=a.filter(h=>!!h).slice().reverse();for(const h of y)p=h(m,{data:e,defaultError:p}).message;return{...s,path:f,message:p}};function W(n,e){const o=ix(),a=ox({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,o,o===ic?void 0:ic].filter(s=>!!s)});n.common.issues.push(a)}class gt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,o){const a=[];for(const s of o){if(s.status==="aborted")return he;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,o){const a=[];for(const s of o){const f=await s.key,m=await s.value;a.push({key:f,value:m})}return gt.mergeObjectSync(e,a)}static mergeObjectSync(e,o){const a={};for(const s of o){const{key:f,value:m}=s;if(f.status==="aborted"||m.status==="aborted")return he;f.status==="dirty"&&e.dirty(),m.status==="dirty"&&e.dirty(),f.value!=="__proto__"&&(typeof m.value<"u"||s.alwaysSet)&&(a[f.value]=m.value)}return{status:e.value,value:a}}}const he=Object.freeze({status:"aborted"}),Ma=n=>({status:"dirty",value:n}),Pt=n=>({status:"valid",value:n}),Bp=n=>n.status==="aborted",Pp=n=>n.status==="dirty",go=n=>n.status==="valid",fs=n=>typeof Promise<"u"&&n instanceof Promise;var oe;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(oe||(oe={}));class on{constructor(e,o,a,s){this._cachedPath=[],this.parent=e,this.data=o,this._path=a,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $p=(n,e)=>{if(go(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const o=new bn(n.common.issues);return this._error=o,this._error}}};function ve(n){if(!n)return{};const{errorMap:e,invalid_type_error:o,required_error:a,description:s}=n;if(e&&(o||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(m,p)=>{const{message:y}=n;return m.code==="invalid_enum_value"?{message:y??p.defaultError}:typeof p.data>"u"?{message:y??a??p.defaultError}:m.code!=="invalid_type"?{message:p.defaultError}:{message:y??o??p.defaultError}},description:s}}class Ee{get description(){return this._def.description}_getType(e){return Wn(e.data)}_getOrReturnCtx(e,o){return o||{common:e.parent.common,data:e.data,parsedType:Wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gt,ctx:{common:e.parent.common,data:e.data,parsedType:Wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const o=this._parse(e);if(fs(o))throw new Error("Synchronous parse encountered promise.");return o}_parseAsync(e){const o=this._parse(e);return Promise.resolve(o)}parse(e,o){const a=this.safeParse(e,o);if(a.success)return a.data;throw a.error}safeParse(e,o){const a={common:{issues:[],async:(o==null?void 0:o.async)??!1,contextualErrorMap:o==null?void 0:o.errorMap},path:(o==null?void 0:o.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wn(e)},s=this._parseSync({data:e,path:a.path,parent:a});return $p(a,s)}"~validate"(e){var a,s;const o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wn(e)};if(!this["~standard"].async)try{const f=this._parseSync({data:e,path:[],parent:o});return go(f)?{value:f.value}:{issues:o.common.issues}}catch(f){(s=(a=f==null?void 0:f.message)==null?void 0:a.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(f=>go(f)?{value:f.value}:{issues:o.common.issues})}async parseAsync(e,o){const a=await this.safeParseAsync(e,o);if(a.success)return a.data;throw a.error}async safeParseAsync(e,o){const a={common:{issues:[],contextualErrorMap:o==null?void 0:o.errorMap,async:!0},path:(o==null?void 0:o.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wn(e)},s=this._parse({data:e,path:a.path,parent:a}),f=await(fs(s)?s:Promise.resolve(s));return $p(a,f)}refine(e,o){const a=s=>typeof o=="string"||typeof o>"u"?{message:o}:typeof o=="function"?o(s):o;return this._refinement((s,f)=>{const m=e(s),p=()=>f.addIssue({code:J.custom,...a(s)});return typeof Promise<"u"&&m instanceof Promise?m.then(y=>y?!0:(p(),!1)):m?!0:(p(),!1)})}refinement(e,o){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof o=="function"?o(a,s):o),!1))}_refinement(e){return new xo({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:o=>this["~validate"](o)}}optional(){return jn.create(this,this._def)}nullable(){return To.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nn.create(this)}promise(){return gs.create(this,this._def)}or(e){return ms.create([this,e],this._def)}and(e){return ps.create(this,e,this._def)}transform(e){return new xo({...ve(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const o=typeof e=="function"?e:()=>e;return new sc({...ve(this._def),innerType:this,defaultValue:o,typeName:pe.ZodDefault})}brand(){return new wx({typeName:pe.ZodBranded,type:this,...ve(this._def)})}catch(e){const o=typeof e=="function"?e:()=>e;return new rc({...ve(this._def),innerType:this,catchValue:o,typeName:pe.ZodCatch})}describe(e){const o=this.constructor;return new o({...this._def,description:e})}pipe(e){return Ec.create(this,e)}readonly(){return uc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ax=/^c[^\s-]{8,}$/i,lx=/^[0-9a-z]+$/,sx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ux=/^[a-z0-9_-]{21}$/i,cx=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fx=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dx=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mx="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ku;const px=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Cg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Tx=new RegExp(`^${Cg}$`);function Sg(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const o=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${o}`}function Cx(n){return new RegExp(`^${Sg(n)}$`)}function Sx(n){let e=`${Cg}T${Sg(n)}`;const o=[];return o.push(n.local?"Z?":"Z"),n.offset&&o.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${o.join("|")})`,new RegExp(`^${e}$`)}function bx(n,e){return!!((e==="v4"||!e)&&px.test(n)||(e==="v6"||!e)&&gx.test(n))}function _x(n,e){if(!cx.test(n))return!1;try{const[o]=n.split("."),a=o.replace(/-/g,"+").replace(/_/g,"/").padEnd(o.length+(4-o.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Ex(n,e){return!!((e==="v4"||!e)&&hx.test(n)||(e==="v6"||!e)&&yx.test(n))}class en extends Ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){const f=this._getOrReturnCtx(e);return W(f,{code:J.invalid_type,expected:ie.string,received:f.parsedType}),he}const a=new gt;let s;for(const f of this._def.checks)if(f.kind==="min")e.data.length<f.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:J.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),a.dirty());else if(f.kind==="max")e.data.length>f.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:J.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),a.dirty());else if(f.kind==="length"){const m=e.data.length>f.value,p=e.data.length<f.value;(m||p)&&(s=this._getOrReturnCtx(e,s),m?W(s,{code:J.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}):p&&W(s,{code:J.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}),a.dirty())}else if(f.kind==="email")dx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"email",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="emoji")Ku||(Ku=new RegExp(mx,"u")),Ku.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"emoji",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="uuid")rx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"uuid",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="nanoid")ux.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"nanoid",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="cuid")ax.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cuid",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="cuid2")lx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cuid2",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="ulid")sx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"ulid",code:J.invalid_string,message:f.message}),a.dirty());else if(f.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),W(s,{validation:"url",code:J.invalid_string,message:f.message}),a.dirty()}else f.kind==="regex"?(f.regex.lastIndex=0,f.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"regex",code:J.invalid_string,message:f.message}),a.dirty())):f.kind==="trim"?e.data=e.data.trim():f.kind==="includes"?e.data.includes(f.value,f.position)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:{includes:f.value,position:f.position},message:f.message}),a.dirty()):f.kind==="toLowerCase"?e.data=e.data.toLowerCase():f.kind==="toUpperCase"?e.data=e.data.toUpperCase():f.kind==="startsWith"?e.data.startsWith(f.value)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:{startsWith:f.value},message:f.message}),a.dirty()):f.kind==="endsWith"?e.data.endsWith(f.value)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:{endsWith:f.value},message:f.message}),a.dirty()):f.kind==="datetime"?Sx(f).test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:"datetime",message:f.message}),a.dirty()):f.kind==="date"?Tx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:"date",message:f.message}),a.dirty()):f.kind==="time"?Cx(f).test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:J.invalid_string,validation:"time",message:f.message}),a.dirty()):f.kind==="duration"?fx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"duration",code:J.invalid_string,message:f.message}),a.dirty()):f.kind==="ip"?bx(e.data,f.version)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"ip",code:J.invalid_string,message:f.message}),a.dirty()):f.kind==="jwt"?_x(e.data,f.alg)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"jwt",code:J.invalid_string,message:f.message}),a.dirty()):f.kind==="cidr"?Ex(e.data,f.version)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cidr",code:J.invalid_string,message:f.message}),a.dirty()):f.kind==="base64"?vx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"base64",code:J.invalid_string,message:f.message}),a.dirty()):f.kind==="base64url"?xx.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"base64url",code:J.invalid_string,message:f.message}),a.dirty()):Ne.assertNever(f);return{status:a.value,value:e.data}}_regex(e,o,a){return this.refinement(s=>e.test(s),{validation:o,code:J.invalid_string,...oe.errToObj(a)})}_addCheck(e){return new en({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...oe.errToObj(e)})}regex(e,o){return this._addCheck({kind:"regex",regex:e,...oe.errToObj(o)})}includes(e,o){return this._addCheck({kind:"includes",value:e,position:o==null?void 0:o.position,...oe.errToObj(o==null?void 0:o.message)})}startsWith(e,o){return this._addCheck({kind:"startsWith",value:e,...oe.errToObj(o)})}endsWith(e,o){return this._addCheck({kind:"endsWith",value:e,...oe.errToObj(o)})}min(e,o){return this._addCheck({kind:"min",value:e,...oe.errToObj(o)})}max(e,o){return this._addCheck({kind:"max",value:e,...oe.errToObj(o)})}length(e,o){return this._addCheck({kind:"length",value:e,...oe.errToObj(o)})}nonempty(e){return this.min(1,oe.errToObj(e))}trim(){return new en({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new en({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new en({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxLength(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}}en.create=n=>new en({checks:[],typeName:pe.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...ve(n)});function Ax(n,e){const o=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=o>a?o:a,f=Number.parseInt(n.toFixed(s).replace(".","")),m=Number.parseInt(e.toFixed(s).replace(".",""));return f%m/10**s}class Si extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){const f=this._getOrReturnCtx(e);return W(f,{code:J.invalid_type,expected:ie.number,received:f.parsedType}),he}let a;const s=new gt;for(const f of this._def.checks)f.kind==="int"?Ne.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),W(a,{code:J.invalid_type,expected:"integer",received:"float",message:f.message}),s.dirty()):f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),s.dirty()):f.kind==="multipleOf"?Ax(e.data,f.value)!==0&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):f.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),W(a,{code:J.not_finite,message:f.message}),s.dirty()):Ne.assertNever(f);return{status:s.value,value:e.data}}gte(e,o){return this.setLimit("min",e,!0,oe.toString(o))}gt(e,o){return this.setLimit("min",e,!1,oe.toString(o))}lte(e,o){return this.setLimit("max",e,!0,oe.toString(o))}lt(e,o){return this.setLimit("max",e,!1,oe.toString(o))}setLimit(e,o,a,s){return new Si({...this._def,checks:[...this._def.checks,{kind:e,value:o,inclusive:a,message:oe.toString(s)}]})}_addCheck(e){return new Si({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oe.toString(e)})}multipleOf(e,o){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(o)})}finite(e){return this._addCheck({kind:"finite",message:oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oe.toString(e)})}get minValue(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxValue(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ne.isInteger(e.value))}get isFinite(){let e=null,o=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(o===null||a.value>o)&&(o=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(o)&&Number.isFinite(e)}}Si.create=n=>new Si({checks:[],typeName:pe.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ve(n)});class bi extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ie.bigint)return this._getInvalidInput(e);let a;const s=new gt;for(const f of this._def.checks)f.kind==="min"?(f.inclusive?e.data<f.value:e.data<=f.value)&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.too_small,type:"bigint",minimum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="max"?(f.inclusive?e.data>f.value:e.data>=f.value)&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.too_big,type:"bigint",maximum:f.value,inclusive:f.inclusive,message:f.message}),s.dirty()):f.kind==="multipleOf"?e.data%f.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),W(a,{code:J.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):Ne.assertNever(f);return{status:s.value,value:e.data}}_getInvalidInput(e){const o=this._getOrReturnCtx(e);return W(o,{code:J.invalid_type,expected:ie.bigint,received:o.parsedType}),he}gte(e,o){return this.setLimit("min",e,!0,oe.toString(o))}gt(e,o){return this.setLimit("min",e,!1,oe.toString(o))}lte(e,o){return this.setLimit("max",e,!0,oe.toString(o))}lt(e,o){return this.setLimit("max",e,!1,oe.toString(o))}setLimit(e,o,a,s){return new bi({...this._def,checks:[...this._def.checks,{kind:e,value:o,inclusive:a,message:oe.toString(s)}]})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}multipleOf(e,o){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(o)})}get minValue(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e}get maxValue(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e}}bi.create=n=>new bi({checks:[],typeName:pe.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...ve(n)});class ds extends Ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.boolean,received:a.parsedType}),he}return Pt(e.data)}}ds.create=n=>new ds({typeName:pe.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ve(n)});class yo extends Ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){const f=this._getOrReturnCtx(e);return W(f,{code:J.invalid_type,expected:ie.date,received:f.parsedType}),he}if(Number.isNaN(e.data.getTime())){const f=this._getOrReturnCtx(e);return W(f,{code:J.invalid_date}),he}const a=new gt;let s;for(const f of this._def.checks)f.kind==="min"?e.data.getTime()<f.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:J.too_small,message:f.message,inclusive:!0,exact:!1,minimum:f.value,type:"date"}),a.dirty()):f.kind==="max"?e.data.getTime()>f.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:J.too_big,message:f.message,inclusive:!0,exact:!1,maximum:f.value,type:"date"}),a.dirty()):Ne.assertNever(f);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new yo({...this._def,checks:[...this._def.checks,e]})}min(e,o){return this._addCheck({kind:"min",value:e.getTime(),message:oe.toString(o)})}max(e,o){return this._addCheck({kind:"max",value:e.getTime(),message:oe.toString(o)})}get minDate(){let e=null;for(const o of this._def.checks)o.kind==="min"&&(e===null||o.value>e)&&(e=o.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const o of this._def.checks)o.kind==="max"&&(e===null||o.value<e)&&(e=o.value);return e!=null?new Date(e):null}}yo.create=n=>new yo({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:pe.ZodDate,...ve(n)});class Gp extends Ee{_parse(e){if(this._getType(e)!==ie.symbol){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.symbol,received:a.parsedType}),he}return Pt(e.data)}}Gp.create=n=>new Gp({typeName:pe.ZodSymbol,...ve(n)});class Hp extends Ee{_parse(e){if(this._getType(e)!==ie.undefined){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.undefined,received:a.parsedType}),he}return Pt(e.data)}}Hp.create=n=>new Hp({typeName:pe.ZodUndefined,...ve(n)});class Fp extends Ee{_parse(e){if(this._getType(e)!==ie.null){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.null,received:a.parsedType}),he}return Pt(e.data)}}Fp.create=n=>new Fp({typeName:pe.ZodNull,...ve(n)});class Yp extends Ee{constructor(){super(...arguments),this._any=!0}_parse(e){return Pt(e.data)}}Yp.create=n=>new Yp({typeName:pe.ZodAny,...ve(n)});class oc extends Ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pt(e.data)}}oc.create=n=>new oc({typeName:pe.ZodUnknown,...ve(n)});class ei extends Ee{_parse(e){const o=this._getOrReturnCtx(e);return W(o,{code:J.invalid_type,expected:ie.never,received:o.parsedType}),he}}ei.create=n=>new ei({typeName:pe.ZodNever,...ve(n)});class Jp extends Ee{_parse(e){if(this._getType(e)!==ie.undefined){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.void,received:a.parsedType}),he}return Pt(e.data)}}Jp.create=n=>new Jp({typeName:pe.ZodVoid,...ve(n)});class nn extends Ee{_parse(e){const{ctx:o,status:a}=this._processInputParams(e),s=this._def;if(o.parsedType!==ie.array)return W(o,{code:J.invalid_type,expected:ie.array,received:o.parsedType}),he;if(s.exactLength!==null){const m=o.data.length>s.exactLength.value,p=o.data.length<s.exactLength.value;(m||p)&&(W(o,{code:m?J.too_big:J.too_small,minimum:p?s.exactLength.value:void 0,maximum:m?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&o.data.length<s.minLength.value&&(W(o,{code:J.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&o.data.length>s.maxLength.value&&(W(o,{code:J.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),o.common.async)return Promise.all([...o.data].map((m,p)=>s.type._parseAsync(new on(o,m,o.path,p)))).then(m=>gt.mergeArray(a,m));const f=[...o.data].map((m,p)=>s.type._parseSync(new on(o,m,o.path,p)));return gt.mergeArray(a,f)}get element(){return this._def.type}min(e,o){return new nn({...this._def,minLength:{value:e,message:oe.toString(o)}})}max(e,o){return new nn({...this._def,maxLength:{value:e,message:oe.toString(o)}})}length(e,o){return new nn({...this._def,exactLength:{value:e,message:oe.toString(o)}})}nonempty(e){return this.min(1,e)}}nn.create=(n,e)=>new nn({type:n,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...ve(e)});function fo(n){if(n instanceof We){const e={};for(const o in n.shape){const a=n.shape[o];e[o]=jn.create(fo(a))}return new We({...n._def,shape:()=>e})}else return n instanceof nn?new nn({...n._def,type:fo(n.element)}):n instanceof jn?jn.create(fo(n.unwrap())):n instanceof To?To.create(fo(n.unwrap())):n instanceof _i?_i.create(n.items.map(e=>fo(e))):n}class We extends Ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),o=Ne.objectKeys(e);return this._cached={shape:e,keys:o},this._cached}_parse(e){if(this._getType(e)!==ie.object){const h=this._getOrReturnCtx(e);return W(h,{code:J.invalid_type,expected:ie.object,received:h.parsedType}),he}const{status:a,ctx:s}=this._processInputParams(e),{shape:f,keys:m}=this._getCached(),p=[];if(!(this._def.catchall instanceof ei&&this._def.unknownKeys==="strip"))for(const h in s.data)m.includes(h)||p.push(h);const y=[];for(const h of m){const v=f[h],C=s.data[h];y.push({key:{status:"valid",value:h},value:v._parse(new on(s,C,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof ei){const h=this._def.unknownKeys;if(h==="passthrough")for(const v of p)y.push({key:{status:"valid",value:v},value:{status:"valid",value:s.data[v]}});else if(h==="strict")p.length>0&&(W(s,{code:J.unrecognized_keys,keys:p}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const v of p){const C=s.data[v];y.push({key:{status:"valid",value:v},value:h._parse(new on(s,C,s.path,v)),alwaysSet:v in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const v of y){const C=await v.key,b=await v.value;h.push({key:C,value:b,alwaysSet:v.alwaysSet})}return h}).then(h=>gt.mergeObjectSync(a,h)):gt.mergeObjectSync(a,y)}get shape(){return this._def.shape()}strict(e){return oe.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(o,a)=>{var f,m;const s=((m=(f=this._def).errorMap)==null?void 0:m.call(f,o,a).message)??a.defaultError;return o.code==="unrecognized_keys"?{message:oe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pe.ZodObject})}setKey(e,o){return this.augment({[e]:o})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const o={};for(const a of Ne.objectKeys(e))e[a]&&this.shape[a]&&(o[a]=this.shape[a]);return new We({...this._def,shape:()=>o})}omit(e){const o={};for(const a of Ne.objectKeys(this.shape))e[a]||(o[a]=this.shape[a]);return new We({...this._def,shape:()=>o})}deepPartial(){return fo(this)}partial(e){const o={};for(const a of Ne.objectKeys(this.shape)){const s=this.shape[a];e&&!e[a]?o[a]=s:o[a]=s.optional()}return new We({...this._def,shape:()=>o})}required(e){const o={};for(const a of Ne.objectKeys(this.shape))if(e&&!e[a])o[a]=this.shape[a];else{let f=this.shape[a];for(;f instanceof jn;)f=f._def.innerType;o[a]=f}return new We({...this._def,shape:()=>o})}keyof(){return bg(Ne.objectKeys(this.shape))}}We.create=(n,e)=>new We({shape:()=>n,unknownKeys:"strip",catchall:ei.create(),typeName:pe.ZodObject,...ve(e)});We.strictCreate=(n,e)=>new We({shape:()=>n,unknownKeys:"strict",catchall:ei.create(),typeName:pe.ZodObject,...ve(e)});We.lazycreate=(n,e)=>new We({shape:n,unknownKeys:"strip",catchall:ei.create(),typeName:pe.ZodObject,...ve(e)});class ms extends Ee{_parse(e){const{ctx:o}=this._processInputParams(e),a=this._def.options;function s(f){for(const p of f)if(p.result.status==="valid")return p.result;for(const p of f)if(p.result.status==="dirty")return o.common.issues.push(...p.ctx.common.issues),p.result;const m=f.map(p=>new bn(p.ctx.common.issues));return W(o,{code:J.invalid_union,unionErrors:m}),he}if(o.common.async)return Promise.all(a.map(async f=>{const m={...o,common:{...o.common,issues:[]},parent:null};return{result:await f._parseAsync({data:o.data,path:o.path,parent:m}),ctx:m}})).then(s);{let f;const m=[];for(const y of a){const h={...o,common:{...o.common,issues:[]},parent:null},v=y._parseSync({data:o.data,path:o.path,parent:h});if(v.status==="valid")return v;v.status==="dirty"&&!f&&(f={result:v,ctx:h}),h.common.issues.length&&m.push(h.common.issues)}if(f)return o.common.issues.push(...f.ctx.common.issues),f.result;const p=m.map(y=>new bn(y));return W(o,{code:J.invalid_union,unionErrors:p}),he}}get options(){return this._def.options}}ms.create=(n,e)=>new ms({options:n,typeName:pe.ZodUnion,...ve(e)});function ac(n,e){const o=Wn(n),a=Wn(e);if(n===e)return{valid:!0,data:n};if(o===ie.object&&a===ie.object){const s=Ne.objectKeys(e),f=Ne.objectKeys(n).filter(p=>s.indexOf(p)!==-1),m={...n,...e};for(const p of f){const y=ac(n[p],e[p]);if(!y.valid)return{valid:!1};m[p]=y.data}return{valid:!0,data:m}}else if(o===ie.array&&a===ie.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let f=0;f<n.length;f++){const m=n[f],p=e[f],y=ac(m,p);if(!y.valid)return{valid:!1};s.push(y.data)}return{valid:!0,data:s}}else return o===ie.date&&a===ie.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ps extends Ee{_parse(e){const{status:o,ctx:a}=this._processInputParams(e),s=(f,m)=>{if(Bp(f)||Bp(m))return he;const p=ac(f.value,m.value);return p.valid?((Pp(f)||Pp(m))&&o.dirty(),{status:o.value,value:p.data}):(W(a,{code:J.invalid_intersection_types}),he)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([f,m])=>s(f,m)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ps.create=(n,e,o)=>new ps({left:n,right:e,typeName:pe.ZodIntersection,...ve(o)});class _i extends Ee{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.array)return W(a,{code:J.invalid_type,expected:ie.array,received:a.parsedType}),he;if(a.data.length<this._def.items.length)return W(a,{code:J.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&a.data.length>this._def.items.length&&(W(a,{code:J.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),o.dirty());const f=[...a.data].map((m,p)=>{const y=this._def.items[p]||this._def.rest;return y?y._parse(new on(a,m,a.path,p)):null}).filter(m=>!!m);return a.common.async?Promise.all(f).then(m=>gt.mergeArray(o,m)):gt.mergeArray(o,f)}get items(){return this._def.items}rest(e){return new _i({...this._def,rest:e})}}_i.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _i({items:n,typeName:pe.ZodTuple,rest:null,...ve(e)})};class hs extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.object)return W(a,{code:J.invalid_type,expected:ie.object,received:a.parsedType}),he;const s=[],f=this._def.keyType,m=this._def.valueType;for(const p in a.data)s.push({key:f._parse(new on(a,p,a.path,p)),value:m._parse(new on(a,a.data[p],a.path,p)),alwaysSet:p in a.data});return a.common.async?gt.mergeObjectAsync(o,s):gt.mergeObjectSync(o,s)}get element(){return this._def.valueType}static create(e,o,a){return o instanceof Ee?new hs({keyType:e,valueType:o,typeName:pe.ZodRecord,...ve(a)}):new hs({keyType:en.create(),valueType:e,typeName:pe.ZodRecord,...ve(o)})}}class Zp extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.map)return W(a,{code:J.invalid_type,expected:ie.map,received:a.parsedType}),he;const s=this._def.keyType,f=this._def.valueType,m=[...a.data.entries()].map(([p,y],h)=>({key:s._parse(new on(a,p,a.path,[h,"key"])),value:f._parse(new on(a,y,a.path,[h,"value"]))}));if(a.common.async){const p=new Map;return Promise.resolve().then(async()=>{for(const y of m){const h=await y.key,v=await y.value;if(h.status==="aborted"||v.status==="aborted")return he;(h.status==="dirty"||v.status==="dirty")&&o.dirty(),p.set(h.value,v.value)}return{status:o.value,value:p}})}else{const p=new Map;for(const y of m){const h=y.key,v=y.value;if(h.status==="aborted"||v.status==="aborted")return he;(h.status==="dirty"||v.status==="dirty")&&o.dirty(),p.set(h.value,v.value)}return{status:o.value,value:p}}}}Zp.create=(n,e,o)=>new Zp({valueType:e,keyType:n,typeName:pe.ZodMap,...ve(o)});class ka extends Ee{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.set)return W(a,{code:J.invalid_type,expected:ie.set,received:a.parsedType}),he;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(W(a,{code:J.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),o.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(W(a,{code:J.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),o.dirty());const f=this._def.valueType;function m(y){const h=new Set;for(const v of y){if(v.status==="aborted")return he;v.status==="dirty"&&o.dirty(),h.add(v.value)}return{status:o.value,value:h}}const p=[...a.data.values()].map((y,h)=>f._parse(new on(a,y,a.path,h)));return a.common.async?Promise.all(p).then(y=>m(y)):m(p)}min(e,o){return new ka({...this._def,minSize:{value:e,message:oe.toString(o)}})}max(e,o){return new ka({...this._def,maxSize:{value:e,message:oe.toString(o)}})}size(e,o){return this.min(e,o).max(e,o)}nonempty(e){return this.min(1,e)}}ka.create=(n,e)=>new ka({valueType:n,minSize:null,maxSize:null,typeName:pe.ZodSet,...ve(e)});class lc extends Ee{get schema(){return this._def.getter()}_parse(e){const{ctx:o}=this._processInputParams(e);return this._def.getter()._parse({data:o.data,path:o.path,parent:o})}}lc.create=(n,e)=>new lc({getter:n,typeName:pe.ZodLazy,...ve(e)});class Qp extends Ee{_parse(e){if(e.data!==this._def.value){const o=this._getOrReturnCtx(e);return W(o,{received:o.data,code:J.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:e.data}}get value(){return this._def.value}}Qp.create=(n,e)=>new Qp({value:n,typeName:pe.ZodLiteral,...ve(e)});function bg(n,e){return new vo({values:n,typeName:pe.ZodEnum,...ve(e)})}class vo extends Ee{_parse(e){if(typeof e.data!="string"){const o=this._getOrReturnCtx(e),a=this._def.values;return W(o,{expected:Ne.joinValues(a),received:o.parsedType,code:J.invalid_type}),he}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const o=this._getOrReturnCtx(e),a=this._def.values;return W(o,{received:o.data,code:J.invalid_enum_value,options:a}),he}return Pt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const o of this._def.values)e[o]=o;return e}get Values(){const e={};for(const o of this._def.values)e[o]=o;return e}get Enum(){const e={};for(const o of this._def.values)e[o]=o;return e}extract(e,o=this._def){return vo.create(e,{...this._def,...o})}exclude(e,o=this._def){return vo.create(this.options.filter(a=>!e.includes(a)),{...this._def,...o})}}vo.create=bg;class Xp extends Ee{_parse(e){const o=Ne.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==ie.string&&a.parsedType!==ie.number){const s=Ne.objectValues(o);return W(a,{expected:Ne.joinValues(s),received:a.parsedType,code:J.invalid_type}),he}if(this._cache||(this._cache=new Set(Ne.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ne.objectValues(o);return W(a,{received:a.data,code:J.invalid_enum_value,options:s}),he}return Pt(e.data)}get enum(){return this._def.values}}Xp.create=(n,e)=>new Xp({values:n,typeName:pe.ZodNativeEnum,...ve(e)});class gs extends Ee{unwrap(){return this._def.type}_parse(e){const{ctx:o}=this._processInputParams(e);if(o.parsedType!==ie.promise&&o.common.async===!1)return W(o,{code:J.invalid_type,expected:ie.promise,received:o.parsedType}),he;const a=o.parsedType===ie.promise?o.data:Promise.resolve(o.data);return Pt(a.then(s=>this._def.type.parseAsync(s,{path:o.path,errorMap:o.common.contextualErrorMap})))}}gs.create=(n,e)=>new gs({type:n,typeName:pe.ZodPromise,...ve(e)});class xo extends Ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:o,ctx:a}=this._processInputParams(e),s=this._def.effect||null,f={addIssue:m=>{W(a,m),m.fatal?o.abort():o.dirty()},get path(){return a.path}};if(f.addIssue=f.addIssue.bind(f),s.type==="preprocess"){const m=s.transform(a.data,f);if(a.common.async)return Promise.resolve(m).then(async p=>{if(o.value==="aborted")return he;const y=await this._def.schema._parseAsync({data:p,path:a.path,parent:a});return y.status==="aborted"?he:y.status==="dirty"||o.value==="dirty"?Ma(y.value):y});{if(o.value==="aborted")return he;const p=this._def.schema._parseSync({data:m,path:a.path,parent:a});return p.status==="aborted"?he:p.status==="dirty"||o.value==="dirty"?Ma(p.value):p}}if(s.type==="refinement"){const m=p=>{const y=s.refinement(p,f);if(a.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return p};if(a.common.async===!1){const p=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return p.status==="aborted"?he:(p.status==="dirty"&&o.dirty(),m(p.value),{status:o.value,value:p.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(p=>p.status==="aborted"?he:(p.status==="dirty"&&o.dirty(),m(p.value).then(()=>({status:o.value,value:p.value}))))}if(s.type==="transform")if(a.common.async===!1){const m=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!go(m))return he;const p=s.transform(m.value,f);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:o.value,value:p}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(m=>go(m)?Promise.resolve(s.transform(m.value,f)).then(p=>({status:o.value,value:p})):he);Ne.assertNever(s)}}xo.create=(n,e,o)=>new xo({schema:n,typeName:pe.ZodEffects,effect:e,...ve(o)});xo.createWithPreprocess=(n,e,o)=>new xo({schema:e,effect:{type:"preprocess",transform:n},typeName:pe.ZodEffects,...ve(o)});class jn extends Ee{_parse(e){return this._getType(e)===ie.undefined?Pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jn.create=(n,e)=>new jn({innerType:n,typeName:pe.ZodOptional,...ve(e)});class To extends Ee{_parse(e){return this._getType(e)===ie.null?Pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}To.create=(n,e)=>new To({innerType:n,typeName:pe.ZodNullable,...ve(e)});class sc extends Ee{_parse(e){const{ctx:o}=this._processInputParams(e);let a=o.data;return o.parsedType===ie.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:o.path,parent:o})}removeDefault(){return this._def.innerType}}sc.create=(n,e)=>new sc({innerType:n,typeName:pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ve(e)});class rc extends Ee{_parse(e){const{ctx:o}=this._processInputParams(e),a={...o,common:{...o.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return fs(s)?s.then(f=>({status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new bn(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new bn(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}rc.create=(n,e)=>new rc({innerType:n,typeName:pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ve(e)});class Kp extends Ee{_parse(e){if(this._getType(e)!==ie.nan){const a=this._getOrReturnCtx(e);return W(a,{code:J.invalid_type,expected:ie.nan,received:a.parsedType}),he}return{status:"valid",value:e.data}}}Kp.create=n=>new Kp({typeName:pe.ZodNaN,...ve(n)});class wx extends Ee{_parse(e){const{ctx:o}=this._processInputParams(e),a=o.data;return this._def.type._parse({data:a,path:o.path,parent:o})}unwrap(){return this._def.type}}class Ec extends Ee{_parse(e){const{status:o,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const f=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return f.status==="aborted"?he:f.status==="dirty"?(o.dirty(),Ma(f.value)):this._def.out._parseAsync({data:f.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?he:s.status==="dirty"?(o.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,o){return new Ec({in:e,out:o,typeName:pe.ZodPipeline})}}class uc extends Ee{_parse(e){const o=this._def.innerType._parse(e),a=s=>(go(s)&&(s.value=Object.freeze(s.value)),s);return fs(o)?o.then(s=>a(s)):a(o)}unwrap(){return this._def.innerType}}uc.create=(n,e)=>new uc({innerType:n,typeName:pe.ZodReadonly,...ve(e)});var pe;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(pe||(pe={}));const Ci=en.create,Wp=Si.create;bi.create;const Mx=ds.create;yo.create;const jp=oc.create;ei.create;const Na=nn.create,Nx=We.create,Rx=ms.create;ps.create;_i.create;const Dx=hs.create,kx=lc.create,Ix=vo.create;gs.create;jn.create;To.create;const co={string:n=>en.create({...n,coerce:!0}),number:n=>Si.create({...n,coerce:!0}),boolean:n=>ds.create({...n,coerce:!0}),bigint:n=>bi.create({...n,coerce:!0}),date:n=>yo.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ux,Lx;function Ox(){return{geminiUrl:Ux,vertexUrl:Lx}}function Vx(n,e,o){var a,s,f;if(!(!((a=n.httpOptions)===null||a===void 0)&&a.baseUrl)){const m=Ox();return n.vertexai?(s=m.vertexUrl)!==null&&s!==void 0?s:e:(f=m.geminiUrl)!==null&&f!==void 0?f:o}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class So{}function me(n,e){const o=/\{([^}]+)\}/g;return n.replace(o,(a,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const f=e[s];return f!=null?String(f):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(n,e,o){for(let f=0;f<e.length-1;f++){const m=e[f];if(m.endsWith("[]")){const p=m.slice(0,-2);if(!(p in n))if(Array.isArray(o))n[p]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(n[p])){const y=n[p];if(Array.isArray(o))for(let h=0;h<y.length;h++){const v=y[h];c(v,e.slice(f+1),o[h])}else for(const h of y)c(h,e.slice(f+1),o)}return}else if(m.endsWith("[0]")){const p=m.slice(0,-3);p in n||(n[p]=[{}]);const y=n[p];c(y[0],e.slice(f+1),o);return}(!n[m]||typeof n[m]!="object")&&(n[m]={}),n=n[m]}const a=e[e.length-1],s=n[a];if(s!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===s)return;if(typeof s=="object"&&typeof o=="object"&&s!==null&&o!==null)Object.assign(s,o);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else n[a]=o}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return;const a=e[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(s in n){const f=n[s];return Array.isArray(f)?f.map(m=>u(m,e.slice(o+1))):void 0}else return}else n=n[a]}return n}catch(o){if(o instanceof TypeError)return;throw o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eh;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(eh||(eh={}));var th;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(th||(th={}));var tn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(tn||(tn={}));var nh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(nh||(nh={}));var ih;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ih||(ih={}));var oh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(oh||(oh={}));var ah;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ah||(ah={}));var lh;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(lh||(lh={}));var sh;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(sh||(sh={}));var rh;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(rh||(rh={}));var uh;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uh||(uh={}));var ch;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(ch||(ch={}));var fh;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(fh||(fh={}));var ys;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ys||(ys={}));var dh;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dh||(dh={}));var cc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cc||(cc={}));var mh;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mh||(mh={}));var ph;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ph||(ph={}));var hh;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(hh||(hh={}));var gh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gh||(gh={}));var yh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(yh||(yh={}));var vh;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(vh||(vh={}));var xh;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xh||(xh={}));var Th;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Th||(Th={}));var Ch;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Ch||(Ch={}));var Sh;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Sh||(Sh={}));var bh;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bh||(bh={}));var _h;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_h||(_h={}));var Eh;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Eh||(Eh={}));var Ah;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ah||(Ah={}));var wh;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(wh||(wh={}));var Mh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Mh||(Mh={}));var Nh;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Nh||(Nh={}));var Rh;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Rh||(Rh={}));var Dh;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Dh||(Dh={}));var kh;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kh||(kh={}));var Ih;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ih||(Ih={}));var Uh;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uh||(Uh={}));var mo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(mo||(mo={}));class fc{constructor(e){const o={};for(const a of e.headers.entries())o[a[0]]=a[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ea{get text(){var e,o,a,s,f,m,p,y;if(((s=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const C=[];for(const b of(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[E,_]of Object.entries(b))E!=="text"&&E!=="thought"&&(_!==null||_!==void 0)&&C.push(E);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;v=!0,h+=b.text}}return C.length>0&&console.warn(`there are non-text parts ${C} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,o,a,s,f,m,p,y;if(((s=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const C of(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[b,E]of Object.entries(C))b!=="inlineData"&&(E!==null||E!==void 0)&&v.push(b);C.inlineData&&typeof C.inlineData.data=="string"&&(h+=atob(C.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,o,a,s,f,m,p,y;if(((s=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,o,a,s,f,m,p,y,h;if(((s=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(C=>C.executableCode).map(C=>C.executableCode).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,o,a,s,f,m,p,y,h;if(((s=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(C=>C.codeExecutionResult).map(C=>C.codeExecutionResult).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Lh{}class Oh{}class qx{}class zx{}class Vh{}class qh{}class zh{}class Bx{}class Bh{}class Ph{}class $h{}class Px{}class $x{}class Gx{}class Hx{get text(){var e,o,a;let s="",f=!1;const m=[];for(const p of(a=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[y,h]of Object.entries(p))y!=="text"&&y!=="thought"&&h!==null&&m.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,s+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?s:void 0}get data(){var e,o,a;let s="";const f=[];for(const m of(a=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[p,y]of Object.entries(m))p!=="inlineData"&&y!==null&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(s+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Fx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Be(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _g(n,e){const o=Be(n,e);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function Eg(n){return Array.isArray(n)?n.map(e=>vs(e)):[vs(n)]}function vs(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Yx(n){const e=vs(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jx(n){const e=vs(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gh(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Ag(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Gh(e)):[Gh(n)]}function dc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Hh(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Fh(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ht(n){if(n==null)throw new Error("ContentUnion is required");return dc(n)?n:{role:"user",parts:Ag(n)}}function wg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const a=ht(o);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const o=ht(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>ht(o)):[ht(e)]}function Yt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Hh(n)||Fh(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(n)]}const e=[],o=[],a=dc(n[0]);for(const s of n){const f=dc(s);if(f!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(s);else{if(Hh(s)||Fh(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(s)}}return a||e.push({role:"user",parts:Ag(o)}),e}const Zx=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Yh=Ix(["string","number","integer","object","array","boolean","null"]),Qx=Rx([Yh,Na(Yh)]);function Xx(n=!0){const e=kx(()=>{const o=Nx({type:Qx.optional(),format:Ci().optional(),title:Ci().optional(),description:Ci().optional(),default:jp().optional(),items:e.optional(),minItems:co.string().optional(),maxItems:co.string().optional(),enum:Na(jp()).optional(),properties:Dx(Ci(),e).optional(),required:Na(Ci()).optional(),minProperties:co.string().optional(),maxProperties:co.string().optional(),propertyOrdering:Na(Ci()).optional(),minimum:Wp().optional(),maximum:Wp().optional(),minLength:co.string().optional(),maxLength:co.string().optional(),pattern:Ci().optional(),anyOf:Na(e).optional(),additionalProperties:Mx().optional()});return n?o.strict():o});return e}function Kx(n,e){n.includes("null")&&(e.nullable=!0);const o=n.filter(a=>a!=="null");if(o.length===1)e.type=Object.values(tn).includes(o[0].toUpperCase())?o[0].toUpperCase():tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of o)e.anyOf.push({type:Object.values(tn).includes(a.toUpperCase())?a.toUpperCase():tn.TYPE_UNSPECIFIED})}}function po(n){const e={},o=["items"],a=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=n.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,n=f[1]):f[1].type==="null"&&(e.nullable=!0,n=f[0])),n.type instanceof Array&&Kx(n.type,e);for(const[m,p]of Object.entries(n))if(p!=null)if(m=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(tn).includes(p.toUpperCase())?p.toUpperCase():tn.TYPE_UNSPECIFIED}else if(o.includes(m))e[m]=po(p);else if(a.includes(m)){const y=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}y.push(po(h))}e[m]=y}else if(s.includes(m)){const y={};for(const[h,v]of Object.entries(p))y[h]=po(v);e[m]=y}else{if(m==="additionalProperties")continue;e[m]=p}return e}function xs(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=Xx().parse(n);return po(e)}else return po(n)}function Mg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ac(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ua(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=xs(e.parameters)),e.response&&(e.response=xs(e.response));return n}function La(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of n)e.push(o);return e}function Wx(n,e,o,a=1){const s=!e.startsWith(`${o}/`)&&e.split("/").length===a;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${e}`:e:s?`${o}/${e}`:e}function ti(n,e){if(typeof e!="string")throw new Error("name must be a string");return Wx(n,e,"cachedContents")}function Ng(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function En(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function jx(n){return n!=null&&typeof n=="object"&&"name"in n}function eT(n){return n!=null&&typeof n=="object"&&"video"in n}function tT(n){return n!=null&&typeof n=="object"&&"uri"in n}function Rg(n){var e;let o;if(jx(n)&&(o=n.name),!(tT(n)&&(o=n.uri,o===void 0))&&!(eT(n)&&(o=(e=n.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const s=o.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${o}`);o=s[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Dg(n,e){let o;return n.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function kg(n){for(const e of["models","tunedModels","publisherModels"])if(nT(n,e))return n[e];return[]}function nT(n,e){return n!==null&&typeof n=="object"&&e in n}function iT(n,e={}){const o=n,a={name:o.name,description:o.description,parameters:po(bs(o.inputSchema))};return e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function oT(n,e={}){const o=[],a=new Set;for(const s of n){const f=s.name;if(a.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);a.add(f);const m=iT(s,e);m.functionDeclarations&&o.push(...m.functionDeclarations)}return{functionDeclarations:o}}function aT(n){const e=[];for(const o of n)e.push(bs(o));return e}function lT(n){const e={};for(const[o,a]of Object.entries(n)){const s=a;e[o]=bs(s)}return e}function bs(n){const e=new Set(["items"]),o=new Set(["anyOf"]),a=new Set(["properties"]),s={};for(const[f,m]of Object.entries(n))if(e.has(f))s[f]=bs(m);else if(o.has(f))s[f]=aT(m);else if(a.has(f))s[f]=lT(m);else if(f==="type"){const p=m.toUpperCase();s[f]=Object.values(tn).includes(p)?p:tn.TYPE_UNSPECIFIED}else Zx.has(f)&&(s[f]=m);return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function rT(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function uT(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function cT(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],sT(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],rT(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],uT(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function Jh(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>cT(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function fT(n){const e={},o=u(n,["behavior"]);o!=null&&c(e,["behavior"],o);const a=u(n,["description"]);a!=null&&c(e,["description"],a);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const f=u(n,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(n,["parametersJsonSchema"]);m!=null&&c(e,["parametersJsonSchema"],m);const p=u(n,["response"]);p!=null&&c(e,["response"],p);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function dT(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function mT(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],dT(o)),e}function pT(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function hT(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],pT(o)),e}function gT(){return{}}function yT(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>fT(y))),c(e,["functionDeclarations"],p)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(n,["googleSearch"]);a!=null&&c(e,["googleSearch"],mT(a));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],hT(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],gT());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function vT(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["allowedFunctionNames"]);return a!=null&&c(e,["allowedFunctionNames"],a),e}function xT(n){const e={},o=u(n,["latitude"]);o!=null&&c(e,["latitude"],o);const a=u(n,["longitude"]);return a!=null&&c(e,["longitude"],a),e}function TT(n){const e={},o=u(n,["latLng"]);o!=null&&c(e,["latLng"],xT(o));const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function CT(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],vT(o));const a=u(n,["retrievalConfig"]);return a!=null&&c(e,["retrievalConfig"],TT(a)),e}function ST(n,e){const o={},a=u(n,["ttl"]);e!==void 0&&a!=null&&c(e,["ttl"],a);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const f=u(n,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(n,["contents"]);if(e!==void 0&&m!=null){let v=Yt(m);Array.isArray(v)&&(v=v.map(C=>Jh(C))),c(e,["contents"],v)}const p=u(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],Jh(ht(p)));const y=u(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(C=>yT(C))),c(e,["tools"],v)}const h=u(n,["toolConfig"]);if(e!==void 0&&h!=null&&c(e,["toolConfig"],CT(h)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function bT(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["model"],_g(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],ST(s,o)),o}function _T(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function ET(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function AT(n,e){const o={},a=u(n,["ttl"]);e!==void 0&&a!=null&&c(e,["ttl"],a);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),o}function wT(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],AT(s,o)),o}function MT(n,e){const o={},a=u(n,["pageSize"]);e!==void 0&&a!=null&&c(e,["_query","pageSize"],a);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function NT(n){const e={},o=u(n,["config"]);return o!=null&&c(e,["config"],MT(o,e)),e}function RT(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function DT(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["data"]);a!=null&&c(e,["data"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function kT(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function IT(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],RT(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],DT(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],kT(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function Zh(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>IT(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function UT(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["name"]);a!=null&&c(e,["name"],a);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const f=u(n,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const m=u(n,["response"]);m!=null&&c(e,["response"],m);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function LT(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function OT(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],LT(o)),e}function VT(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function qT(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],VT(o)),e}function zT(){return{}}function BT(n){const e={},o=u(n,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function PT(n){const e={},o=u(n,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],BT(o));const a=u(n,["authType"]);a!=null&&c(e,["authType"],a);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const f=u(n,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(n,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const p=u(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function $T(n){const e={},o=u(n,["authConfig"]);return o!=null&&c(e,["authConfig"],PT(o)),e}function GT(){return{}}function HT(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(C=>UT(C))),c(e,["functionDeclarations"],v)}const a=u(n,["retrieval"]);a!=null&&c(e,["retrieval"],a);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],OT(s));const f=u(n,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],qT(f)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],zT());const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],$T(p)),u(n,["urlContext"])!=null&&c(e,["urlContext"],GT());const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function FT(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["allowedFunctionNames"]);return a!=null&&c(e,["allowedFunctionNames"],a),e}function YT(n){const e={},o=u(n,["latitude"]);o!=null&&c(e,["latitude"],o);const a=u(n,["longitude"]);return a!=null&&c(e,["longitude"],a),e}function JT(n){const e={},o=u(n,["latLng"]);o!=null&&c(e,["latLng"],YT(o));const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function ZT(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],FT(o));const a=u(n,["retrievalConfig"]);return a!=null&&c(e,["retrievalConfig"],JT(a)),e}function QT(n,e){const o={},a=u(n,["ttl"]);e!==void 0&&a!=null&&c(e,["ttl"],a);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const f=u(n,["displayName"]);e!==void 0&&f!=null&&c(e,["displayName"],f);const m=u(n,["contents"]);if(e!==void 0&&m!=null){let C=Yt(m);Array.isArray(C)&&(C=C.map(b=>Zh(b))),c(e,["contents"],C)}const p=u(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],Zh(ht(p)));const y=u(n,["tools"]);if(e!==void 0&&y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>HT(b))),c(e,["tools"],C)}const h=u(n,["toolConfig"]);e!==void 0&&h!=null&&c(e,["toolConfig"],ZT(h));const v=u(n,["kmsKeyName"]);return e!==void 0&&v!=null&&c(e,["encryption_spec","kmsKeyName"],v),o}function XT(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["model"],_g(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],QT(s,o)),o}function KT(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function WT(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function jT(n,e){const o={},a=u(n,["ttl"]);e!==void 0&&a!=null&&c(e,["ttl"],a);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),o}function eC(n,e){const o={},a=u(e,["name"]);a!=null&&c(o,["_url","name"],ti(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],jT(s,o)),o}function tC(n,e){const o={},a=u(n,["pageSize"]);e!==void 0&&a!=null&&c(e,["_query","pageSize"],a);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function nC(n){const e={},o=u(n,["config"]);return o!=null&&c(e,["config"],tC(o,e)),e}function as(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const f=u(n,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(n,["updateTime"]);m!=null&&c(e,["updateTime"],m);const p=u(n,["expireTime"]);p!=null&&c(e,["expireTime"],p);const y=u(n,["usageMetadata"]);return y!=null&&c(e,["usageMetadata"],y),e}function iC(){return{}}function oC(n){const e={},o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const a=u(n,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(f=>as(f))),c(e,["cachedContents"],s)}return e}function ls(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const f=u(n,["createTime"]);f!=null&&c(e,["createTime"],f);const m=u(n,["updateTime"]);m!=null&&c(e,["updateTime"],m);const p=u(n,["expireTime"]);p!=null&&c(e,["expireTime"],p);const y=u(n,["usageMetadata"]);return y!=null&&c(e,["usageMetadata"],y),e}function aC(){return{}}function lC(n){const e={},o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const a=u(n,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(f=>ls(f))),c(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Co;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Co||(Co={}));class _s{constructor(e,o,a,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,a,s)}init(e,o,a){var s,f;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.idxInternal=0;let m={config:{}};a?typeof a=="object"?m=Object.assign({},a):m=a:m={config:{}},m.config&&(m.config.pageToken=o.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(s=m.config)===null||s===void 0?void 0:s.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sC extends So{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new _s(Co.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(o),o)}async create(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=XT(this.apiClient,e);return p=me("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=bT(this.apiClient,e);return p=me("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>as(v))}}async get(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=KT(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=_T(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>as(v))}}async delete(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=WT(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(()=>{const v=aC(),C=new Ph;return Object.assign(C,v),C})}else{const h=ET(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=iC(),C=new Ph;return Object.assign(C,v),C})}}async update(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=eC(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>ls(v))}else{const h=wT(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>as(v))}}async listInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=nC(e);return p=me("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=lC(v),b=new $h;return Object.assign(b,C),b})}else{const h=NT(e);return p=me("cachedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=oC(v),b=new $h;return Object.assign(b,C),b})}}}function Qh(n){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&n[e],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(n){return this instanceof Pe?(this.v=n,this):new Pe(n)}function ho(n,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,e||[]),s,f=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",m),s[Symbol.asyncIterator]=function(){return this},s;function m(E){return function(_){return Promise.resolve(_).then(E,C)}}function p(E,_){a[E]&&(s[E]=function(N){return new Promise(function(q,O){f.push([E,N,q,O])>1||y(E,N)})},_&&(s[E]=_(s[E])))}function y(E,_){try{h(a[E](_))}catch(N){b(f[0][3],N)}}function h(E){E.value instanceof Pe?Promise.resolve(E.value.v).then(v,C):b(f[0][2],E)}function v(E){y("next",E)}function C(E){y("throw",E)}function b(E,_){E(_),f.shift(),f.length&&y(f[0][0],f[0][1])}}function Ra(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],o;return e?e.call(n):(n=typeof Qh=="function"?Qh(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(f){o[f]=n[f]&&function(m){return new Promise(function(p,y){m=n[f](m),s(p,y,m.done,m.value)})}}function s(f,m,p,y){Promise.resolve(y).then(function(h){f({value:h,done:p})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const o=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Ig(o)}function Ig(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function uC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Xh(n){if(n===void 0||n.length===0)return[];const e=[],o=n.length;let a=0;for(;a<o;)if(n[a].role==="user")e.push(n[a]),a++;else{const s=[];let f=!0;for(;a<o&&n[a].role==="model";)s.push(n[a]),f&&!Ig(n[a])&&(f=!1),a++;f?e.push(...s):e.pop()}return e}class cC{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new fC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fC{constructor(e,o,a,s={},f=[]){this.apiClient=e,this.modelsModule=o,this.model=a,this.config=s,this.history=f,this.sendPromise=Promise.resolve(),uC(f)}async sendMessage(e){var o;await this.sendPromise;const a=ht(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var f,m,p;const y=await s,h=(m=(f=y.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,C=this.getHistory(!0).length;let b=[];v!=null&&(b=(p=v.slice(C))!==null&&p!==void 0?p:[]);const E=h?[h]:[];this.recordHistory(a,E,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var o;await this.sendPromise;const a=ht(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const f=await s;return this.processStreamResponse(f,a)}getHistory(e=!1){const o=e?Xh(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var a,s;return ho(this,arguments,function*(){var m,p,y,h;const v=[];try{for(var C=!0,b=Ra(e),E;E=yield Pe(b.next()),m=E.done,!m;C=!0){h=E.value,C=!1;const _=h;if(rC(_)){const N=(s=(a=_.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content;N!==void 0&&v.push(N)}yield yield Pe(_)}}catch(_){p={error:_}}finally{try{!C&&!m&&(y=b.return)&&(yield Pe(y.call(b)))}finally{if(p)throw p.error}}this.recordHistory(o,v)})}recordHistory(e,o,a){let s=[];o.length>0&&o.every(f=>f.role!==void 0)?s=o:s.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Xh(a)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Es.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dC(n,e){const o={},a=u(n,["pageSize"]);e!==void 0&&a!=null&&c(e,["_query","pageSize"],a);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function mC(n){const e={},o=u(n,["config"]);return o!=null&&c(e,["config"],dC(o,e)),e}function pC(n){const e={},o=u(n,["details"]);o!=null&&c(e,["details"],o);const a=u(n,["message"]);a!=null&&c(e,["message"],a);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function hC(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const f=u(n,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(n,["createTime"]);m!=null&&c(e,["createTime"],m);const p=u(n,["expirationTime"]);p!=null&&c(e,["expirationTime"],p);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const h=u(n,["sha256Hash"]);h!=null&&c(e,["sha256Hash"],h);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const C=u(n,["downloadUri"]);C!=null&&c(e,["downloadUri"],C);const b=u(n,["state"]);b!=null&&c(e,["state"],b);const E=u(n,["source"]);E!=null&&c(e,["source"],E);const _=u(n,["videoMetadata"]);_!=null&&c(e,["videoMetadata"],_);const N=u(n,["error"]);return N!=null&&c(e,["error"],pC(N)),e}function gC(n){const e={},o=u(n,["file"]);o!=null&&c(e,["file"],hC(o));const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function yC(n){const e={},o=u(n,["name"]);o!=null&&c(e,["_url","file"],Rg(o));const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function vC(n){const e={},o=u(n,["name"]);o!=null&&c(e,["_url","file"],Rg(o));const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function xC(n){const e={},o=u(n,["details"]);o!=null&&c(e,["details"],o);const a=u(n,["message"]);a!=null&&c(e,["message"],a);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function mc(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const f=u(n,["sizeBytes"]);f!=null&&c(e,["sizeBytes"],f);const m=u(n,["createTime"]);m!=null&&c(e,["createTime"],m);const p=u(n,["expirationTime"]);p!=null&&c(e,["expirationTime"],p);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const h=u(n,["sha256Hash"]);h!=null&&c(e,["sha256Hash"],h);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const C=u(n,["downloadUri"]);C!=null&&c(e,["downloadUri"],C);const b=u(n,["state"]);b!=null&&c(e,["state"],b);const E=u(n,["source"]);E!=null&&c(e,["source"],E);const _=u(n,["videoMetadata"]);_!=null&&c(e,["videoMetadata"],_);const N=u(n,["error"]);return N!=null&&c(e,["error"],xC(N)),e}function TC(n){const e={},o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const a=u(n,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(f=>mc(f))),c(e,["files"],s)}return e}function CC(){return{}}function SC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bC extends So{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new _s(Co.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>mc(o))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=mC(e);return f=me("files",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>{const h=TC(y),v=new Px;return Object.assign(v,h),v})}}async createInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=gC(e);return f=me("upload/v1beta/files",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(()=>{const y=CC(),h=new $x;return Object.assign(h,y),h})}}async get(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=yC(e);return f=me("files/{file}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>mc(y))}}async delete(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=vC(e);return f=me("files/{file}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(()=>{const y=SC(),h=new Gx;return Object.assign(h,y),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _C(n){const e={},o=u(n,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function EC(n){const e={},o=u(n,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function Ug(n){const e={},o=u(n,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],_C(o)),e}function AC(n){const e={},o=u(n,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],EC(o)),e}function wC(n){const e={},o=u(n,["speaker"]);o!=null&&c(e,["speaker"],o);const a=u(n,["voiceConfig"]);return a!=null&&c(e,["voiceConfig"],Ug(a)),e}function MC(n){const e={},o=u(n,["speakerVoiceConfigs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>wC(s))),c(e,["speakerVoiceConfigs"],a)}return e}function NC(n){const e={},o=u(n,["voiceConfig"]);o!=null&&c(e,["voiceConfig"],Ug(o));const a=u(n,["multiSpeakerVoiceConfig"]);a!=null&&c(e,["multiSpeakerVoiceConfig"],MC(a));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function RC(n){const e={},o=u(n,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],AC(o)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function DC(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function kC(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function IC(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function UC(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["data"]);a!=null&&c(e,["data"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function LC(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function OC(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function VC(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],DC(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],IC(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],LC(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function qC(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],kC(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],UC(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],OC(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function zC(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>VC(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function BC(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>qC(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function PC(n){const e={},o=u(n,["behavior"]);o!=null&&c(e,["behavior"],o);const a=u(n,["description"]);a!=null&&c(e,["description"],a);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const f=u(n,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(n,["parametersJsonSchema"]);m!=null&&c(e,["parametersJsonSchema"],m);const p=u(n,["response"]);p!=null&&c(e,["response"],p);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function $C(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["name"]);a!=null&&c(e,["name"],a);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const f=u(n,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const m=u(n,["response"]);m!=null&&c(e,["response"],m);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function GC(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function HC(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function FC(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],GC(o)),e}function YC(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],HC(o)),e}function JC(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function ZC(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function QC(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],JC(o)),e}function XC(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],ZC(o)),e}function KC(){return{}}function WC(n){const e={},o=u(n,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function jC(n){const e={},o=u(n,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],WC(o));const a=u(n,["authType"]);a!=null&&c(e,["authType"],a);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const f=u(n,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(n,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const p=u(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function eS(n){const e={},o=u(n,["authConfig"]);return o!=null&&c(e,["authConfig"],jC(o)),e}function tS(){return{}}function nS(){return{}}function iS(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>PC(y))),c(e,["functionDeclarations"],p)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(n,["googleSearch"]);a!=null&&c(e,["googleSearch"],FC(a));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],QC(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],tS());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function oS(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(C=>$C(C))),c(e,["functionDeclarations"],v)}const a=u(n,["retrieval"]);a!=null&&c(e,["retrieval"],a);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],YC(s));const f=u(n,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],XC(f)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],KC());const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],eS(p)),u(n,["urlContext"])!=null&&c(e,["urlContext"],nS());const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function aS(n){const e={},o=u(n,["handle"]);if(o!=null&&c(e,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lS(n){const e={},o=u(n,["handle"]);o!=null&&c(e,["handle"],o);const a=u(n,["transparent"]);return a!=null&&c(e,["transparent"],a),e}function Kh(){return{}}function Wh(){return{}}function sS(n){const e={},o=u(n,["disabled"]);o!=null&&c(e,["disabled"],o);const a=u(n,["startOfSpeechSensitivity"]);a!=null&&c(e,["startOfSpeechSensitivity"],a);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const f=u(n,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(n,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function rS(n){const e={},o=u(n,["disabled"]);o!=null&&c(e,["disabled"],o);const a=u(n,["startOfSpeechSensitivity"]);a!=null&&c(e,["startOfSpeechSensitivity"],a);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const f=u(n,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(n,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function uS(n){const e={},o=u(n,["automaticActivityDetection"]);o!=null&&c(e,["automaticActivityDetection"],sS(o));const a=u(n,["activityHandling"]);a!=null&&c(e,["activityHandling"],a);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function cS(n){const e={},o=u(n,["automaticActivityDetection"]);o!=null&&c(e,["automaticActivityDetection"],rS(o));const a=u(n,["activityHandling"]);a!=null&&c(e,["activityHandling"],a);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function fS(n){const e={},o=u(n,["targetTokens"]);return o!=null&&c(e,["targetTokens"],o),e}function dS(n){const e={},o=u(n,["targetTokens"]);return o!=null&&c(e,["targetTokens"],o),e}function mS(n){const e={},o=u(n,["triggerTokens"]);o!=null&&c(e,["triggerTokens"],o);const a=u(n,["slidingWindow"]);return a!=null&&c(e,["slidingWindow"],fS(a)),e}function pS(n){const e={},o=u(n,["triggerTokens"]);o!=null&&c(e,["triggerTokens"],o);const a=u(n,["slidingWindow"]);return a!=null&&c(e,["slidingWindow"],dS(a)),e}function hS(n){const e={},o=u(n,["proactiveAudio"]);return o!=null&&c(e,["proactiveAudio"],o),e}function gS(n){const e={},o=u(n,["proactiveAudio"]);return o!=null&&c(e,["proactiveAudio"],o),e}function yS(n,e){const o={},a=u(n,["generationConfig"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig"],a);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const f=u(n,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(n,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const C=u(n,["speechConfig"]);e!==void 0&&C!=null&&c(e,["setup","generationConfig","speechConfig"],NC(Ac(C)));const b=u(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],zC(ht(E)));const _=u(n,["tools"]);if(e!==void 0&&_!=null){let Y=La(_);Array.isArray(Y)&&(Y=Y.map(ee=>iS(Ua(ee)))),c(e,["setup","tools"],Y)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],aS(N));const q=u(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","inputAudioTranscription"],Kh());const O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&c(e,["setup","outputAudioTranscription"],Kh());const $=u(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&c(e,["setup","realtimeInputConfig"],uS($));const F=u(n,["contextWindowCompression"]);e!==void 0&&F!=null&&c(e,["setup","contextWindowCompression"],mS(F));const Z=u(n,["proactivity"]);return e!==void 0&&Z!=null&&c(e,["setup","proactivity"],hS(Z)),o}function vS(n,e){const o={},a=u(n,["generationConfig"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig"],a);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const f=u(n,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(n,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const C=u(n,["speechConfig"]);e!==void 0&&C!=null&&c(e,["setup","generationConfig","speechConfig"],RC(Ac(C)));const b=u(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],BC(ht(E)));const _=u(n,["tools"]);if(e!==void 0&&_!=null){let Y=La(_);Array.isArray(Y)&&(Y=Y.map(ee=>oS(Ua(ee)))),c(e,["setup","tools"],Y)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],lS(N));const q=u(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","inputAudioTranscription"],Wh());const O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&c(e,["setup","outputAudioTranscription"],Wh());const $=u(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&c(e,["setup","realtimeInputConfig"],cS($));const F=u(n,["contextWindowCompression"]);e!==void 0&&F!=null&&c(e,["setup","contextWindowCompression"],pS(F));const Z=u(n,["proactivity"]);return e!==void 0&&Z!=null&&c(e,["setup","proactivity"],gS(Z)),o}function xS(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["setup","model"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],yS(s,o)),o}function TS(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["setup","model"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],vS(s,o)),o}function CS(){return{}}function SS(){return{}}function bS(){return{}}function _S(){return{}}function ES(n){const e={},o=u(n,["media"]);o!=null&&c(e,["mediaChunks"],Eg(o));const a=u(n,["audio"]);a!=null&&c(e,["audio"],Jx(a));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const f=u(n,["video"]);f!=null&&c(e,["video"],Yx(f));const m=u(n,["text"]);return m!=null&&c(e,["text"],m),u(n,["activityStart"])!=null&&c(e,["activityStart"],CS()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],bS()),e}function AS(n){const e={},o=u(n,["media"]);if(o!=null&&c(e,["mediaChunks"],Eg(o)),u(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=u(n,["audioStreamEnd"]);if(a!=null&&c(e,["audioStreamEnd"],a),u(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(n,["activityStart"])!=null&&c(e,["activityStart"],SS()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],_S()),e}function Lg(n){const e={},o=u(n,["text"]);o!=null&&c(e,["text"],o);const a=u(n,["weight"]);return a!=null&&c(e,["weight"],a),e}function wS(n){const e={},o=u(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>Lg(s))),c(e,["weightedPrompts"],a)}return e}function Og(n){const e={},o=u(n,["temperature"]);o!=null&&c(e,["temperature"],o);const a=u(n,["topK"]);a!=null&&c(e,["topK"],a);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const f=u(n,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(n,["bpm"]);m!=null&&c(e,["bpm"],m);const p=u(n,["density"]);p!=null&&c(e,["density"],p);const y=u(n,["brightness"]);y!=null&&c(e,["brightness"],y);const h=u(n,["scale"]);h!=null&&c(e,["scale"],h);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const C=u(n,["muteDrums"]);C!=null&&c(e,["muteDrums"],C);const b=u(n,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function MS(n){const e={},o=u(n,["musicGenerationConfig"]);return o!=null&&c(e,["musicGenerationConfig"],Og(o)),e}function Vg(n){const e={},o=u(n,["model"]);return o!=null&&c(e,["model"],o),e}function qg(n){const e={},o=u(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>Lg(s))),c(e,["weightedPrompts"],a)}return e}function pc(n){const e={},o=u(n,["setup"]);o!=null&&c(e,["setup"],Vg(o));const a=u(n,["clientContent"]);a!=null&&c(e,["clientContent"],qg(a));const s=u(n,["musicGenerationConfig"]);s!=null&&c(e,["musicGenerationConfig"],Og(s));const f=u(n,["playbackControl"]);return f!=null&&c(e,["playbackControl"],f),e}function NS(){return{}}function RS(){return{}}function DS(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function kS(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function IS(n){const e={},o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function US(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["data"]);a!=null&&c(e,["data"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function LS(n){const e={},o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function OS(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function VS(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],DS(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],IS(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],LS(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function qS(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],kS(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],US(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],OS(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function zS(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>VS(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function BS(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>qS(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function jh(n){const e={},o=u(n,["text"]);o!=null&&c(e,["text"],o);const a=u(n,["finished"]);return a!=null&&c(e,["finished"],a),e}function eg(n){const e={},o=u(n,["text"]);o!=null&&c(e,["text"],o);const a=u(n,["finished"]);return a!=null&&c(e,["finished"],a),e}function PS(n){const e={},o=u(n,["retrievedUrl"]);o!=null&&c(e,["retrievedUrl"],o);const a=u(n,["urlRetrievalStatus"]);return a!=null&&c(e,["urlRetrievalStatus"],a),e}function $S(n){const e={},o=u(n,["urlMetadata"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>PS(s))),c(e,["urlMetadata"],a)}return e}function GS(n){const e={},o=u(n,["modelTurn"]);o!=null&&c(e,["modelTurn"],zS(o));const a=u(n,["turnComplete"]);a!=null&&c(e,["turnComplete"],a);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const f=u(n,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(n,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const p=u(n,["inputTranscription"]);p!=null&&c(e,["inputTranscription"],jh(p));const y=u(n,["outputTranscription"]);y!=null&&c(e,["outputTranscription"],jh(y));const h=u(n,["urlContextMetadata"]);return h!=null&&c(e,["urlContextMetadata"],$S(h)),e}function HS(n){const e={},o=u(n,["modelTurn"]);o!=null&&c(e,["modelTurn"],BS(o));const a=u(n,["turnComplete"]);a!=null&&c(e,["turnComplete"],a);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const f=u(n,["groundingMetadata"]);f!=null&&c(e,["groundingMetadata"],f);const m=u(n,["generationComplete"]);m!=null&&c(e,["generationComplete"],m);const p=u(n,["inputTranscription"]);p!=null&&c(e,["inputTranscription"],eg(p));const y=u(n,["outputTranscription"]);return y!=null&&c(e,["outputTranscription"],eg(y)),e}function FS(n){const e={},o=u(n,["id"]);o!=null&&c(e,["id"],o);const a=u(n,["args"]);a!=null&&c(e,["args"],a);const s=u(n,["name"]);return s!=null&&c(e,["name"],s),e}function YS(n){const e={},o=u(n,["args"]);o!=null&&c(e,["args"],o);const a=u(n,["name"]);return a!=null&&c(e,["name"],a),e}function JS(n){const e={},o=u(n,["functionCalls"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>FS(s))),c(e,["functionCalls"],a)}return e}function ZS(n){const e={},o=u(n,["functionCalls"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>YS(s))),c(e,["functionCalls"],a)}return e}function QS(n){const e={},o=u(n,["ids"]);return o!=null&&c(e,["ids"],o),e}function XS(n){const e={},o=u(n,["ids"]);return o!=null&&c(e,["ids"],o),e}function ns(n){const e={},o=u(n,["modality"]);o!=null&&c(e,["modality"],o);const a=u(n,["tokenCount"]);return a!=null&&c(e,["tokenCount"],a),e}function is(n){const e={},o=u(n,["modality"]);o!=null&&c(e,["modality"],o);const a=u(n,["tokenCount"]);return a!=null&&c(e,["tokenCount"],a),e}function KS(n){const e={},o=u(n,["promptTokenCount"]);o!=null&&c(e,["promptTokenCount"],o);const a=u(n,["cachedContentTokenCount"]);a!=null&&c(e,["cachedContentTokenCount"],a);const s=u(n,["responseTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const f=u(n,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(n,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const p=u(n,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const y=u(n,["promptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(E=>ns(E))),c(e,["promptTokensDetails"],b)}const h=u(n,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(E=>ns(E))),c(e,["cacheTokensDetails"],b)}const v=u(n,["responseTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(E=>ns(E))),c(e,["responseTokensDetails"],b)}const C=u(n,["toolUsePromptTokensDetails"]);if(C!=null){let b=C;Array.isArray(b)&&(b=b.map(E=>ns(E))),c(e,["toolUsePromptTokensDetails"],b)}return e}function WS(n){const e={},o=u(n,["promptTokenCount"]);o!=null&&c(e,["promptTokenCount"],o);const a=u(n,["cachedContentTokenCount"]);a!=null&&c(e,["cachedContentTokenCount"],a);const s=u(n,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const f=u(n,["toolUsePromptTokenCount"]);f!=null&&c(e,["toolUsePromptTokenCount"],f);const m=u(n,["thoughtsTokenCount"]);m!=null&&c(e,["thoughtsTokenCount"],m);const p=u(n,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const y=u(n,["promptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(_=>is(_))),c(e,["promptTokensDetails"],E)}const h=u(n,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(_=>is(_))),c(e,["cacheTokensDetails"],E)}const v=u(n,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>is(_))),c(e,["responseTokensDetails"],E)}const C=u(n,["toolUsePromptTokensDetails"]);if(C!=null){let E=C;Array.isArray(E)&&(E=E.map(_=>is(_))),c(e,["toolUsePromptTokensDetails"],E)}const b=u(n,["trafficType"]);return b!=null&&c(e,["trafficType"],b),e}function jS(n){const e={},o=u(n,["timeLeft"]);return o!=null&&c(e,["timeLeft"],o),e}function eb(n){const e={},o=u(n,["timeLeft"]);return o!=null&&c(e,["timeLeft"],o),e}function tb(n){const e={},o=u(n,["newHandle"]);o!=null&&c(e,["newHandle"],o);const a=u(n,["resumable"]);a!=null&&c(e,["resumable"],a);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function nb(n){const e={},o=u(n,["newHandle"]);o!=null&&c(e,["newHandle"],o);const a=u(n,["resumable"]);a!=null&&c(e,["resumable"],a);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function ib(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],NS());const a=u(n,["serverContent"]);a!=null&&c(e,["serverContent"],GS(a));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],JS(s));const f=u(n,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],QS(f));const m=u(n,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],KS(m));const p=u(n,["goAway"]);p!=null&&c(e,["goAway"],jS(p));const y=u(n,["sessionResumptionUpdate"]);return y!=null&&c(e,["sessionResumptionUpdate"],tb(y)),e}function ob(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],RS());const a=u(n,["serverContent"]);a!=null&&c(e,["serverContent"],HS(a));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],ZS(s));const f=u(n,["toolCallCancellation"]);f!=null&&c(e,["toolCallCancellation"],XS(f));const m=u(n,["usageMetadata"]);m!=null&&c(e,["usageMetadata"],WS(m));const p=u(n,["goAway"]);p!=null&&c(e,["goAway"],eb(p));const y=u(n,["sessionResumptionUpdate"]);return y!=null&&c(e,["sessionResumptionUpdate"],nb(y)),e}function ab(){return{}}function lb(n){const e={},o=u(n,["text"]);o!=null&&c(e,["text"],o);const a=u(n,["weight"]);return a!=null&&c(e,["weight"],a),e}function sb(n){const e={},o=u(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>lb(s))),c(e,["weightedPrompts"],a)}return e}function rb(n){const e={},o=u(n,["temperature"]);o!=null&&c(e,["temperature"],o);const a=u(n,["topK"]);a!=null&&c(e,["topK"],a);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const f=u(n,["guidance"]);f!=null&&c(e,["guidance"],f);const m=u(n,["bpm"]);m!=null&&c(e,["bpm"],m);const p=u(n,["density"]);p!=null&&c(e,["density"],p);const y=u(n,["brightness"]);y!=null&&c(e,["brightness"],y);const h=u(n,["scale"]);h!=null&&c(e,["scale"],h);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const C=u(n,["muteDrums"]);C!=null&&c(e,["muteDrums"],C);const b=u(n,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function ub(n){const e={},o=u(n,["clientContent"]);o!=null&&c(e,["clientContent"],sb(o));const a=u(n,["musicGenerationConfig"]);return a!=null&&c(e,["musicGenerationConfig"],rb(a)),e}function cb(n){const e={},o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);a!=null&&c(e,["mimeType"],a);const s=u(n,["sourceMetadata"]);return s!=null&&c(e,["sourceMetadata"],ub(s)),e}function fb(n){const e={},o=u(n,["audioChunks"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>cb(s))),c(e,["audioChunks"],a)}return e}function db(n){const e={},o=u(n,["text"]);o!=null&&c(e,["text"],o);const a=u(n,["filteredReason"]);return a!=null&&c(e,["filteredReason"],a),e}function mb(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],ab());const a=u(n,["serverContent"]);a!=null&&c(e,["serverContent"],fb(a));const s=u(n,["filteredPrompt"]);return s!=null&&c(e,["filteredPrompt"],db(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pb(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function hb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function gb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function yb(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],pb(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],hb(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],gb(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function As(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>yb(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function vb(n){const e={},o=u(n,["anyOf"]);o!=null&&c(e,["anyOf"],o);const a=u(n,["default"]);a!=null&&c(e,["default"],a);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const f=u(n,["enum"]);f!=null&&c(e,["enum"],f);const m=u(n,["example"]);m!=null&&c(e,["example"],m);const p=u(n,["format"]);p!=null&&c(e,["format"],p);const y=u(n,["items"]);y!=null&&c(e,["items"],y);const h=u(n,["maxItems"]);h!=null&&c(e,["maxItems"],h);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const C=u(n,["maxProperties"]);C!=null&&c(e,["maxProperties"],C);const b=u(n,["maximum"]);b!=null&&c(e,["maximum"],b);const E=u(n,["minItems"]);E!=null&&c(e,["minItems"],E);const _=u(n,["minLength"]);_!=null&&c(e,["minLength"],_);const N=u(n,["minProperties"]);N!=null&&c(e,["minProperties"],N);const q=u(n,["minimum"]);q!=null&&c(e,["minimum"],q);const O=u(n,["nullable"]);O!=null&&c(e,["nullable"],O);const $=u(n,["pattern"]);$!=null&&c(e,["pattern"],$);const F=u(n,["properties"]);F!=null&&c(e,["properties"],F);const Z=u(n,["propertyOrdering"]);Z!=null&&c(e,["propertyOrdering"],Z);const Y=u(n,["required"]);Y!=null&&c(e,["required"],Y);const ee=u(n,["title"]);ee!=null&&c(e,["title"],ee);const j=u(n,["type"]);return j!=null&&c(e,["type"],j),e}function xb(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(n,["category"]);o!=null&&c(e,["category"],o);const a=u(n,["threshold"]);return a!=null&&c(e,["threshold"],a),e}function Tb(n){const e={},o=u(n,["behavior"]);o!=null&&c(e,["behavior"],o);const a=u(n,["description"]);a!=null&&c(e,["description"],a);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const f=u(n,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(n,["parametersJsonSchema"]);m!=null&&c(e,["parametersJsonSchema"],m);const p=u(n,["response"]);p!=null&&c(e,["response"],p);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function Cb(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function Sb(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],Cb(o)),e}function bb(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function _b(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],bb(o)),e}function Eb(){return{}}function Ab(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>Tb(y))),c(e,["functionDeclarations"],p)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(n,["googleSearch"]);a!=null&&c(e,["googleSearch"],Sb(a));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],_b(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],Eb());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function wb(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["allowedFunctionNames"]);return a!=null&&c(e,["allowedFunctionNames"],a),e}function Mb(n){const e={},o=u(n,["latitude"]);o!=null&&c(e,["latitude"],o);const a=u(n,["longitude"]);return a!=null&&c(e,["longitude"],a),e}function Nb(n){const e={},o=u(n,["latLng"]);o!=null&&c(e,["latLng"],Mb(o));const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function Rb(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],wb(o));const a=u(n,["retrievalConfig"]);return a!=null&&c(e,["retrievalConfig"],Nb(a)),e}function Db(n){const e={},o=u(n,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function zg(n){const e={},o=u(n,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],Db(o)),e}function kb(n){const e={},o=u(n,["speaker"]);o!=null&&c(e,["speaker"],o);const a=u(n,["voiceConfig"]);return a!=null&&c(e,["voiceConfig"],zg(a)),e}function Ib(n){const e={},o=u(n,["speakerVoiceConfigs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>kb(s))),c(e,["speakerVoiceConfigs"],a)}return e}function Ub(n){const e={},o=u(n,["voiceConfig"]);o!=null&&c(e,["voiceConfig"],zg(o));const a=u(n,["multiSpeakerVoiceConfig"]);a!=null&&c(e,["multiSpeakerVoiceConfig"],Ib(a));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Lb(n){const e={},o=u(n,["includeThoughts"]);o!=null&&c(e,["includeThoughts"],o);const a=u(n,["thinkingBudget"]);return a!=null&&c(e,["thinkingBudget"],a),e}function Ob(n,e,o){const a={},s=u(e,["systemInstruction"]);o!==void 0&&s!=null&&c(o,["systemInstruction"],As(ht(s)));const f=u(e,["temperature"]);f!=null&&c(a,["temperature"],f);const m=u(e,["topP"]);m!=null&&c(a,["topP"],m);const p=u(e,["topK"]);p!=null&&c(a,["topK"],p);const y=u(e,["candidateCount"]);y!=null&&c(a,["candidateCount"],y);const h=u(e,["maxOutputTokens"]);h!=null&&c(a,["maxOutputTokens"],h);const v=u(e,["stopSequences"]);v!=null&&c(a,["stopSequences"],v);const C=u(e,["responseLogprobs"]);C!=null&&c(a,["responseLogprobs"],C);const b=u(e,["logprobs"]);b!=null&&c(a,["logprobs"],b);const E=u(e,["presencePenalty"]);E!=null&&c(a,["presencePenalty"],E);const _=u(e,["frequencyPenalty"]);_!=null&&c(a,["frequencyPenalty"],_);const N=u(e,["seed"]);N!=null&&c(a,["seed"],N);const q=u(e,["responseMimeType"]);q!=null&&c(a,["responseMimeType"],q);const O=u(e,["responseSchema"]);if(O!=null&&c(a,["responseSchema"],vb(xs(O))),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=u(e,["safetySettings"]);if(o!==void 0&&$!=null){let B=$;Array.isArray(B)&&(B=B.map(le=>xb(le))),c(o,["safetySettings"],B)}const F=u(e,["tools"]);if(o!==void 0&&F!=null){let B=La(F);Array.isArray(B)&&(B=B.map(le=>Ab(Ua(le)))),c(o,["tools"],B)}const Z=u(e,["toolConfig"]);if(o!==void 0&&Z!=null&&c(o,["toolConfig"],Rb(Z)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=u(e,["cachedContent"]);o!==void 0&&Y!=null&&c(o,["cachedContent"],ti(n,Y));const ee=u(e,["responseModalities"]);ee!=null&&c(a,["responseModalities"],ee);const j=u(e,["mediaResolution"]);j!=null&&c(a,["mediaResolution"],j);const ce=u(e,["speechConfig"]);if(ce!=null&&c(a,["speechConfig"],Ub(Mg(ce))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=u(e,["thinkingConfig"]);return Q!=null&&c(a,["thinkingConfig"],Lb(Q)),a}function tg(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);if(s!=null){let m=Yt(s);Array.isArray(m)&&(m=m.map(p=>As(p))),c(o,["contents"],m)}const f=u(e,["config"]);return f!=null&&c(o,["generationConfig"],Ob(n,f,o)),o}function Vb(n,e){const o={},a=u(n,["taskType"]);e!==void 0&&a!=null&&c(e,["requests[]","taskType"],a);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const f=u(n,["outputDimensionality"]);if(e!==void 0&&f!=null&&c(e,["requests[]","outputDimensionality"],f),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function qb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);s!=null&&c(o,["requests[]","content"],wg(n,s));const f=u(e,["config"]);f!=null&&c(o,["config"],Vb(f,o));const m=u(e,["model"]);return m!==void 0&&c(o,["requests[]","model"],Be(n,m)),o}function zb(n,e){const o={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=u(n,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const f=u(n,["guidanceScale"]);if(e!==void 0&&f!=null&&c(e,["parameters","guidanceScale"],f),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=u(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const p=u(n,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const y=u(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&c(e,["parameters","includeSafetyAttributes"],y);const h=u(n,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const v=u(n,["language"]);e!==void 0&&v!=null&&c(e,["parameters","language"],v);const C=u(n,["outputMimeType"]);e!==void 0&&C!=null&&c(e,["parameters","outputOptions","mimeType"],C);const b=u(n,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&c(e,["parameters","outputOptions","compressionQuality"],b),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Bb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["prompt"]);s!=null&&c(o,["instances[0]","prompt"],s);const f=u(e,["config"]);return f!=null&&c(o,["config"],zb(f,o)),o}function Pb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","name"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function $b(n,e,o){const a={},s=u(e,["pageSize"]);o!==void 0&&s!=null&&c(o,["_query","pageSize"],s);const f=u(e,["pageToken"]);o!==void 0&&f!=null&&c(o,["_query","pageToken"],f);const m=u(e,["filter"]);o!==void 0&&m!=null&&c(o,["_query","filter"],m);const p=u(e,["queryBase"]);return o!==void 0&&p!=null&&c(o,["_url","models_url"],Dg(n,p)),a}function Gb(n,e){const o={},a=u(e,["config"]);return a!=null&&c(o,["config"],$b(n,a,o)),o}function Hb(n,e){const o={},a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const f=u(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),o}function Fb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","name"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],Hb(s,o)),o}function Yb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","name"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function Jb(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Zb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);if(s!=null){let m=Yt(s);Array.isArray(m)&&(m=m.map(p=>As(p))),c(o,["contents"],m)}const f=u(e,["config"]);return f!=null&&c(o,["config"],Jb(f)),o}function Qb(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["imageBytes"]);o!=null&&c(e,["bytesBase64Encoded"],En(o));const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Xb(n,e){const o={},a=u(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(n,["aspectRatio"]);if(e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const m=u(n,["personGeneration"]);if(e!==void 0&&m!=null&&c(e,["parameters","personGeneration"],m),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=u(n,["negativePrompt"]);e!==void 0&&p!=null&&c(e,["parameters","negativePrompt"],p);const y=u(n,["enhancePrompt"]);if(e!==void 0&&y!=null&&c(e,["parameters","enhancePrompt"],y),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return o}function Kb(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["prompt"]);s!=null&&c(o,["instances[0]","prompt"],s);const f=u(e,["image"]);if(f!=null&&c(o,["instances[0]","image"],Qb(f)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const m=u(e,["config"]);return m!=null&&c(o,["config"],Xb(m,o)),o}function Wb(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function jb(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["data"]);a!=null&&c(e,["data"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function e_(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function t_(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],Wb(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],jb(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],e_(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function bo(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>t_(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function n_(n){const e={},o=u(n,["anyOf"]);o!=null&&c(e,["anyOf"],o);const a=u(n,["default"]);a!=null&&c(e,["default"],a);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const f=u(n,["enum"]);f!=null&&c(e,["enum"],f);const m=u(n,["example"]);m!=null&&c(e,["example"],m);const p=u(n,["format"]);p!=null&&c(e,["format"],p);const y=u(n,["items"]);y!=null&&c(e,["items"],y);const h=u(n,["maxItems"]);h!=null&&c(e,["maxItems"],h);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const C=u(n,["maxProperties"]);C!=null&&c(e,["maxProperties"],C);const b=u(n,["maximum"]);b!=null&&c(e,["maximum"],b);const E=u(n,["minItems"]);E!=null&&c(e,["minItems"],E);const _=u(n,["minLength"]);_!=null&&c(e,["minLength"],_);const N=u(n,["minProperties"]);N!=null&&c(e,["minProperties"],N);const q=u(n,["minimum"]);q!=null&&c(e,["minimum"],q);const O=u(n,["nullable"]);O!=null&&c(e,["nullable"],O);const $=u(n,["pattern"]);$!=null&&c(e,["pattern"],$);const F=u(n,["properties"]);F!=null&&c(e,["properties"],F);const Z=u(n,["propertyOrdering"]);Z!=null&&c(e,["propertyOrdering"],Z);const Y=u(n,["required"]);Y!=null&&c(e,["required"],Y);const ee=u(n,["title"]);ee!=null&&c(e,["title"],ee);const j=u(n,["type"]);return j!=null&&c(e,["type"],j),e}function i_(n){const e={},o=u(n,["featureSelectionPreference"]);return o!=null&&c(e,["featureSelectionPreference"],o),e}function o_(n){const e={},o=u(n,["method"]);o!=null&&c(e,["method"],o);const a=u(n,["category"]);a!=null&&c(e,["category"],a);const s=u(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function a_(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["name"]);a!=null&&c(e,["name"],a);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const f=u(n,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const m=u(n,["response"]);m!=null&&c(e,["response"],m);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function l_(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function s_(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],l_(o)),e}function r_(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function u_(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],r_(o)),e}function c_(){return{}}function f_(n){const e={},o=u(n,["apiKeyString"]);return o!=null&&c(e,["apiKeyString"],o),e}function d_(n){const e={},o=u(n,["apiKeyConfig"]);o!=null&&c(e,["apiKeyConfig"],f_(o));const a=u(n,["authType"]);a!=null&&c(e,["authType"],a);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const f=u(n,["httpBasicAuthConfig"]);f!=null&&c(e,["httpBasicAuthConfig"],f);const m=u(n,["oauthConfig"]);m!=null&&c(e,["oauthConfig"],m);const p=u(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function m_(n){const e={},o=u(n,["authConfig"]);return o!=null&&c(e,["authConfig"],d_(o)),e}function p_(){return{}}function Bg(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(C=>a_(C))),c(e,["functionDeclarations"],v)}const a=u(n,["retrieval"]);a!=null&&c(e,["retrieval"],a);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],s_(s));const f=u(n,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],u_(f)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],c_());const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],m_(p)),u(n,["urlContext"])!=null&&c(e,["urlContext"],p_());const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function h_(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["allowedFunctionNames"]);return a!=null&&c(e,["allowedFunctionNames"],a),e}function g_(n){const e={},o=u(n,["latitude"]);o!=null&&c(e,["latitude"],o);const a=u(n,["longitude"]);return a!=null&&c(e,["longitude"],a),e}function y_(n){const e={},o=u(n,["latLng"]);o!=null&&c(e,["latLng"],g_(o));const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function v_(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&c(e,["functionCallingConfig"],h_(o));const a=u(n,["retrievalConfig"]);return a!=null&&c(e,["retrievalConfig"],y_(a)),e}function x_(n){const e={},o=u(n,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function T_(n){const e={},o=u(n,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],x_(o)),e}function C_(n){const e={},o=u(n,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],T_(o)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=u(n,["languageCode"]);return a!=null&&c(e,["languageCode"],a),e}function S_(n){const e={},o=u(n,["includeThoughts"]);o!=null&&c(e,["includeThoughts"],o);const a=u(n,["thinkingBudget"]);return a!=null&&c(e,["thinkingBudget"],a),e}function b_(n,e,o){const a={},s=u(e,["systemInstruction"]);o!==void 0&&s!=null&&c(o,["systemInstruction"],bo(ht(s)));const f=u(e,["temperature"]);f!=null&&c(a,["temperature"],f);const m=u(e,["topP"]);m!=null&&c(a,["topP"],m);const p=u(e,["topK"]);p!=null&&c(a,["topK"],p);const y=u(e,["candidateCount"]);y!=null&&c(a,["candidateCount"],y);const h=u(e,["maxOutputTokens"]);h!=null&&c(a,["maxOutputTokens"],h);const v=u(e,["stopSequences"]);v!=null&&c(a,["stopSequences"],v);const C=u(e,["responseLogprobs"]);C!=null&&c(a,["responseLogprobs"],C);const b=u(e,["logprobs"]);b!=null&&c(a,["logprobs"],b);const E=u(e,["presencePenalty"]);E!=null&&c(a,["presencePenalty"],E);const _=u(e,["frequencyPenalty"]);_!=null&&c(a,["frequencyPenalty"],_);const N=u(e,["seed"]);N!=null&&c(a,["seed"],N);const q=u(e,["responseMimeType"]);q!=null&&c(a,["responseMimeType"],q);const O=u(e,["responseSchema"]);O!=null&&c(a,["responseSchema"],n_(xs(O)));const $=u(e,["routingConfig"]);$!=null&&c(a,["routingConfig"],$);const F=u(e,["modelSelectionConfig"]);F!=null&&c(a,["modelConfig"],i_(F));const Z=u(e,["safetySettings"]);if(o!==void 0&&Z!=null){let et=Z;Array.isArray(et)&&(et=et.map(Te=>o_(Te))),c(o,["safetySettings"],et)}const Y=u(e,["tools"]);if(o!==void 0&&Y!=null){let et=La(Y);Array.isArray(et)&&(et=et.map(Te=>Bg(Ua(Te)))),c(o,["tools"],et)}const ee=u(e,["toolConfig"]);o!==void 0&&ee!=null&&c(o,["toolConfig"],v_(ee));const j=u(e,["labels"]);o!==void 0&&j!=null&&c(o,["labels"],j);const ce=u(e,["cachedContent"]);o!==void 0&&ce!=null&&c(o,["cachedContent"],ti(n,ce));const Q=u(e,["responseModalities"]);Q!=null&&c(a,["responseModalities"],Q);const B=u(e,["mediaResolution"]);B!=null&&c(a,["mediaResolution"],B);const le=u(e,["speechConfig"]);le!=null&&c(a,["speechConfig"],C_(Mg(le)));const _e=u(e,["audioTimestamp"]);_e!=null&&c(a,["audioTimestamp"],_e);const Oe=u(e,["thinkingConfig"]);return Oe!=null&&c(a,["thinkingConfig"],S_(Oe)),a}function ng(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);if(s!=null){let m=Yt(s);Array.isArray(m)&&(m=m.map(p=>bo(p))),c(o,["contents"],m)}const f=u(e,["config"]);return f!=null&&c(o,["generationConfig"],b_(n,f,o)),o}function __(n,e){const o={},a=u(n,["taskType"]);e!==void 0&&a!=null&&c(e,["instances[]","task_type"],a);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["instances[]","title"],s);const f=u(n,["outputDimensionality"]);e!==void 0&&f!=null&&c(e,["parameters","outputDimensionality"],f);const m=u(n,["mimeType"]);e!==void 0&&m!=null&&c(e,["instances[]","mimeType"],m);const p=u(n,["autoTruncate"]);return e!==void 0&&p!=null&&c(e,["parameters","autoTruncate"],p),o}function E_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);s!=null&&c(o,["instances[]","content"],wg(n,s));const f=u(e,["config"]);return f!=null&&c(o,["config"],__(f,o)),o}function A_(n,e){const o={},a=u(n,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const f=u(n,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(n,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const p=u(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["parameters","seed"],y);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const C=u(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&c(e,["parameters","includeSafetyAttributes"],C);const b=u(n,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const E=u(n,["language"]);e!==void 0&&E!=null&&c(e,["parameters","language"],E);const _=u(n,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const N=u(n,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const q=u(n,["addWatermark"]);e!==void 0&&q!=null&&c(e,["parameters","addWatermark"],q);const O=u(n,["enhancePrompt"]);return e!==void 0&&O!=null&&c(e,["parameters","enhancePrompt"],O),o}function w_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["prompt"]);s!=null&&c(o,["instances[0]","prompt"],s);const f=u(e,["config"]);return f!=null&&c(o,["config"],A_(f,o)),o}function ws(n){const e={},o=u(n,["gcsUri"]);o!=null&&c(e,["gcsUri"],o);const a=u(n,["imageBytes"]);a!=null&&c(e,["bytesBase64Encoded"],En(a));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function M_(n){const e={},o=u(n,["maskMode"]);o!=null&&c(e,["maskMode"],o);const a=u(n,["segmentationClasses"]);a!=null&&c(e,["maskClasses"],a);const s=u(n,["maskDilation"]);return s!=null&&c(e,["dilation"],s),e}function N_(n){const e={},o=u(n,["controlType"]);o!=null&&c(e,["controlType"],o);const a=u(n,["enableControlImageComputation"]);return a!=null&&c(e,["computeControl"],a),e}function R_(n){const e={},o=u(n,["styleDescription"]);return o!=null&&c(e,["styleDescription"],o),e}function D_(n){const e={},o=u(n,["subjectType"]);o!=null&&c(e,["subjectType"],o);const a=u(n,["subjectDescription"]);return a!=null&&c(e,["subjectDescription"],a),e}function k_(n){const e={},o=u(n,["referenceImage"]);o!=null&&c(e,["referenceImage"],ws(o));const a=u(n,["referenceId"]);a!=null&&c(e,["referenceId"],a);const s=u(n,["referenceType"]);s!=null&&c(e,["referenceType"],s);const f=u(n,["maskImageConfig"]);f!=null&&c(e,["maskImageConfig"],M_(f));const m=u(n,["controlImageConfig"]);m!=null&&c(e,["controlImageConfig"],N_(m));const p=u(n,["styleImageConfig"]);p!=null&&c(e,["styleImageConfig"],R_(p));const y=u(n,["subjectImageConfig"]);return y!=null&&c(e,["subjectImageConfig"],D_(y)),e}function I_(n,e){const o={},a=u(n,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const f=u(n,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const m=u(n,["aspectRatio"]);e!==void 0&&m!=null&&c(e,["parameters","aspectRatio"],m);const p=u(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["parameters","seed"],y);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const C=u(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&c(e,["parameters","includeSafetyAttributes"],C);const b=u(n,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const E=u(n,["language"]);e!==void 0&&E!=null&&c(e,["parameters","language"],E);const _=u(n,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const N=u(n,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const q=u(n,["editMode"]);e!==void 0&&q!=null&&c(e,["parameters","editMode"],q);const O=u(n,["baseSteps"]);return e!==void 0&&O!=null&&c(e,["parameters","editConfig","baseSteps"],O),o}function U_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["prompt"]);s!=null&&c(o,["instances[0]","prompt"],s);const f=u(e,["referenceImages"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(y=>k_(y))),c(o,["instances[0]","referenceImages"],p)}const m=u(e,["config"]);return m!=null&&c(o,["config"],I_(m,o)),o}function L_(n,e){const o={},a=u(n,["includeRaiReason"]);e!==void 0&&a!=null&&c(e,["parameters","includeRaiReason"],a);const s=u(n,["outputMimeType"]);e!==void 0&&s!=null&&c(e,["parameters","outputOptions","mimeType"],s);const f=u(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","compressionQuality"],f);const m=u(n,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);const p=u(n,["mode"]);return e!==void 0&&p!=null&&c(e,["parameters","mode"],p),o}function O_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["image"]);s!=null&&c(o,["instances[0]","image"],ws(s));const f=u(e,["upscaleFactor"]);f!=null&&c(o,["parameters","upscaleConfig","upscaleFactor"],f);const m=u(e,["config"]);return m!=null&&c(o,["config"],L_(m,o)),o}function V_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","name"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function q_(n,e,o){const a={},s=u(e,["pageSize"]);o!==void 0&&s!=null&&c(o,["_query","pageSize"],s);const f=u(e,["pageToken"]);o!==void 0&&f!=null&&c(o,["_query","pageToken"],f);const m=u(e,["filter"]);o!==void 0&&m!=null&&c(o,["_query","filter"],m);const p=u(e,["queryBase"]);return o!==void 0&&p!=null&&c(o,["_url","models_url"],Dg(n,p)),a}function z_(n,e){const o={},a=u(e,["config"]);return a!=null&&c(o,["config"],q_(n,a,o)),o}function B_(n,e){const o={},a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const f=u(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&c(e,["defaultCheckpointId"],f),o}function P_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],B_(s,o)),o}function $_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","name"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],s),o}function G_(n,e){const o={},a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&c(e,["systemInstruction"],bo(ht(a)));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>Bg(p))),c(e,["tools"],m)}const f=u(n,["generationConfig"]);return e!==void 0&&f!=null&&c(e,["generationConfig"],f),o}function H_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);if(s!=null){let m=Yt(s);Array.isArray(m)&&(m=m.map(p=>bo(p))),c(o,["contents"],m)}const f=u(e,["config"]);return f!=null&&c(o,["config"],G_(f,o)),o}function F_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["contents"]);if(s!=null){let m=Yt(s);Array.isArray(m)&&(m=m.map(p=>bo(p))),c(o,["contents"],m)}const f=u(e,["config"]);return f!=null&&c(o,["config"],f),o}function Y_(n){const e={},o=u(n,["uri"]);o!=null&&c(e,["gcsUri"],o);const a=u(n,["videoBytes"]);a!=null&&c(e,["bytesBase64Encoded"],En(a));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function J_(n,e){const o={},a=u(n,["numberOfVideos"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const f=u(n,["fps"]);e!==void 0&&f!=null&&c(e,["parameters","fps"],f);const m=u(n,["durationSeconds"]);e!==void 0&&m!=null&&c(e,["parameters","durationSeconds"],m);const p=u(n,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const y=u(n,["aspectRatio"]);e!==void 0&&y!=null&&c(e,["parameters","aspectRatio"],y);const h=u(n,["resolution"]);e!==void 0&&h!=null&&c(e,["parameters","resolution"],h);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const C=u(n,["pubsubTopic"]);e!==void 0&&C!=null&&c(e,["parameters","pubsubTopic"],C);const b=u(n,["negativePrompt"]);e!==void 0&&b!=null&&c(e,["parameters","negativePrompt"],b);const E=u(n,["enhancePrompt"]);e!==void 0&&E!=null&&c(e,["parameters","enhancePrompt"],E);const _=u(n,["generateAudio"]);e!==void 0&&_!=null&&c(e,["parameters","generateAudio"],_);const N=u(n,["lastFrame"]);return e!==void 0&&N!=null&&c(e,["instances[0]","lastFrame"],ws(N)),o}function Z_(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["_url","model"],Be(n,a));const s=u(e,["prompt"]);s!=null&&c(o,["instances[0]","prompt"],s);const f=u(e,["image"]);f!=null&&c(o,["instances[0]","image"],ws(f));const m=u(e,["video"]);m!=null&&c(o,["instances[0]","video"],Y_(m));const p=u(e,["config"]);return p!=null&&c(o,["config"],J_(p,o)),o}function Q_(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function X_(n){const e={},o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function K_(n){const e={},o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function W_(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],Q_(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],X_(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],K_(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function j_(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>W_(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function eE(n){const e={},o=u(n,["citationSources"]);return o!=null&&c(e,["citations"],o),e}function tE(n){const e={},o=u(n,["retrievedUrl"]);o!=null&&c(e,["retrievedUrl"],o);const a=u(n,["urlRetrievalStatus"]);return a!=null&&c(e,["urlRetrievalStatus"],a),e}function nE(n){const e={},o=u(n,["urlMetadata"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>tE(s))),c(e,["urlMetadata"],a)}return e}function iE(n){const e={},o=u(n,["content"]);o!=null&&c(e,["content"],j_(o));const a=u(n,["citationMetadata"]);a!=null&&c(e,["citationMetadata"],eE(a));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const f=u(n,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(n,["urlContextMetadata"]);m!=null&&c(e,["urlContextMetadata"],nE(m));const p=u(n,["avgLogprobs"]);p!=null&&c(e,["avgLogprobs"],p);const y=u(n,["groundingMetadata"]);y!=null&&c(e,["groundingMetadata"],y);const h=u(n,["index"]);h!=null&&c(e,["index"],h);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const C=u(n,["safetyRatings"]);return C!=null&&c(e,["safetyRatings"],C),e}function ig(n){const e={},o=u(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(p=>iE(p))),c(e,["candidates"],m)}const a=u(n,["modelVersion"]);a!=null&&c(e,["modelVersion"],a);const s=u(n,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);const f=u(n,["usageMetadata"]);return f!=null&&c(e,["usageMetadata"],f),e}function oE(n){const e={},o=u(n,["values"]);return o!=null&&c(e,["values"],o),e}function aE(){return{}}function lE(n){const e={},o=u(n,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>oE(f))),c(e,["embeddings"],s)}return u(n,["metadata"])!=null&&c(e,["metadata"],aE()),e}function sE(n){const e={},o=u(n,["bytesBase64Encoded"]);o!=null&&c(e,["imageBytes"],En(o));const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function Pg(n){const e={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(e,["categories"],o);const a=u(n,["safetyAttributes","scores"]);a!=null&&c(e,["scores"],a);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function rE(n){const e={},o=u(n,["_self"]);o!=null&&c(e,["image"],sE(o));const a=u(n,["raiFilteredReason"]);a!=null&&c(e,["raiFilteredReason"],a);const s=u(n,["_self"]);return s!=null&&c(e,["safetyAttributes"],Pg(s)),e}function uE(n){const e={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>rE(f))),c(e,["generatedImages"],s)}const a=u(n,["positivePromptSafetyAttributes"]);return a!=null&&c(e,["positivePromptSafetyAttributes"],Pg(a)),e}function cE(n){const e={},o=u(n,["baseModel"]);o!=null&&c(e,["baseModel"],o);const a=u(n,["createTime"]);a!=null&&c(e,["createTime"],a);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function hc(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const f=u(n,["version"]);f!=null&&c(e,["version"],f);const m=u(n,["_self"]);m!=null&&c(e,["tunedModelInfo"],cE(m));const p=u(n,["inputTokenLimit"]);p!=null&&c(e,["inputTokenLimit"],p);const y=u(n,["outputTokenLimit"]);y!=null&&c(e,["outputTokenLimit"],y);const h=u(n,["supportedGenerationMethods"]);return h!=null&&c(e,["supportedActions"],h),e}function fE(n,e){const o={},a=u(e,["nextPageToken"]);a!=null&&c(o,["nextPageToken"],a);const s=u(e,["_self"]);if(s!=null){let f=kg(s);Array.isArray(f)&&(f=f.map(m=>hc(m))),c(o,["models"],f)}return o}function dE(){return{}}function mE(n){const e={},o=u(n,["totalTokens"]);o!=null&&c(e,["totalTokens"],o);const a=u(n,["cachedContentTokenCount"]);return a!=null&&c(e,["cachedContentTokenCount"],a),e}function pE(n){const e={},o=u(n,["video","uri"]);o!=null&&c(e,["uri"],o);const a=u(n,["video","encodedVideo"]);a!=null&&c(e,["videoBytes"],En(a));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function hE(n){const e={},o=u(n,["_self"]);return o!=null&&c(e,["video"],pE(o)),e}function gE(n){const e={},o=u(n,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>hE(m))),c(e,["generatedVideos"],f)}const a=u(n,["raiMediaFilteredCount"]);a!=null&&c(e,["raiMediaFilteredCount"],a);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function yE(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["metadata"]);a!=null&&c(e,["metadata"],a);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const f=u(n,["error"]);f!=null&&c(e,["error"],f);const m=u(n,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],gE(m)),e}function vE(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function xE(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["data"]);a!=null&&c(e,["data"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function TE(n){const e={},o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const a=u(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function CE(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],vE(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],xE(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],TE(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function SE(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>CE(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function bE(n){const e={},o=u(n,["citations"]);return o!=null&&c(e,["citations"],o),e}function _E(n){const e={},o=u(n,["retrievedUrl"]);o!=null&&c(e,["retrievedUrl"],o);const a=u(n,["urlRetrievalStatus"]);return a!=null&&c(e,["urlRetrievalStatus"],a),e}function EE(n){const e={},o=u(n,["urlMetadata"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>_E(s))),c(e,["urlMetadata"],a)}return e}function AE(n){const e={},o=u(n,["content"]);o!=null&&c(e,["content"],SE(o));const a=u(n,["citationMetadata"]);a!=null&&c(e,["citationMetadata"],bE(a));const s=u(n,["finishMessage"]);s!=null&&c(e,["finishMessage"],s);const f=u(n,["finishReason"]);f!=null&&c(e,["finishReason"],f);const m=u(n,["urlContextMetadata"]);m!=null&&c(e,["urlContextMetadata"],EE(m));const p=u(n,["avgLogprobs"]);p!=null&&c(e,["avgLogprobs"],p);const y=u(n,["groundingMetadata"]);y!=null&&c(e,["groundingMetadata"],y);const h=u(n,["index"]);h!=null&&c(e,["index"],h);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const C=u(n,["safetyRatings"]);return C!=null&&c(e,["safetyRatings"],C),e}function og(n){const e={},o=u(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(h=>AE(h))),c(e,["candidates"],y)}const a=u(n,["createTime"]);a!=null&&c(e,["createTime"],a);const s=u(n,["responseId"]);s!=null&&c(e,["responseId"],s);const f=u(n,["modelVersion"]);f!=null&&c(e,["modelVersion"],f);const m=u(n,["promptFeedback"]);m!=null&&c(e,["promptFeedback"],m);const p=u(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function wE(n){const e={},o=u(n,["truncated"]);o!=null&&c(e,["truncated"],o);const a=u(n,["token_count"]);return a!=null&&c(e,["tokenCount"],a),e}function ME(n){const e={},o=u(n,["values"]);o!=null&&c(e,["values"],o);const a=u(n,["statistics"]);return a!=null&&c(e,["statistics"],wE(a)),e}function NE(n){const e={},o=u(n,["billableCharacterCount"]);return o!=null&&c(e,["billableCharacterCount"],o),e}function RE(n){const e={},o=u(n,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>ME(f))),c(e,["embeddings"],s)}const a=u(n,["metadata"]);return a!=null&&c(e,["metadata"],NE(a)),e}function DE(n){const e={},o=u(n,["gcsUri"]);o!=null&&c(e,["gcsUri"],o);const a=u(n,["bytesBase64Encoded"]);a!=null&&c(e,["imageBytes"],En(a));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function $g(n){const e={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(e,["categories"],o);const a=u(n,["safetyAttributes","scores"]);a!=null&&c(e,["scores"],a);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function wc(n){const e={},o=u(n,["_self"]);o!=null&&c(e,["image"],DE(o));const a=u(n,["raiFilteredReason"]);a!=null&&c(e,["raiFilteredReason"],a);const s=u(n,["_self"]);s!=null&&c(e,["safetyAttributes"],$g(s));const f=u(n,["prompt"]);return f!=null&&c(e,["enhancedPrompt"],f),e}function kE(n){const e={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>wc(f))),c(e,["generatedImages"],s)}const a=u(n,["positivePromptSafetyAttributes"]);return a!=null&&c(e,["positivePromptSafetyAttributes"],$g(a)),e}function IE(n){const e={},o=u(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>wc(s))),c(e,["generatedImages"],a)}return e}function UE(n){const e={},o=u(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>wc(s))),c(e,["generatedImages"],a)}return e}function LE(n){const e={},o=u(n,["endpoint"]);o!=null&&c(e,["name"],o);const a=u(n,["deployedModelId"]);return a!=null&&c(e,["deployedModelId"],a),e}function OE(n){const e={},o=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(e,["baseModel"],o);const a=u(n,["createTime"]);a!=null&&c(e,["createTime"],a);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function VE(n){const e={},o=u(n,["checkpointId"]);o!=null&&c(e,["checkpointId"],o);const a=u(n,["epoch"]);a!=null&&c(e,["epoch"],a);const s=u(n,["step"]);return s!=null&&c(e,["step"],s),e}function gc(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const f=u(n,["versionId"]);f!=null&&c(e,["version"],f);const m=u(n,["deployedModels"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(b=>LE(b))),c(e,["endpoints"],C)}const p=u(n,["labels"]);p!=null&&c(e,["labels"],p);const y=u(n,["_self"]);y!=null&&c(e,["tunedModelInfo"],OE(y));const h=u(n,["defaultCheckpointId"]);h!=null&&c(e,["defaultCheckpointId"],h);const v=u(n,["checkpoints"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(b=>VE(b))),c(e,["checkpoints"],C)}return e}function qE(n,e){const o={},a=u(e,["nextPageToken"]);a!=null&&c(o,["nextPageToken"],a);const s=u(e,["_self"]);if(s!=null){let f=kg(s);Array.isArray(f)&&(f=f.map(m=>gc(m))),c(o,["models"],f)}return o}function zE(){return{}}function BE(n){const e={},o=u(n,["totalTokens"]);return o!=null&&c(e,["totalTokens"],o),e}function PE(n){const e={},o=u(n,["tokensInfo"]);return o!=null&&c(e,["tokensInfo"],o),e}function $E(n){const e={},o=u(n,["gcsUri"]);o!=null&&c(e,["uri"],o);const a=u(n,["bytesBase64Encoded"]);a!=null&&c(e,["videoBytes"],En(a));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function GE(n){const e={},o=u(n,["_self"]);return o!=null&&c(e,["video"],$E(o)),e}function HE(n){const e={},o=u(n,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>GE(m))),c(e,["generatedVideos"],f)}const a=u(n,["raiMediaFilteredCount"]);a!=null&&c(e,["raiMediaFilteredCount"],a);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function FE(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["metadata"]);a!=null&&c(e,["metadata"],a);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const f=u(n,["error"]);f!=null&&c(e,["error"],f);const m=u(n,["response"]);return m!=null&&c(e,["response"],HE(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YE="Content-Type",JE="X-Server-Timeout",ZE="User-Agent",yc="x-goog-api-client",QE="1.6.0",XE=`google-genai-sdk/${QE}`,KE="v1beta1",WE="v1beta",ag=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class jE{constructor(e){var o,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:KE,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:WE,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,a){const s=[this.getRequestUrlInternal(o)];return a&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,a);if(e.queryParams)for(const[m,p]of Object.entries(e.queryParams))s.searchParams.append(m,String(p));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,o,e.abortSignal),this.unaryApiCall(s,f,e.httpMethod)}patchHttpOptions(e,o){const a=JSON.parse(JSON.stringify(e));for(const[s,f]of Object.entries(o))typeof f=="object"?a[s]=Object.assign(Object.assign({},a[s]),f):f!==void 0&&(a[s]=f);return a}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,a);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,o,e.abortSignal),this.streamApiCall(s,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,a){if(o&&o.timeout||a){const s=new AbortController,f=s.signal;o.timeout&&(o==null?void 0:o.timeout)>0&&setTimeout(()=>s.abort(),o.timeout),a&&a.addEventListener("abort",()=>{s.abort()}),e.signal=f}return o&&o.extraBody!==null&&e1(e,o.extraBody),e.headers=await this.getHeadersInternal(o),e}async unaryApiCall(e,o,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:a})).then(async s=>(await lg(s),new fc(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,o,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:a})).then(async s=>(await lg(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var o;return ho(this,arguments,function*(){const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),f=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let m="";for(;;){const{done:p,value:y}=yield Pe(s.read());if(p){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=f.decode(y);try{const C=JSON.parse(h);if("error"in C){const b=JSON.parse(JSON.stringify(C.error)),E=b.status,_=b.code,N=`got status: ${E}. ${JSON.stringify(C)}`;if(_>=400&&_<600)throw new Es({message:N,status:_})}}catch(C){if(C.name==="ApiError")throw C}m+=h;let v=m.match(ag);for(;v;){const C=v[1];try{const b=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new fc(b)),m=m.slice(v[0].length),v=m.match(ag)}catch(b){throw new Error(`exception parsing stream chunk ${C}. ${b}`)}}}}finally{s.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},o=XE+" "+this.clientOptions.userAgentExtra;return e[ZE]=o,e[yc]=o,e[YE]="application/json",e}async getHeadersInternal(e){const o=new Headers;if(e&&e.headers){for(const[a,s]of Object.entries(e.headers))o.append(a,s);e.timeout&&e.timeout>0&&o.append(JE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o),o}async uploadFile(e,o){var a;const s={};o!=null&&(s.mimeType=o.mimeType,s.name=o.name,s.displayName=o.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const f=this.clientOptions.uploader,m=await f.stat(e);s.sizeBytes=String(m.size);const p=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:m.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const y=await this.fetchUploadUrl(s,o);return f.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o){var a;let s={};o!=null&&o.httpOptions?s=o.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},m=await this.request({path:me("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:s});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(a=m==null?void 0:m.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function lg(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let a;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(a);throw o>=400&&o<600?new Es({message:s,status:o}):new Error(s)}}function e1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const f=JSON.parse(n.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))o=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(f,m){const p=Object.assign({},f);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const h=m[y],v=p[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=a(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),p[y]=h)}return p}const s=a(o,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t1="mcp_used/unknown";function Gg(n){for(const e of n)if(Mc(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Hg(n){var e;const o=(e=n[yc])!==null&&e!==void 0?e:"";n[yc]=(o+` ${t1}`).trimStart()}function n1(n){var e,o,a;return(a=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>Mc(s)))!==null&&a!==void 0?a:!1}function i1(n){var e,o,a;return(a=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>!Mc(s)))!==null&&a!==void 0?a:!1}function Mc(n){return n!==null&&typeof n=="object"&&n instanceof Nc}function o1(n,e=100){return ho(this,arguments,function*(){let a,s=0;for(;s<e;){const f=yield Pe(n.listTools({cursor:a}));for(const m of f.tools)yield yield Pe(m),s++;if(!f.nextCursor)break;a=f.nextCursor}})}class Nc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Nc(e,o)}async initialize(){var e,o,a,s;if(this.mcpTools.length>0)return;const f={},m=[];for(const v of this.mcpClients)try{for(var p=!0,y=(o=void 0,Ra(o1(v))),h;h=await y.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const C=s;m.push(C);const b=C.name;if(f[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);f[b]=v}}catch(C){o={error:C}}finally{try{!p&&!e&&(a=y.return)&&await a.call(y)}finally{if(o)throw o.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),oT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[a.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await s.callTool({name:a.name,arguments:a.args},void 0,f);o.push({functionResponse:{name:a.name,response:m.isError?{error:m}:m}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function a1(n,e,o){const a=new Fx;let s;o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data);const f=mb(s);Object.assign(a,f),e(a)}class l1{constructor(e,o,a){this.apiClient=e,this.auth=o,this.webSocketFactory=a}async connect(e){var o,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=u1(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${s}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const v=new Promise(F=>{h=F}),C=e.callbacks,b=function(){h({})},E=this.apiClient,_={onopen:b,onmessage:F=>{a1(E,C.onmessage,F)},onerror:(o=C==null?void 0:C.onerror)!==null&&o!==void 0?o:function(F){},onclose:(a=C==null?void 0:C.onclose)!==null&&a!==void 0?a:function(F){}},N=this.webSocketFactory.create(y,r1(m),_);N.connect(),await v;const q=Be(this.apiClient,e.model),O=Vg({model:q}),$=pc({setup:O});return N.send(JSON.stringify($)),new s1(N,this.apiClient)}}class s1{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=wS(e),a=qg(o);this.conn.send(JSON.stringify({clientContent:a}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=MS(e),a=pc(o);this.conn.send(JSON.stringify(a))}sendPlaybackControl(e){const o=pc({playbackControl:e});this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(mo.PLAY)}pause(){this.sendPlaybackControl(mo.PAUSE)}stop(){this.sendPlaybackControl(mo.STOP)}resetContext(){this.sendPlaybackControl(mo.RESET_CONTEXT)}close(){this.conn.close()}}function r1(n){const e={};return n.forEach((o,a)=>{e[a]=o}),e}function u1(n){const e=new Headers;for(const[o,a]of Object.entries(n))e.append(o,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function f1(n,e,o){const a=new Hx;let s;if(o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data),n.isVertexAI()){const f=ob(s);Object.assign(a,f)}else{const f=ib(s);Object.assign(a,f)}e(a)}class d1{constructor(e,o,a){this.apiClient=e,this.auth=o,this.webSocketFactory=a,this.music=new l1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,a,s,f,m,p;const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const C=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Gg(e.config.tools)&&Hg(C);const b=g1(C);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b);else{const Q=this.apiClient.getApiKey();let B="BidiGenerateContent",le="key";Q!=null&&Q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),B="BidiGenerateContentConstrained",le="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${B}?${le}=${Q}`}let E=()=>{};const _=new Promise(Q=>{E=Q}),N=e.callbacks,q=function(){var Q;(Q=N==null?void 0:N.onopen)===null||Q===void 0||Q.call(N),E({})},O=this.apiClient,$={onopen:q,onmessage:Q=>{f1(O,N.onmessage,Q)},onerror:(o=N==null?void 0:N.onerror)!==null&&o!==void 0?o:function(Q){},onclose:(a=N==null?void 0:N.onclose)!==null&&a!==void 0?a:function(Q){}},F=this.webSocketFactory.create(v,h1(b),$);F.connect(),await _;let Z=Be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Z.startsWith("publishers/")){const Q=this.apiClient.getProject(),B=this.apiClient.getLocation();Z=`projects/${Q}/locations/${B}/`+Z}let Y={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ys.AUDIO]}:e.config.responseModalities=[ys.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(p=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&p!==void 0?p:[],j=[];for(const Q of ee)if(this.isCallableTool(Q)){const B=Q;j.push(await B.tool())}else j.push(Q);j.length>0&&(e.config.tools=j);const ce={model:Z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=TS(this.apiClient,ce):Y=xS(this.apiClient,ce),delete Y.config,F.send(JSON.stringify(Y)),new p1(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const m1={turnComplete:!0};class p1{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let a=[];try{a=Yt(o.turns),e.isVertexAI()?a=a.map(s=>bo(s)):a=a.map(s=>As(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:a,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let a=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?a=o.functionResponses:a=[o.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const f of a){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(c1)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},m1),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:AS(e)}:o={realtimeInput:ES(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function h1(n){const e={};return n.forEach((o,a)=>{e[a]=o}),e}function g1(n){const e=new Headers;for(const[o,a]of Object.entries(n))e.append(o,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sg=10;function rg(n){var e,o,a;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const m of(o=n==null?void 0:n.tools)!==null&&o!==void 0?o:[])if(ss(m)){s=!0;break}if(!s)return!0;const f=(a=n==null?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function ss(n){return"callTool"in n&&typeof n.callTool=="function"}function ug(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y1 extends So{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var a,s,f,m,p;const y=await this.processParamsForMcpUsage(o);if(!n1(o)||rg(o.config))return await this.generateContentInternal(y);if(i1(o))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const C=Yt(y.contents),b=(f=(s=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&f!==void 0?f:sg;let E=0;for(;E<b&&(h=await this.generateContentInternal(y),!(!h.functionCalls||h.functionCalls.length===0));){const _=h.candidates[0].content,N=[];for(const q of(p=(m=o.config)===null||m===void 0?void 0:m.tools)!==null&&p!==void 0?p:[])if(ss(q)){const $=await q.callTool(h.functionCalls);N.push(...$)}E++,v={role:"user",parts:N},y.contents=Yt(y.contents),y.contents.push(_),y.contents.push(v),ug(y.config)&&(C.push(_),C.push(v))}return ug(y.config)&&(h.automaticFunctionCallingHistory=C),h},this.generateContentStream=async o=>{if(rg(o.config)){const a=await this.processParamsForMcpUsage(o);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(a=>{var s;let f;const m=[];if(a!=null&&a.generatedImages)for(const y of a.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((s=y==null?void 0:y.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?f=y==null?void 0:y.safetyAttributes:m.push(y);let p;return f?p={generatedImages:m,positivePromptSafetyAttributes:f}:p={generatedImages:m},p}),this.list=async o=>{var a;const m={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((a=m.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new _s(Co.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(m),m)},this.editImage=async o=>{const a={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(a.referenceImages=o.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async o=>{let a={numberOfImages:1,mode:"upscale"};o.config&&(a=Object.assign(Object.assign({},a),o.config));const s={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:a};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var o,a,s;const f=(o=e.config)===null||o===void 0?void 0:o.tools;if(!f)return e;const m=await Promise.all(f.map(async y=>ss(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(p.config.tools=m,e.config&&e.config.tools&&Gg(e.config.tools)){const y=(s=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Hg(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var o,a,s;const f=new Map;for(const m of(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(ss(m)){const p=m,y=await p.tool();for(const h of(s=y.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(f.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);f.set(h.name,p)}}return f}async processAfcStream(e){var o,a,s;const f=(s=(a=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:sg;let m=!1,p=0;const y=await this.initAfcToolsMap(e);return function(h,v,C){var b,E;return ho(this,arguments,function*(){for(var _,N,q,O;p<f;){m&&(p++,m=!1);const Y=yield Pe(h.processParamsForMcpUsage(C)),ee=yield Pe(h.generateContentStreamInternal(Y)),j=[],ce=[];try{for(var $=!0,F=(N=void 0,Ra(ee)),Z;Z=yield Pe(F.next()),_=Z.done,!_;$=!0){O=Z.value,$=!1;const Q=O;if(yield yield Pe(Q),Q.candidates&&(!((b=Q.candidates[0])===null||b===void 0)&&b.content)){ce.push(Q.candidates[0].content);for(const B of(E=Q.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(p<f&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(B.functionCall.name)){const le=yield Pe(v.get(B.functionCall.name).callTool([B.functionCall]));j.push(...le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(Q){N={error:Q}}finally{try{!$&&!_&&(q=F.return)&&(yield Pe(q.call(F)))}finally{if(N)throw N.error}}if(j.length>0){m=!0;const Q=new Ea;Q.candidates=[{content:{role:"user",parts:j}}],yield yield Pe(Q);const B=[];B.push(...ce),B.push({role:"user",parts:j});const le=Yt(C.contents).concat(B);C.contents=le}else break}})}(this,y,e)}async generateContentInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=ng(this.apiClient,e);return p=me("{model}:generateContent",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=og(v),b=new Ea;return Object.assign(b,C),b})}else{const h=tg(this.apiClient,e);return p=me("{model}:generateContent",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=ig(v),b=new Ea;return Object.assign(b,C),b})}}async generateContentStreamInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=ng(this.apiClient,e);return p=me("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),m.then(function(C){return ho(this,arguments,function*(){var b,E,_,N;try{for(var q=!0,O=Ra(C),$;$=yield Pe(O.next()),b=$.done,!b;q=!0){N=$.value,q=!1;const Z=og(yield Pe(N.json())),Y=new Ea;Object.assign(Y,Z),yield yield Pe(Y)}}catch(F){E={error:F}}finally{try{!q&&!b&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(E)throw E.error}}})})}else{const h=tg(this.apiClient,e);return p=me("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(C){return ho(this,arguments,function*(){var b,E,_,N;try{for(var q=!0,O=Ra(C),$;$=yield Pe(O.next()),b=$.done,!b;q=!0){N=$.value,q=!1;const Z=ig(yield Pe(N.json())),Y=new Ea;Object.assign(Y,Z),yield yield Pe(Y)}}catch(F){E={error:F}}finally{try{!q&&!b&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=E_(this.apiClient,e);return p=me("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=RE(v),b=new Lh;return Object.assign(b,C),b})}else{const h=qb(this.apiClient,e);return p=me("{model}:batchEmbedContents",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=lE(v),b=new Lh;return Object.assign(b,C),b})}}async generateImagesInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=w_(this.apiClient,e);return p=me("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=kE(v),b=new Oh;return Object.assign(b,C),b})}else{const h=Bb(this.apiClient,e);return p=me("{model}:predict",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=uE(v),b=new Oh;return Object.assign(b,C),b})}}async editImageInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=U_(this.apiClient,e);return f=me("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>{const h=IE(y),v=new qx;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=O_(this.apiClient,e);return f=me("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>{const h=UE(y),v=new zx;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=V_(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>gc(v))}else{const h=Pb(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>hc(v))}}async listInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=z_(this.apiClient,e);return p=me("{models_url}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=qE(this.apiClient,v),b=new Vh;return Object.assign(b,C),b})}else{const h=Gb(this.apiClient,e);return p=me("{models_url}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=fE(this.apiClient,v),b=new Vh;return Object.assign(b,C),b})}}async update(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=P_(this.apiClient,e);return p=me("{model}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>gc(v))}else{const h=Fb(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>hc(v))}}async delete(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=$_(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(()=>{const v=zE(),C=new qh;return Object.assign(C,v),C})}else{const h=Yb(this.apiClient,e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(()=>{const v=dE(),C=new qh;return Object.assign(C,v),C})}}async countTokens(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=H_(this.apiClient,e);return p=me("{model}:countTokens",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=BE(v),b=new zh;return Object.assign(b,C),b})}else{const h=Zb(this.apiClient,e);return p=me("{model}:countTokens",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=mE(v),b=new zh;return Object.assign(b,C),b})}}async computeTokens(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=F_(this.apiClient,e);return f=me("{model}:computeTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>{const h=PE(y),v=new Bx;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=Z_(this.apiClient,e);return p=me("{model}:predictLongRunning",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>FE(v))}else{const h=Kb(this.apiClient,e);return p=me("{model}:predictLongRunning",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>yE(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v1(n){const e={},o=u(n,["operationName"]);o!=null&&c(e,["_url","operationName"],o);const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function x1(n){const e={},o=u(n,["operationName"]);o!=null&&c(e,["_url","operationName"],o);const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function T1(n){const e={},o=u(n,["operationName"]);o!=null&&c(e,["operationName"],o);const a=u(n,["resourceName"]);a!=null&&c(e,["_url","resourceName"],a);const s=u(n,["config"]);return s!=null&&c(e,["config"],s),e}function C1(n){const e={},o=u(n,["video","uri"]);o!=null&&c(e,["uri"],o);const a=u(n,["video","encodedVideo"]);a!=null&&c(e,["videoBytes"],En(a));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function S1(n){const e={},o=u(n,["_self"]);return o!=null&&c(e,["video"],C1(o)),e}function b1(n){const e={},o=u(n,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>S1(m))),c(e,["generatedVideos"],f)}const a=u(n,["raiMediaFilteredCount"]);a!=null&&c(e,["raiMediaFilteredCount"],a);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function _1(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["metadata"]);a!=null&&c(e,["metadata"],a);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const f=u(n,["error"]);f!=null&&c(e,["error"],f);const m=u(n,["response","generateVideoResponse"]);return m!=null&&c(e,["response"],b1(m)),e}function E1(n){const e={},o=u(n,["gcsUri"]);o!=null&&c(e,["uri"],o);const a=u(n,["bytesBase64Encoded"]);a!=null&&c(e,["videoBytes"],En(a));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function A1(n){const e={},o=u(n,["_self"]);return o!=null&&c(e,["video"],E1(o)),e}function w1(n){const e={},o=u(n,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>A1(m))),c(e,["generatedVideos"],f)}const a=u(n,["raiMediaFilteredCount"]);a!=null&&c(e,["raiMediaFilteredCount"],a);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function cg(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["metadata"]);a!=null&&c(e,["metadata"],a);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const f=u(n,["error"]);f!=null&&c(e,["error"],f);const m=u(n,["response"]);return m!=null&&c(e,["response"],w1(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M1 extends So{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,a=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let f;return a&&"httpOptions"in a&&(f=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:f}})}else return this.getVideosOperationInternal({operationName:o.name,config:a})}async getVideosOperationInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=x1(e);return p=me("{operationName}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>cg(v))}else{const h=v1(e);return p=me("{operationName}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>_1(v))}}async fetchPredictVideosOperationInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=T1(e);return f=me("{resourceName}:fetchPredictOperation",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>cg(y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N1(n){const e={},o=u(n,["voiceName"]);return o!=null&&c(e,["voiceName"],o),e}function Fg(n){const e={},o=u(n,["prebuiltVoiceConfig"]);return o!=null&&c(e,["prebuiltVoiceConfig"],N1(o)),e}function R1(n){const e={},o=u(n,["speaker"]);o!=null&&c(e,["speaker"],o);const a=u(n,["voiceConfig"]);return a!=null&&c(e,["voiceConfig"],Fg(a)),e}function D1(n){const e={},o=u(n,["speakerVoiceConfigs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>R1(s))),c(e,["speakerVoiceConfigs"],a)}return e}function k1(n){const e={},o=u(n,["voiceConfig"]);o!=null&&c(e,["voiceConfig"],Fg(o));const a=u(n,["multiSpeakerVoiceConfig"]);a!=null&&c(e,["multiSpeakerVoiceConfig"],D1(a));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function I1(n){const e={},o=u(n,["fps"]);o!=null&&c(e,["fps"],o);const a=u(n,["endOffset"]);a!=null&&c(e,["endOffset"],a);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function U1(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["data"]);o!=null&&c(e,["data"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function L1(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(e,["fileUri"],o);const a=u(n,["mimeType"]);return a!=null&&c(e,["mimeType"],a),e}function O1(n){const e={},o=u(n,["videoMetadata"]);o!=null&&c(e,["videoMetadata"],I1(o));const a=u(n,["thought"]);a!=null&&c(e,["thought"],a);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],U1(s));const f=u(n,["fileData"]);f!=null&&c(e,["fileData"],L1(f));const m=u(n,["thoughtSignature"]);m!=null&&c(e,["thoughtSignature"],m);const p=u(n,["codeExecutionResult"]);p!=null&&c(e,["codeExecutionResult"],p);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const h=u(n,["functionCall"]);h!=null&&c(e,["functionCall"],h);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const C=u(n,["text"]);return C!=null&&c(e,["text"],C),e}function V1(n){const e={},o=u(n,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(f=>O1(f))),c(e,["parts"],s)}const a=u(n,["role"]);return a!=null&&c(e,["role"],a),e}function q1(n){const e={},o=u(n,["behavior"]);o!=null&&c(e,["behavior"],o);const a=u(n,["description"]);a!=null&&c(e,["description"],a);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const f=u(n,["parameters"]);f!=null&&c(e,["parameters"],f);const m=u(n,["parametersJsonSchema"]);m!=null&&c(e,["parametersJsonSchema"],m);const p=u(n,["response"]);p!=null&&c(e,["response"],p);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function z1(n){const e={},o=u(n,["startTime"]);o!=null&&c(e,["startTime"],o);const a=u(n,["endTime"]);return a!=null&&c(e,["endTime"],a),e}function B1(n){const e={},o=u(n,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],z1(o)),e}function P1(n){const e={},o=u(n,["mode"]);o!=null&&c(e,["mode"],o);const a=u(n,["dynamicThreshold"]);return a!=null&&c(e,["dynamicThreshold"],a),e}function $1(n){const e={},o=u(n,["dynamicRetrievalConfig"]);return o!=null&&c(e,["dynamicRetrievalConfig"],P1(o)),e}function G1(){return{}}function H1(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>q1(y))),c(e,["functionDeclarations"],p)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=u(n,["googleSearch"]);a!=null&&c(e,["googleSearch"],B1(a));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],$1(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],G1());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function F1(n){const e={},o=u(n,["handle"]);if(o!=null&&c(e,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fg(){return{}}function Y1(n){const e={},o=u(n,["disabled"]);o!=null&&c(e,["disabled"],o);const a=u(n,["startOfSpeechSensitivity"]);a!=null&&c(e,["startOfSpeechSensitivity"],a);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const f=u(n,["prefixPaddingMs"]);f!=null&&c(e,["prefixPaddingMs"],f);const m=u(n,["silenceDurationMs"]);return m!=null&&c(e,["silenceDurationMs"],m),e}function J1(n){const e={},o=u(n,["automaticActivityDetection"]);o!=null&&c(e,["automaticActivityDetection"],Y1(o));const a=u(n,["activityHandling"]);a!=null&&c(e,["activityHandling"],a);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function Z1(n){const e={},o=u(n,["targetTokens"]);return o!=null&&c(e,["targetTokens"],o),e}function Q1(n){const e={},o=u(n,["triggerTokens"]);o!=null&&c(e,["triggerTokens"],o);const a=u(n,["slidingWindow"]);return a!=null&&c(e,["slidingWindow"],Z1(a)),e}function X1(n){const e={},o=u(n,["proactiveAudio"]);return o!=null&&c(e,["proactiveAudio"],o),e}function K1(n,e){const o={},a=u(n,["generationConfig"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig"],a);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const f=u(n,["temperature"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","temperature"],f);const m=u(n,["topP"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","topP"],m);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const C=u(n,["speechConfig"]);e!==void 0&&C!=null&&c(e,["setup","generationConfig","speechConfig"],k1(Ac(C)));const b=u(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],V1(ht(E)));const _=u(n,["tools"]);if(e!==void 0&&_!=null){let Y=La(_);Array.isArray(Y)&&(Y=Y.map(ee=>H1(Ua(ee)))),c(e,["setup","tools"],Y)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],F1(N));const q=u(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","inputAudioTranscription"],fg());const O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&c(e,["setup","outputAudioTranscription"],fg());const $=u(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&c(e,["setup","realtimeInputConfig"],J1($));const F=u(n,["contextWindowCompression"]);e!==void 0&&F!=null&&c(e,["setup","contextWindowCompression"],Q1(F));const Z=u(n,["proactivity"]);return e!==void 0&&Z!=null&&c(e,["setup","proactivity"],X1(Z)),o}function W1(n,e){const o={},a=u(e,["model"]);a!=null&&c(o,["setup","model"],Be(n,a));const s=u(e,["config"]);return s!=null&&c(o,["config"],K1(s,o)),o}function j1(n,e,o){const a={},s=u(e,["expireTime"]);o!==void 0&&s!=null&&c(o,["expireTime"],s);const f=u(e,["newSessionExpireTime"]);o!==void 0&&f!=null&&c(o,["newSessionExpireTime"],f);const m=u(e,["uses"]);o!==void 0&&m!=null&&c(o,["uses"],m);const p=u(e,["liveConnectConstraints"]);o!==void 0&&p!=null&&c(o,["bidiGenerateContentSetup"],W1(n,p));const y=u(e,["lockAdditionalFields"]);return o!==void 0&&y!=null&&c(o,["fieldMask"],y),a}function eA(n,e){const o={},a=u(e,["config"]);return a!=null&&c(o,["config"],j1(n,a,o)),o}function tA(n){const e={},o=u(n,["name"]);return o!=null&&c(e,["name"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nA(n){const e=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const a=n[o];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const s=Object.keys(a).map(f=>`${o}.${f}`);e.push(...s)}else e.push(o)}return e.join(",")}function iA(n,e){let o=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const f=a.setup;typeof f=="object"&&f!==null?(n.bidiGenerateContentSetup=f,o=f):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(o){const f=nA(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?n.fieldMask=f:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>m.includes(h)?`generationConfig.${h}`:h));const y=[];f&&y.push(f),p.length>0&&y.push(...p),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class oA extends So{constructor(e){super(),this.apiClient=e}async create(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=eA(this.apiClient,e);f=me("auth_tokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=iA(p,e.config);return s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>tA(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aA(n){const e={},o=u(n,["name"]);o!=null&&c(e,["_url","name"],o);const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function lA(n,e){const o={},a=u(n,["pageSize"]);e!==void 0&&a!=null&&c(e,["_query","pageSize"],a);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const f=u(n,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),o}function sA(n){const e={},o=u(n,["config"]);return o!=null&&c(e,["config"],lA(o,e)),e}function rA(n){const e={},o=u(n,["textInput"]);o!=null&&c(e,["textInput"],o);const a=u(n,["output"]);return a!=null&&c(e,["output"],a),e}function uA(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>rA(s))),c(e,["examples","examples"],a)}return e}function cA(n,e){const o={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=u(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&c(e,["displayName"],a),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(n,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);const f=u(n,["learningRateMultiplier"]);if(f!=null&&c(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=u(n,["batchSize"]);e!==void 0&&m!=null&&c(e,["tuningTask","hyperparameters","batchSize"],m);const p=u(n,["learningRate"]);return e!==void 0&&p!=null&&c(e,["tuningTask","hyperparameters","learningRate"],p),o}function fA(n){const e={},o=u(n,["baseModel"]);o!=null&&c(e,["baseModel"],o);const a=u(n,["trainingDataset"]);a!=null&&c(e,["tuningTask","trainingData"],uA(a));const s=u(n,["config"]);return s!=null&&c(e,["config"],cA(s,e)),e}function dA(n){const e={},o=u(n,["name"]);o!=null&&c(e,["_url","name"],o);const a=u(n,["config"]);return a!=null&&c(e,["config"],a),e}function mA(n,e){const o={},a=u(n,["pageSize"]);e!==void 0&&a!=null&&c(e,["_query","pageSize"],a);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const f=u(n,["filter"]);return e!==void 0&&f!=null&&c(e,["_query","filter"],f),o}function pA(n){const e={},o=u(n,["config"]);return o!=null&&c(e,["config"],mA(o,e)),e}function hA(n,e){const o={},a=u(n,["gcsUri"]);if(e!==void 0&&a!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],a),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function gA(n){const e={},o=u(n,["gcsUri"]);return o!=null&&c(e,["validationDatasetUri"],o),e}function yA(n,e){const o={},a=u(n,["validationDataset"]);e!==void 0&&a!=null&&c(e,["supervisedTuningSpec"],gA(a));const s=u(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);const f=u(n,["description"]);e!==void 0&&f!=null&&c(e,["description"],f);const m=u(n,["epochCount"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const p=u(n,["learningRateMultiplier"]);e!==void 0&&p!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const y=u(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const h=u(n,["adapterSize"]);if(e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return o}function vA(n){const e={},o=u(n,["baseModel"]);o!=null&&c(e,["baseModel"],o);const a=u(n,["trainingDataset"]);a!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],hA(a,e));const s=u(n,["config"]);return s!=null&&c(e,["config"],yA(s,e)),e}function xA(n){const e={},o=u(n,["name"]);o!=null&&c(e,["model"],o);const a=u(n,["name"]);return a!=null&&c(e,["endpoint"],a),e}function Yg(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["state"]);a!=null&&c(e,["state"],Ng(a));const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const f=u(n,["tuningTask","startTime"]);f!=null&&c(e,["startTime"],f);const m=u(n,["tuningTask","completeTime"]);m!=null&&c(e,["endTime"],m);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const y=u(n,["description"]);y!=null&&c(e,["description"],y);const h=u(n,["baseModel"]);h!=null&&c(e,["baseModel"],h);const v=u(n,["_self"]);v!=null&&c(e,["tunedModel"],xA(v));const C=u(n,["distillationSpec"]);C!=null&&c(e,["distillationSpec"],C);const b=u(n,["experiment"]);b!=null&&c(e,["experiment"],b);const E=u(n,["labels"]);E!=null&&c(e,["labels"],E);const _=u(n,["pipelineJob"]);_!=null&&c(e,["pipelineJob"],_);const N=u(n,["serviceAccount"]);N!=null&&c(e,["serviceAccount"],N);const q=u(n,["tunedModelDisplayName"]);return q!=null&&c(e,["tunedModelDisplayName"],q),e}function TA(n){const e={},o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const a=u(n,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(f=>Yg(f))),c(e,["tuningJobs"],s)}return e}function CA(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["metadata"]);a!=null&&c(e,["metadata"],a);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const f=u(n,["error"]);return f!=null&&c(e,["error"],f),e}function SA(n){const e={},o=u(n,["checkpointId"]);o!=null&&c(e,["checkpointId"],o);const a=u(n,["epoch"]);a!=null&&c(e,["epoch"],a);const s=u(n,["step"]);s!=null&&c(e,["step"],s);const f=u(n,["endpoint"]);return f!=null&&c(e,["endpoint"],f),e}function bA(n){const e={},o=u(n,["model"]);o!=null&&c(e,["model"],o);const a=u(n,["endpoint"]);a!=null&&c(e,["endpoint"],a);const s=u(n,["checkpoints"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>SA(m))),c(e,["checkpoints"],f)}return e}function vc(n){const e={},o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["state"]);a!=null&&c(e,["state"],Ng(a));const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const f=u(n,["startTime"]);f!=null&&c(e,["startTime"],f);const m=u(n,["endTime"]);m!=null&&c(e,["endTime"],m);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const y=u(n,["error"]);y!=null&&c(e,["error"],y);const h=u(n,["description"]);h!=null&&c(e,["description"],h);const v=u(n,["baseModel"]);v!=null&&c(e,["baseModel"],v);const C=u(n,["tunedModel"]);C!=null&&c(e,["tunedModel"],bA(C));const b=u(n,["supervisedTuningSpec"]);b!=null&&c(e,["supervisedTuningSpec"],b);const E=u(n,["tuningDataStats"]);E!=null&&c(e,["tuningDataStats"],E);const _=u(n,["encryptionSpec"]);_!=null&&c(e,["encryptionSpec"],_);const N=u(n,["partnerModelTuningSpec"]);N!=null&&c(e,["partnerModelTuningSpec"],N);const q=u(n,["distillationSpec"]);q!=null&&c(e,["distillationSpec"],q);const O=u(n,["experiment"]);O!=null&&c(e,["experiment"],O);const $=u(n,["labels"]);$!=null&&c(e,["labels"],$);const F=u(n,["pipelineJob"]);F!=null&&c(e,["pipelineJob"],F);const Z=u(n,["serviceAccount"]);Z!=null&&c(e,["serviceAccount"],Z);const Y=u(n,["tunedModelDisplayName"]);return Y!=null&&c(e,["tunedModelDisplayName"],Y),e}function _A(n){const e={},o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const a=u(n,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(f=>vc(f))),c(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA extends So{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new _s(Co.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.tune=async o=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(o);{const a=await this.tuneMldevInternal(o);let s="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?s=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(s=a.name.split("/operations/")[0]),{name:s,state:cc.JOB_STATE_QUEUED}}}}async getInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=dA(e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>vc(v))}else{const h=aA(e);return p=me("{name}",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Yg(v))}}async listInternal(e){var o,a,s,f;let m,p="",y={};if(this.apiClient.isVertexAI()){const h=pA(e);return p=me("tuningJobs",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const C=_A(v),b=new Bh;return Object.assign(b,C),b})}else{const h=sA(e);return p=me("tunedModels",h._url),y=h._query,delete h.config,delete h._url,delete h._query,m=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=TA(v),b=new Bh;return Object.assign(b,C),b})}}async tuneInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI()){const p=vA(e);return f=me("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>vc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,a;let s,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=fA(e);return f=me("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,s=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),s.then(y=>CA(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AA{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wA=1024*1024*8,MA=3,NA=1e3,RA=2,Wu="x-goog-upload-status";async function DA(n,e,o){var a,s,f;let m=0,p=0,y=new fc(new Response),h="upload";for(m=n.size;p<m;){const C=Math.min(wA,m-p),b=n.slice(p,p+C);p+C>=m&&(h+=", finalize");let E=0,_=NA;for(;E<MA&&(y=await o.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(p),"Content-Length":String(C)}}}),!(!((a=y==null?void 0:y.headers)===null||a===void 0)&&a[Wu]));)E++,await IA(_),_=_*RA;if(p+=C,((s=y==null?void 0:y.headers)===null||s===void 0?void 0:s[Wu])!=="active")break;if(m<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((f=y==null?void 0:y.headers)===null||f===void 0?void 0:f[Wu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function kA(n){return{size:n.size,type:n.type}}function IA(n){return new Promise(e=>setTimeout(e,n))}class UA{async upload(e,o,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DA(e,o,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LA{create(e,o,a){return new OA(e,o,a)}}class OA{constructor(e,o,a){this.url=e,this.headers=o,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dg="x-goog-api-key";class VA{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(dg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(dg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qA="gl-node/";class zA{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const a=Vx(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const s=new VA(this.apiKey);this.apiClient=new jE({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qA+"web",uploader:new UA,downloader:new AA}),this.models=new y1(this.apiClient),this.live=new d1(this.apiClient,s,new LA),this.chats=new cC(this.models,this.apiClient),this.caches=new sC(this.apiClient),this.files=new bC(this.apiClient),this.operations=new M1(this.apiClient),this.authTokens=new oA(this.apiClient),this.tunings=new EA(this.apiClient)}}const it=async(n,e)=>{const o=new zA({apiKey:e}),a="gemini-2.5-flash";try{const s=await o.models.generateContent({model:a,contents:n,config:{responseMimeType:"application/json"}});if(!s.text)throw new Error("AI 回傳內容為空，請重試或檢查 API 金鑰。");let f=s.text.trim();const m=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,p=f.match(m);if(p&&p[2]&&(f=p[2].trim()),!f.startsWith("{")&&!f.startsWith("[")&&(f.includes("{")||f.includes("["))){const y=f.indexOf("{"),h=f.indexOf("[");let v=-1,C=-1;y!==-1&&(h===-1||y<h)?(v=y,C=f.lastIndexOf("}")):h!==-1&&(v=h,C=f.lastIndexOf("]")),v!==-1&&C!==-1&&C>v&&(f=f.substring(v,C+1))}try{return JSON.parse(f)}catch{throw console.error("AI 回傳原始內容 (JSON parse 失敗):",s.text),new Error("AI 模型傳回的資料格式無法解析 (可能不是有效的 JSON)。請嘗試修改您的主題或重試。")}}catch(s){let f="無法產生內容。";if(s instanceof Error&&(f+=` 詳細資料： ${s.message}`),s&&typeof s=="object"&&"message"in s){const m=s;m.message.includes("API key not valid")||m.message.includes("API_KEY_INVALID")?f="Gemini API 金鑰無效。請檢查您的設定。":m.message.includes("quota")||m.message.includes("RESOURCE_EXHAUSTED")?f="已超出 API 配額。請稍後再試。":(m.message.toLowerCase().includes("json")||m.message.includes("Unexpected token"))&&(f="AI 模型傳回的資料格式無法解析 (可能不是有效的 JSON)。請嘗試修改您的主題或重試。")}throw new Error(f)}},Jg=async(n,e)=>{const o=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${n}".
    The objectives should be based on scaffolding theory and gamification, and written in the primary language of the topic.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "能夠理解${n}的基本概念", 
        "description": "此目標幫助學習者建立對${n}的基礎理解和認知框架...", 
        "teachingExample": "透過具體例子展示${n}的核心概念，例如..." 
      },
      { 
        "objective": "能夠應用${n}於實際情境", 
        "description": "培養學習者將理論知識轉化為實際應用的能力...", 
        "teachingExample": "提供真實情境讓學習者練習應用${n}，如..." 
      },
      { 
        "objective": "能夠辨識${n}常見的誤區", 
        "description": "幫助學習者識別和避免${n}學習中的常見錯誤...", 
        "teachingExample": "展示常見誤區的具體例子和正確理解方式..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(o,e)},BA=async(n,e,o)=>{const a=/english|英語|英文|grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(n),s=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Please break down the topic "${n}" into at least 3 (but more is better if appropriate) micro-units. For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    
    ${a?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept: 該要點的核心學習概念 (core learning concept for this point)
    - teachingSentences: 3-5句教學例句 (array of 3-5 teaching example sentences)
    - teachingTips: 教學要點提示與說明 (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "子主題A", 
        "details": "子主題A的簡要說明...", 
        "teachingExample": "子主題A的教學示例...",
        "coreConcept": "此要點的核心概念...",
        "teachingSentences": ["例句1", "例句2", "例句3", "例句4", "例句5"],
        "teachingTips": "教學要點與提示說明..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "子主題A", "details": "子主題A的簡要說明...", "teachingExample": "子主題A的教學示例..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(s,e)},PA=async(n,e,o)=>{const a=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties students may have with "${n}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "易混淆點標題",
        "clarification": "詳細澄清說明",
        "teachingExample": "具體教學示例",
        "errorType": "誤區類型 (概念性/程序性/語言性/理解性)",
        "commonErrors": ["學生典型錯誤示例1", "學生典型錯誤示例2", "學生典型錯誤示例3"],
        "correctVsWrong": [
          {
            "correct": "正確示例",
            "wrong": "錯誤示例", 
            "explanation": "對比說明"
          }
        ],
        "preventionStrategy": "預防策略 - 如何防止學生犯錯",
        "correctionMethod": "糾正方法 - 發現錯誤後的補救措施",
        "practiceActivities": ["針對性練習活動1", "針對性練習活動2", "針對性練習活動3"]
      }
    ]
    
    Requirements:
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on practical teaching guidance that educators can immediately apply
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(a,e)},$A=async(n,e,o)=>{const a=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${n}".
    For each activity, provide the following comprehensive fields:
      - title: 活動名稱/主題 (The name of the activity)
      - description: 活動的標題或核心概念 (Brief description of the core concept)
      - objective: 學習目標 (Main learning goal or purpose)
      - timing: 使用時機 (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials: 所需教具 (Required tools, materials, or props)
      - environment: 環境要求 (Seating arrangement, space needs, equipment conditions)
      - steps: 活動步驟 (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints: 評估重點 (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "遊戲化活動1",
        "description": "活動1的核心概念與玩法簡述...",
        "objective": "活動1的學習目標...",
        "timing": "適用於單元導入/單元後/複習時等...",
        "materials": "所需教材、道具或工具...",
        "environment": "座位安排、空間需求、設備條件...",
        "steps": ["步驟1: 教師說明規則...", "步驟2: 學生分組...", "步驟3: 進行活動..."],
        "assessmentPoints": ["觀察學生參與度", "檢查概念理解程度", "評估協作能力"]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(a,e)},GA=async(n,e,o)=>{const a=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Please generate quiz content for "${n}" in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "簡單判斷題1...", "isTrue": true, "explanation": "可選說明1" },
          { "statement": "簡單判斷題2...", "isTrue": false, "explanation": "可選說明2" }
          // ... 至少 5 題，若有更多更好
        ],
        "multipleChoice": [
          { "question": "簡單選擇題1...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 0 },
          { "question": "簡單選擇題2...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 1 }
          // ... 至少 5 題，若有更多更好
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "簡單填空題1...____...", "correctAnswer": "正確答案1" },
          { "sentenceWithBlank": "簡單填空題2...____...", "correctAnswer": "正確答案2" }
          // ... 至少 5 題，若有更多更好
        ],
        "sentenceScramble": [
          { "originalSentence": "簡單句子1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "簡單句子2...", "scrambledWords": ["...", "...", "..."] }
          // ... 至少 5 題，若有更多更好
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "卡片1正面", "answer": "卡片1背面" },
              { "question": "卡片2正面", "answer": "卡片2背面" },
              { "question": "卡片3正面", "answer": "卡片3背面" },
              { "question": "卡片4正面", "answer": "卡片4背面" },
              { "question": "卡片5正面", "answer": "卡片5背面" }
              // ... 至少 5 組配對，若有更多更好
            ],
            "instructions": "請將每個卡片正面與正確的背面配對。"
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame 只 1 題，pairs 至少 5 組 */ },
      "hard": { /* same structure as easy, memoryCardGame 只 1 題，pairs 至少 5 組 */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${n}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. Only output the JSON object, no explanation or extra text.
  `;return await it(a,e)},HA=async(n,e,o)=>{const a=`
    Based on the following learning objectives: ${JSON.stringify(o)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${n}" (use English translation if topic is not English).
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${n}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${n}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(a,e)},FA=async(n,e,o)=>{const a=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${n}" appropriate for learning level "${e.name}" (${e.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to the learner's level and capabilities described in: "${e.description}".
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "能夠理解${n}在${e.name}程度的核心概念", 
        "description": "此目標針對${e.name}程度學習者的詳細描述...", 
        "teachingExample": "針對此目標的具體教學示例..." 
      },
      { 
        "objective": "能夠應用${n}的${e.name}級技能", 
        "description": "此目標的具體說明和期望成果...", 
        "teachingExample": "實際應用此技能的示例..." 
      },
      { 
        "objective": "能夠辨識${n}在此程度的常見誤區", 
        "description": "幫助學習者識別和避免常見錯誤...", 
        "teachingExample": "常見誤區的具體例子和正確做法..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(a,o)},YA=async(n,e,o,a)=>{const s=/english|英語|英文|grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(n),f=`
    Based on the following learning objectives: ${JSON.stringify(a)}
    Please break down the topic "${n}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${e.name}" level learners (${e.description}). For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    The content depth and complexity should match the level description: "${e.description}".
    
    ${s?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept: 該要點的核心學習概念 (core learning concept for this point)
    - teachingSentences: 3-5句教學例句 (array of 3-5 teaching example sentences)
    - teachingTips: 教學要點提示與說明 (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "適合${e.name}的子主題A", 
        "details": "子主題A針對${e.name}程度的簡要說明...", 
        "teachingExample": "子主題A適合此程度的教學示例...",
        "coreConcept": "此要點的核心概念...",
        "teachingSentences": ["例句1", "例句2", "例句3", "例句4", "例句5"],
        "teachingTips": "教學要點與提示說明..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "適合${e.name}的子主題A", "details": "子主題A針對${e.name}程度的簡要說明...", "teachingExample": "子主題A適合此程度的教學示例..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(f,o)},JA=async(n,e,o,a)=>{const s=`
    Based on the following learning objectives: ${JSON.stringify(a)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${e.name}" level learners (${e.description}) may have with "${n}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "適合${e.name}程度的易混淆點標題",
        "clarification": "針對${e.description}的澄清說明",
        "teachingExample": "適合此程度學習者的具體教學示例",
        "errorType": "誤區類型 (概念性/程序性/語言性/理解性)",
        "commonErrors": ["此程度學生的典型錯誤示例1", "此程度學生的典型錯誤示例2", "此程度學生的典型錯誤示例3"],
        "correctVsWrong": [
          {
            "correct": "適合${e.name}程度的正確示例",
            "wrong": "此程度學生常犯的錯誤示例", 
            "explanation": "適合此程度的對比說明"
          }
        ],
        "preventionStrategy": "針對${e.name}程度的預防策略",
        "correctionMethod": "適合此程度的糾正方法",
        "practiceActivities": ["適合此程度的練習活動1", "適合此程度的練習活動2", "適合此程度的練習活動3"]
      }
    ]
    
    Requirements:
    - All content should be appropriate for "${e.description}"
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes at this level
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 level-appropriate targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on confusion points specific to "${e.name}" level: "${e.description}"
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(s,o)},ZA=async(n,e,o,a)=>{const s=`
    Based on the following learning objectives: ${JSON.stringify(a)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${n}" suitable for "${e.name}" level learners (${e.description}).
    Activities should match the complexity and capabilities described in: "${e.description}".
    For each activity, provide the following comprehensive fields:
      - title: 活動名稱/主題 (The name of the activity)
      - description: 活動的標題或核心概念 (Brief description of the core concept)
      - objective: 學習目標 (Main learning goal or purpose)
      - timing: 使用時機 (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials: 所需教具 (Required tools, materials, or props)
      - environment: 環境要求 (Seating arrangement, space needs, equipment conditions)
      - steps: 活動步驟 (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints: 評估重點 (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "適合${e.name}的遊戲化活動1",
        "description": "活動1針對此程度的核心概念與玩法簡述...",
        "objective": "活動1符合${e.name}程度的學習目標...",
        "timing": "適用於單元導入/單元後/複習時等...",
        "materials": "此程度所需教材、道具或工具...",
        "environment": "座位安排、空間需求、設備條件...",
        "steps": ["步驟1: 教師說明規則...", "步驟2: 學生分組...", "步驟3: 進行活動..."],
        "assessmentPoints": ["觀察學生參與度", "檢查概念理解程度", "評估協作能力"]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(s,o)},QA=async(n,e,o,a)=>{const s=`
    基於主題「${n}」、選定的學習程度「${e.name}」(${e.description})，
    以及學習目標：${JSON.stringify(a)}
    
    請產生適合「${e.name}」程度學習者的互動測驗題目。
    題目難度和複雜度應符合：「${e.description}」。
    
    輸出必須是有效的 JSON 物件，格式如下：
    {
      "easy": {
        "trueFalse": [
          { "statement": "暖身判斷題1...", "isTrue": true, "explanation": "可選說明1" },
          { "statement": "暖身判斷題2...", "isTrue": false, "explanation": "可選說明2" }
          // ... 至少 5 題，若有更多更好
        ],
        "multipleChoice": [
          { "question": "暖身選擇題1...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 0 },
          { "question": "暖身選擇題2...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 1 }
          // ... 至少 5 題，若有更多更好
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "暖身填空題1...____...", "correctAnswer": "正確答案1" },
          { "sentenceWithBlank": "暖身填空題2...____...", "correctAnswer": "正確答案2" }
          // ... 至少 5 題，若有更多更好
        ],
        "sentenceScramble": [
          { "originalSentence": "暖身句子1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "暖身句子2...", "scrambledWords": ["...", "...", "..."] }
          // ... 至少 5 題，若有更多更好
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "卡片1正面", "answer": "卡片1背面" },
              { "question": "卡片2正面", "answer": "卡片2背面" },
              { "question": "卡片3正面", "answer": "卡片3背面" },
              { "question": "卡片4正面", "answer": "卡片4背面" },
              { "question": "卡片5正面", "answer": "卡片5背面" }
              // ... 至少 5 組配對，若有更多更好
            ],
            "instructions": "請將每個卡片正面與正確的背面配對。"
          }
        ]
      },
      "normal": { /* 符合所選程度的題目，結構同 easy，memoryCardGame 只 1 題，pairs 至少 5 組 */ },
      "hard": { /* 此程度的挑戰題目，結構同 easy，memoryCardGame 只 1 題，pairs 至少 5 組 */ }
    }
    
    對於每種測驗類型 (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble)，每個難度等級 (easy, normal, hard) 至少產生 5 題，若有更多更好。
    對於 memoryCardGame，每個難度只產生 1 題，但內部的 "pairs" 陣列必須包含至少 5 組配對（每組配對是與「${n}」相關的概念、詞彙/定義、問答或翻譯），若有更多更好。
    每個 memoryCardGame 題目都應包含清楚的 "instructions" 說明配對任務。
    所有文字使用主題的主要語言。請勿包含任何說明或額外文字，僅輸出 JSON 物件。
  `;return await it(s,o)},XA=async(n,e,o,a)=>{const s=`
    Based on the following learning objectives: ${JSON.stringify(a)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${n}" (use English translation if topic is not English) appropriate for "${e.name}" level learners (${e.description}).
    Language complexity and vocabulary should match: "${e.description}".
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${n}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${n}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(s,o)},Zg=async(n,e,o)=>{const a=`
    Based on the topic "${n}" and learning objectives: ${JSON.stringify(o)}
    Please generate 3-4 learning levels that are specific to this topic. Each level should have a unique name, description, and order.
    The levels should progress from basic understanding to advanced mastery, tailored specifically to the subject matter.
    
    Output MUST be a valid JSON object with this exact structure:
    {
      "suggestedLevels": [
        {
          "id": "beginner",
          "name": "初學者",
          "description": "適合首次接觸${n}的學習者，著重基礎概念理解",
          "order": 1
        },
        {
          "id": "intermediate", 
          "name": "進階者",
          "description": "已具備基礎知識，能進行${n}的實際應用",
          "order": 2
        },
        {
          "id": "advanced",
          "name": "專精者", 
          "description": "深度掌握${n}，能分析複雜情況並提供解決方案",
          "order": 3
        }
      ],
      "defaultLevelId": "beginner"
    }
    
    Make sure to:
    1. Create level names and descriptions that are specific to the topic (not generic)
    2. Use appropriate terminology for the subject area
    3. Ensure descriptions explain what learners at each level can do
    4. Use the primary language of the topic for names and descriptions
    
    Do NOT include any explanation or extra text. Only output the JSON object.
  `;return await it(a,e)},KA=n=>{const e=["english","grammar","vocabulary","pronunciation","speaking","writing","reading","listening","conversation","toefl","ielts","toeic","english literature","business english","academic english","phrasal verbs","idioms","prepositions","tenses","articles","adjectives","adverbs","nouns","verbs","英語","英文","文法","單字","發音","口說","寫作","閱讀","聽力","對話","會話","托福","雅思","多益","商業英文","學術英文","片語動詞","慣用語","介系詞","時態","冠詞","形容詞","副詞","名詞","動詞"],o=n.toLowerCase();return e.some(a=>o.includes(a.toLowerCase()))},WA=async(n,e)=>{if(!e)throw new Error("Gemini API 金鑰未正確設定或遺失。請檢查應用程式的環境設定。");const o=await Jg(n,e);return await Zg(n,e,o)},jA=async(n,e,o)=>{if(!o)throw new Error("Gemini API 金鑰未正確設定或遺失。請檢查應用程式的環境設定。");const a=await FA(n,e,o),[s,f,m,p,y]=await Promise.all([YA(n,e,o,a),JA(n,e,o,a),ZA(n,e,o,a),QA(n,e,o,a),XA(n,e,o,a)]);return{learningObjectives:a,contentBreakdown:s,confusingPoints:f,classroomActivities:m,onlineInteractiveQuiz:p,englishConversation:y}},ew=async(n,e,o,a)=>{if(!a)throw new Error("Gemini API 金鑰未正確設定或遺失。請檢查應用程式的環境設定。");const s=await tw(n,e,o,a),[f,m,p,y,h]=await Promise.all([nw(n,e,o,a,s),iw(n,e,o,a,s),ow(n,e,o,a,s),aw(n,e,o,a,s),lw(n,e,o,a,s)]);return{learningObjectives:s,contentBreakdown:f,confusingPoints:m,classroomActivities:p,onlineInteractiveQuiz:y,englishConversation:h}},tw=async(n,e,o,a)=>{const s=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${n}" appropriate for learning level "${e.name}" (${e.description}) and English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to both the learner's level and vocabulary constraints.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${o.wordCount} most common English words
    - Adjust language complexity to match ${o.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "能夠理解${n}在${e.name}程度的核心概念（英文內容限制在${o.wordCount}詞彙範圍）", 
        "description": "此目標針對${e.name}程度和${o.name}詞彙量學習者的詳細描述...", 
        "teachingExample": "使用${o.wordCount}詞彙範圍內的英文例句和教學示例..." 
      },
      { 
        "objective": "能夠應用${n}的${e.name}級技能（適合${o.name}程度學習者）", 
        "description": "培養在詞彙限制下的實際應用能力...", 
        "teachingExample": "提供符合${o.wordCount}詞彙量的實際應用情境..." 
      },
      { 
        "objective": "能夠辨識${n}在此程度和詞彙量的常見誤區", 
        "description": "幫助學習者識別和避免在此詞彙程度下的常見錯誤...", 
        "teachingExample": "使用簡單詞彙展示常見誤區和正確做法..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(s,a)},nw=async(n,e,o,a,s)=>{const f=/english|英語|英文|grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(n),m=`
    Based on the following learning objectives: ${JSON.stringify(s)}
    Please break down the topic "${n}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${e.name}" level learners (${e.description}) with English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${o.wordCount} most common English words
    - Teaching examples should match ${o.description}
    - Avoid complex words that exceed this vocabulary level
    - Sentence structures should be appropriate for ${o.name} learners
    
    ${f?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept: 該要點的核心學習概念 (core learning concept for this point)
    - teachingSentences: 3-5句教學例句，使用${o.wordCount}詞彙範圍 (array of 3-5 teaching sentences using vocabulary within ${o.wordCount} words)
    - teachingTips: 教學要點提示與說明 (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "適合${o.name}的子主題A", 
        "details": "子主題A針對${o.wordCount}詞彙量的簡要說明...", 
        "teachingExample": "子主題A使用${o.name}程度詞彙的教學示例...",
        "coreConcept": "此要點的核心概念...",
        "teachingSentences": ["Simple example 1", "Easy sentence 2", "Basic example 3"],
        "teachingTips": "教學要點與提示說明..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "適合${o.name}的子主題A", "details": "子主題A針對${o.wordCount}詞彙量的簡要說明...", "teachingExample": "子主題A使用${o.name}程度詞彙的教學示例..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(m,a)},iw=async(n,e,o,a,s)=>{const f=`
    Based on the following learning objectives: ${JSON.stringify(s)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${e.name}" level learners (${e.description}) with English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}) may have with "${n}".
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All explanations must use vocabulary within the ${o.wordCount} most common English words
    - Examples should be appropriate for ${o.description}
    - Focus on confusion points that arise specifically at this vocabulary level
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "適合${o.name}詞彙程度的易混淆點標題",
        "clarification": "使用${o.wordCount}詞彙範圍的澄清說明",
        "teachingExample": "適合${o.name}程度的教學示例",
        "errorType": "誤區類型 (概念性/程序性/語言性/理解性)",
        "commonErrors": ["此詞彙程度學生的典型錯誤示例1", "此詞彙程度學生的典型錯誤示例2", "此詞彙程度學生的典型錯誤示例3"],
        "correctVsWrong": [
          {
            "correct": "使用${o.wordCount}詞彙範圍的正確示例",
            "wrong": "此詞彙程度學生常犯的錯誤示例",
            "explanation": "適合此詞彙程度的對比說明"
          }
        ],
        "preventionStrategy": "針對${o.name}詞彙程度的預防策略",
        "correctionMethod": "適合此詞彙程度的糾正方法",
        "practiceActivities": ["適合此詞彙程度的練習活動1", "適合此詞彙程度的練習活動2", "適合此詞彙程度的練習活動3"]
      }
    ]
    
    All English content must stay within the ${o.wordCount} word vocabulary limit and match ${e.description}.
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(f,a)},ow=async(n,e,o,a,s)=>{const f=`
    Based on the following learning objectives: ${JSON.stringify(s)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${n}" suitable for "${e.name}" level learners (${e.description}) with English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - Activity instructions must use vocabulary within the ${o.wordCount} most common English words
    - Activity content should match ${o.description}
    - Consider vocabulary limitations when designing complexity
    
    For each activity, provide the following comprehensive fields:
      - title: 活動名稱/主題 (The name of the activity)
      - description: 活動的標題或核心概念 (Brief description of the core concept)
      - objective: 學習目標 (Main learning goal or purpose)
      - timing: 使用時機 (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials: 所需教具 (Required tools, materials, or props)
      - environment: 環境要求 (Seating arrangement, space needs, equipment conditions)
      - steps: 活動步驟 (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints: 評估重點 (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "適合${o.name}的遊戲化活動1",
        "description": "活動1針對${o.wordCount}詞彙量的核心概念與玩法簡述...",
        "objective": "活動1符合${o.name}程度的學習目標...",
        "timing": "適用於單元導入/單元後/複習時等...",
        "materials": "適合此詞彙程度的教材、道具或工具...",
        "environment": "座位安排、空間需求、設備條件...",
        "steps": ["步驟1: 教師說明規則...", "步驟2: 學生分組...", "步驟3: 進行活動..."],
        "assessmentPoints": ["觀察學生參與度", "檢查概念理解程度", "評估協作能力"]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(f,a)},aw=async(n,e,o,a,s)=>{const f=`
    Based on the following learning objectives: ${JSON.stringify(s)}
    Please generate quiz content for "${n}" suitable for learning level "${e.name}" (${e.description}) and English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text in quiz questions, options, and examples must use vocabulary within the ${o.wordCount} most common English words
    - Sentence structures should be appropriate for ${o.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "簡單判斷題1...", "isTrue": true, "explanation": "可選說明1" },
          { "statement": "簡單判斷題2...", "isTrue": false, "explanation": "可選說明2" }
          // ... 至少 5 題，若有更多更好
        ],
        "multipleChoice": [
          { "question": "簡單選擇題1...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 0 },
          { "question": "簡單選擇題2...", "options": ["選項A", "選項B", "選項C"], "correctAnswerIndex": 1 }
          // ... 至少 5 題，若有更多更好
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "簡單填空題1...____...", "correctAnswer": "正確答案1" },
          { "sentenceWithBlank": "簡單填空題2...____...", "correctAnswer": "正確答案2" }
          // ... 至少 5 題，若有更多更好
        ],
        "sentenceScramble": [
          { "originalSentence": "簡單句子1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "簡單句子2...", "scrambledWords": ["...", "...", "..."] }
          // ... 至少 5 題，若有更多更好
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "卡片1正面", "answer": "卡片1背面" },
              { "question": "卡片2正面", "answer": "卡片2背面" },
              { "question": "卡片3正面", "answer": "卡片3背面" },
              { "question": "卡片4正面", "answer": "卡片4背面" },
              { "question": "卡片5正面", "answer": "卡片5背面" }
              // ... 至少 5 組配對，若有更多更好
            ],
            "instructions": "請將每個卡片正面與正確的背面配對。"
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame 只 1 題，pairs 至少 5 組 */ },
      "hard": { /* same structure as easy, memoryCardGame 只 1 題，pairs 至少 5 組 */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${n}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. For English learning topics, limit English vocabulary to ${o.wordCount} most common words. Only output the JSON object, no explanation or extra text.
  `;return await it(f,a)},lw=async(n,e,o,a,s)=>{const f=`
    Based on the following learning objectives: ${JSON.stringify(s)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${n}" (use English translation if topic is not English) appropriate for "${e.name}" level learners (${e.description}) with English vocabulary level "${o.name}" (${o.wordCount} words: ${o.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS:
    - Use ONLY vocabulary within the ${o.wordCount} most common English words
    - Sentence structures must be appropriate for ${o.description}
    - Conversation complexity should match ${o.name} level
    - Avoid advanced vocabulary that exceeds this level
    - Keep sentences simple and clear for ${o.name} learners
    
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${n} using simple words for ${o.name} level." },
      { "speaker": "Speaker B", "line": "Great idea! What should we discuss first about ${n}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await it(f,a)},sw=async(n,e)=>{if(!e)throw new Error("Gemini API 金鑰未正確設定或遺失。請檢查應用程式的環境設定。");const o=await Jg(n,e),[a,s,f,m,p,y]=await Promise.all([BA(n,e,o),PA(n,e,o),$A(n,e,o),GA(n,e,o),HA(n,e,o),Zg(n,e,o)]);return{learningObjectives:o,contentBreakdown:a,confusingPoints:s,classroomActivities:f,onlineInteractiveQuiz:m,englishConversation:p,learningLevels:y}},rw=({topic:n,setTopic:e,onGenerate:o,onGenerateWithLevels:a,isLoading:s})=>{const f=p=>{p.preventDefault(),!s&&n.trim()&&o()},m=p=>{p.preventDefault(),!s&&n.trim()&&a&&a()};return x.jsxs("form",{onSubmit:f,className:"mb-8 p-6 bg-white shadow-lg rounded-xl",children:[x.jsx("label",{htmlFor:"topic-input",className:"block text-xl font-semibold text-slate-700 mb-3",children:"輸入學習主題"}),x.jsxs("div",{className:"flex flex-col space-y-3",children:[x.jsx("input",{id:"topic-input",type:"text",value:n,onChange:p=>e(p.target.value),placeholder:"例如：光合作用、JavaScript Promises、法國大革命",className:"w-full p-3 border border-slate-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-600 transition-shadow bg-slate-50 text-slate-800 placeholder-slate-500",disabled:s,"aria-label":"學習主題輸入欄位"}),x.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[a&&x.jsx("button",{type:"button",onClick:m,disabled:s||!n.trim(),className:"flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center",children:s?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"產生中..."]}):"🎯 選擇程度後產生"}),x.jsx("button",{type:"submit",disabled:s||!n.trim(),className:"flex-1 px-6 py-3 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center","aria-live":"polite",children:s?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"產生中..."]}):"⚡ 直接產生內容"})]}),a&&x.jsxs("div",{className:"text-sm text-slate-600 bg-slate-50 p-3 rounded-lg",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"🎯 選擇程度後產生："})," 先獲得學習程度建議，選擇合適程度後產生針對性內容"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"⚡ 直接產生內容："})," 立即產生包含所有程度的完整學習內容"]})]})]})]})},Rc=()=>x.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-sky-600"}),x.jsx("p",{className:"text-sky-700",children:"正在產生學習內容..."})]}),Ft=({title:n,icon:e,children:o,className:a})=>x.jsxs("div",{className:`bg-white shadow-lg rounded-xl p-6 mb-6 ${a||""}`,children:[x.jsxs("h2",{className:"text-2xl font-semibold text-sky-700 mb-4 flex items-center",children:[e&&x.jsx("span",{className:"mr-3 text-sky-600",children:e}),n]}),x.jsx("div",{className:"text-slate-700 space-y-3",children:o})]});var Cn=(n=>(n.Easy="easy",n.Normal="normal",n.Hard="hard",n))(Cn||{});const xc=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.31M8.25 18.75a12.064 12.064 0 0 0 7.5 0M12 6.75a2.25 2.25 0 1 1 0 4.5 2.25 2.5 0 0 1 0-4.5ZM12 6.75V3.75m0 3a12.022 12.022 0 0 0-5.483 1.348M12 6.75a12.022 12.022 0 0 1 5.483 1.348"})}),Ts=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V3.75m0 12.15V21"})}),Da=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 7.756a4.5 4.5 0 1 0 0 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Oa=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Va=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Cs=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),uw=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Zm3.75 11.625a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),cw=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),fw=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),dw=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15c-1.13 0-2.25-.264-3.25-.73A4.505 4.505 0 0 1 5.25 9.75V8.25A6.75 6.75 0 0 1 12 1.5a6.75 6.75 0 0 1 6.75 6.75v1.5a4.505 4.505 0 0 1-3.5 4.52M12 15V8.25"})}),mw=({className:n})=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.254 9.254 9 9.563 9h4.874c.309 0 .563.254.563.563v4.874c0 .309-.254.563-.563.563H9.563A.562.562 0 0 1 9 14.437V9.564Z"})]}),Tc=({className:n})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n||"w-6 h-6",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-2.184-2.183a1.724 1.724 0 0 0-1.235-.517H7.72c-1.137 0-2.1-.847-2.193-1.98A11.974 11.974 0 0 1 5.5 13H4.75a2.25 2.25 0 0 1-2.25-2.25V6.75a2.25 2.25 0 0 1 2.25-2.25h4.718c.468 0 .92.052 1.354.143L12 6l2.454-2.454L16.5 6h1.252a2.25 2.25 0 0 1 2.25 2.25v.233Z"})}),Qg=({question:n,itemNumber:e})=>{const[o,a]=k.useState(null),[s,f]=k.useState(null);k.useEffect(()=>{a(null),f(null)},[n]);const m=p=>{a(p);const y=p===n.isTrue;let h=y?"答對了！":"答錯了。";y||(h+=` 正確答案是：${n.isTrue?"是 (True)":"非 (False)"}。`),f({isCorrect:y,message:h,explanation:n.explanation})};return x.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[x.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". ",n.statement||"題目載入中..."]}),x.jsxs("div",{className:"flex space-x-3 mb-3",children:[x.jsx("button",{onClick:()=>m(!0),className:`px-6 py-2 rounded-md font-medium transition-all
            ${o===!0?s!=null&&s.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":o===!0,disabled:s!==null,children:"是 (True)"}),x.jsx("button",{onClick:()=>m(!1),className:`px-6 py-2 rounded-md font-medium transition-all
            ${o===!1?s!=null&&s.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":o===!1,disabled:s!==null,children:"非 (False)"})]}),s&&x.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex flex-col items-start ${s.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[x.jsxs("div",{className:"flex items-center",children:[s.isCorrect?x.jsx(Oa,{className:"w-5 h-5 mr-2"}):x.jsx(Va,{className:"w-5 h-5 mr-2"}),s.message]}),s.explanation&&x.jsx("p",{className:"mt-1 pl-7 text-xs italic",children:s.explanation})]})]})},Xg=({question:n,itemNumber:e})=>{const[o,a]=k.useState(null),[s,f]=k.useState(null);k.useEffect(()=>{a(null),f(null)},[n]);const m=()=>{if(o===null){f({isCorrect:!1,message:"請選擇一個選項。"});return}const p=o===n.correctAnswerIndex;f({isCorrect:p,message:p?"答對了！":`答錯了。正確答案是： ${(n.options||[])[n.correctAnswerIndex]||"未知"}`})};return x.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[x.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". ",n.question]}),x.jsx("div",{className:"space-y-2 mb-3",children:(n.options||[]).map((p,y)=>x.jsxs("label",{className:`flex items-center p-2 border rounded-md cursor-pointer hover:bg-sky-50 transition-colors ${o===y?"bg-sky-100 border-sky-500":"border-slate-300"} ${s!==null?"cursor-not-allowed opacity-70":""}`,children:[x.jsx("input",{type:"radio",name:`mcq-${e}-${n.question}`,value:y,checked:o===y,onChange:()=>{s===null&&a(y)},className:"mr-2 h-4 w-4 text-sky-600 focus:ring-sky-500 border-slate-400",disabled:s!==null}),p]},y))}),x.jsx("button",{onClick:m,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:s!==null||o===null,children:"檢查答案"}),s&&x.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${s.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s.isCorrect?x.jsx(Oa,{className:"w-5 h-5 mr-2"}):x.jsx(Va,{className:"w-5 h-5 mr-2"}),s.message]})]})},Kg=({question:n,itemNumber:e})=>{var y;const[o,a]=k.useState(""),[s,f]=k.useState(null);k.useEffect(()=>{a(""),f(null)},[n]);const m=h=>{if(h.preventDefault(),!o.trim()){f({isCorrect:!1,message:"請輸入答案。"});return}const v=o.trim().toLowerCase()===n.correctAnswer.toLowerCase();f({isCorrect:v,message:v?"答對了！":`答錯了。正確答案是： ${n.correctAnswer}`})},p=((y=n.sentenceWithBlank)==null?void 0:y.split("____"))||["",""];return x.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[x.jsxs("form",{onSubmit:m,className:"space-y-2",children:[x.jsxs("label",{htmlFor:`fillblank-${e}-${n.sentenceWithBlank}`,className:"font-medium text-slate-700 mb-1 block",children:[e,". ",p[0],x.jsx("input",{id:`fillblank-${e}-${n.sentenceWithBlank}`,type:"text",value:o,onChange:h=>{s===null&&a(h.target.value)},className:"mx-1 p-1 border-b-2 border-slate-400 focus:border-sky-500 outline-none w-24 sm:w-32 bg-transparent",placeholder:"答案",disabled:s!==null}),p[1]]}),x.jsx("button",{type:"submit",className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:s!==null||!o.trim(),children:"檢查"})]}),s&&x.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${s.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s.isCorrect?x.jsx(Oa,{className:"w-5 h-5 mr-2"}):x.jsx(Va,{className:"w-5 h-5 mr-2"}),s.message]})]})},Wg=({question:n,itemNumber:e})=>{const[o,a]=k.useState([]),[s,f]=k.useState([]),[m,p]=k.useState(null);k.useEffect(()=>{const b=n.scrambledWords||[];f([...b].sort(()=>Math.random()-.5)),a([]),p(null)},[n]);const y=(b,E)=>{a([...o,b]);const _=[...s];_.splice(E,1),f(_),m&&p(null)},h=(b,E)=>{f([...s,b]);const _=[...o];_.splice(E,1),a(_),m&&p(null)},v=()=>{const b=n.scrambledWords||[];f([...b].sort(()=>Math.random()-.5)),a([]),m&&p(null)},C=()=>{const b=o.join(" ").trim(),E=N=>N.toLowerCase().replace(/[.,!?;:]/g,"").replace(/\s+/g," ").trim(),_=E(b)===E(n.originalSentence);p({isCorrect:_,message:_?"答對了！":`答錯了。正確句子是： "${n.originalSentence}"`})};return x.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[x.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". 請重組句子："]}),x.jsx("div",{className:"mb-3 p-3 border border-dashed border-slate-400 rounded-md min-h-[40px] bg-white flex flex-wrap gap-2",children:o.length>0?o.map((b,E)=>x.jsx("button",{onClick:()=>h(b,E),className:"px-2 py-1 bg-sky-200 text-sky-800 rounded-md hover:bg-sky-300 transition-colors",children:b},`${b}-${E}-constructed`)):x.jsx("span",{className:"text-slate-400 italic",children:"點擊下方詞彙來組成句子"})}),x.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:s.map((b,E)=>x.jsx("button",{onClick:()=>y(b,E),className:"px-2 py-1 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 transition-colors",children:b},`${b}-${E}-available`))}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:C,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors",children:"檢查句子"}),x.jsx("button",{onClick:v,className:"px-4 py-2 bg-slate-500 text-white rounded-md hover:bg-slate-600 transition-colors",children:"清除"})]}),m&&x.jsxs("div",{className:`mt-3 p-2 rounded-md text-sm flex items-center ${m.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[m.isCorrect?x.jsx(Oa,{className:"w-5 h-5 mr-2"}):x.jsx(Va,{className:"w-5 h-5 mr-2"}),m.message]})]})};function pw(n){const e=[...n];for(let o=e.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[e[o],e[a]]=[e[a],e[o]]}return e}const jg=({question:n,itemNumber:e})=>{const[o,a]=k.useState([]),[s,f]=k.useState([]),[m,p]=k.useState(0);k.useEffect(()=>{let v=0;const C=(n.pairs||[]).flatMap((b,E)=>[{id:v++,content:b.question,pairId:E,isFlipped:!1,isMatched:!1},{id:v++,content:b.answer,pairId:E,isFlipped:!1,isMatched:!1}]);a(pw(C)),f([]),p(0)},[n]);const y=v=>{if(o[v].isFlipped||o[v].isMatched||s.length===2)return;const C=o.map((E,_)=>_===v?{...E,isFlipped:!0}:E),b=[...s,v];if(a(C),f(b),b.length===2){const[E,_]=b;C[E].pairId===C[_].pairId?setTimeout(()=>{a(N=>N.map((q,O)=>O===E||O===_?{...q,isMatched:!0}:q)),f([]),p(N=>N+1)},600):setTimeout(()=>{a(N=>N.map((q,O)=>O===E||O===_?{...q,isFlipped:!1}:q)),f([])},900)}},h=m===(n.pairs||[]).length;return x.jsxs("div",{className:"mb-4 p-4 border rounded bg-slate-50",children:[x.jsxs("div",{className:"font-semibold mb-2",children:[e,". 翻卡牌記憶遊戲"]}),n.instructions&&x.jsx("div",{className:"mb-2 text-sky-700 text-sm",children:n.instructions}),x.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-xl mx-auto mb-2",children:o.map((v,C)=>x.jsxs("button",{className:`relative h-20 w-full rounded shadow border transition-transform duration-200 ${v.isMatched?"bg-green-200 border-green-400":"bg-white border-slate-300"} ${v.isFlipped||v.isMatched?"":"hover:scale-105"}`,onClick:()=>y(C),disabled:v.isFlipped||v.isMatched||s.length===2,style:{perspective:"600px"},children:[x.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-base font-medium transition-all duration-300 ${v.isFlipped||v.isMatched?"opacity-100 rotate-y-0":"opacity-0 rotate-y-180"}`,style:{backfaceVisibility:"hidden",transform:v.isFlipped||v.isMatched?"rotateY(0deg)":"rotateY(180deg)"},children:v.content}),x.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-2xl font-bold text-sky-600 transition-all duration-300 ${v.isFlipped||v.isMatched?"opacity-0 rotate-y-180":"opacity-100 rotate-y-0"}`,style:{backfaceVisibility:"hidden",transform:v.isFlipped||v.isMatched?"rotateY(180deg)":"rotateY(0deg)"},children:"?"})]},v.id))}),h&&x.jsx("div",{className:"text-green-600 font-semibold mt-2",children:"恭喜！全部配對成功！"})]})},hw=({quizzes:n})=>{const[e,o]=k.useState(Cn.Easy);if(!n)return x.jsx(Ft,{title:"線上互動測驗",icon:x.jsx(Da,{}),children:"沒有可用的測驗資料。"});const a=n[e],s=[{key:Cn.Easy,label:"簡單"},{key:Cn.Normal,label:"普通"},{key:Cn.Hard,label:"困難"}],f={trueFalse:"是非題",multipleChoice:"選擇題",fillInTheBlanks:"填空題",sentenceScramble:"句子重組",memoryCardGame:"翻卡牌記憶遊戲"};return x.jsxs(Ft,{title:"線上互動測驗",icon:x.jsx(Da,{className:"w-7 h-7"}),children:[x.jsx("div",{className:"mb-6",children:x.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-300 pb-3 mb-4",children:s.map(({key:m,label:p})=>x.jsx("button",{onClick:()=>o(m),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors
                ${e===m?"bg-sky-600 text-white shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:p},m))})}),a?Object.keys(f).map(m=>{if(!a.hasOwnProperty(m))return null;const p=a[m];return!p||p.length===0?null:x.jsxs("div",{className:"mb-8",children:[x.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-3 border-b-2 border-sky-200 pb-1",children:f[m]}),m==="trueFalse"&&p.map((y,h)=>x.jsx(Qg,{question:y,itemNumber:h+1},`${e}-tf-${h}`)),m==="multipleChoice"&&p.map((y,h)=>x.jsx(Xg,{question:y,itemNumber:h+1},`${e}-mc-${h}`)),m==="fillInTheBlanks"&&p.map((y,h)=>x.jsx(Kg,{question:y,itemNumber:h+1},`${e}-fb-${h}`)),m==="sentenceScramble"&&p.map((y,h)=>x.jsx(Wg,{question:y,itemNumber:h+1},`${e}-ss-${h}`)),m==="memoryCardGame"&&p.map((y,h)=>x.jsx(jg,{question:y,itemNumber:h+1},`${e}-mcg-${h}`))]},`${e}-${m}`)}):x.jsx("p",{children:"此難度級別沒有找到測驗題目。"})]})},gw=({dialogue:n})=>{const[e,o]=k.useState(null),[a,s]=k.useState(null),[f,m]=k.useState(!1),[p,y]=k.useState(""),[h,v]=k.useState(null),[C,b]=k.useState(!1),[E,_]=k.useState({tts:!0,sr:!0}),N=k.useRef(null),q=k.useRef(null);k.useEffect(()=>{const ee="speechSynthesis"in window,j="SpeechRecognition"in window||"webkitSpeechRecognition"in window;if(_({tts:ee,sr:j}),j){const ce=window.SpeechRecognition||window.webkitSpeechRecognition;N.current=new ce,N.current.continuous=!1,N.current.interimResults=!1,N.current.lang="en-US",N.current.onresult=Q=>{const B=Q.results[0][0].transcript;y(B),Y(B)},N.current.onerror=Q=>{console.error("Speech recognition error:",Q.error),v({type:"error",message:`語音辨識錯誤: ${Q.error==="no-speech"?"未偵測到語音":Q.error==="audio-capture"?"麥克風擷取失敗":Q.error==="not-allowed"?"麥克風權限未授予":"發生錯誤"}`}),m(!1)},N.current.onend=()=>{m(!1)}}return()=>{window.speechSynthesis&&window.speechSynthesis.speaking&&window.speechSynthesis.cancel()}},[]);const O=(ee,j)=>{if(!E.tts||!ee)return;window.speechSynthesis.speaking&&window.speechSynthesis.cancel();const ce=new SpeechSynthesisUtterance(ee);ce.lang="en-US";const Q=window.speechSynthesis.getVoices(),B=Q.find(le=>le.lang.startsWith("en")&&le.name.includes("Google")&&le.localService)||Q.find(le=>le.lang.startsWith("en")&&le.localService)||Q.find(le=>le.lang.startsWith("en"));B&&(ce.voice=B),ce.onstart=()=>{b(!0),o(j)},ce.onend=()=>{b(!1),o(null)},ce.onerror=le=>{console.error("Speech synthesis error:",le),b(!1),o(null),v({type:"error",message:"語音播放失敗。"})},q.current=ce,window.speechSynthesis.speak(ce)},$=ee=>{if(!(!E.sr||!N.current||f)){s(ee),y(""),v(null),m(!0);try{N.current.start()}catch(j){console.error("Error starting recognition: ",j),m(!1),v({type:"error",message:"無法啟動語音辨識。"})}}},F=()=>{N.current&&f&&(N.current.stop(),m(!1))},Z=ee=>ee.toLowerCase().replace(/[.,!?;:"']/g,"").trim(),Y=ee=>{if(a===null)return;const j=n[a].line;Z(ee)===Z(j)?v({type:"success",message:`太棒了！發音正確: "${ee}"`}):v({type:"error",message:`再試一次。您說的是: "${ee}"，參考句: "${j}"`})};return!n||n.length===0?x.jsx(Ft,{title:"英文對話練習",icon:x.jsx(Tc,{className:"w-7 h-7"}),children:x.jsx("p",{className:"text-slate-600",children:"目前沒有可用的對話內容。"})}):x.jsxs(Ft,{title:"英文對話練習",icon:x.jsx(Tc,{className:"w-7 h-7"}),children:[!E.tts&&x.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md",children:"您的瀏覽器不支援語音合成 (TTS)。"}),!E.sr&&x.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md mt-2",children:"您的瀏覽器不支援語音辨識 (SR)。建議使用最新版 Chrome 或 Edge。"}),x.jsx("div",{className:"space-y-4",children:n.map((ee,j)=>x.jsxs("div",{className:`p-3 rounded-lg ${ee.speaker==="Speaker A"?"bg-sky-50":"bg-indigo-50"} border ${ee.speaker==="Speaker A"?"border-sky-200":"border-indigo-200"}`,children:[x.jsxs("p",{className:"font-semibold text-sm mb-1 ${item.speaker === 'Speaker A' ? 'text-sky-700' : 'text-indigo-700'}",children:[ee.speaker,":"]}),x.jsx("p",{className:"text-slate-800 mb-2",children:ee.line}),x.jsxs("div",{className:"flex items-center space-x-2",children:[E.tts&&x.jsx("button",{onClick:()=>O(ee.line,j),disabled:C&&e!==j,className:`p-1.5 rounded-full hover:bg-slate-200 transition-colors disabled:opacity-50 ${C&&e===j?"text-sky-500 animate-pulse":"text-slate-600"}`,"aria-label":`播放 ${ee.speaker} 的話`,children:x.jsx(fw,{className:"w-5 h-5"})}),E.sr&&(f&&a===j?x.jsx("button",{onClick:F,className:"p-1.5 rounded-full text-red-600 hover:bg-red-100 transition-colors","aria-label":"停止錄音",children:x.jsx(mw,{className:"w-5 h-5"})}):x.jsx("button",{onClick:()=>$(j),disabled:f||C,className:"p-1.5 rounded-full text-slate-600 hover:bg-slate-200 transition-colors disabled:opacity-50","aria-label":`練習說出 ${ee.speaker} 的話`,children:x.jsx(dw,{className:"w-5 h-5"})}))]}),a===j&&p&&x.jsxs("p",{className:"mt-2 text-sm text-slate-600 italic",children:['您說的是: "',p,'"']}),a===j&&h&&x.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-start ${h.type==="success"?"bg-green-100 text-green-700":h.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:[h.type==="success"&&x.jsx(Oa,{className:"w-5 h-5 mr-2 flex-shrink-0"}),h.type==="error"&&x.jsx(Va,{className:"w-5 h-5 mr-2 flex-shrink-0"}),x.jsx("span",{children:h.message})]})]},j))}),f&&x.jsx("p",{className:"mt-4 text-center text-sky-600 font-medium animate-pulse",children:"正在聆聽..."})]})},yw=n=>`
    <div class="tabs">
      <button class="tab-btn active" data-tab-target="easy-quiz-content" data-difficulty="easy">簡單</button>
      <button class="tab-btn" data-tab-target="normal-quiz-content" data-difficulty="normal">普通</button>
      <button class="tab-btn" data-tab-target="hard-quiz-content" data-difficulty="hard">困難</button>
    </div>
    <div id="easy-quiz-content" class="tab-content active">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="easy"></div>
    </div>
    <div id="normal-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="normal"></div>
    </div>
    <div id="hard-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="hard"></div>
    </div>
    <script type="application/json" id="quizDataStore">
      ${n}
    <\/script>
  `,vw=(n,e)=>{const o=n.learningObjectives&&n.learningObjectives.length>0?`<ul>${n.learningObjectives.map(_=>`<li>${_}</li>`).join("")}</ul>`:"<p>沒有提供教學目標。</p>",a=n.contentBreakdown&&n.contentBreakdown.length>0?n.contentBreakdown.map(_=>`
        <div class="breakdown-item" style="margin-bottom:24px; padding-bottom:20px; border-bottom:1px solid #e2e8f0;">
          <h3 style="color:#0369a1; margin-bottom:8px;">${_.topic}</h3>
          <p style="margin-bottom:12px; color:#475569;">${_.details}</p>
          
          ${_.coreConcept?`
            <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#1e40af; font-size:0.85em; display:block; margin-bottom:4px;">核心概念</strong>
              <span style="color:#1e3a8a; font-size:0.9em;">${_.coreConcept}</span>
            </div>`:""}
          
          ${_.teachingSentences&&_.teachingSentences.length>0?`
            <div style="background:#eef2ff; border-left:4px solid #6366f1; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#4338ca; font-size:0.85em; display:block; margin-bottom:8px;">教學例句</strong>
              <div style="line-height:1.6;">
                ${_.teachingSentences.map((N,q)=>`
                  <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                    <span style="color:#6366f1; font-family:monospace;">${q+1}.</span> ${N}
                  </div>
                `).join("")}
              </div>
            </div>`:""}
          
          ${_.teachingTips?`
            <div style="background:#faf5ff; border-left:4px solid #8b5cf6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#7c3aed; font-size:0.85em; display:block; margin-bottom:4px;">教學要點提示</strong>
              <span style="color:#6b21a8; font-size:0.9em;">${_.teachingTips}</span>
            </div>`:""}
          
          ${_.teachingExample?`
            <div style="background:#f0f9ff; border-left:4px solid #0ea5e9; padding:12px; border-radius:4px;">
              <strong style="color:#0284c7; font-size:0.85em; display:block; margin-bottom:4px;">教學示例</strong>
              <span style="color:#0c4a6e; font-size:0.9em;">${_.teachingExample}</span>
            </div>`:""}
        </div>`).join(""):"<p>沒有提供內容分解。</p>",s=n.confusingPoints&&n.confusingPoints.length>0?n.confusingPoints.map(_=>`
        <div class="confusing-point-item" style="border:1px solid #e2e8f0; border-radius:8px; padding:20px; margin-bottom:24px; background:#fefefe;">
          <h3 style="color:#b91c1c; margin-bottom:12px; font-size:1.3em; font-weight:600;">${_.point}</h3>
          <p style="margin-bottom:16px; color:#475569; line-height:1.6;">${_.clarification}</p>
          
          ${_.errorType?`
          <div style="background:#fff7ed; border-left:4px solid #f97316; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#c2410c; font-size:0.8em; display:block; margin-bottom:4px;">誤區類型</strong>
            <span style="color:#9a3412; font-size:0.9em;">${_.errorType}</span>
          </div>`:""}
          
          ${_.commonErrors&&_.commonErrors.length>0?`
          <div style="background:#fef2f2; border-left:4px solid #ef4444; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:8px;">常見錯誤示例</strong>
            <div style="margin-left:0;">
              ${_.commonErrors.map((N,q)=>`
                <div style="color:#991b1b; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#dc2626; font-family:monospace; margin-right:6px;">${q+1}.</span>${N}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${_.correctVsWrong&&_.correctVsWrong.length>0?`
          <div style="background:#fefce8; border-left:4px solid #eab308; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#a16207; font-size:0.8em; display:block; margin-bottom:8px;">正確與錯誤對比</strong>
            ${_.correctVsWrong.map((N,q)=>`
              <div style="border:1px solid #fde047; background:#fffbeb; padding:12px; margin-bottom:8px; border-radius:6px;">
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:8px;">
                  <div style="background:#f0fdf4; padding:10px; border-radius:4px; border:1px solid #bbf7d0;">
                    <strong style="color:#166534; font-size:0.8em; display:block; margin-bottom:4px;">✓ 正確</strong>
                    <span style="color:#15803d; font-size:0.9em;">${N.correct}</span>
                  </div>
                  <div style="background:#fef2f2; padding:10px; border-radius:4px; border:1px solid #fecaca;">
                    <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:4px;">✗ 錯誤</strong>
                    <span style="color:#991b1b; font-size:0.9em;">${N.wrong}</span>
                  </div>
                </div>
                <div style="background:#eff6ff; padding:10px; border-radius:4px; border:1px solid #bfdbfe;">
                  <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;">說明</strong>
                  <span style="color:#1e40af; font-size:0.9em;">${N.explanation}</span>
                </div>
              </div>
            `).join("")}
          </div>`:""}
          
          ${_.preventionStrategy?`
          <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;">預防策略</strong>
            <span style="color:#1e40af; font-size:0.9em;">${_.preventionStrategy}</span>
          </div>`:""}
          
          ${_.correctionMethod?`
          <div style="background:#faf5ff; border-left:4px solid #a855f7; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#7c3aed; font-size:0.8em; display:block; margin-bottom:4px;">糾正方法</strong>
            <span style="color:#6b21a8; font-size:0.9em;">${_.correctionMethod}</span>
          </div>`:""}
          
          ${_.practiceActivities&&_.practiceActivities.length>0?`
          <div style="background:#f0f9ff; border-left:4px solid #6366f1; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#4338ca; font-size:0.8em; display:block; margin-bottom:8px;">練習建議</strong>
            <div style="margin-left:0;">
              ${_.practiceActivities.map((N,q)=>`
                <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#4338ca; font-family:monospace; margin-right:6px;">${q+1}.</span>${N}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${_.teachingExample?`
          <div style="background:#f9fafb; border-left:4px solid #6b7280; padding:12px; border-radius:4px;">
            <strong style="color:#374151; font-size:0.8em; display:block; margin-bottom:4px;">教學示例</strong>
            <span style="color:#111827; font-size:0.9em;">${_.teachingExample}</span>
          </div>`:""}
        </div>`).join(""):"<p>沒有提供易混淆點。</p>",f=n.classroomActivities&&n.classroomActivities.length>0?n.classroomActivities.map(_=>`
        <div class="activity-item" style="border:1px solid #e0e7ef; border-radius:6px; padding:16px; margin-bottom:16px; background:#f8fafc;">
          <h3 style="color:#2563eb; margin-bottom:8px; font-size:1.2em;">${_.title}</h3>
          <p style="margin-bottom:12px; color:#475569;">${_.description}</p>
          
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px;">
            ${_.objective?`
              <div>
                <strong style="color:#0f172a;">學習目標：</strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${_.objective}</p>
              </div>`:""}
            ${_.timing?`
              <div>
                <strong style="color:#0f172a;">使用時機：</strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${_.timing}</p>
              </div>`:""}
            ${_.materials?`
            <div>
              <strong style="color:#0f172a;">所需教具：</strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${_.materials}</p>
            </div>`:""}
            ${_.environment?`
            <div>
              <strong style="color:#0f172a;">環境要求：</strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${_.environment}</p>
            </div>`:""}
          </div>
          
          ${_.steps&&_.steps.length>0?`
            <div style="margin-bottom:12px;">
              <strong style="color:#0f172a;">活動步驟：</strong>
              <ol style="margin:8px 0 0 20px; padding:0;">
                ${_.steps.map(N=>`<li style="margin-bottom:4px; font-size:0.9em;">${N}</li>`).join("")}
              </ol>
            </div>`:""}
          
          ${_.assessmentPoints&&_.assessmentPoints.length>0?`
            <div>
              <strong style="color:#0f172a;">評估重點：</strong>
              <ul style="margin:8px 0 0 20px; padding:0;">
                ${_.assessmentPoints.map(N=>`<li style="margin-bottom:4px; font-size:0.9em;">${N}</li>`).join("")}
              </ul>
            </div>`:""}
        </div>
      `).join(""):"<p>沒有提供課堂活動。</p>",m=n.englishConversation&&n.englishConversation.length>0?n.englishConversation.map(_=>`
        <div class="dialogue-line ${_.speaker==="Speaker A"?"speakerA":"speakerB"}">
          <span class="speaker">${_.speaker}:</span> ${_.line}
        </div>`).join("")+"<p><small><em>注意：互動式語音朗讀和練習功能僅在線上應用程式中提供。</em></small></p>":"<p>沒有提供英文對話內容。</p>",p=n.learningLevels&&n.learningLevels.suggestedLevels&&n.learningLevels.suggestedLevels.length>0?n.learningLevels.suggestedLevels.sort((_,N)=>_.order-N.order).map(_=>`
          <div class="level-item" style="border:1px solid #e0e7ef; border-radius:8px; padding:16px; margin-bottom:12px; background:${_.id===n.learningLevels.defaultLevelId?"#eff8ff":"#f8fafc"}; border-left: 4px solid ${_.id===n.learningLevels.defaultLevelId?"#0ea5e9":"#e2e8f0"};">
            <div style="display:flex; align-items:center; margin-bottom:8px;">
              <div style="width:32px; height:32px; border-radius:50%; background-color:${_.id===n.learningLevels.defaultLevelId?"#0ea5e9":"#94a3b8"}; color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; margin-right:12px;">${_.order}</div>
              <h3 style="margin:0; color:${_.id===n.learningLevels.defaultLevelId?"#0c4a6e":"#334155"};">${_.name}</h3>
              ${_.id===n.learningLevels.defaultLevelId?'<span style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:4px; font-size:0.8em; margin-left:8px;">預設</span>':""}
            </div>
            <p style="margin:0; color:#64748b; line-height:1.5;">${_.description}</p>
          </div>
        `).join(""):"<p>沒有提供學習程度建議。</p>",y=JSON.stringify(n.onlineInteractiveQuiz||{}),h=yw(y),v=`
    <!DOCTYPE html>
    <html lang="zh-Hant">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>學習計畫：${e}</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 20px; line-height: 1.6; background-color: #f4f7f9; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #3498db; margin-top: 30px; border-bottom: 1px solid #eee; padding-bottom: 8px;}
        h3 { color: #2980b9; margin-top: 20px; }
        h4 { color: #16a085; margin-top:15px; font-size: 1.1em; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed #bdc3c7;}
        ul { list-style-type: disc; padding-left: 20px; }
        li { margin-bottom: 8px; }
        p { margin-bottom: 10px; }
        .section { margin-bottom: 25px; }
        .breakdown-item, .confusing-point-item { border-left: 3px solid #3498db; padding-left: 15px; margin-bottom: 15px; background-color: #fdfdfe; padding:10px; border-radius: 0 4px 4px 0;}
        .dialogue-line { margin-bottom: 8px; padding: 10px; border-radius: 5px; }
        .dialogue-line .speaker { font-weight: bold; color: #0056b3; }
        .dialogue-line.speakerA { background-color: #e7f3ff; border-left: 3px solid #79a6dc; }
        .dialogue-line.speakerB { background-color: #e6fff0; border-left: 3px solid #68d19a; }
        
        .tabs { display: flex; margin-bottom: 0; border-bottom: 1px solid #ccc;}
        .tabs button { padding: 10px 15px; cursor: pointer; border: 1px solid #ccc; background-color: #f0f0f0; margin-right: 0px; border-bottom: none; border-radius: 5px 5px 0 0; font-size: 1em;}
        .tabs button.active { background-color: #fff; border-bottom: 1px solid #fff; color: #3498db; font-weight: bold; position:relative; top:1px;}
        .tab-content { display: none; padding: 15px; border: 1px solid #ccc; border-top: none; background-color:#fff; border-radius: 0 0 5px 5px;}
        .tab-content.active { display: block; }

        .quiz-item { border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 15px; border-radius: 5px; background: #f9f9f9; }
        .quiz-question { font-weight: 500; margin-bottom: 8px; color: #333; }
        .quiz-item p:first-child { margin-top: 0; }
        .quiz-feedback { padding: 8px; margin-top: 10px; border-radius: 4px; font-size: 0.9em; }
        .quiz-feedback.correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .quiz-feedback.incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .quiz-feedback em { color: #555;}
        
        .tf-options button { margin-right: 10px; padding: 8px 12px; border-radius: 4px; border: 1px solid #ccc; cursor: pointer; }
        .tf-options button.selected.correct, .tf-options button.correct { background-color: #28a745; color: white; border-color: #28a745; }
        .tf-options button.selected.incorrect, .tf-options button.incorrect { background-color: #dc3545; color: white; border-color: #dc3545; }
        .tf-options button:disabled { opacity: 0.7; cursor: not-allowed; }

        .mc-options label { display: block; margin-bottom: 8px; padding: 8px; border: 1px solid #eee; border-radius: 4px; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; }
        .mc-options label:hover { background-color: #f0f8ff; }
        .mc-options input[type="radio"] { margin-right: 8px; }
        .mc-options label.selected { background-color: #e0f0ff; border-color: #79a6dc; }
        .mc-options label.correct-answer { background-color: #d4edda !important; border-color: #c3e6cb !important; color: #155724;}
        .mc-options label.incorrect-selection { background-color: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24;}
        .mc-options label.disabled { cursor: not-allowed; opacity: 0.7; }


        .fb-input { padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin: 0 5px; min-width:100px; }
        .fb-input:disabled { background-color: #eee; }

        .ss-word-bank, .ss-constructed-sentence-area { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; border: 1px dashed #ccc; border-radius: 4px; min-height: 40px; margin-bottom: 10px; }
        .ss-word-bank { background-color: #f0f8ff; }
        .ss-constructed-sentence-area { background-color: #e6fff0; }
        .ss-word-bank button, .ss-constructed-sentence-area button { padding: 5px 10px; background-color: #add8e6; border: none; border-radius: 4px; cursor: pointer; font-size: 0.95em;}
        .ss-word-bank button:hover, .ss-constructed-sentence-area button:hover { background-color: #90cce0; }
        .ss-constructed-sentence-area button { background-color: #a2d2ff; }


        .quiz-item button.check-answer-btn, .quiz-item button.ss-action-btn {
          background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; margin-top: 10px; transition: background-color 0.2s;
        }
        .quiz-item button.check-answer-btn:hover, .quiz-item button.ss-action-btn:hover { background-color: #2980b9; }
        .quiz-item button.ss-action-btn.ss-clear { background-color: #e74c3c; margin-left: 5px;}
        .quiz-item button.ss-action-btn.ss-clear:hover { background-color: #c0392b; }
        .quiz-item button:disabled, .quiz-item button.check-answer-btn:disabled, .quiz-item button.ss-action-btn:disabled { background-color: #bdc3c7; cursor: not-allowed; opacity: 0.7;}
        
        footer { text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd; font-size: 0.9em; color: #777; }
      </style>
    </head>
    <body>
      <div class="container">
        <h1>學習計畫：${e}</h1>

        <div class="section">
          <h2>學習程度建議</h2>
          ${p}
        </div>

        <div class="section">
          <h2>教學目標設定</h2>
          ${o}
        </div>

        <div class="section">
          <h2>分解學習內容</h2>
          ${a}
        </div>

        <div class="section">
          <h2>易混淆點識別</h2>
          ${s}
        </div>

        <div class="section">
          <h2>課堂活動與遊戲設計</h2>
          ${f}
        </div>
        
        <div class="section">
          <h2>英文對話練習</h2>
          ${m}
        </div>

        <div class="section">
          <h2>線上互動測驗</h2>
          ${h}
        </div>
        
        <footer>
          <p>此學習計畫由 AI 產生。匯出時間：${new Date().toLocaleString()}</p>
        </footer>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const quizData = JSON.parse(document.getElementById('quizDataStore').textContent || '{}');
          let sentenceScrambleStates = {}; // To store dynamic state for sentence scramble

          const normalizeText = (str) => {
            if (typeof str !== 'string') return '';
            // Corrected regex for multiple spaces: s+ instead of \\s+
            return str.toLowerCase().replace(/[.,!?;:'"‘'""]/g, '').replace(/s+/g, ' ').trim();
          };

          const renderQuizzesForDifficulty = (difficulty) => {
            const container = document.querySelector(\`.quiz-items-container[data-difficulty="\${difficulty}"]\`);
            if (!container) return;
            container.innerHTML = ''; 
            sentenceScrambleStates[difficulty] = {}; // Reset states for this difficulty

            const difficultyData = quizData[difficulty];
            if (!difficultyData || Object.keys(difficultyData).every(type => !difficultyData[type] || difficultyData[type].length === 0)) {
              container.innerHTML = '<p>此難度沒有測驗資料。</p>';
              return;
            }

            let itemGlobalIndex = 0;
            const typeLabels = { trueFalse: "是非題", multipleChoice: "選擇題", fillInTheBlanks: "填空題", sentenceScramble: "句子重組"};

            const createHtml = (type, q, index) => {
              const questionId = \`\${difficulty}-\${type}-\${index}\`;
              let itemHtml = \`<div class="quiz-item \${type}-item" id="item-\${questionId}">\`;
              
              if (type === 'trueFalse') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.statement}</p>\`;
                itemHtml += \`<div class="tf-options">\`;
                itemHtml += \`<button data-value="true" data-question-id="\${questionId}">是 (True)</button>\`;
                itemHtml += \`<button data-value="false" data-question-id="\${questionId}">非 (False)</button>\`;
                itemHtml += \`</div>\`;
              } else if (type === 'multipleChoice') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.question}</p>\`;
                itemHtml += \`<div class="mc-options">\`;
                q.options.forEach((opt, optIndex) => {
                  itemHtml += \`<label><input type="radio" name="mc-\${questionId}" value="\${optIndex}"> \${String.fromCharCode(65 + optIndex)}. \${opt}</label>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<button class="check-answer-btn mc-check" data-question-id="\${questionId}">檢查答案</button>\`;
              } else if (type === 'fillInTheBlanks') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.sentenceWithBlank.replace('____', '<input type="text" class="fb-input" id="fb-input-\${questionId}" placeholder="答案">')}</p>\`;
                itemHtml += \`<button class="check-answer-btn fb-check" data-question-id="\${questionId}">檢查答案</button>\`;
              } else if (type === 'sentenceScramble') {
                sentenceScrambleStates[difficulty][questionId] = {
                    availableWords: q.scrambledWords.slice().sort(() => Math.random() - 0.5),
                    constructedWords: []
                };
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. 請重組以下詞彙來形成一個正確的句子：</p>\`;
                itemHtml += \`<p class="ss-instruction">點擊下方詞彙將其加入您的句子，或點擊您句子中的詞彙將其移回詞彙庫。</p>\`
                itemHtml += \`<div class="ss-word-bank" id="ss-bank-\${questionId}">\`;
                sentenceScrambleStates[difficulty][questionId].availableWords.forEach(word => {
                   itemHtml += \`<button class="ss-word" data-word="\${word}" data-question-id="\${questionId}" data-source="bank">\${word}</button>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<p class="quiz-question">您的句子：</p><div class="ss-constructed-sentence-area" id="ss-area-\${questionId}"></div>\`;
                itemHtml += \`<button class="check-answer-btn ss-check" data-question-id="\${questionId}">檢查句子</button>\`;
                itemHtml += \`<button class="ss-action-btn ss-clear" data-question-id="\${questionId}">清除</button>\`;
              }
              itemHtml += \`<div class="quiz-feedback" id="feedback-\${questionId}"></div></div>\`;
              itemGlobalIndex++;
              return itemHtml;
            };
            
            const quizTypes = ['trueFalse', 'multipleChoice', 'fillInTheBlanks', 'sentenceScramble'];
            let hasContentForDifficulty = false;

            quizTypes.forEach(type => {
              if (difficultyData[type] && difficultyData[type].length > 0) {
                hasContentForDifficulty = true;
                const typeHeader = document.createElement('h4');
                typeHeader.textContent = typeLabels[type];
                container.appendChild(typeHeader);
                difficultyData[type].forEach((q, i) => {
                  const questionElement = document.createElement('div');
                  questionElement.innerHTML = createHtml(type, q, i);
                  container.appendChild(questionElement.firstChild);
                });
              }
            });
             if (!hasContentForDifficulty) {
                 container.innerHTML = '<p>此難度沒有可用的測驗題目。</p>';
            }
          };

          const tabButtons = document.querySelectorAll('.tabs .tab-btn');
          const tabContents = document.querySelectorAll('.tab-content');

          tabButtons.forEach(button => {
            button.addEventListener('click', () => {
              tabButtons.forEach(btn => btn.classList.remove('active'));
              tabContents.forEach(content => content.classList.remove('active'));

              button.classList.add('active');
              const targetContentId = button.getAttribute('data-tab-target');
              document.getElementById(targetContentId).classList.add('active');
              
              const difficulty = button.getAttribute('data-difficulty');
              renderQuizzesForDifficulty(difficulty);
            });
          });
          
          // Initial render for the default active tab
          renderQuizzesForDifficulty('easy');


          // Event delegation for quiz interactions
          document.querySelector('.container').addEventListener('click', (event) => {
            const target = event.target;
            // Ensure target is an HTMLElement before trying to access attributes or match selectors
            if (!(target instanceof HTMLElement)) return;

            const questionId = target.getAttribute('data-question-id');
            if (!questionId) return;

            const [difficulty, type, indexStr] = questionId.split('-');
            const index = parseInt(indexStr);
            const questionData = quizData[difficulty]?.[type]?.[index];
            const feedbackEl = document.getElementById(\`feedback-\${questionId}\`);

            if (!questionData || !feedbackEl) return;

            // True/False
            if (target.matches('.tf-options button')) {
              const selectedValue = target.getAttribute('data-value') === 'true';
              const isCorrect = selectedValue === questionData.isTrue;
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '答對了！' : \`答錯了。正確答案是：\${questionData.isTrue ? '是 (True)' : '非 (False)'}\`;
              if (questionData.explanation) message += \` <em>\${questionData.explanation}</em>\`;
              feedbackEl.innerHTML = message;
              
              target.classList.add('selected', isCorrect ? 'correct' : 'incorrect');
              Array.from(target.parentElement.children).forEach(btn => btn.disabled = true);
            }

            // Multiple Choice Check
            else if (target.matches('.mc-check')) {
              const selectedRadio = document.querySelector(\`input[name="mc-\${questionId}"]:checked\`);
              if (!selectedRadio) {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '請選擇一個選項。';
                return;
              }
              const selectedOptionIndex = parseInt(selectedRadio.value);
              const isCorrect = selectedOptionIndex === questionData.correctAnswerIndex;
              
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '答對了！' : \`答錯了。正確答案是：\${String.fromCharCode(65 + questionData.correctAnswerIndex)}. \${questionData.options[questionData.correctAnswerIndex]}\`;
              feedbackEl.innerHTML = message;

              // Visually mark options
              const optionLabels = document.querySelectorAll(\`#item-\${questionId} .mc-options label\`);
              optionLabels.forEach((label, idx) => {
                label.classList.add('disabled');
                const radioInLabel = label.querySelector('input');
                if (radioInLabel) radioInLabel.disabled = true;

                if (idx === questionData.correctAnswerIndex) {
                    label.classList.add('correct-answer');
                }
                if (idx === selectedOptionIndex && !isCorrect) {
                    label.classList.add('incorrect-selection');
                }
                 if (idx === selectedOptionIndex) {
                    label.classList.add('selected');
                }
              });
              target.disabled = true;
            }

            // Fill in the Blanks Check
            else if (target.matches('.fb-check')) {
              const inputEl = document.getElementById(\`fb-input-\${questionId}\`);
              // Add null check for inputEl
              if (!inputEl) {
                  console.error('Fill-in-the-blanks input element not found for ID:', \`fb-input-\${questionId}\`);
                  feedbackEl.className = 'quiz-feedback incorrect';
                  feedbackEl.textContent = '發生錯誤：找不到輸入欄位。';
                  return;
              }
              const userAnswer = inputEl.value.trim();
              if (userAnswer === '') {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '請輸入答案。';
                return;
              }
              const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.correctAnswer);
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              feedbackEl.textContent = isCorrect ? '答對了！' : \`答錯了。正確答案是： "\${questionData.correctAnswer}"\`;
              inputEl.disabled = true;
              target.disabled = true;
            }
            
            // Sentence Scramble
            else if (target.matches('.ss-word') || target.matches('.ss-check') || target.matches('.ss-clear')) {
                const state = sentenceScrambleStates[difficulty][questionId];
                if (!state) return; // Should not happen if initialized correctly

                const bankEl = document.getElementById(\`ss-bank-\${questionId}\`);
                const areaEl = document.getElementById(\`ss-area-\${questionId}\`);
                
                if(!bankEl || !areaEl) return;


                const redrawScramble = () => {
                    bankEl.innerHTML = '';
                    state.availableWords.forEach(w => {
                        bankEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="bank">\${w}</button>\`;
                    });
                    areaEl.innerHTML = '';
                    state.constructedWords.forEach(w => {
                        areaEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="area">\${w}</button>\`;
                    });
                };

                if (target.matches('.ss-word')) {
                    const word = target.getAttribute('data-word');
                    const source = target.getAttribute('data-source');
                    if (source === 'bank') {
                        state.constructedWords.push(word);
                        // Correctly remove only one instance of the word from availableWords
                        const wordIndexInBank = state.availableWords.indexOf(word);
                        if (wordIndexInBank > -1) {
                            state.availableWords.splice(wordIndexInBank, 1);
                        }
                    } else { // source === 'area'
                        state.availableWords.push(word);
                        // Correctly remove only one instance of the word from constructedWords
                        const wordIndexInArea = state.constructedWords.indexOf(word);
                        if (wordIndexInArea > -1) {
                            state.constructedWords.splice(wordIndexInArea, 1);
                        }
                    }
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                } else if (target.matches('.ss-check')) {
                    const userAnswer = state.constructedWords.join(' ').trim();
                    const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.originalSentence);
                    feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
                    feedbackEl.textContent = isCorrect ? '答對了！' : \`答錯了。正確句子是： "\${questionData.originalSentence}"\`;
                    target.disabled = true;
                    const clearButton = document.querySelector(\`#item-\${questionId} .ss-clear\`);
                    if(clearButton) clearButton.disabled = true;
                    
                    bankEl.querySelectorAll('button').forEach(b => b.disabled = true);
                    areaEl.querySelectorAll('button').forEach(b => b.disabled = true);

                } else if (target.matches('.ss-clear')) {
                    state.availableWords = questionData.scrambledWords.slice().sort(() => Math.random() - 0.5);
                    state.constructedWords = [];
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                }
            }

          });
        });
      <\/script>
    </body>
    </html>
  `,C=new Blob([v],{type:"text/html;charset=utf-8"}),b=URL.createObjectURL(C),E=document.createElement("a");E.href=b,E.download=`learning-plan-${e.replace(/\s+/g,"_")||"untitled"}.html`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(b)},xw=({tabs:n,current:e,onChange:o,children:a})=>x.jsxs("div",{children:[x.jsx("div",{className:"flex border-b mb-4",children:n.map(s=>x.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium transition-colors focus:outline-none ${e===s.key?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-slate-500 hover:text-indigo-600"}`,onClick:()=>o(s.key),type:"button",children:s.label},s.key))}),x.jsx("div",{children:a[n.findIndex(s=>s.key===e)]})]}),ey="https://api.jsonbin.io/v3/b",ty="$2a$10$0PieG5Wm.V.6svtN4PbaTuVxU4LY0nL2Vaz4N3g2aYlb0cL1NG4Qa";async function Tw(n){const o=await(await fetch(ey,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":ty,"X-Bin-Private":"false"},body:JSON.stringify(n)})).json();if(!o||!o.metadata||!o.metadata.id)throw new Error("無法取得 jsonbin id");return o.metadata.id}async function Cw(n){const o=await(await fetch(`https://api.jsonbin.io/v3/b/${n}/latest`,{})).json();if(!o||!o.record)throw new Error("找不到對應的教學方案");return o.record}async function Sw(n){const e={type:"quiz",quiz:n.quiz,topic:n.topic,metadata:n.metadata,createdAt:new Date().toISOString()},a=await(await fetch(ey,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":ty,"X-Bin-Private":"false"},body:JSON.stringify(e)})).json();if(!a||!a.metadata||!a.metadata.id)throw new Error("無法儲存測驗內容");return a.metadata.id}async function bw(n){const o=await(await fetch(`https://api.jsonbin.io/v3/b/${n}/latest`,{})).json();if(!o||!o.record)throw new Error("找不到對應的測驗內容");const a=o.record;if(a.type!=="quiz")throw new Error("此連結不是測驗專用分享");return{quiz:a.quiz,topic:a.topic,metadata:a.metadata}}const mg=[{key:"objectives",label:"教學目標"},{key:"breakdown",label:"分解內容"},{key:"confusing",label:"易混淆點"},{key:"activities",label:"課堂活動"},{key:"conversation",label:"對話練習"},{key:"quiz",label:"互動測驗"}],ny=({content:n,topic:e,selectedLevel:o,selectedVocabularyLevel:a})=>{const[s,f]=je.useState(""),[m,p]=je.useState(""),[y,h]=je.useState(mg[0].key),[v,C]=je.useState(!1),[b,E]=je.useState(""),[_,N]=je.useState(""),[q,O]=je.useState(!1),[$,F]=je.useState(""),[Z,Y]=je.useState(""),ee=()=>{navigator.clipboard.writeText(JSON.stringify(n,null,2)).then(()=>{f("JSON 已複製到剪貼簿！"),setTimeout(()=>f(""),2e3)}).catch(B=>{f("複製失敗。"),console.error("Failed to copy: ",B),setTimeout(()=>f(""),2e3)})},j=()=>{try{vw(n,e),p("HTML 檔案已開始下載！"),setTimeout(()=>p(""),3e3)}catch(B){console.error("Failed to export HTML:",B),p("匯出 HTML 失敗。"),setTimeout(()=>p(""),3e3)}},ce=async()=>{C(!0),E(""),N("");try{const B=await Tw(n),le=`${window.location.origin}/ai-page-gen/share?binId=${B}`;N(le)}catch(B){E(B.message||"分享失敗")}finally{C(!1)}},Q=async()=>{if(O(!0),F(""),Y(""),!n.onlineInteractiveQuiz){F("沒有可分享的測驗內容"),O(!1);return}try{const B=await Sw({quiz:n.onlineInteractiveQuiz,topic:e,metadata:{selectedLevel:o==null?void 0:o.name,selectedVocabularyLevel:a==null?void 0:a.name,createdAt:new Date().toISOString()}}),le=`${window.location.origin}/ai-page-gen/quiz?binId=${B}`;Y(le)}catch(B){F(B.message||"分享測驗失敗")}finally{O(!1)}};return x.jsxs("div",{className:"mt-8",children:[x.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-2 mb-4",children:[x.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors flex items-center text-sm","aria-label":"複製產生的 JSON 內容",children:[x.jsx(cw,{className:"w-4 h-4 mr-2"})," 複製產生的 JSON"]}),x.jsxs("button",{onClick:j,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center text-sm","aria-label":"將學習內容匯出為 HTML 檔案",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"匯出為 HTML"]}),x.jsx("button",{onClick:ce,className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"分享教學方案",disabled:v,children:v?x.jsxs("span",{className:"flex items-center",children:[x.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," 分享中..."]}):x.jsx("span",{children:"分享方案"})}),x.jsx("button",{onClick:Q,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"分享測驗給學生",disabled:q,children:q?x.jsxs("span",{className:"flex items-center",children:[x.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," 分享中..."]}):x.jsxs("span",{className:"flex items-center",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),"分享測驗"]})}),s&&x.jsx("span",{className:"text-sm text-green-600",children:s}),m&&x.jsx("span",{className:"text-sm text-blue-600",children:m}),b&&x.jsx("span",{className:"text-sm text-red-600",children:b}),$&&x.jsx("span",{className:"text-sm text-red-600",children:$}),_&&x.jsxs("span",{className:"text-sm text-purple-700 flex items-center gap-2",children:["方案分享連結：",x.jsx("button",{className:"underline hover:text-purple-900",onClick:()=>{navigator.clipboard.writeText(_)},children:_}),x.jsx("span",{className:"ml-1 text-xs text-gray-400",children:"(點擊可複製)"})]}),Z&&x.jsxs("span",{className:"text-sm text-orange-700 flex items-center gap-2",children:["測驗分享連結：",x.jsx("button",{className:"underline hover:text-orange-900",onClick:()=>{navigator.clipboard.writeText(Z)},children:Z}),x.jsx("span",{className:"ml-1 text-xs text-gray-400",children:"(點擊可複製)"})]})]}),x.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-lg shadow-sm",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(xc,{className:"w-5 h-5 text-indigo-600 flex-shrink-0"}),x.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"學習主題"})]}),x.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-0 truncate",children:e})]}),(o||a)&&x.jsxs("div",{className:"flex gap-3 ml-6 flex-shrink-0",children:[o&&x.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-indigo-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(Cs,{className:"w-4 h-4 text-indigo-500"}),x.jsx("span",{className:"text-xs font-medium text-indigo-600",children:"學習程度"})]}),x.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o.name}),x.jsx("div",{className:"text-xs text-gray-500 truncate max-w-32",title:o.description,children:o.description.length>20?o.description.substring(0,20)+"...":o.description})]}),a&&x.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-blue-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(Ts,{className:"w-4 h-4 text-blue-500"}),x.jsx("span",{className:"text-xs font-medium text-blue-600",children:"詞彙程度"})]}),x.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a.name}),x.jsxs("div",{className:"text-xs text-gray-500",children:[a.wordCount," 詞彙"]})]})]})]})}),x.jsxs(xw,{tabs:mg,current:y,onChange:h,children:[x.jsx(Ft,{title:"教學目標設定",icon:x.jsx(Cs,{className:"w-7 h-7"}),children:n.learningObjectives&&n.learningObjectives.length>0?n.learningObjectives.map((B,le)=>x.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 last:border-b-0 last:pb-0",children:[x.jsx("h4",{className:"font-semibold text-lg text-green-800 mb-1",children:B.objective}),x.jsx("p",{className:"text-slate-700 mb-2",children:B.description}),B.teachingExample&&x.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-3 rounded-md mt-2",children:[x.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:"教學示例"}),x.jsx("span",{className:"text-green-900 text-sm",children:B.teachingExample})]})]},le)):x.jsx("p",{children:"沒有提供教學目標。"})}),x.jsx(Ft,{title:"分解學習內容",icon:x.jsx(Ts,{className:"w-7 h-7"}),children:n.contentBreakdown&&n.contentBreakdown.length>0?n.contentBreakdown.map((B,le)=>x.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[x.jsx("h4",{className:"font-semibold text-lg text-sky-800 mb-1",children:B.topic}),x.jsx("p",{className:"text-slate-700 mb-3",children:B.details}),B.coreConcept&&x.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:"核心概念"}),x.jsx("span",{className:"text-blue-900 text-sm",children:B.coreConcept})]}),B.teachingSentences&&B.teachingSentences.length>0&&x.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:"教學例句"}),x.jsx("div",{className:"space-y-1",children:B.teachingSentences.map((_e,Oe)=>x.jsxs("div",{className:"text-indigo-900 text-sm",children:[x.jsxs("span",{className:"font-mono text-indigo-600",children:[Oe+1,"."]})," ",_e]},Oe))})]}),B.teachingTips&&x.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:"教學要點提示"}),x.jsx("span",{className:"text-purple-900 text-sm",children:B.teachingTips})]}),B.teachingExample&&x.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-400 p-3 rounded-md",children:[x.jsx("span",{className:"block text-xs font-semibold text-sky-700 mb-1",children:"教學示例"}),x.jsx("span",{className:"text-sky-900 text-sm",children:B.teachingExample})]})]},le)):x.jsx("p",{children:"沒有提供內容分解。"})}),x.jsx(Ft,{title:"易混淆點識別",icon:x.jsx(xc,{className:"w-7 h-7"}),children:n.confusingPoints&&n.confusingPoints.length>0?n.confusingPoints.map((B,le)=>x.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[x.jsx("h4",{className:"font-semibold text-lg text-red-700 mb-2",children:B.point}),x.jsx("p",{className:"text-slate-700 mb-3",children:B.clarification}),B.errorType&&x.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-orange-700 mb-1",children:"誤區類型"}),x.jsx("span",{className:"text-orange-900 text-sm",children:B.errorType})]}),B.commonErrors&&B.commonErrors.length>0&&x.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-2",children:"常見錯誤示例"}),x.jsx("div",{className:"space-y-1",children:B.commonErrors.map((_e,Oe)=>x.jsxs("div",{className:"text-red-900 text-sm",children:[x.jsxs("span",{className:"font-mono text-red-600",children:[Oe+1,"."]})," ",_e]},Oe))})]}),B.correctVsWrong&&B.correctVsWrong.length>0&&x.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-yellow-700 mb-2",children:"正確與錯誤對比"}),x.jsx("div",{className:"space-y-3",children:B.correctVsWrong.map((_e,Oe)=>x.jsxs("div",{className:"border border-yellow-200 rounded-md p-2 bg-white",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-2",children:[x.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:[x.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:"✓ 正確"}),x.jsx("span",{className:"text-green-900 text-sm",children:_e.correct})]}),x.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[x.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-1",children:"✗ 錯誤"}),x.jsx("span",{className:"text-red-900 text-sm",children:_e.wrong})]})]}),x.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[x.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:"說明"}),x.jsx("span",{className:"text-blue-900 text-sm",children:_e.explanation})]})]},Oe))})]}),B.preventionStrategy&&x.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:"預防策略"}),x.jsx("span",{className:"text-blue-900 text-sm",children:B.preventionStrategy})]}),B.correctionMethod&&x.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:"糾正方法"}),x.jsx("span",{className:"text-purple-900 text-sm",children:B.correctionMethod})]}),B.practiceActivities&&B.practiceActivities.length>0&&x.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[x.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:"練習建議"}),x.jsx("div",{className:"space-y-1",children:B.practiceActivities.map((_e,Oe)=>x.jsxs("div",{className:"text-indigo-900 text-sm",children:[x.jsxs("span",{className:"font-mono text-indigo-600",children:[Oe+1,"."]})," ",_e]},Oe))})]}),B.teachingExample&&x.jsxs("div",{className:"bg-gray-50 border-l-4 border-gray-400 p-3 rounded-md",children:[x.jsx("span",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"教學示例"}),x.jsx("span",{className:"text-gray-900 text-sm",children:B.teachingExample})]})]},le)):x.jsx("p",{children:"沒有提供易混淆點。"})}),x.jsx(Ft,{title:"課堂活動與遊戲設計",icon:x.jsx(uw,{className:"w-7 h-7"}),children:n.classroomActivities&&n.classroomActivities.length>0?x.jsx("div",{className:"space-y-4",children:n.classroomActivities.map((B,le)=>x.jsxs("div",{className:"p-4 border border-slate-200 rounded-md bg-slate-50",children:[x.jsx("h4",{className:"font-bold text-lg text-sky-700 mb-2",children:B.title}),x.jsx("p",{className:"mb-3 text-slate-700",children:B.description}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[B.objective&&x.jsxs("div",{className:"text-sm text-sky-900",children:[x.jsx("span",{className:"font-semibold",children:"學習目標："}),x.jsx("p",{className:"mt-1",children:B.objective})]}),B.timing&&x.jsxs("div",{className:"text-sm text-sky-900",children:[x.jsx("span",{className:"font-semibold",children:"使用時機："}),x.jsx("p",{className:"mt-1",children:B.timing})]}),B.materials&&x.jsxs("div",{className:"text-sm text-sky-900",children:[x.jsx("span",{className:"font-semibold",children:"所需教具："}),x.jsx("p",{className:"mt-1",children:B.materials})]}),B.environment&&x.jsxs("div",{className:"text-sm text-sky-900",children:[x.jsx("span",{className:"font-semibold",children:"環境要求："}),x.jsx("p",{className:"mt-1",children:B.environment})]})]}),B.steps&&B.steps.length>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("span",{className:"font-semibold text-sm text-sky-900",children:"活動步驟："}),x.jsx("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:B.steps.map((_e,Oe)=>x.jsx("li",{className:"text-sm text-slate-700",children:_e},Oe))})]}),B.assessmentPoints&&B.assessmentPoints.length>0&&x.jsxs("div",{children:[x.jsx("span",{className:"font-semibold text-sm text-sky-900",children:"評估重點："}),x.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:B.assessmentPoints.map((_e,Oe)=>x.jsx("li",{className:"text-sm text-slate-700",children:_e},Oe))})]})]},le))}):x.jsx("p",{children:"沒有提供課堂活動。"})}),n.englishConversation&&n.englishConversation.length>0?x.jsx(gw,{dialogue:n.englishConversation}):x.jsx(Ft,{title:"對話練習",icon:x.jsx(Tc,{className:"w-7 h-7"}),children:x.jsx("p",{children:"沒有提供對話練習。"})}),x.jsx(hw,{quizzes:n.onlineInteractiveQuiz})]})]})},_w=({learningLevels:n,onLevelSelect:e,onGenerateWithLevel:o,selectedLevelId:a,isLoading:s=!1})=>{var h;const[f,m]=k.useState(a||n.defaultLevelId),p=v=>{m(v.id),e==null||e(v)},y=[...n.suggestedLevels].sort((v,C)=>v.order-C.order);return x.jsx(Ft,{title:"學習程度建議",icon:x.jsx(Cs,{className:"w-7 h-7"}),children:x.jsxs("div",{className:"space-y-3",children:[x.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"根據學習主題自動生成的程度建議，選擇最適合的學習等級："}),x.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:y.map(v=>x.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${f===v.id?"border-sky-500 bg-sky-50 shadow-md":"border-slate-300 bg-white hover:border-sky-300 hover:shadow-sm"}
              `,onClick:()=>p(v),children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:`
                  flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                  ${f===v.id?"bg-sky-500 text-white":"bg-slate-200 text-slate-700"}
                `,children:v.order}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h4",{className:`
                    text-lg font-semibold mb-2
                    ${f===v.id?"text-sky-700":"text-slate-700"}
                  `,children:v.name}),x.jsx("p",{className:`
                    text-sm leading-relaxed
                    ${f===v.id?"text-sky-600":"text-slate-600"}
                  `,children:v.description})]})]}),f===v.id&&x.jsx("div",{className:"absolute top-2 right-2",children:x.jsx("div",{className:"w-3 h-3 bg-sky-500 rounded-full flex items-center justify-center",children:x.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},v.id))}),x.jsxs("div",{className:"mt-4 space-y-3",children:[x.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:x.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.jsxs("span",{children:["已選擇：",x.jsx("strong",{children:(h=y.find(v=>v.id===f))==null?void 0:h.name})]})]})}),o&&x.jsx("div",{className:"flex justify-center",children:x.jsx("button",{onClick:()=>{const v=y.find(C=>C.id===f);v&&o(v)},disabled:s,className:"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:s?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"產生內容中..."]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"開始產生學習內容"]})})})]})]})})},ju=[{id:"beginner",name:"初級 (100-500詞)",wordCount:500,description:"適合英語初學者，使用最基本的日常詞彙"},{id:"elementary",name:"基礎 (500-1000詞)",wordCount:1e3,description:"掌握基本會話詞彙，能進行簡單交流"},{id:"pre-intermediate",name:"初中級 (1000-2000詞)",wordCount:2e3,description:"能理解日常生活和工作中的常見詞彙"},{id:"intermediate",name:"中級 (2000-3500詞)",wordCount:3500,description:"能處理較複雜的文本和學術內容"},{id:"upper-intermediate",name:"中高級 (3500-5000詞)",wordCount:5e3,description:"能理解專業文章和較複雜的語言結構"},{id:"advanced",name:"高級 (5000-7000詞)",wordCount:7e3,description:"具備高水平的英語理解和表達能力"}],Ew=({onVocabularyLevelSelect:n,selectedLevel:e,isVisible:o=!0})=>{var m,p;const[a,s]=k.useState((e==null?void 0:e.id)||"intermediate"),f=y=>{s(y.id),n(y)};return o?x.jsx(Ft,{title:"選擇英語單字程度",icon:x.jsx(Ts,{className:"w-7 h-7"}),children:x.jsxs("div",{className:"space-y-4",children:[x.jsx("p",{className:"text-sm text-slate-600",children:"請選擇您的英語單字量範圍，系統會根據此程度調整教學內容的複雜度："}),x.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:ju.map(y=>x.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${a===y.id?"border-green-500 bg-green-50 shadow-md":"border-slate-300 bg-white hover:border-green-300 hover:shadow-sm"}
              `,onClick:()=>f(y),children:[x.jsxs("div",{className:"flex flex-col space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:`
                    flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                    ${a===y.id?"bg-green-500 text-white":"bg-slate-200 text-slate-700"}
                  `,children:y.wordCount>=1e3?`${y.wordCount/1e3}k`:y.wordCount}),x.jsx("h4",{className:`
                    text-sm font-semibold
                    ${a===y.id?"text-green-700":"text-slate-700"}
                  `,children:y.name})]}),x.jsx("p",{className:`
                  text-xs leading-relaxed
                  ${a===y.id?"text-green-600":"text-slate-600"}
                `,children:y.description})]}),a===y.id&&x.jsx("div",{className:"absolute top-2 right-2",children:x.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:x.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},y.id))}),x.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:x.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[x.jsx(Ts,{className:"w-4 h-4"}),x.jsxs("span",{children:["已選擇：",x.jsx("strong",{children:(m=ju.find(y=>y.id===a))==null?void 0:m.name}),"（",(p=ju.find(y=>y.id===a))==null?void 0:p.wordCount," 詞彙）"]})]})})]})}):null},Aw=({isOpen:n,onSave:e})=>{const[o,a]=k.useState("");return n?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[x.jsx("h2",{className:"text-xl font-bold mb-4 text-sky-700",children:"請輸入 Gemini API 金鑰"}),x.jsx("input",{type:"password",className:"w-full border border-slate-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-sky-400",placeholder:"請貼上您的 Gemini API Key...",value:o,onChange:s=>a(s.target.value)}),x.jsx("button",{className:"w-full bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 rounded transition",onClick:()=>{o.trim()&&(e(o.trim()),a(""))},children:"儲存金鑰"}),x.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"您的金鑰只會儲存在本機瀏覽器，不會上傳到伺服器。"})]})}):null};var Aa={},pg;function ww(){if(pg)return Aa;pg=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.parse=m,Aa.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,f=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function m(b,E){const _=new f,N=b.length;if(N<2)return _;const q=(E==null?void 0:E.decode)||v;let O=0;do{const $=b.indexOf("=",O);if($===-1)break;const F=b.indexOf(";",O),Z=F===-1?N:F;if($>Z){O=b.lastIndexOf(";",$-1)+1;continue}const Y=p(b,O,$),ee=y(b,$,Y),j=b.slice(Y,ee);if(_[j]===void 0){let ce=p(b,$+1,Z),Q=y(b,Z,ce);const B=q(b.slice(ce,Q));_[j]=B}O=Z+1}while(O<N);return _}function p(b,E,_){do{const N=b.charCodeAt(E);if(N!==32&&N!==9)return E}while(++E<_);return _}function y(b,E,_){for(;E>_;){const N=b.charCodeAt(--E);if(N!==32&&N!==9)return E+1}return _}function h(b,E,_){const N=(_==null?void 0:_.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const q=N(E);if(!e.test(q))throw new TypeError(`argument val is invalid: ${E}`);let O=b+"="+q;if(!_)return O;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);O+="; Max-Age="+_.maxAge}if(_.domain){if(!o.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);O+="; Domain="+_.domain}if(_.path){if(!a.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);O+="; Path="+_.path}if(_.expires){if(!C(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);O+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(O+="; HttpOnly"),_.secure&&(O+="; Secure"),_.partitioned&&(O+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return O}function v(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function C(b){return s.call(b)==="[object Date]"}return Aa}ww();var hg="popstate";function Mw(n={}){function e(a,s){let{pathname:f,search:m,hash:p}=a.location;return Cc("",{pathname:f,search:m,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function o(a,s){return typeof s=="string"?s:Ia(s)}return Rw(e,o,null,n)}function Fe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nw(){return Math.random().toString(36).substring(2,10)}function gg(n,e){return{usr:n.state,key:n.key,idx:e}}function Cc(n,e,o=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:o,key:e&&e.key||a||Nw()}}function Ia({pathname:n="/",search:e="",hash:o=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function _o(n){let e={};if(n){let o=n.indexOf("#");o>=0&&(e.hash=n.substring(o),n=n.substring(0,o));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function Rw(n,e,o,a={}){let{window:s=document.defaultView,v5Compat:f=!1}=a,m=s.history,p="POP",y=null,h=v();h==null&&(h=0,m.replaceState({...m.state,idx:h},""));function v(){return(m.state||{idx:null}).idx}function C(){p="POP";let q=v(),O=q==null?null:q-h;h=q,y&&y({action:p,location:N.location,delta:O})}function b(q,O){p="PUSH";let $=Cc(N.location,q,O);h=v()+1;let F=gg($,h),Z=N.createHref($);try{m.pushState(F,"",Z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(Z)}f&&y&&y({action:p,location:N.location,delta:1})}function E(q,O){p="REPLACE";let $=Cc(N.location,q,O);h=v();let F=gg($,h),Z=N.createHref($);m.replaceState(F,"",Z),f&&y&&y({action:p,location:N.location,delta:0})}function _(q){return Dw(q)}let N={get action(){return p},get location(){return n(s,m)},listen(q){if(y)throw new Error("A history only accepts one active listener");return s.addEventListener(hg,C),y=q,()=>{s.removeEventListener(hg,C),y=null}},createHref(q){return e(s,q)},createURL:_,encodeLocation(q){let O=_(q);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:b,replace:E,go(q){return m.go(q)}};return N}function Dw(n,e=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(o,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Ia(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=o+a),new URL(a,o)}function iy(n,e,o="/"){return kw(n,e,o,!1)}function kw(n,e,o,a){let s=typeof e=="string"?_o(e):e,f=_n(s.pathname||"/",o);if(f==null)return null;let m=oy(n);Iw(m);let p=null;for(let y=0;p==null&&y<m.length;++y){let h=Hw(f);p=$w(m[y],h,a)}return p}function oy(n,e=[],o=[],a=""){let s=(f,m,p)=>{let y={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};y.relativePath.startsWith("/")&&(Fe(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length));let h=Sn([a,y.relativePath]),v=o.concat(y);f.children&&f.children.length>0&&(Fe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),oy(f.children,e,v,h)),!(f.path==null&&!f.index)&&e.push({path:h,score:Bw(h,f.index),routesMeta:v})};return n.forEach((f,m)=>{var p;if(f.path===""||!((p=f.path)!=null&&p.includes("?")))s(f,m);else for(let y of ay(f.path))s(f,m,y)}),e}function ay(n){let e=n.split("/");if(e.length===0)return[];let[o,...a]=e,s=o.endsWith("?"),f=o.replace(/\?$/,"");if(a.length===0)return s?[f,""]:[f];let m=ay(a.join("/")),p=[];return p.push(...m.map(y=>y===""?f:[f,y].join("/"))),s&&p.push(...m),p.map(y=>n.startsWith("/")&&y===""?"/":y)}function Iw(n){n.sort((e,o)=>e.score!==o.score?o.score-e.score:Pw(e.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}var Uw=/^:[\w-]+$/,Lw=3,Ow=2,Vw=1,qw=10,zw=-2,yg=n=>n==="*";function Bw(n,e){let o=n.split("/"),a=o.length;return o.some(yg)&&(a+=zw),e&&(a+=Ow),o.filter(s=>!yg(s)).reduce((s,f)=>s+(Uw.test(f)?Lw:f===""?Vw:qw),a)}function Pw(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function $w(n,e,o=!1){let{routesMeta:a}=n,s={},f="/",m=[];for(let p=0;p<a.length;++p){let y=a[p],h=p===a.length-1,v=f==="/"?e:e.slice(f.length)||"/",C=Ss({path:y.relativePath,caseSensitive:y.caseSensitive,end:h},v),b=y.route;if(!C&&h&&o&&!a[a.length-1].route.index&&(C=Ss({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},v)),!C)return null;Object.assign(s,C.params),m.push({params:s,pathname:Sn([f,C.pathname]),pathnameBase:Zw(Sn([f,C.pathnameBase])),route:b}),C.pathnameBase!=="/"&&(f=Sn([f,C.pathnameBase]))}return m}function Ss(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[o,a]=Gw(n.path,n.caseSensitive,n.end),s=e.match(o);if(!s)return null;let f=s[0],m=f.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:a.reduce((h,{paramName:v,isOptional:C},b)=>{if(v==="*"){let _=p[b]||"";m=f.slice(0,f.length-_.length).replace(/(.)\/+$/,"$1")}const E=p[b];return C&&!E?h[v]=void 0:h[v]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:f,pathnameBase:m,pattern:n}}function Gw(n,e=!1,o=!0){Jt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,p,y)=>(a.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function Hw(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _n(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let o=e.endsWith("/")?e.length-1:e.length,a=n.charAt(o);return a&&a!=="/"?null:n.slice(o)||"/"}function Fw(n,e="/"){let{pathname:o,search:a="",hash:s=""}=typeof n=="string"?_o(n):n;return{pathname:o?o.startsWith("/")?o:Yw(o,e):e,search:Qw(a),hash:Xw(s)}}function Yw(n,e){let o=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?o.length>1&&o.pop():s!=="."&&o.push(s)}),o.length>1?o.join("/"):"/"}function ec(n,e,o,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Jw(n){return n.filter((e,o)=>o===0||e.route.path&&e.route.path.length>0)}function ly(n){let e=Jw(n);return e.map((o,a)=>a===e.length-1?o.pathname:o.pathnameBase)}function sy(n,e,o,a=!1){let s;typeof n=="string"?s=_o(n):(s={...n},Fe(!s.pathname||!s.pathname.includes("?"),ec("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),ec("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),ec("#","search","hash",s)));let f=n===""||s.pathname==="",m=f?"/":s.pathname,p;if(m==null)p=o;else{let C=e.length-1;if(!a&&m.startsWith("..")){let b=m.split("/");for(;b[0]==="..";)b.shift(),C-=1;s.pathname=b.join("/")}p=C>=0?e[C]:"/"}let y=Fw(s,p),h=m&&m!=="/"&&m.endsWith("/"),v=(f||m===".")&&o.endsWith("/");return!y.pathname.endsWith("/")&&(h||v)&&(y.pathname+="/"),y}var Sn=n=>n.join("/").replace(/\/\/+/g,"/"),Zw=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Qw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Xw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Kw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ry=["POST","PUT","PATCH","DELETE"];new Set(ry);var Ww=["GET",...ry];new Set(Ww);var Eo=k.createContext(null);Eo.displayName="DataRouter";var Ms=k.createContext(null);Ms.displayName="DataRouterState";var uy=k.createContext({isTransitioning:!1});uy.displayName="ViewTransition";var jw=k.createContext(new Map);jw.displayName="Fetchers";var eM=k.createContext(null);eM.displayName="Await";var an=k.createContext(null);an.displayName="Navigation";var qa=k.createContext(null);qa.displayName="Location";var An=k.createContext({outlet:null,matches:[],isDataRoute:!1});An.displayName="Route";var Dc=k.createContext(null);Dc.displayName="RouteError";function tM(n,{relative:e}={}){Fe(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:a}=k.useContext(an),{hash:s,pathname:f,search:m}=Ba(n,{relative:e}),p=f;return o!=="/"&&(p=f==="/"?o:Sn([o,f])),a.createHref({pathname:p,search:m,hash:s})}function za(){return k.useContext(qa)!=null}function ni(){return Fe(za(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(qa).location}var cy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fy(n){k.useContext(an).static||k.useLayoutEffect(n)}function dy(){let{isDataRoute:n}=k.useContext(An);return n?pM():nM()}function nM(){Fe(za(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Eo),{basename:e,navigator:o}=k.useContext(an),{matches:a}=k.useContext(An),{pathname:s}=ni(),f=JSON.stringify(ly(a)),m=k.useRef(!1);return fy(()=>{m.current=!0}),k.useCallback((y,h={})=>{if(Jt(m.current,cy),!m.current)return;if(typeof y=="number"){o.go(y);return}let v=sy(y,JSON.parse(f),s,h.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Sn([e,v.pathname])),(h.replace?o.replace:o.push)(v,h.state,h)},[e,o,f,s,n])}k.createContext(null);function Ba(n,{relative:e}={}){let{matches:o}=k.useContext(An),{pathname:a}=ni(),s=JSON.stringify(ly(o));return k.useMemo(()=>sy(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function iM(n,e){return my(n,e)}function my(n,e,o,a){var O;Fe(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(an),{matches:f}=k.useContext(An),m=f[f.length-1],p=m?m.params:{},y=m?m.pathname:"/",h=m?m.pathnameBase:"/",v=m&&m.route;{let $=v&&v.path||"";py(y,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let C=ni(),b;if(e){let $=typeof e=="string"?_o(e):e;Fe(h==="/"||((O=$.pathname)==null?void 0:O.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${$.pathname}" was given in the \`location\` prop.`),b=$}else b=C;let E=b.pathname||"/",_=E;if(h!=="/"){let $=h.replace(/^\//,"").split("/");_="/"+E.replace(/^\//,"").split("/").slice($.length).join("/")}let N=iy(n,{pathname:_});Jt(v||N!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Jt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=rM(N&&N.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:Sn([h,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?h:Sn([h,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),f,o,a);return e&&q?k.createElement(qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},q):q}function oM(){let n=mM(),e=Kw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),o=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},m=null;return console.error("Error handled by React Router default ErrorBoundary:",n),m=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:f},"ErrorBoundary")," or"," ",k.createElement("code",{style:f},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),o?k.createElement("pre",{style:s},o):null,m)}var aM=k.createElement(oM,null),lM=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?k.createElement(An.Provider,{value:this.props.routeContext},k.createElement(Dc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sM({routeContext:n,match:e,children:o}){let a=k.useContext(Eo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(An.Provider,{value:n},o)}function rM(n,e=[],o=null,a=null){if(n==null){if(!o)return null;if(o.errors)n=o.matches;else if(e.length===0&&!o.initialized&&o.matches.length>0)n=o.matches;else return null}let s=n,f=o==null?void 0:o.errors;if(f!=null){let y=s.findIndex(h=>h.route.id&&(f==null?void 0:f[h.route.id])!==void 0);Fe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),s=s.slice(0,Math.min(s.length,y+1))}let m=!1,p=-1;if(o)for(let y=0;y<s.length;y++){let h=s[y];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(p=y),h.route.id){let{loaderData:v,errors:C}=o,b=h.route.loader&&!v.hasOwnProperty(h.route.id)&&(!C||C[h.route.id]===void 0);if(h.route.lazy||b){m=!0,p>=0?s=s.slice(0,p+1):s=[s[0]];break}}}return s.reduceRight((y,h,v)=>{let C,b=!1,E=null,_=null;o&&(C=f&&h.route.id?f[h.route.id]:void 0,E=h.route.errorElement||aM,m&&(p<0&&v===0?(py("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):p===v&&(b=!0,_=h.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,v+1)),q=()=>{let O;return C?O=E:b?O=_:h.route.Component?O=k.createElement(h.route.Component,null):h.route.element?O=h.route.element:O=y,k.createElement(sM,{match:h,routeContext:{outlet:y,matches:N,isDataRoute:o!=null},children:O})};return o&&(h.route.ErrorBoundary||h.route.errorElement||v===0)?k.createElement(lM,{location:o.location,revalidation:o.revalidation,component:E,error:C,children:q(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):q()},null)}function kc(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uM(n){let e=k.useContext(Eo);return Fe(e,kc(n)),e}function cM(n){let e=k.useContext(Ms);return Fe(e,kc(n)),e}function fM(n){let e=k.useContext(An);return Fe(e,kc(n)),e}function Ic(n){let e=fM(n),o=e.matches[e.matches.length-1];return Fe(o.route.id,`${n} can only be used on routes that contain a unique "id"`),o.route.id}function dM(){return Ic("useRouteId")}function mM(){var a;let n=k.useContext(Dc),e=cM("useRouteError"),o=Ic("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[o]}function pM(){let{router:n}=uM("useNavigate"),e=Ic("useNavigate"),o=k.useRef(!1);return fy(()=>{o.current=!0}),k.useCallback(async(s,f={})=>{Jt(o.current,cy),o.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...f}))},[n,e])}var vg={};function py(n,e,o){!e&&!vg[n]&&(vg[n]=!0,Jt(!1,o))}k.memo(hM);function hM({routes:n,future:e,state:o}){return my(n,void 0,o,e)}function rs(n){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gM({basename:n="/",children:e=null,location:o,navigationType:a="POP",navigator:s,static:f=!1}){Fe(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=n.replace(/^\/*/,"/"),p=k.useMemo(()=>({basename:m,navigator:s,static:f,future:{}}),[m,s,f]);typeof o=="string"&&(o=_o(o));let{pathname:y="/",search:h="",hash:v="",state:C=null,key:b="default"}=o,E=k.useMemo(()=>{let _=_n(y,m);return _==null?null:{location:{pathname:_,search:h,hash:v,state:C,key:b},navigationType:a}},[m,y,h,v,C,b,a]);return Jt(E!=null,`<Router basename="${m}"> is not able to match the URL "${y}${h}${v}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:k.createElement(an.Provider,{value:p},k.createElement(qa.Provider,{children:e,value:E}))}function yM({children:n,location:e}){return iM(Sc(n),e)}function Sc(n,e=[]){let o=[];return k.Children.forEach(n,(a,s)=>{if(!k.isValidElement(a))return;let f=[...e,s];if(a.type===k.Fragment){o.push.apply(o,Sc(a.props.children,f));return}Fe(a.type===rs,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!a.props.index||!a.props.children,"An index route cannot have child routes.");let m={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(m.children=Sc(a.props.children,f)),o.push(m)}),o}var us="get",cs="application/x-www-form-urlencoded";function Ns(n){return n!=null&&typeof n.tagName=="string"}function vM(n){return Ns(n)&&n.tagName.toLowerCase()==="button"}function xM(n){return Ns(n)&&n.tagName.toLowerCase()==="form"}function TM(n){return Ns(n)&&n.tagName.toLowerCase()==="input"}function CM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SM(n,e){return n.button===0&&(!e||e==="_self")&&!CM(n)}function bc(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,o)=>{let a=n[o];return e.concat(Array.isArray(a)?a.map(s=>[o,s]):[[o,a]])},[]))}function bM(n,e){let o=bc(n);return e&&e.forEach((a,s)=>{o.has(s)||e.getAll(s).forEach(f=>{o.append(s,f)})}),o}var os=null;function _M(){if(os===null)try{new FormData(document.createElement("form"),0),os=!1}catch{os=!0}return os}var EM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tc(n){return n!=null&&!EM.has(n)?(Jt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cs}"`),null):n}function AM(n,e){let o,a,s,f,m;if(xM(n)){let p=n.getAttribute("action");a=p?_n(p,e):null,o=n.getAttribute("method")||us,s=tc(n.getAttribute("enctype"))||cs,f=new FormData(n)}else if(vM(n)||TM(n)&&(n.type==="submit"||n.type==="image")){let p=n.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||p.getAttribute("action");if(a=y?_n(y,e):null,o=n.getAttribute("formmethod")||p.getAttribute("method")||us,s=tc(n.getAttribute("formenctype"))||tc(p.getAttribute("enctype"))||cs,f=new FormData(p,n),!_M()){let{name:h,type:v,value:C}=n;if(v==="image"){let b=h?`${h}.`:"";f.append(`${b}x`,"0"),f.append(`${b}y`,"0")}else h&&f.append(h,C)}}else{if(Ns(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=us,a=null,s=cs,m=n}return f&&s==="text/plain"&&(m=f,f=void 0),{action:a,method:o.toLowerCase(),encType:s,formData:f,body:m}}function Uc(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function wM(n,e){if(n.id in e)return e[n.id];try{let o=await import(n.module);return e[n.id]=o,o}catch(o){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function NM(n,e,o){let a=await Promise.all(n.map(async s=>{let f=e.routes[s.route.id];if(f){let m=await wM(f,o);return m.links?m.links():[]}return[]}));return IM(a.flat(1).filter(MM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xg(n,e,o,a,s,f){let m=(y,h)=>o[h]?y.route.id!==o[h].route.id:!0,p=(y,h)=>{var v;return o[h].pathname!==y.pathname||((v=o[h].route.path)==null?void 0:v.endsWith("*"))&&o[h].params["*"]!==y.params["*"]};return f==="assets"?e.filter((y,h)=>m(y,h)||p(y,h)):f==="data"?e.filter((y,h)=>{var C;let v=a.routes[y.route.id];if(!v||!v.hasLoader)return!1;if(m(y,h)||p(y,h))return!0;if(y.route.shouldRevalidate){let b=y.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((C=o[0])==null?void 0:C.params)||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function RM(n,e,{includeHydrateFallback:o}={}){return DM(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let f=[s.module];return s.clientActionModule&&(f=f.concat(s.clientActionModule)),s.clientLoaderModule&&(f=f.concat(s.clientLoaderModule)),o&&s.hydrateFallbackModule&&(f=f.concat(s.hydrateFallbackModule)),s.imports&&(f=f.concat(s.imports)),f}).flat(1))}function DM(n){return[...new Set(n)]}function kM(n){let e={},o=Object.keys(n).sort();for(let a of o)e[a]=n[a];return e}function IM(n,e){let o=new Set;return new Set(e),n.reduce((a,s)=>{let f=JSON.stringify(kM(s));return o.has(f)||(o.add(f),a.push({key:f,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UM=new Set([100,101,204,205]);function LM(n,e){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname="_root.data":e&&_n(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.data`:o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function hy(){let n=k.useContext(Eo);return Uc(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OM(){let n=k.useContext(Ms);return Uc(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Lc=k.createContext(void 0);Lc.displayName="FrameworkContext";function gy(){let n=k.useContext(Lc);return Uc(n,"You must render this element inside a <HydratedRouter> element"),n}function VM(n,e){let o=k.useContext(Lc),[a,s]=k.useState(!1),[f,m]=k.useState(!1),{onFocus:p,onBlur:y,onMouseEnter:h,onMouseLeave:v,onTouchStart:C}=e,b=k.useRef(null);k.useEffect(()=>{if(n==="render"&&m(!0),n==="viewport"){let N=O=>{O.forEach($=>{m($.isIntersecting)})},q=new IntersectionObserver(N,{threshold:.5});return b.current&&q.observe(b.current),()=>{q.disconnect()}}},[n]),k.useEffect(()=>{if(a){let N=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(N)}}},[a]);let E=()=>{s(!0)},_=()=>{s(!1),m(!1)};return o?n!=="intent"?[f,b,{}]:[f,b,{onFocus:wa(p,E),onBlur:wa(y,_),onMouseEnter:wa(h,E),onMouseLeave:wa(v,_),onTouchStart:wa(C,E)}]:[!1,b,{}]}function wa(n,e){return o=>{n&&n(o),o.defaultPrevented||e(o)}}function qM({page:n,...e}){let{router:o}=hy(),a=k.useMemo(()=>iy(o.routes,n,o.basename),[o.routes,n,o.basename]);return a?k.createElement(BM,{page:n,matches:a,...e}):null}function zM(n){let{manifest:e,routeModules:o}=gy(),[a,s]=k.useState([]);return k.useEffect(()=>{let f=!1;return NM(n,e,o).then(m=>{f||s(m)}),()=>{f=!0}},[n,e,o]),a}function BM({page:n,matches:e,...o}){let a=ni(),{manifest:s,routeModules:f}=gy(),{basename:m}=hy(),{loaderData:p,matches:y}=OM(),h=k.useMemo(()=>xg(n,e,y,s,a,"data"),[n,e,y,s,a]),v=k.useMemo(()=>xg(n,e,y,s,a,"assets"),[n,e,y,s,a]),C=k.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let _=new Set,N=!1;if(e.forEach(O=>{var F;let $=s.routes[O.route.id];!$||!$.hasLoader||(!h.some(Z=>Z.route.id===O.route.id)&&O.route.id in p&&((F=f[O.route.id])!=null&&F.shouldRevalidate)||$.hasClientLoader?N=!0:_.add(O.route.id))}),_.size===0)return[];let q=LM(n,m);return N&&_.size>0&&q.searchParams.set("_routes",e.filter(O=>_.has(O.route.id)).map(O=>O.route.id).join(",")),[q.pathname+q.search]},[m,p,a,s,h,e,n,f]),b=k.useMemo(()=>RM(v,s),[v,s]),E=zM(v);return k.createElement(k.Fragment,null,C.map(_=>k.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...o})),b.map(_=>k.createElement("link",{key:_,rel:"modulepreload",href:_,...o})),E.map(({key:_,link:N})=>k.createElement("link",{key:_,...N})))}function PM(...n){return e=>{n.forEach(o=>{typeof o=="function"?o(e):o!=null&&(o.current=e)})}}var yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yy&&(window.__reactRouterVersion="7.6.2")}catch{}function $M({basename:n,children:e,window:o}){let a=k.useRef();a.current==null&&(a.current=Mw({window:o,v5Compat:!0}));let s=a.current,[f,m]=k.useState({action:s.action,location:s.location}),p=k.useCallback(y=>{k.startTransition(()=>m(y))},[m]);return k.useLayoutEffect(()=>s.listen(p),[s,p]),k.createElement(gM,{basename:n,children:e,location:f.location,navigationType:f.action,navigator:s})}var vy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xy=k.forwardRef(function({onClick:e,discover:o="render",prefetch:a="none",relative:s,reloadDocument:f,replace:m,state:p,target:y,to:h,preventScrollReset:v,viewTransition:C,...b},E){let{basename:_}=k.useContext(an),N=typeof h=="string"&&vy.test(h),q,O=!1;if(typeof h=="string"&&N&&(q=h,yy))try{let Q=new URL(window.location.href),B=h.startsWith("//")?new URL(Q.protocol+h):new URL(h),le=_n(B.pathname,_);B.origin===Q.origin&&le!=null?h=le+B.search+B.hash:O=!0}catch{Jt(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=tM(h,{relative:s}),[F,Z,Y]=VM(a,b),ee=YM(h,{replace:m,state:p,target:y,preventScrollReset:v,relative:s,viewTransition:C});function j(Q){e&&e(Q),Q.defaultPrevented||ee(Q)}let ce=k.createElement("a",{...b,...Y,href:q||$,onClick:O||f?e:j,ref:PM(E,Z),target:y,"data-discover":!N&&o==="render"?"true":void 0});return F&&!N?k.createElement(k.Fragment,null,ce,k.createElement(qM,{page:$})):ce});xy.displayName="Link";var GM=k.forwardRef(function({"aria-current":e="page",caseSensitive:o=!1,className:a="",end:s=!1,style:f,to:m,viewTransition:p,children:y,...h},v){let C=Ba(m,{relative:h.relative}),b=ni(),E=k.useContext(Ms),{navigator:_,basename:N}=k.useContext(an),q=E!=null&&KM(C)&&p===!0,O=_.encodeLocation?_.encodeLocation(C).pathname:C.pathname,$=b.pathname,F=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;o||($=$.toLowerCase(),F=F?F.toLowerCase():null,O=O.toLowerCase()),F&&N&&(F=_n(F,N)||F);const Z=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let Y=$===O||!s&&$.startsWith(O)&&$.charAt(Z)==="/",ee=F!=null&&(F===O||!s&&F.startsWith(O)&&F.charAt(O.length)==="/"),j={isActive:Y,isPending:ee,isTransitioning:q},ce=Y?e:void 0,Q;typeof a=="function"?Q=a(j):Q=[a,Y?"active":null,ee?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let B=typeof f=="function"?f(j):f;return k.createElement(xy,{...h,"aria-current":ce,className:Q,ref:v,style:B,to:m,viewTransition:p},typeof y=="function"?y(j):y)});GM.displayName="NavLink";var HM=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:o,reloadDocument:a,replace:s,state:f,method:m=us,action:p,onSubmit:y,relative:h,preventScrollReset:v,viewTransition:C,...b},E)=>{let _=QM(),N=XM(p,{relative:h}),q=m.toLowerCase()==="get"?"get":"post",O=typeof p=="string"&&vy.test(p),$=F=>{if(y&&y(F),F.defaultPrevented)return;F.preventDefault();let Z=F.nativeEvent.submitter,Y=(Z==null?void 0:Z.getAttribute("formmethod"))||m;_(Z||F.currentTarget,{fetcherKey:e,method:Y,navigate:o,replace:s,state:f,relative:h,preventScrollReset:v,viewTransition:C})};return k.createElement("form",{ref:E,method:q,action:N,onSubmit:a?y:$,...b,"data-discover":!O&&n==="render"?"true":void 0})});HM.displayName="Form";function FM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ty(n){let e=k.useContext(Eo);return Fe(e,FM(n)),e}function YM(n,{target:e,replace:o,state:a,preventScrollReset:s,relative:f,viewTransition:m}={}){let p=dy(),y=ni(),h=Ba(n,{relative:f});return k.useCallback(v=>{if(SM(v,e)){v.preventDefault();let C=o!==void 0?o:Ia(y)===Ia(h);p(n,{replace:C,state:a,preventScrollReset:s,relative:f,viewTransition:m})}},[y,p,h,o,a,e,n,s,f,m])}function Cy(n){Jt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(bc(n)),o=k.useRef(!1),a=ni(),s=k.useMemo(()=>bM(a.search,o.current?null:e.current),[a.search]),f=dy(),m=k.useCallback((p,y)=>{const h=bc(typeof p=="function"?p(s):p);o.current=!0,f("?"+h,y)},[f,s]);return[s,m]}var JM=0,ZM=()=>`__${String(++JM)}__`;function QM(){let{router:n}=Ty("useSubmit"),{basename:e}=k.useContext(an),o=dM();return k.useCallback(async(a,s={})=>{let{action:f,method:m,encType:p,formData:y,body:h}=AM(a,e);if(s.navigate===!1){let v=s.fetcherKey||ZM();await n.fetch(v,o,s.action||f,{preventScrollReset:s.preventScrollReset,formData:y,body:h,formMethod:s.method||m,formEncType:s.encType||p,flushSync:s.flushSync})}else await n.navigate(s.action||f,{preventScrollReset:s.preventScrollReset,formData:y,body:h,formMethod:s.method||m,formEncType:s.encType||p,replace:s.replace,state:s.state,fromRouteId:o,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,o])}function XM(n,{relative:e}={}){let{basename:o}=k.useContext(an),a=k.useContext(An);Fe(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),f={...Ba(n||".",{relative:e})},m=ni();if(n==null){f.search=m.search;let p=new URLSearchParams(f.search),y=p.getAll("index");if(y.some(v=>v==="")){p.delete("index"),y.filter(C=>C).forEach(C=>p.append("index",C));let v=p.toString();f.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(f.pathname=f.pathname==="/"?o:Sn([o,f.pathname])),Ia(f)}function KM(n,e={}){let o=k.useContext(uy);Fe(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Ty("useViewTransitionState"),s=Ba(n,{relative:e.relative});if(!o.isTransitioning)return!1;let f=_n(o.currentLocation.pathname,a)||o.currentLocation.pathname,m=_n(o.nextLocation.pathname,a)||o.nextLocation.pathname;return Ss(s.pathname,m)!=null||Ss(s.pathname,f)!=null}[...UM];const WM=({quiz:n,topic:e})=>{const[o,a]=k.useState(Cn.Easy);if(!n)return x.jsxs("div",{className:"text-center py-12",children:[x.jsx(Da,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600 text-lg",children:"沒有可用的測驗資料"})]});const s=n[o],f=[{key:Cn.Easy,label:"簡單",color:"bg-green-500 hover:bg-green-600"},{key:Cn.Normal,label:"普通",color:"bg-yellow-500 hover:bg-yellow-600"},{key:Cn.Hard,label:"困難",color:"bg-red-500 hover:bg-red-600"}],m={trueFalse:"是非題",multipleChoice:"選擇題",fillInTheBlanks:"填空題",sentenceScramble:"句子重組",memoryCardGame:"翻卡牌記憶遊戲"},p=(y,h)=>{if(!h||h.length===0)return null;switch(y){case"trueFalse":return x.jsx("div",{className:"space-y-4",children:h.map((v,C)=>x.jsx(Qg,{question:v,itemNumber:C+1},`${o}-tf-${C}`))});case"multipleChoice":return x.jsx("div",{className:"space-y-4",children:h.map((v,C)=>x.jsx(Xg,{question:v,itemNumber:C+1},`${o}-mc-${C}`))});case"fillInTheBlanks":return x.jsx("div",{className:"space-y-4",children:h.map((v,C)=>x.jsx(Kg,{question:v,itemNumber:C+1},`${o}-fb-${C}`))});case"sentenceScramble":return x.jsx("div",{className:"space-y-4",children:h.map((v,C)=>x.jsx(Wg,{question:v,itemNumber:C+1},`${o}-ss-${C}`))});case"memoryCardGame":return x.jsx("div",{className:"space-y-4",children:h.map((v,C)=>x.jsx(jg,{question:v,itemNumber:C+1},`${o}-mcg-${C}`))});default:return null}};return x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[x.jsx("div",{className:"bg-white shadow-sm border-b",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx(Da,{className:"w-8 h-8 text-indigo-600"}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"互動測驗"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[x.jsx(Cs,{className:"w-5 h-5"}),x.jsx("span",{className:"text-lg font-medium",children:e})]})]})}),x.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"選擇難度等級"}),x.jsx("div",{className:"flex flex-wrap gap-3",children:f.map(({key:y,label:h,color:v})=>x.jsx("button",{onClick:()=>a(y),className:`px-6 py-3 rounded-lg text-white font-medium transition-all transform hover:scale-105 shadow-md
                  ${o===y?`${v} ring-4 ring-opacity-50`:"bg-gray-400 hover:bg-gray-500"}
                `,children:h},y))})]}),s&&x.jsx("div",{className:"space-y-8",children:Object.keys(m).map(y=>{const h=s[y],v=p(y,h);return v?x.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-3 border-b border-gray-200",children:[x.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),x.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:m[y]})]}),v]},y):null})}),(!s||Object.values(s).every(y=>!y||y.length===0))&&x.jsx("div",{className:"text-center py-12",children:x.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[x.jsx(Da,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600 text-lg",children:"此難度等級暫無測驗題目"}),x.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"請選擇其他難度等級"})]})})]}),x.jsx("footer",{className:"bg-white border-t mt-12 py-6",children:x.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:x.jsx("p",{className:"text-sm text-gray-500",children:"由 AI 學習頁面產生器創建 • 祝你學習愉快！"})})})]})},jM=()=>{const[n]=Cy(),e=n.get("binId"),[o,a]=je.useState(null),[s,f]=je.useState(""),[m,p]=je.useState(!1),[y,h]=je.useState("");return je.useEffect(()=>{if(!e){h("缺少測驗ID參數");return}p(!0),bw(e).then(v=>{a(v.quiz),f(v.topic)}).catch(v=>h(v.message||"載入測驗失敗")).finally(()=>p(!1))},[e]),m?x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx(Rc,{}),x.jsx("p",{className:"mt-4 text-gray-600",children:"載入測驗中..."})]})}):y?x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[x.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),x.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"測驗載入失敗"}),x.jsx("p",{className:"text-gray-600 mb-4",children:y}),x.jsx("p",{className:"text-sm text-gray-500",children:"請確認連結是否正確，或聯繫您的老師"})]})}):!o||!s?x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[x.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🔍"}),x.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"找不到測驗內容"}),x.jsx("p",{className:"text-gray-600",children:"請檢查連結是否正確"})]})}):x.jsx(WM,{quiz:o,topic:s})},nc="gemini_api_key",eN=()=>{const[n]=Cy(),e=n.get("binId"),[o,a]=je.useState(null),[s,f]=je.useState(!1),[m,p]=je.useState("");return je.useEffect(()=>{if(!e){p("缺少 binId");return}f(!0),Cw(e).then(y=>a(y)).catch(y=>p(y.message||"讀取失敗")).finally(()=>f(!1))},[e]),s?x.jsx("div",{className:"flex justify-center my-10",children:x.jsx(Rc,{})}):m?x.jsx("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:m}):o?x.jsx(ny,{content:o,topic:"topic"in o&&typeof o.topic=="string"?o.topic:""}):null},tN=()=>{const[n,e]=k.useState(""),[o,a]=k.useState(null),[s,f]=k.useState(!1),[m,p]=k.useState(null),[y,h]=k.useState(null),[v,C]=k.useState(!1),[b,E]=k.useState(null),[_,N]=k.useState(null),[q,O]=k.useState(null),[$,F]=k.useState(!1),[Z,Y]=k.useState(null),[ee,j]=k.useState(!1),[ce,Q]=k.useState(!1);je.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("apikey");if(V){localStorage.setItem(nc,V),h(V),C(!1);const se=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,se);return}const X=localStorage.getItem(nc);X?h(X):C(!0)},[]);const B=Te=>{localStorage.setItem(nc,Te),h(Te),C(!1)},le=k.useCallback(async()=>{if(!n.trim()){p("請輸入學習主題。");return}if(!y){p("尚未設定 Gemini API 金鑰。"),C(!0);return}f(!0),p(null),N(null),a(null),O(null),Y(null),j(!1);const Te=KA(n);Q(Te);try{const V=await WA(n,y);N(V),F(!0),Te&&j(!0)}catch(V){console.error(V),p(V.message||"產生學習程度建議時發生未知錯誤。")}finally{f(!1)}},[n,y]),_e=k.useCallback(async Te=>{if(!y){p("尚未設定 Gemini API 金鑰。"),C(!0);return}if(ce&&!Z){p("請先選擇英語單字程度。");return}f(!0),p(null),O(Te),a(null);try{let V;ce&&Z?V=await ew(n,Te,Z,y):V=await jA(n,Te,y),a(V),F(!1),j(!1)}catch(V){console.error(V),p(V.message||"產生學習內容時發生未知錯誤。")}finally{f(!1)}},[n,y,ce,Z]),Oe=k.useCallback(async()=>{if(!n.trim()){p("請輸入學習主題。");return}if(!y){p("尚未設定 Gemini API 金鑰。"),C(!0);return}f(!0),p(null),a(null),F(!1),j(!1),Q(!1);try{const Te=await sw(n,y);a(Te)}catch(Te){console.error(Te),p(Te.message||"產生內容時發生未知錯誤。"),a(null)}finally{f(!1)}},[n,y]),et=async()=>{if(!y){E("請先設定 API 金鑰");return}const Te=`${window.location.origin}/ai-page-gen/?apikey=${encodeURIComponent(y)}`;try{await navigator.clipboard.writeText(Te),E("已複製分享連結！")}catch{E("複製失敗，請手動複製")}setTimeout(()=>E(null),2e3)};return x.jsx($M,{basename:"/ai-page-gen/",children:x.jsxs(yM,{children:[x.jsx(rs,{path:"share",element:x.jsx(eN,{})}),x.jsx(rs,{path:"quiz",element:x.jsx(jM,{})}),x.jsx(rs,{path:"/",element:x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:[x.jsx(Aw,{isOpen:v,onSave:B}),x.jsxs("header",{className:"text-center mb-10",children:[x.jsxs("h1",{className:"text-4xl sm:text-5xl font-extrabold text-sky-700 tracking-tight",children:["AI 學習頁面 ",x.jsx("span",{className:"text-indigo-600",children:"產生器"})]}),x.jsx("p",{className:"mt-3 text-lg text-slate-600 max-w-2xl mx-auto",children:"輸入一個主題，讓 AI 為您打造包含互動測驗的結構化學習計劃！"}),x.jsxs("div",{className:"mt-6 max-w-2xl mx-auto bg-yellow-50 border-l-4 border-yellow-400 rounded-lg p-4 text-left shadow-sm",children:[x.jsxs("div",{className:"flex items-start mb-2",children:[x.jsx("svg",{className:"w-6 h-6 text-yellow-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z"})}),x.jsx("span",{className:"font-semibold text-yellow-800 text-base",children:"使用注意事項"})]}),x.jsxs("ul",{className:"list-disc pl-8 text-yellow-900 text-sm space-y-1",children:[x.jsx("li",{children:"內容審查：請在分享AI生成內容給學生前仔細檢查，確保內容適合且無誤"}),x.jsx("li",{children:"隱私保護：請勿輸入學生個人識別資訊"})]})]})]}),x.jsxs("main",{className:"max-w-4xl mx-auto",children:[x.jsx(rw,{topic:n,setTopic:e,onGenerate:Oe,onGenerateWithLevels:le,isLoading:s}),m&&!s&&x.jsxs("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:[x.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[x.jsx(xc,{className:"w-6 h-6 mr-2 text-red-600"}),"產生內容時發生錯誤"]}),x.jsx("p",{children:m}),x.jsx("p",{className:"mt-2 text-sm",children:"請嘗試修改您的主題或重試。如果問題持續存在，AI 模型可能暫時不可用，或者 API 金鑰可能存在問題。"})]}),s&&x.jsx("div",{className:"flex justify-center my-10",children:x.jsx(Rc,{})}),$&&_&&!s&&!m&&x.jsx(_w,{learningLevels:_,onLevelSelect:O,onGenerateWithLevel:_e,selectedLevelId:q==null?void 0:q.id,isLoading:s}),ee&&ce&&!s&&!m&&x.jsx(Ew,{onVocabularyLevelSelect:Y,selectedLevel:Z,isVisible:!0}),o&&!s&&!m&&!$&&!ee&&x.jsx(ny,{content:o,topic:n,selectedLevel:q,selectedVocabularyLevel:Z})]}),x.jsxs("footer",{className:"text-center mt-12 py-6 border-t border-slate-300",children:[x.jsx("p",{className:"text-sm text-slate-500",children:"由 Gemini API 驅動。AI 設計，為學習而生。"}),x.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded shadow transition",onClick:et,disabled:!y,children:"產生分享連結並複製"}),b&&x.jsx("div",{className:"mt-2 text-green-600 text-sm",children:b})]})]})})]})})},Sy=document.getElementById("root");if(!Sy)throw new Error("Could not find root element to mount to");const nN=tx.createRoot(Sy);nN.render(x.jsx(je.StrictMode,{children:x.jsx(tN,{})}));
