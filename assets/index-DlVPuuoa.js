(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function ml(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rd={exports:{}},Ga={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Pw(){if(j0)return Ga;j0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:t,type:i,key:u,ref:l!==void 0?l:null,props:o}}return Ga.Fragment=e,Ga.jsx=n,Ga.jsxs=n,Ga}var k0;function Ow(){return k0||(k0=1,Rd.exports=Pw()),Rd.exports}var s=Ow(),Id={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function Bw(){if(E0)return Ve;E0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function N(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function k(C,V,ee){this.props=C,this.context=V,this.refs=j,this.updater=ee||w}k.prototype.isReactComponent={},k.prototype.setState=function(C,V){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,V,"setState")},k.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function E(){}E.prototype=k.prototype;function L(C,V,ee){this.props=C,this.context=V,this.refs=j,this.updater=ee||w}var D=L.prototype=new E;D.constructor=L,S(D,k.prototype),D.isPureReactComponent=!0;var O=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function R(C,V,ee,M,ge,we){return ee=we.ref,{$$typeof:t,type:C,key:V,ref:ee!==void 0?ee:null,props:we}}function q(C,V){return R(C.type,V,void 0,void 0,void 0,C.props)}function B(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function W(C){var V={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ee){return V[ee]})}var G=/\/+/g;function J(C,V){return typeof C=="object"&&C!==null&&C.key!=null?W(""+C.key):V.toString(36)}function z(){}function $(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(z,z):(C.status="pending",C.then(function(V){C.status==="pending"&&(C.status="fulfilled",C.value=V)},function(V){C.status==="pending"&&(C.status="rejected",C.reason=V)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Y(C,V,ee,M,ge){var we=typeof C;(we==="undefined"||we==="boolean")&&(C=null);var ne=!1;if(C===null)ne=!0;else switch(we){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(C.$$typeof){case t:case e:ne=!0;break;case x:return ne=C._init,Y(ne(C._payload),V,ee,M,ge)}}if(ne)return ge=ge(C),ne=M===""?"."+J(C,0):M,O(ge)?(ee="",ne!=null&&(ee=ne.replace(G,"$&/")+"/"),Y(ge,V,ee,"",function(Ne){return Ne})):ge!=null&&(B(ge)&&(ge=q(ge,ee+(ge.key==null||C&&C.key===ge.key?"":(""+ge.key).replace(G,"$&/")+"/")+ne)),V.push(ge)),1;ne=0;var me=M===""?".":M+":";if(O(C))for(var ue=0;ue<C.length;ue++)M=C[ue],we=me+J(M,ue),ne+=Y(M,V,ee,we,ge);else if(ue=N(C),typeof ue=="function")for(C=ue.call(C),ue=0;!(M=C.next()).done;)M=M.value,we=me+J(M,ue++),ne+=Y(M,V,ee,we,ge);else if(we==="object"){if(typeof C.then=="function")return Y($(C),V,ee,M,ge);throw V=String(C),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ne}function P(C,V,ee){if(C==null)return C;var M=[],ge=0;return Y(C,M,"","",function(we){return V.call(ee,we,ge++)}),M}function Z(C){if(C._status===-1){var V=C._result;V=V(),V.then(function(ee){(C._status===0||C._status===-1)&&(C._status=1,C._result=ee)},function(ee){(C._status===0||C._status===-1)&&(C._status=2,C._result=ee)}),C._status===-1&&(C._status=0,C._result=V)}if(C._status===1)return C._result.default;throw C._result}var fe=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Q(){}return Ve.Children={map:P,forEach:function(C,V,ee){P(C,function(){V.apply(this,arguments)},ee)},count:function(C){var V=0;return P(C,function(){V++}),V},toArray:function(C){return P(C,function(V){return V})||[]},only:function(C){if(!B(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ve.Component=k,Ve.Fragment=n,Ve.Profiler=l,Ve.PureComponent=L,Ve.StrictMode=i,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(C){return H.H.useMemoCache(C)}},Ve.cache=function(C){return function(){return C.apply(null,arguments)}},Ve.cloneElement=function(C,V,ee){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var M=S({},C.props),ge=C.key,we=void 0;if(V!=null)for(ne in V.ref!==void 0&&(we=void 0),V.key!==void 0&&(ge=""+V.key),V)!I.call(V,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&V.ref===void 0||(M[ne]=V[ne]);var ne=arguments.length-2;if(ne===1)M.children=ee;else if(1<ne){for(var me=Array(ne),ue=0;ue<ne;ue++)me[ue]=arguments[ue+2];M.children=me}return R(C.type,ge,void 0,void 0,we,M)},Ve.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:o,_context:C},C},Ve.createElement=function(C,V,ee){var M,ge={},we=null;if(V!=null)for(M in V.key!==void 0&&(we=""+V.key),V)I.call(V,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(ge[M]=V[M]);var ne=arguments.length-2;if(ne===1)ge.children=ee;else if(1<ne){for(var me=Array(ne),ue=0;ue<ne;ue++)me[ue]=arguments[ue+2];ge.children=me}if(C&&C.defaultProps)for(M in ne=C.defaultProps,ne)ge[M]===void 0&&(ge[M]=ne[M]);return R(C,we,void 0,void 0,null,ge)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(C){return{$$typeof:f,render:C}},Ve.isValidElement=B,Ve.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:Z}},Ve.memo=function(C,V){return{$$typeof:m,type:C,compare:V===void 0?null:V}},Ve.startTransition=function(C){var V=H.T,ee={};H.T=ee;try{var M=C(),ge=H.S;ge!==null&&ge(ee,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Q,fe)}catch(we){fe(we)}finally{H.T=V}},Ve.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ve.use=function(C){return H.H.use(C)},Ve.useActionState=function(C,V,ee){return H.H.useActionState(C,V,ee)},Ve.useCallback=function(C,V){return H.H.useCallback(C,V)},Ve.useContext=function(C){return H.H.useContext(C)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(C,V){return H.H.useDeferredValue(C,V)},Ve.useEffect=function(C,V,ee){var M=H.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return M.useEffect(C,V)},Ve.useId=function(){return H.H.useId()},Ve.useImperativeHandle=function(C,V,ee){return H.H.useImperativeHandle(C,V,ee)},Ve.useInsertionEffect=function(C,V){return H.H.useInsertionEffect(C,V)},Ve.useLayoutEffect=function(C,V){return H.H.useLayoutEffect(C,V)},Ve.useMemo=function(C,V){return H.H.useMemo(C,V)},Ve.useOptimistic=function(C,V){return H.H.useOptimistic(C,V)},Ve.useReducer=function(C,V,ee){return H.H.useReducer(C,V,ee)},Ve.useRef=function(C){return H.H.useRef(C)},Ve.useState=function(C){return H.H.useState(C)},Ve.useSyncExternalStore=function(C,V,ee){return H.H.useSyncExternalStore(C,V,ee)},Ve.useTransition=function(){return H.H.useTransition()},Ve.version="19.1.0",Ve}var A0;function lm(){return A0||(A0=1,Id.exports=Bw()),Id.exports}var _=lm();const qe=ml(_);var Dd={exports:{}},Ja={},Ld={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function Uw(){return _0||(_0=1,function(t){function e(P,Z){var fe=P.length;P.push(Z);e:for(;0<fe;){var Q=fe-1>>>1,C=P[Q];if(0<l(C,Z))P[Q]=Z,P[fe]=C,fe=Q;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Z=P[0],fe=P.pop();if(fe!==Z){P[0]=fe;e:for(var Q=0,C=P.length,V=C>>>1;Q<V;){var ee=2*(Q+1)-1,M=P[ee],ge=ee+1,we=P[ge];if(0>l(M,fe))ge<C&&0>l(we,M)?(P[Q]=we,P[ge]=fe,Q=ge):(P[Q]=M,P[ee]=fe,Q=ee);else if(ge<C&&0>l(we,fe))P[Q]=we,P[ge]=fe,Q=ge;else break e}}return Z}function l(P,Z){var fe=P.sortIndex-Z.sortIndex;return fe!==0?fe:P.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var g=[],m=[],x=1,v=null,N=3,w=!1,S=!1,j=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(P){for(var Z=n(m);Z!==null;){if(Z.callback===null)i(m);else if(Z.startTime<=P)i(m),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=n(m)}}function H(P){if(j=!1,O(P),!S)if(n(g)!==null)S=!0,I||(I=!0,J());else{var Z=n(m);Z!==null&&Y(H,Z.startTime-P)}}var I=!1,R=-1,q=5,B=-1;function W(){return k?!0:!(t.unstable_now()-B<q)}function G(){if(k=!1,I){var P=t.unstable_now();B=P;var Z=!0;try{e:{S=!1,j&&(j=!1,L(R),R=-1),w=!0;var fe=N;try{t:{for(O(P),v=n(g);v!==null&&!(v.expirationTime>P&&W());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,N=v.priorityLevel;var C=Q(v.expirationTime<=P);if(P=t.unstable_now(),typeof C=="function"){v.callback=C,O(P),Z=!0;break t}v===n(g)&&i(g),O(P)}else i(g);v=n(g)}if(v!==null)Z=!0;else{var V=n(m);V!==null&&Y(H,V.startTime-P),Z=!1}}break e}finally{v=null,N=fe,w=!1}Z=void 0}}finally{Z?J():I=!1}}}var J;if(typeof D=="function")J=function(){D(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=G,J=function(){$.postMessage(null)}}else J=function(){E(G,0)};function Y(P,Z){R=E(function(){P(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(P){switch(N){case 1:case 2:case 3:var Z=3;break;default:Z=N}var fe=N;N=Z;try{return P()}finally{N=fe}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(P,Z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var fe=N;N=P;try{return Z()}finally{N=fe}},t.unstable_scheduleCallback=function(P,Z,fe){var Q=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Q+fe:Q):fe=Q,P){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=fe+C,P={id:x++,callback:Z,priorityLevel:P,startTime:fe,expirationTime:C,sortIndex:-1},fe>Q?(P.sortIndex=fe,e(m,P),n(g)===null&&P===n(m)&&(j?(L(R),R=-1):j=!0,Y(H,fe-Q))):(P.sortIndex=C,e(g,P),S||w||(S=!0,I||(I=!0,J()))),P},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(P){var Z=N;return function(){var fe=N;N=Z;try{return P.apply(this,arguments)}finally{N=fe}}}}(Pd)),Pd}var M0;function zw(){return M0||(M0=1,Ld.exports=Uw()),Ld.exports}var Od={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function Vw(){if(R0)return Kt;R0=1;var t=lm();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(g,m,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:m,implementation:x}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Kt.createPortal=function(g,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(g,m,null,x)},Kt.flushSync=function(g){var m=u.T,x=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=m,i.p=x,i.d.f()}},Kt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},Kt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Kt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var x=m.as,v=f(x,m.crossOrigin),N=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:N,fetchPriority:w}):x==="script"&&i.d.X(g,{crossOrigin:v,integrity:N,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Kt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=f(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},Kt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,v=f(x,m.crossOrigin);i.d.L(g,x,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Kt.preloadModule=function(g,m){if(typeof g=="string")if(m){var x=f(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},Kt.requestFormReset=function(g){i.d.r(g)},Kt.unstable_batchedUpdates=function(g,m){return g(m)},Kt.useFormState=function(g,m,x){return u.H.useFormState(g,m,x)},Kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Kt.version="19.1.0",Kt}var I0;function $w(){if(I0)return Od.exports;I0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Od.exports=Vw(),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function qw(){if(D0)return Ja;D0=1;var t=zw(),e=lm(),n=$w();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function u(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function g(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,d=a;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return f(y),r;if(b===d)return f(y),a;b=b.sibling}throw Error(i(188))}if(c.return!==d.return)c=y,d=b;else{for(var T=!1,A=y.child;A;){if(A===c){T=!0,c=y,d=b;break}if(A===d){T=!0,d=y,c=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===c){T=!0,c=b,d=y;break}if(A===d){T=!0,d=b,c=y;break}A=A.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function m(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=m(r),a!==null)return a;r=r.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var z=Symbol.for("react.client.reference");function $(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case D:return(r.displayName||"Context")+".Provider";case L:return(r._context.displayName||"Context")+".Consumer";case O:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return a=r.displayName||null,a!==null?a:$(r.type)||"Memo";case q:a=r._payload,r=r._init;try{return $(r(a))}catch{}}return null}var Y=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Q=[],C=-1;function V(r){return{current:r}}function ee(r){0>C||(r.current=Q[C],Q[C]=null,C--)}function M(r,a){C++,Q[C]=r.current,r.current=a}var ge=V(null),we=V(null),ne=V(null),me=V(null);function ue(r,a){switch(M(ne,a),M(we,r),M(ge,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?e0(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=e0(a),r=t0(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(ge),M(ge,r)}function Ne(){ee(ge),ee(we),ee(ne)}function Je(r){r.memoizedState!==null&&M(me,r);var a=ge.current,c=t0(a,r.type);a!==c&&(M(we,r),M(ge,c))}function Xe(r){we.current===r&&(ee(ge),ee(we)),me.current===r&&(ee(me),Va._currentValue=fe)}var ht=Object.prototype.hasOwnProperty,wt=t.unstable_scheduleCallback,Ot=t.unstable_cancelCallback,Xt=t.unstable_shouldYield,Cn=t.unstable_requestPaint,Bt=t.unstable_now,Mi=t.unstable_getCurrentPriorityLevel,Fn=t.unstable_ImmediatePriority,oi=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,or=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,ci=t.log,cr=t.unstable_setDisableYieldValue,le=null,he=null;function ae(r){if(typeof ci=="function"&&cr(r),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(le,r)}catch{}}var pe=Math.clz32?Math.clz32:mn,Ee=Math.log,tt=Math.LN2;function mn(r){return r>>>=0,r===0?32:31-(Ee(r)/tt|0)|0}var Ut=256,Oe=4194304;function en(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ze(r,a,c){var d=r.pendingLanes;if(d===0)return 0;var y=0,b=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?y=en(d):(T&=A,T!==0?y=en(T):c||(c=A&~r,c!==0&&(y=en(c))))):(A=d&~b,A!==0?y=en(A):T!==0?y=en(T):c||(c=d&~r,c!==0&&(y=en(c)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:y}function Ht(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function zt(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(){var r=Ut;return Ut<<=1,(Ut&4194048)===0&&(Ut=256),r}function Ks(){var r=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),r}function Br(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function se(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function be(r,a,c,d,y,b){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,U=r.expirationTimes,te=r.hiddenUpdates;for(c=T&~c;0<c;){var oe=31-pe(c),de=1<<oe;A[oe]=0,U[oe]=-1;var ie=te[oe];if(ie!==null)for(te[oe]=null,oe=0;oe<ie.length;oe++){var re=ie[oe];re!==null&&(re.lane&=-536870913)}c&=~de}d!==0&&ve(r,d,0),b!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=b&~(T&~a))}function ve(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-pe(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194090}function Se(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var d=31-pe(c),y=1<<d;y&a|r[d]&a&&(r[d]|=a),c&=~y}}function ke(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ie(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function He(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:b0(r.type))}function Ke(r,a){var c=Z.p;try{return Z.p=r,a()}finally{Z.p=c}}var nt=Math.random().toString(36).slice(2),st="__reactFiber$"+nt,It="__reactProps$"+nt,ui="__reactContainer$"+nt,Ur="__reactEvents$"+nt,jb="__reactListeners$"+nt,kb="__reactHandles$"+nt,$m="__reactResources$"+nt,Ws="__reactMarker$"+nt;function Tc(r){delete r[st],delete r[It],delete r[Ur],delete r[jb],delete r[kb]}function zr(r){var a=r[st];if(a)return a;for(var c=r.parentNode;c;){if(a=c[ui]||c[st]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=s0(r);r!==null;){if(c=r[st])return c;r=s0(r)}return a}r=c,c=r.parentNode}return null}function Vr(r){if(r=r[st]||r[ui]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Xs(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function $r(r){var a=r[$m];return a||(a=r[$m]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Vt(r){r[Ws]=!0}var qm=new Set,Fm={};function ur(r,a){qr(r,a),qr(r+"Capture",a)}function qr(r,a){for(Fm[r]=a,r=0;r<a.length;r++)qm.add(a[r])}var Eb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hm={},Gm={};function Ab(r){return ht.call(Gm,r)?!0:ht.call(Hm,r)?!1:Eb.test(r)?Gm[r]=!0:(Hm[r]=!0,!1)}function Nl(r,a,c){if(Ab(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function Cl(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function di(r,a,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+d)}}var jc,Jm;function Fr(r){if(jc===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);jc=a&&a[1]||"",Jm=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jc+r+Jm}var kc=!1;function Ec(r,a){if(!r||kc)return"";kc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var ie=re}Reflect.construct(r,[],de)}else{try{de.call()}catch(re){ie=re}r.call(de.prototype)}}else{try{throw Error()}catch(re){ie=re}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var U=T.split(`
`),te=A.split(`
`);for(y=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(d===U.length||y===te.length)for(d=U.length-1,y=te.length-1;1<=d&&0<=y&&U[d]!==te[y];)y--;for(;1<=d&&0<=y;d--,y--)if(U[d]!==te[y]){if(d!==1||y!==1)do if(d--,y--,0>y||U[d]!==te[y]){var oe=`
`+U[d].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=d&&0<=y);break}}}finally{kc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Fr(c):""}function _b(r){switch(r.tag){case 26:case 27:case 5:return Fr(r.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return Ec(r.type,!1);case 11:return Ec(r.type.render,!1);case 1:return Ec(r.type,!0);case 31:return Fr("Activity");default:return""}}function Ym(r){try{var a="";do a+=_b(r),r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Sn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Zm(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mb(r){var a=Zm(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),d=""+r[a];if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return y.call(this)},set:function(T){d=""+T,b.call(this,T)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Sl(r){r._valueTracker||(r._valueTracker=Mb(r))}function Qm(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return r&&(d=Zm(r)?r.checked?"true":"false":r.value),r=d,r!==c?(a.setValue(r),!0):!1}function Tl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Rb=/[\n"\\]/g;function Tn(r){return r.replace(Rb,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ac(r,a,c,d,y,b,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Sn(a)):r.value!==""+Sn(a)&&(r.value=""+Sn(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?_c(r,T,Sn(a)):c!=null?_c(r,T,Sn(c)):d!=null&&r.removeAttribute("value"),y==null&&b!=null&&(r.defaultChecked=!!b),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Sn(A):r.removeAttribute("name")}function Km(r,a,c,d,y,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;c=c!=null?""+Sn(c):"",a=a!=null?""+Sn(a):c,A||a===r.value||(r.value=a),r.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=A?r.checked:!!d,r.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function _c(r,a,c){a==="number"&&Tl(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Hr(r,a,c,d){if(r=r.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<r.length;c++)y=a.hasOwnProperty("$"+r[c].value),r[c].selected!==y&&(r[c].selected=y),y&&d&&(r[c].defaultSelected=!0)}else{for(c=""+Sn(c),a=null,y=0;y<r.length;y++){if(r[y].value===c){r[y].selected=!0,d&&(r[y].defaultSelected=!0);return}a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function Wm(r,a,c){if(a!=null&&(a=""+Sn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+Sn(c):""}function Xm(r,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(i(92));if(Y(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=Sn(a),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function Gr(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var Ib=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(r,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,c):typeof c!="number"||c===0||Ib.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function th(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&c[y]!==d&&eh(r,y,d)}else for(var b in a)a.hasOwnProperty(b)&&eh(r,b,a[b])}function Mc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Db=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(r){return Lb.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Rc=null;function Ic(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jr=null,Yr=null;function nh(r){var a=Vr(r);if(a&&(r=a.stateNode)){var c=r[It]||null;e:switch(r=a.stateNode,a.type){case"input":if(Ac(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==r&&d.form===r.form){var y=d[It]||null;if(!y)throw Error(i(90));Ac(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===r.form&&Qm(d)}break e;case"textarea":Wm(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Hr(r,!!c.multiple,a,!1)}}}var Dc=!1;function ih(r,a,c){if(Dc)return r(a,c);Dc=!0;try{var d=r(a);return d}finally{if(Dc=!1,(Jr!==null||Yr!==null)&&(fo(),Jr&&(a=Jr,r=Yr,Yr=Jr=null,nh(a),r)))for(a=0;a<r.length;a++)nh(r[a])}}function ea(r,a){var c=r.stateNode;if(c===null)return null;var d=c[It]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=!1;if(fi)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){Lc=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{Lc=!1}var Ri=null,Pc=null,kl=null;function rh(){if(kl)return kl;var r,a=Pc,c=a.length,d,y="value"in Ri?Ri.value:Ri.textContent,b=y.length;for(r=0;r<c&&a[r]===y[r];r++);var T=c-r;for(d=1;d<=T&&a[c-d]===y[b-d];d++);return kl=y.slice(r,1<d?1-d:void 0)}function El(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Al(){return!0}function sh(){return!1}function sn(r){function a(c,d,y,b,T){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Al:sh,this.isPropagationStopped=sh,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),a}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=sn(dr),na=x({},dr,{view:0,detail:0}),Pb=sn(na),Oc,Bc,ia,Ml=x({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ia&&(ia&&r.type==="mousemove"?(Oc=r.screenX-ia.screenX,Bc=r.screenY-ia.screenY):Bc=Oc=0,ia=r),Oc)},movementY:function(r){return"movementY"in r?r.movementY:Bc}}),ah=sn(Ml),Ob=x({},Ml,{dataTransfer:0}),Bb=sn(Ob),Ub=x({},na,{relatedTarget:0}),Uc=sn(Ub),zb=x({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=sn(zb),$b=x({},dr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),qb=sn($b),Fb=x({},dr,{data:0}),lh=sn(Fb),Hb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yb(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Jb[r])?!!a[r]:!1}function zc(){return Yb}var Zb=x({},na,{key:function(r){if(r.key){var a=Hb[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=El(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gb[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zc,charCode:function(r){return r.type==="keypress"?El(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?El(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Qb=sn(Zb),Kb=x({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=sn(Kb),Wb=x({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zc}),Xb=sn(Wb),e2=x({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),t2=sn(e2),n2=x({},Ml,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),i2=sn(n2),r2=x({},dr,{newState:0,oldState:0}),s2=sn(r2),a2=[9,13,27,32],Vc=fi&&"CompositionEvent"in window,ra=null;fi&&"documentMode"in document&&(ra=document.documentMode);var l2=fi&&"TextEvent"in window&&!ra,ch=fi&&(!Vc||ra&&8<ra&&11>=ra),uh=" ",dh=!1;function fh(r,a){switch(r){case"keyup":return a2.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zr=!1;function o2(r,a){switch(r){case"compositionend":return mh(a);case"keypress":return a.which!==32?null:(dh=!0,uh);case"textInput":return r=a.data,r===uh&&dh?null:r;default:return null}}function c2(r,a){if(Zr)return r==="compositionend"||!Vc&&fh(r,a)?(r=rh(),kl=Pc=Ri=null,Zr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ch&&a.locale!=="ko"?null:a.data;default:return null}}var u2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!u2[r.type]:a==="textarea"}function ph(r,a,c,d){Jr?Yr?Yr.push(d):Yr=[d]:Jr=d,a=yo(a,"onChange"),0<a.length&&(c=new _l("onChange","change",null,c,d),r.push({event:c,listeners:a}))}var sa=null,aa=null;function d2(r){Zg(r,0)}function Rl(r){var a=Xs(r);if(Qm(a))return r}function gh(r,a){if(r==="change")return a}var xh=!1;if(fi){var $c;if(fi){var qc="oninput"in document;if(!qc){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),qc=typeof yh.oninput=="function"}$c=qc}else $c=!1;xh=$c&&(!document.documentMode||9<document.documentMode)}function vh(){sa&&(sa.detachEvent("onpropertychange",bh),aa=sa=null)}function bh(r){if(r.propertyName==="value"&&Rl(aa)){var a=[];ph(a,aa,r,Ic(r)),ih(d2,a)}}function f2(r,a,c){r==="focusin"?(vh(),sa=a,aa=c,sa.attachEvent("onpropertychange",bh)):r==="focusout"&&vh()}function m2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rl(aa)}function h2(r,a){if(r==="click")return Rl(a)}function p2(r,a){if(r==="input"||r==="change")return Rl(a)}function g2(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var hn=typeof Object.is=="function"?Object.is:g2;function la(r,a){if(hn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!ht.call(a,y)||!hn(r[y],a[y]))return!1}return!0}function wh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Nh(r,a){var c=wh(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=a&&d>=a)return{node:c,offset:a-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=wh(c)}}function Ch(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Ch(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Sh(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Tl(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Tl(r.document)}return a}function Fc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var x2=fi&&"documentMode"in document&&11>=document.documentMode,Qr=null,Hc=null,oa=null,Gc=!1;function Th(r,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Gc||Qr==null||Qr!==Tl(d)||(d=Qr,"selectionStart"in d&&Fc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),oa&&la(oa,d)||(oa=d,d=yo(Hc,"onSelect"),0<d.length&&(a=new _l("onSelect","select",null,a,c),r.push({event:a,listeners:d}),a.target=Qr)))}function fr(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var Kr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},Jc={},jh={};fi&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function mr(r){if(Jc[r])return Jc[r];if(!Kr[r])return r;var a=Kr[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in jh)return Jc[r]=a[c];return r}var kh=mr("animationend"),Eh=mr("animationiteration"),Ah=mr("animationstart"),y2=mr("transitionrun"),v2=mr("transitionstart"),b2=mr("transitioncancel"),_h=mr("transitionend"),Mh=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function On(r,a){Mh.set(r,a),ur(a,[r])}var Rh=new WeakMap;function jn(r,a){if(typeof r=="object"&&r!==null){var c=Rh.get(r);return c!==void 0?c:(a={value:r,source:a,stack:Ym(a)},Rh.set(r,a),a)}return{value:r,source:a,stack:Ym(a)}}var kn=[],Wr=0,Zc=0;function Il(){for(var r=Wr,a=Zc=Wr=0;a<r;){var c=kn[a];kn[a++]=null;var d=kn[a];kn[a++]=null;var y=kn[a];kn[a++]=null;var b=kn[a];if(kn[a++]=null,d!==null&&y!==null){var T=d.pending;T===null?y.next=y:(y.next=T.next,T.next=y),d.pending=y}b!==0&&Ih(c,y,b)}}function Dl(r,a,c,d){kn[Wr++]=r,kn[Wr++]=a,kn[Wr++]=c,kn[Wr++]=d,Zc|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Qc(r,a,c,d){return Dl(r,a,c,d),Ll(r)}function Xr(r,a){return Dl(r,null,null,a),Ll(r)}function Ih(r,a,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(y=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,y&&a!==null&&(y=31-pe(c),r=b.hiddenUpdates,d=r[y],d===null?r[y]=[a]:d.push(a),a.lane=c|536870912),b):null}function Ll(r){if(50<Ia)throw Ia=0,nd=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var es={};function w2(r,a,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(r,a,c,d){return new w2(r,a,c,d)}function Kc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function mi(r,a){var c=r.alternate;return c===null?(c=pn(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Dh(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Pl(r,a,c,d,y,b){var T=0;if(d=r,typeof r=="function")Kc(r)&&(T=1);else if(typeof r=="string")T=Cw(r,c,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case B:return r=pn(31,c,a,y),r.elementType=B,r.lanes=b,r;case S:return hr(c.children,y,b,a);case j:T=8,y|=24;break;case k:return r=pn(12,c,a,y|2),r.elementType=k,r.lanes=b,r;case H:return r=pn(13,c,a,y),r.elementType=H,r.lanes=b,r;case I:return r=pn(19,c,a,y),r.elementType=I,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case D:T=10;break e;case L:T=9;break e;case O:T=11;break e;case R:T=14;break e;case q:T=16,d=null;break e}T=29,c=Error(i(130,r===null?"null":typeof r,"")),d=null}return a=pn(T,c,a,y),a.elementType=r,a.type=d,a.lanes=b,a}function hr(r,a,c,d){return r=pn(7,r,d,a),r.lanes=c,r}function Wc(r,a,c){return r=pn(6,r,null,a),r.lanes=c,r}function Xc(r,a,c){return a=pn(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var ts=[],ns=0,Ol=null,Bl=0,En=[],An=0,pr=null,hi=1,pi="";function gr(r,a){ts[ns++]=Bl,ts[ns++]=Ol,Ol=r,Bl=a}function Lh(r,a,c){En[An++]=hi,En[An++]=pi,En[An++]=pr,pr=r;var d=hi;r=pi;var y=32-pe(d)-1;d&=~(1<<y),c+=1;var b=32-pe(a)+y;if(30<b){var T=y-y%5;b=(d&(1<<T)-1).toString(32),d>>=T,y-=T,hi=1<<32-pe(a)+y|c<<y|d,pi=b+r}else hi=1<<b|c<<y|d,pi=r}function eu(r){r.return!==null&&(gr(r,1),Lh(r,1,0))}function tu(r){for(;r===Ol;)Ol=ts[--ns],ts[ns]=null,Bl=ts[--ns],ts[ns]=null;for(;r===pr;)pr=En[--An],En[An]=null,pi=En[--An],En[An]=null,hi=En[--An],En[An]=null}var tn=null,Tt=null,at=!1,xr=null,Gn=!1,nu=Error(i(519));function yr(r){var a=Error(i(418,""));throw da(jn(a,r)),nu}function Ph(r){var a=r.stateNode,c=r.type,d=r.memoizedProps;switch(a[st]=r,a[It]=d,c){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(c=0;c<La.length;c++)Qe(La[c],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Km(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Sl(a);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Xm(a,d.value,d.defaultValue,d.children),Sl(a)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||Xg(a.textContent,c)?(d.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),d.onScroll!=null&&Qe("scroll",a),d.onScrollEnd!=null&&Qe("scrollend",a),d.onClick!=null&&(a.onclick=vo),a=!0):a=!1,a||yr(r)}function Oh(r){for(tn=r.return;tn;)switch(tn.tag){case 5:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:tn=tn.return}}function ca(r){if(r!==tn)return!1;if(!at)return Oh(r),at=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||yd(r.type,r.memoizedProps)),c=!c),c&&Tt&&yr(r),Oh(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(a===0){Tt=Un(r.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;r=r.nextSibling}Tt=null}}else a===27?(a=Tt,Yi(r.type)?(r=Nd,Nd=null,Tt=r):Tt=a):Tt=tn?Un(r.stateNode.nextSibling):null;return!0}function ua(){Tt=tn=null,at=!1}function Bh(){var r=xr;return r!==null&&(on===null?on=r:on.push.apply(on,r),xr=null),r}function da(r){xr===null?xr=[r]:xr.push(r)}var iu=V(null),vr=null,gi=null;function Ii(r,a,c){M(iu,a._currentValue),a._currentValue=c}function xi(r){r._currentValue=iu.current,ee(iu)}function ru(r,a,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===c)break;r=r.return}}function su(r,a,c,d){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var b=y.dependencies;if(b!==null){var T=y.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=y;for(var U=0;U<a.length;U++)if(A.context===a[U]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),ru(b.return,c,r),d||(T=null);break e}b=A.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(i(341));T.lanes|=c,b=T.alternate,b!==null&&(b.lanes|=c),ru(T,c,r),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===r){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function fa(r,a,c,d){r=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=y.type;hn(y.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(y===me.current){if(T=y.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(Va):r=[Va])}y=y.return}r!==null&&su(a,r,c,d),a.flags|=262144}function Ul(r){for(r=r.firstContext;r!==null;){if(!hn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function br(r){vr=r,gi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Qt(r){return Uh(vr,r)}function zl(r,a){return vr===null&&br(r),Uh(r,a)}function Uh(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},gi===null){if(r===null)throw Error(i(308));gi=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else gi=gi.next=a;return c}var N2=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},C2=t.unstable_scheduleCallback,S2=t.unstable_NormalPriority,Dt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function au(){return{controller:new N2,data:new Map,refCount:0}}function ma(r){r.refCount--,r.refCount===0&&C2(S2,function(){r.controller.abort()})}var ha=null,lu=0,is=0,rs=null;function T2(r,a){if(ha===null){var c=ha=[];lu=0,is=cd(),rs={status:"pending",value:void 0,then:function(d){c.push(d)}}}return lu++,a.then(zh,zh),a}function zh(){if(--lu===0&&ha!==null){rs!==null&&(rs.status="fulfilled");var r=ha;ha=null,is=0,rs=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function j2(r,a){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<c.length;y++)(0,c[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var Vh=P.S;P.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&T2(r,a),Vh!==null&&Vh(r,a)};var wr=V(null);function ou(){var r=wr.current;return r!==null?r:gt.pooledCache}function Vl(r,a){a===null?M(wr,wr.current):M(wr,a.pool)}function $h(){var r=ou();return r===null?null:{parent:Dt._currentValue,pool:r}}var pa=Error(i(460)),qh=Error(i(474)),$l=Error(i(542)),cu={then:function(){}};function Fh(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ql(){}function Hh(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(ql,ql),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Jh(r),r;default:if(typeof a.status=="string")a.then(ql,ql);else{if(r=gt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Jh(r),r}throw ga=a,pa}}var ga=null;function Gh(){if(ga===null)throw Error(i(459));var r=ga;return ga=null,r}function Jh(r){if(r===pa||r===$l)throw Error(i(483))}var Di=!1;function uu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Li(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pi(r,a,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=Ll(r),Ih(r,null,c),a}return Dl(r,d,a,c),Ll(r)}function xa(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=r.pendingLanes,c|=d,a.lanes=c,Se(r,c)}}function fu(r,a){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=T:b=b.next=T,c=c.next}while(c!==null);b===null?y=b=a:b=b.next=a}else y=b=a;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var mu=!1;function ya(){if(mu){var r=rs;if(r!==null)throw r}}function va(r,a,c,d){mu=!1;var y=r.updateQueue;Di=!1;var b=y.firstBaseUpdate,T=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var U=A,te=U.next;U.next=null,T===null?b=te:T.next=te,T=U;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==T&&(A===null?oe.firstBaseUpdate=te:A.next=te,oe.lastBaseUpdate=U))}if(b!==null){var de=y.baseState;T=0,oe=te=U=null,A=b;do{var ie=A.lane&-536870913,re=ie!==A.lane;if(re?(et&ie)===ie:(d&ie)===ie){ie!==0&&ie===is&&(mu=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var De=r,Me=A;ie=a;var mt=c;switch(Me.tag){case 1:if(De=Me.payload,typeof De=="function"){de=De.call(mt,de,ie);break e}de=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Me.payload,ie=typeof De=="function"?De.call(mt,de,ie):De,ie==null)break e;de=x({},de,ie);break e;case 2:Di=!0}}ie=A.callback,ie!==null&&(r.flags|=64,re&&(r.flags|=8192),re=y.callbacks,re===null?y.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(te=oe=re,U=de):oe=oe.next=re,T|=ie;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;re=A,A=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);oe===null&&(U=de),y.baseState=U,y.firstBaseUpdate=te,y.lastBaseUpdate=oe,b===null&&(y.shared.lanes=0),Fi|=T,r.lanes=T,r.memoizedState=de}}function Yh(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Zh(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Yh(c[r],a)}var ss=V(null),Fl=V(0);function Qh(r,a){r=Si,M(Fl,r),M(ss,a),Si=r|a.baseLanes}function hu(){M(Fl,Si),M(ss,ss.current)}function pu(){Si=Fl.current,ee(ss),ee(Fl)}var Oi=0,Ge=null,dt=null,At=null,Hl=!1,as=!1,Nr=!1,Gl=0,ba=0,ls=null,k2=0;function kt(){throw Error(i(321))}function gu(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!hn(r[c],a[c]))return!1;return!0}function xu(r,a,c,d,y,b){return Oi=b,Ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=r===null||r.memoizedState===null?Ip:Dp,Nr=!1,b=c(d,y),Nr=!1,as&&(b=Wh(a,c,d,y)),Kh(r),b}function Kh(r){P.H=Wl;var a=dt!==null&&dt.next!==null;if(Oi=0,At=dt=Ge=null,Hl=!1,ba=0,ls=null,a)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Ul(r)&&($t=!0))}function Wh(r,a,c,d){Ge=r;var y=0;do{if(as&&(ls=null),ba=0,as=!1,25<=y)throw Error(i(301));if(y+=1,At=dt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=D2,b=a(c,d)}while(as);return b}function E2(){var r=P.H,a=r.useState()[0];return a=typeof a.then=="function"?wa(a):a,r=r.useState()[0],(dt!==null?dt.memoizedState:null)!==r&&(Ge.flags|=1024),a}function yu(){var r=Gl!==0;return Gl=0,r}function vu(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function bu(r){if(Hl){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Hl=!1}Oi=0,At=dt=Ge=null,as=!1,ba=Gl=0,ls=null}function an(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ge.memoizedState=At=r:At=At.next=r,At}function _t(){if(dt===null){var r=Ge.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var a=At===null?Ge.memoizedState:At.next;if(a!==null)At=a,dt=r;else{if(r===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},At===null?Ge.memoizedState=At=r:At=At.next=r}return At}function wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wa(r){var a=ba;return ba+=1,ls===null&&(ls=[]),r=Hh(ls,r,a),a=Ge,(At===null?a.memoizedState:At.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Ip:Dp),r}function Jl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wa(r);if(r.$$typeof===D)return Qt(r)}throw Error(i(438,String(r)))}function Nu(r){var a=null,c=Ge.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=Ge.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=wu(),Ge.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),d=0;d<r;d++)c[d]=W;return a.index++,c}function yi(r,a){return typeof a=="function"?a(r):a}function Yl(r){var a=_t();return Cu(a,dt,r)}function Cu(r,a,c){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var y=r.baseQueue,b=d.pending;if(b!==null){if(y!==null){var T=y.next;y.next=b.next,b.next=T}a.baseQueue=y=b,d.pending=null}if(b=r.baseState,y===null)r.memoizedState=b;else{a=y.next;var A=T=null,U=null,te=a,oe=!1;do{var de=te.lane&-536870913;if(de!==te.lane?(et&de)===de:(Oi&de)===de){var ie=te.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),de===is&&(oe=!0);else if((Oi&ie)===ie){te=te.next,ie===is&&(oe=!0);continue}else de={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(A=U=de,T=b):U=U.next=de,Ge.lanes|=ie,Fi|=ie;de=te.action,Nr&&c(b,de),b=te.hasEagerState?te.eagerState:c(b,de)}else ie={lane:de,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(A=U=ie,T=b):U=U.next=ie,Ge.lanes|=de,Fi|=de;te=te.next}while(te!==null&&te!==a);if(U===null?T=b:U.next=A,!hn(b,r.memoizedState)&&($t=!0,oe&&(c=rs,c!==null)))throw c;r.memoizedState=b,r.baseState=T,r.baseQueue=U,d.lastRenderedState=b}return y===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Su(r){var a=_t(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var d=c.dispatch,y=c.pending,b=a.memoizedState;if(y!==null){c.pending=null;var T=y=y.next;do b=r(b,T.action),T=T.next;while(T!==y);hn(b,a.memoizedState)||($t=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,d]}function Xh(r,a,c){var d=Ge,y=_t(),b=at;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=a();var T=!hn((dt||y).memoizedState,c);T&&(y.memoizedState=c,$t=!0),y=y.queue;var A=np.bind(null,d,y,r);if(Na(2048,8,A,[r]),y.getSnapshot!==a||T||At!==null&&At.memoizedState.tag&1){if(d.flags|=2048,os(9,Zl(),tp.bind(null,d,y,c,a),null),gt===null)throw Error(i(349));b||(Oi&124)!==0||ep(d,a,c)}return c}function ep(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Ge.updateQueue,a===null?(a=wu(),Ge.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function tp(r,a,c,d){a.value=c,a.getSnapshot=d,ip(a)&&rp(r)}function np(r,a,c){return c(function(){ip(a)&&rp(r)})}function ip(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!hn(r,c)}catch{return!0}}function rp(r){var a=Xr(r,2);a!==null&&bn(a,r,2)}function Tu(r){var a=an();if(typeof r=="function"){var c=r;if(r=c(),Nr){ae(!0);try{c()}finally{ae(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:r},a}function sp(r,a,c,d){return r.baseState=c,Cu(r,dt,typeof d=="function"?d:yi)}function A2(r,a,c,d,y){if(Kl(r))throw Error(i(485));if(r=a.action,r!==null){var b={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};P.T!==null?c(!0):b.isTransition=!1,d(b),c=a.pending,c===null?(b.next=a.pending=b,ap(a,b)):(b.next=c.next,a.pending=c.next=b)}}function ap(r,a){var c=a.action,d=a.payload,y=r.state;if(a.isTransition){var b=P.T,T={};P.T=T;try{var A=c(y,d),U=P.S;U!==null&&U(T,A),lp(r,a,A)}catch(te){ju(r,a,te)}finally{P.T=b}}else try{b=c(y,d),lp(r,a,b)}catch(te){ju(r,a,te)}}function lp(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){op(r,a,d)},function(d){return ju(r,a,d)}):op(r,a,c)}function op(r,a,c){a.status="fulfilled",a.value=c,cp(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,ap(r,c)))}function ju(r,a,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,cp(a),a=a.next;while(a!==d)}r.action=null}function cp(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function up(r,a){return a}function dp(r,a){if(at){var c=gt.formState;if(c!==null){e:{var d=Ge;if(at){if(Tt){t:{for(var y=Tt,b=Gn;y.nodeType!==8;){if(!b){y=null;break t}if(y=Un(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Tt=Un(y.nextSibling),d=y.data==="F!";break e}}yr(d)}d=!1}d&&(a=c[0])}}return c=an(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:a},c.queue=d,c=_p.bind(null,Ge,d),d.dispatch=c,d=Tu(!1),b=Mu.bind(null,Ge,!1,d.queue),d=an(),y={state:a,dispatch:null,action:r,pending:null},d.queue=y,c=A2.bind(null,Ge,y,b,c),y.dispatch=c,d.memoizedState=r,[a,c,!1]}function fp(r){var a=_t();return mp(a,dt,r)}function mp(r,a,c){if(a=Cu(r,a,up)[0],r=Yl(yi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=wa(a)}catch(T){throw T===pa?$l:T}else d=a;a=_t();var y=a.queue,b=y.dispatch;return c!==a.memoizedState&&(Ge.flags|=2048,os(9,Zl(),_2.bind(null,y,c),null)),[d,b,r]}function _2(r,a){r.action=a}function hp(r){var a=_t(),c=dt;if(c!==null)return mp(a,c,r);_t(),a=a.memoizedState,c=_t();var d=c.queue.dispatch;return c.memoizedState=r,[a,d,!1]}function os(r,a,c,d){return r={tag:r,create:c,deps:d,inst:a,next:null},a=Ge.updateQueue,a===null&&(a=wu(),Ge.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,a.lastEffect=r),r}function Zl(){return{destroy:void 0,resource:void 0}}function pp(){return _t().memoizedState}function Ql(r,a,c,d){var y=an();d=d===void 0?null:d,Ge.flags|=r,y.memoizedState=os(1|a,Zl(),c,d)}function Na(r,a,c,d){var y=_t();d=d===void 0?null:d;var b=y.memoizedState.inst;dt!==null&&d!==null&&gu(d,dt.memoizedState.deps)?y.memoizedState=os(a,b,c,d):(Ge.flags|=r,y.memoizedState=os(1|a,b,c,d))}function gp(r,a){Ql(8390656,8,r,a)}function xp(r,a){Na(2048,8,r,a)}function yp(r,a){return Na(4,2,r,a)}function vp(r,a){return Na(4,4,r,a)}function bp(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function wp(r,a,c){c=c!=null?c.concat([r]):null,Na(4,4,bp.bind(null,a,r),c)}function ku(){}function Np(r,a){var c=_t();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&gu(a,d[1])?d[0]:(c.memoizedState=[r,a],r)}function Cp(r,a){var c=_t();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&gu(a,d[1]))return d[0];if(d=r(),Nr){ae(!0);try{r()}finally{ae(!1)}}return c.memoizedState=[d,a],d}function Eu(r,a,c){return c===void 0||(Oi&1073741824)!==0?r.memoizedState=a:(r.memoizedState=c,r=jg(),Ge.lanes|=r,Fi|=r,c)}function Sp(r,a,c,d){return hn(c,a)?c:ss.current!==null?(r=Eu(r,c,d),hn(r,a)||($t=!0),r):(Oi&42)===0?($t=!0,r.memoizedState=c):(r=jg(),Ge.lanes|=r,Fi|=r,a)}function Tp(r,a,c,d,y){var b=Z.p;Z.p=b!==0&&8>b?b:8;var T=P.T,A={};P.T=A,Mu(r,!1,a,c);try{var U=y(),te=P.S;if(te!==null&&te(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=j2(U,d);Ca(r,a,oe,vn(r))}else Ca(r,a,d,vn(r))}catch(de){Ca(r,a,{then:function(){},status:"rejected",reason:de},vn())}finally{Z.p=b,P.T=T}}function M2(){}function Au(r,a,c,d){if(r.tag!==5)throw Error(i(476));var y=jp(r).queue;Tp(r,y,a,fe,c===null?M2:function(){return kp(r),c(d)})}function jp(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:fe},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function kp(r){var a=jp(r).next.queue;Ca(r,a,{},vn())}function _u(){return Qt(Va)}function Ep(){return _t().memoizedState}function Ap(){return _t().memoizedState}function R2(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=vn();r=Li(c);var d=Pi(a,r,c);d!==null&&(bn(d,a,c),xa(d,a,c)),a={cache:au()},r.payload=a;return}a=a.return}}function I2(r,a,c){var d=vn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Kl(r)?Mp(a,c):(c=Qc(r,a,c,d),c!==null&&(bn(c,r,d),Rp(c,a,d)))}function _p(r,a,c){var d=vn();Ca(r,a,c,d)}function Ca(r,a,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Kl(r))Mp(a,y);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var T=a.lastRenderedState,A=b(T,c);if(y.hasEagerState=!0,y.eagerState=A,hn(A,T))return Dl(r,a,y,0),gt===null&&Il(),!1}catch{}finally{}if(c=Qc(r,a,y,d),c!==null)return bn(c,r,d),Rp(c,a,d),!0}return!1}function Mu(r,a,c,d){if(d={lane:2,revertLane:cd(),action:d,hasEagerState:!1,eagerState:null,next:null},Kl(r)){if(a)throw Error(i(479))}else a=Qc(r,c,d,2),a!==null&&bn(a,r,2)}function Kl(r){var a=r.alternate;return r===Ge||a!==null&&a===Ge}function Mp(r,a){as=Hl=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function Rp(r,a,c){if((c&4194048)!==0){var d=a.lanes;d&=r.pendingLanes,c|=d,a.lanes=c,Se(r,c)}}var Wl={readContext:Qt,use:Jl,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},Ip={readContext:Qt,use:Jl,useCallback:function(r,a){return an().memoizedState=[r,a===void 0?null:a],r},useContext:Qt,useEffect:gp,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,Ql(4194308,4,bp.bind(null,a,r),c)},useLayoutEffect:function(r,a){return Ql(4194308,4,r,a)},useInsertionEffect:function(r,a){Ql(4,2,r,a)},useMemo:function(r,a){var c=an();a=a===void 0?null:a;var d=r();if(Nr){ae(!0);try{r()}finally{ae(!1)}}return c.memoizedState=[d,a],d},useReducer:function(r,a,c){var d=an();if(c!==void 0){var y=c(a);if(Nr){ae(!0);try{c(a)}finally{ae(!1)}}}else y=a;return d.memoizedState=d.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},d.queue=r,r=r.dispatch=I2.bind(null,Ge,r),[d.memoizedState,r]},useRef:function(r){var a=an();return r={current:r},a.memoizedState=r},useState:function(r){r=Tu(r);var a=r.queue,c=_p.bind(null,Ge,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:ku,useDeferredValue:function(r,a){var c=an();return Eu(c,r,a)},useTransition:function(){var r=Tu(!1);return r=Tp.bind(null,Ge,r.queue,!0,!1),an().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var d=Ge,y=an();if(at){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),gt===null)throw Error(i(349));(et&124)!==0||ep(d,a,c)}y.memoizedState=c;var b={value:c,getSnapshot:a};return y.queue=b,gp(np.bind(null,d,b,r),[r]),d.flags|=2048,os(9,Zl(),tp.bind(null,d,b,c,a),null),c},useId:function(){var r=an(),a=gt.identifierPrefix;if(at){var c=pi,d=hi;c=(d&~(1<<32-pe(d)-1)).toString(32)+c,a=""+a+"R"+c,c=Gl++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=k2++,a=""+a+"r"+c.toString(32)+"";return r.memoizedState=a},useHostTransitionStatus:_u,useFormState:dp,useActionState:dp,useOptimistic:function(r){var a=an();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Mu.bind(null,Ge,!0,c),c.dispatch=a,[r,a]},useMemoCache:Nu,useCacheRefresh:function(){return an().memoizedState=R2.bind(null,Ge)}},Dp={readContext:Qt,use:Jl,useCallback:Np,useContext:Qt,useEffect:xp,useImperativeHandle:wp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:Cp,useReducer:Yl,useRef:pp,useState:function(){return Yl(yi)},useDebugValue:ku,useDeferredValue:function(r,a){var c=_t();return Sp(c,dt.memoizedState,r,a)},useTransition:function(){var r=Yl(yi)[0],a=_t().memoizedState;return[typeof r=="boolean"?r:wa(r),a]},useSyncExternalStore:Xh,useId:Ep,useHostTransitionStatus:_u,useFormState:fp,useActionState:fp,useOptimistic:function(r,a){var c=_t();return sp(c,dt,r,a)},useMemoCache:Nu,useCacheRefresh:Ap},D2={readContext:Qt,use:Jl,useCallback:Np,useContext:Qt,useEffect:xp,useImperativeHandle:wp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:Cp,useReducer:Su,useRef:pp,useState:function(){return Su(yi)},useDebugValue:ku,useDeferredValue:function(r,a){var c=_t();return dt===null?Eu(c,r,a):Sp(c,dt.memoizedState,r,a)},useTransition:function(){var r=Su(yi)[0],a=_t().memoizedState;return[typeof r=="boolean"?r:wa(r),a]},useSyncExternalStore:Xh,useId:Ep,useHostTransitionStatus:_u,useFormState:hp,useActionState:hp,useOptimistic:function(r,a){var c=_t();return dt!==null?sp(c,dt,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Nu,useCacheRefresh:Ap},cs=null,Sa=0;function Xl(r){var a=Sa;return Sa+=1,cs===null&&(cs=[]),Hh(cs,r,a)}function Ta(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function eo(r,a){throw a.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Lp(r){var a=r._init;return a(r._payload)}function Pp(r){function a(K,F){if(r){var X=K.deletions;X===null?(K.deletions=[F],K.flags|=16):X.push(F)}}function c(K,F){if(!r)return null;for(;F!==null;)a(K,F),F=F.sibling;return null}function d(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function y(K,F){return K=mi(K,F),K.index=0,K.sibling=null,K}function b(K,F,X){return K.index=X,r?(X=K.alternate,X!==null?(X=X.index,X<F?(K.flags|=67108866,F):X):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function T(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function A(K,F,X,ce){return F===null||F.tag!==6?(F=Wc(X,K.mode,ce),F.return=K,F):(F=y(F,X),F.return=K,F)}function U(K,F,X,ce){var Te=X.type;return Te===S?oe(K,F,X.props.children,ce,X.key):F!==null&&(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===q&&Lp(Te)===F.type)?(F=y(F,X.props),Ta(F,X),F.return=K,F):(F=Pl(X.type,X.key,X.props,null,K.mode,ce),Ta(F,X),F.return=K,F)}function te(K,F,X,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=Xc(X,K.mode,ce),F.return=K,F):(F=y(F,X.children||[]),F.return=K,F)}function oe(K,F,X,ce,Te){return F===null||F.tag!==7?(F=hr(X,K.mode,ce,Te),F.return=K,F):(F=y(F,X),F.return=K,F)}function de(K,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Wc(""+F,K.mode,X),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return X=Pl(F.type,F.key,F.props,null,K.mode,X),Ta(X,F),X.return=K,X;case w:return F=Xc(F,K.mode,X),F.return=K,F;case q:var ce=F._init;return F=ce(F._payload),de(K,F,X)}if(Y(F)||J(F))return F=hr(F,K.mode,X,null),F.return=K,F;if(typeof F.then=="function")return de(K,Xl(F),X);if(F.$$typeof===D)return de(K,zl(K,F),X);eo(K,F)}return null}function ie(K,F,X,ce){var Te=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Te!==null?null:A(K,F,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return X.key===Te?U(K,F,X,ce):null;case w:return X.key===Te?te(K,F,X,ce):null;case q:return Te=X._init,X=Te(X._payload),ie(K,F,X,ce)}if(Y(X)||J(X))return Te!==null?null:oe(K,F,X,ce,null);if(typeof X.then=="function")return ie(K,F,Xl(X),ce);if(X.$$typeof===D)return ie(K,F,zl(K,X),ce);eo(K,X)}return null}function re(K,F,X,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(X)||null,A(F,K,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case N:return K=K.get(ce.key===null?X:ce.key)||null,U(F,K,ce,Te);case w:return K=K.get(ce.key===null?X:ce.key)||null,te(F,K,ce,Te);case q:var Ye=ce._init;return ce=Ye(ce._payload),re(K,F,X,ce,Te)}if(Y(ce)||J(ce))return K=K.get(X)||null,oe(F,K,ce,Te,null);if(typeof ce.then=="function")return re(K,F,X,Xl(ce),Te);if(ce.$$typeof===D)return re(K,F,X,zl(F,ce),Te);eo(F,ce)}return null}function De(K,F,X,ce){for(var Te=null,Ye=null,_e=F,Re=F=0,Ft=null;_e!==null&&Re<X.length;Re++){_e.index>Re?(Ft=_e,_e=null):Ft=_e.sibling;var it=ie(K,_e,X[Re],ce);if(it===null){_e===null&&(_e=Ft);break}r&&_e&&it.alternate===null&&a(K,_e),F=b(it,F,Re),Ye===null?Te=it:Ye.sibling=it,Ye=it,_e=Ft}if(Re===X.length)return c(K,_e),at&&gr(K,Re),Te;if(_e===null){for(;Re<X.length;Re++)_e=de(K,X[Re],ce),_e!==null&&(F=b(_e,F,Re),Ye===null?Te=_e:Ye.sibling=_e,Ye=_e);return at&&gr(K,Re),Te}for(_e=d(_e);Re<X.length;Re++)Ft=re(_e,K,Re,X[Re],ce),Ft!==null&&(r&&Ft.alternate!==null&&_e.delete(Ft.key===null?Re:Ft.key),F=b(Ft,F,Re),Ye===null?Te=Ft:Ye.sibling=Ft,Ye=Ft);return r&&_e.forEach(function(Xi){return a(K,Xi)}),at&&gr(K,Re),Te}function Me(K,F,X,ce){if(X==null)throw Error(i(151));for(var Te=null,Ye=null,_e=F,Re=F=0,Ft=null,it=X.next();_e!==null&&!it.done;Re++,it=X.next()){_e.index>Re?(Ft=_e,_e=null):Ft=_e.sibling;var Xi=ie(K,_e,it.value,ce);if(Xi===null){_e===null&&(_e=Ft);break}r&&_e&&Xi.alternate===null&&a(K,_e),F=b(Xi,F,Re),Ye===null?Te=Xi:Ye.sibling=Xi,Ye=Xi,_e=Ft}if(it.done)return c(K,_e),at&&gr(K,Re),Te;if(_e===null){for(;!it.done;Re++,it=X.next())it=de(K,it.value,ce),it!==null&&(F=b(it,F,Re),Ye===null?Te=it:Ye.sibling=it,Ye=it);return at&&gr(K,Re),Te}for(_e=d(_e);!it.done;Re++,it=X.next())it=re(_e,K,Re,it.value,ce),it!==null&&(r&&it.alternate!==null&&_e.delete(it.key===null?Re:it.key),F=b(it,F,Re),Ye===null?Te=it:Ye.sibling=it,Ye=it);return r&&_e.forEach(function(Lw){return a(K,Lw)}),at&&gr(K,Re),Te}function mt(K,F,X,ce){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case N:e:{for(var Te=X.key;F!==null;){if(F.key===Te){if(Te=X.type,Te===S){if(F.tag===7){c(K,F.sibling),ce=y(F,X.props.children),ce.return=K,K=ce;break e}}else if(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===q&&Lp(Te)===F.type){c(K,F.sibling),ce=y(F,X.props),Ta(ce,X),ce.return=K,K=ce;break e}c(K,F);break}else a(K,F);F=F.sibling}X.type===S?(ce=hr(X.props.children,K.mode,ce,X.key),ce.return=K,K=ce):(ce=Pl(X.type,X.key,X.props,null,K.mode,ce),Ta(ce,X),ce.return=K,K=ce)}return T(K);case w:e:{for(Te=X.key;F!==null;){if(F.key===Te)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){c(K,F.sibling),ce=y(F,X.children||[]),ce.return=K,K=ce;break e}else{c(K,F);break}else a(K,F);F=F.sibling}ce=Xc(X,K.mode,ce),ce.return=K,K=ce}return T(K);case q:return Te=X._init,X=Te(X._payload),mt(K,F,X,ce)}if(Y(X))return De(K,F,X,ce);if(J(X)){if(Te=J(X),typeof Te!="function")throw Error(i(150));return X=Te.call(X),Me(K,F,X,ce)}if(typeof X.then=="function")return mt(K,F,Xl(X),ce);if(X.$$typeof===D)return mt(K,F,zl(K,X),ce);eo(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(c(K,F.sibling),ce=y(F,X),ce.return=K,K=ce):(c(K,F),ce=Wc(X,K.mode,ce),ce.return=K,K=ce),T(K)):c(K,F)}return function(K,F,X,ce){try{Sa=0;var Te=mt(K,F,X,ce);return cs=null,Te}catch(_e){if(_e===pa||_e===$l)throw _e;var Ye=pn(29,_e,null,K.mode);return Ye.lanes=ce,Ye.return=K,Ye}finally{}}}var us=Pp(!0),Op=Pp(!1),_n=V(null),Jn=null;function Bi(r){var a=r.alternate;M(Lt,Lt.current&1),M(_n,r),Jn===null&&(a===null||ss.current!==null||a.memoizedState!==null)&&(Jn=r)}function Bp(r){if(r.tag===22){if(M(Lt,Lt.current),M(_n,r),Jn===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Jn=r)}}else Ui()}function Ui(){M(Lt,Lt.current),M(_n,_n.current)}function vi(r){ee(_n),Jn===r&&(Jn=null),ee(Lt)}var Lt=V(0);function to(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||wd(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ru(r,a,c,d){a=r.memoizedState,c=c(d,a),c=c==null?a:x({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Iu={enqueueSetState:function(r,a,c){r=r._reactInternals;var d=vn(),y=Li(d);y.payload=a,c!=null&&(y.callback=c),a=Pi(r,y,d),a!==null&&(bn(a,r,d),xa(a,r,d))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var d=vn(),y=Li(d);y.tag=1,y.payload=a,c!=null&&(y.callback=c),a=Pi(r,y,d),a!==null&&(bn(a,r,d),xa(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=vn(),d=Li(c);d.tag=2,a!=null&&(d.callback=a),a=Pi(r,d,c),a!==null&&(bn(a,r,c),xa(a,r,c))}};function Up(r,a,c,d,y,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,T):a.prototype&&a.prototype.isPureReactComponent?!la(c,d)||!la(y,b):!0}function zp(r,a,c,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==r&&Iu.enqueueReplaceState(a,a.state,null)}function Cr(r,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(r=r.defaultProps){c===a&&(c=x({},c));for(var y in r)c[y]===void 0&&(c[y]=r[y])}return c}var no=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Vp(r){no(r)}function $p(r){console.error(r)}function qp(r){no(r)}function io(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Fp(r,a,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Du(r,a,c){return c=Li(c),c.tag=3,c.payload={element:null},c.callback=function(){io(r,a)},c}function Hp(r){return r=Li(r),r.tag=3,r}function Gp(r,a,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;r.payload=function(){return y(b)},r.callback=function(){Fp(a,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){Fp(a,c,d),typeof y!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function L2(r,a,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&fa(a,c,y,!0),c=_n.current,c!==null){switch(c.tag){case 13:return Jn===null?rd():c.alternate===null&&jt===0&&(jt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===cu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),ad(r,d,y)),!1;case 22:return c.flags|=65536,d===cu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),ad(r,d,y)),!1}throw Error(i(435,c.tag))}return ad(r,d,y),rd(),!1}if(at)return a=_n.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==nu&&(r=Error(i(422),{cause:d}),da(jn(r,c)))):(d!==nu&&(a=Error(i(423),{cause:d}),da(jn(a,c))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,d=jn(d,c),y=Du(r.stateNode,d,y),fu(r,y),jt!==4&&(jt=2)),!1;var b=Error(i(520),{cause:d});if(b=jn(b,c),Ra===null?Ra=[b]:Ra.push(b),jt!==4&&(jt=2),a===null)return!0;d=jn(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=y&-y,c.lanes|=r,r=Du(c.stateNode,d,r),fu(c,r),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Hi===null||!Hi.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Hp(y),Gp(y,r,c,d),fu(c,y),!1}c=c.return}while(c!==null);return!1}var Jp=Error(i(461)),$t=!1;function Gt(r,a,c,d){a.child=r===null?Op(a,null,c,d):us(a,r.child,c,d)}function Yp(r,a,c,d,y){c=c.render;var b=a.ref;if("ref"in d){var T={};for(var A in d)A!=="ref"&&(T[A]=d[A])}else T=d;return br(a),d=xu(r,a,c,T,b,y),A=yu(),r!==null&&!$t?(vu(r,a,y),bi(r,a,y)):(at&&A&&eu(a),a.flags|=1,Gt(r,a,d,y),a.child)}function Zp(r,a,c,d,y){if(r===null){var b=c.type;return typeof b=="function"&&!Kc(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,Qp(r,a,b,d,y)):(r=Pl(c.type,null,d,a,a.mode,y),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,!$u(r,y)){var T=b.memoizedProps;if(c=c.compare,c=c!==null?c:la,c(T,d)&&r.ref===a.ref)return bi(r,a,y)}return a.flags|=1,r=mi(b,d),r.ref=a.ref,r.return=a,a.child=r}function Qp(r,a,c,d,y){if(r!==null){var b=r.memoizedProps;if(la(b,d)&&r.ref===a.ref)if($t=!1,a.pendingProps=d=b,$u(r,y))(r.flags&131072)!==0&&($t=!0);else return a.lanes=r.lanes,bi(r,a,y)}return Lu(r,a,c,d,y)}function Kp(r,a,c){var d=a.pendingProps,y=d.children,b=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,r!==null){for(y=a.child=r.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;a.childLanes=b&~d}else a.childLanes=0,a.child=null;return Wp(r,a,d,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Vl(a,b!==null?b.cachePool:null),b!==null?Qh(a,b):hu(),Bp(a);else return a.lanes=a.childLanes=536870912,Wp(r,a,b!==null?b.baseLanes|c:c,c)}else b!==null?(Vl(a,b.cachePool),Qh(a,b),Ui(),a.memoizedState=null):(r!==null&&Vl(a,null),hu(),Ui());return Gt(r,a,y,c),a.child}function Wp(r,a,c,d){var y=ou();return y=y===null?null:{parent:Dt._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&Vl(a,null),hu(),Bp(a),r!==null&&fa(r,a,d,!0),null}function ro(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function Lu(r,a,c,d,y){return br(a),c=xu(r,a,c,d,void 0,y),d=yu(),r!==null&&!$t?(vu(r,a,y),bi(r,a,y)):(at&&d&&eu(a),a.flags|=1,Gt(r,a,c,y),a.child)}function Xp(r,a,c,d,y,b){return br(a),a.updateQueue=null,c=Wh(a,d,c,y),Kh(r),d=yu(),r!==null&&!$t?(vu(r,a,b),bi(r,a,b)):(at&&d&&eu(a),a.flags|=1,Gt(r,a,c,b),a.child)}function eg(r,a,c,d,y){if(br(a),a.stateNode===null){var b=es,T=c.contextType;typeof T=="object"&&T!==null&&(b=Qt(T)),b=new c(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Iu,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},uu(a),T=c.contextType,b.context=typeof T=="object"&&T!==null?Qt(T):es,b.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Ru(a,c,T,d),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Iu.enqueueReplaceState(b,b.state,null),va(a,d,b,y),ya(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){b=a.stateNode;var A=a.memoizedProps,U=Cr(c,A);b.props=U;var te=b.context,oe=c.contextType;T=es,typeof oe=="object"&&oe!==null&&(T=Qt(oe));var de=c.getDerivedStateFromProps;oe=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||te!==T)&&zp(a,b,d,T),Di=!1;var ie=a.memoizedState;b.state=ie,va(a,d,b,y),ya(),te=a.memoizedState,A||ie!==te||Di?(typeof de=="function"&&(Ru(a,c,de,d),te=a.memoizedState),(U=Di||Up(a,c,U,d,ie,te,T))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=te),b.props=d,b.state=te,b.context=T,d=U):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,du(r,a),T=a.memoizedProps,oe=Cr(c,T),b.props=oe,de=a.pendingProps,ie=b.context,te=c.contextType,U=es,typeof te=="object"&&te!==null&&(U=Qt(te)),A=c.getDerivedStateFromProps,(te=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==de||ie!==U)&&zp(a,b,d,U),Di=!1,ie=a.memoizedState,b.state=ie,va(a,d,b,y),ya();var re=a.memoizedState;T!==de||ie!==re||Di||r!==null&&r.dependencies!==null&&Ul(r.dependencies)?(typeof A=="function"&&(Ru(a,c,A,d),re=a.memoizedState),(oe=Di||Up(a,c,oe,d,ie,re,U)||r!==null&&r.dependencies!==null&&Ul(r.dependencies))?(te||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,re,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,re,U)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=re),b.props=d,b.state=re,b.context=U,d=oe):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(a.flags|=1024),d=!1)}return b=d,ro(r,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,r!==null&&d?(a.child=us(a,r.child,null,y),a.child=us(a,null,c,y)):Gt(r,a,c,y),a.memoizedState=b.state,r=a.child):r=bi(r,a,y),r}function tg(r,a,c,d){return ua(),a.flags|=256,Gt(r,a,c,d),a.child}var Pu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ou(r){return{baseLanes:r,cachePool:$h()}}function Bu(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Mn),r}function ng(r,a,c){var d=a.pendingProps,y=!1,b=(a.flags&128)!==0,T;if((T=b)||(T=r!==null&&r.memoizedState===null?!1:(Lt.current&2)!==0),T&&(y=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if(at){if(y?Bi(a):Ui(),at){var A=Tt,U;if(U=A){e:{for(U=A,A=Gn;U.nodeType!==8;){if(!A){A=null;break e}if(U=Un(U.nextSibling),U===null){A=null;break e}}A=U}A!==null?(a.memoizedState={dehydrated:A,treeContext:pr!==null?{id:hi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},U=pn(18,null,null,0),U.stateNode=A,U.return=a,a.child=U,tn=a,Tt=null,U=!0):U=!1}U||yr(a)}if(A=a.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return wd(A)?a.lanes=32:a.lanes=536870912,null;vi(a)}return A=d.children,d=d.fallback,y?(Ui(),y=a.mode,A=so({mode:"hidden",children:A},y),d=hr(d,y,c,null),A.return=a,d.return=a,A.sibling=d,a.child=A,y=a.child,y.memoizedState=Ou(c),y.childLanes=Bu(r,T,c),a.memoizedState=Pu,d):(Bi(a),Uu(a,A))}if(U=r.memoizedState,U!==null&&(A=U.dehydrated,A!==null)){if(b)a.flags&256?(Bi(a),a.flags&=-257,a=zu(r,a,c)):a.memoizedState!==null?(Ui(),a.child=r.child,a.flags|=128,a=null):(Ui(),y=d.fallback,A=a.mode,d=so({mode:"visible",children:d.children},A),y=hr(y,A,c,null),y.flags|=2,d.return=a,y.return=a,d.sibling=y,a.child=d,us(a,r.child,null,c),d=a.child,d.memoizedState=Ou(c),d.childLanes=Bu(r,T,c),a.memoizedState=Pu,a=y);else if(Bi(a),wd(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var te=T.dgst;T=te,d=Error(i(419)),d.stack="",d.digest=T,da({value:d,source:null,stack:null}),a=zu(r,a,c)}else if($t||fa(r,a,c,!1),T=(c&r.childLanes)!==0,$t||T){if(T=gt,T!==null&&(d=c&-c,d=(d&42)!==0?1:ke(d),d=(d&(T.suspendedLanes|c))!==0?0:d,d!==0&&d!==U.retryLane))throw U.retryLane=d,Xr(r,d),bn(T,r,d),Jp;A.data==="$?"||rd(),a=zu(r,a,c)}else A.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=U.treeContext,Tt=Un(A.nextSibling),tn=a,at=!0,xr=null,Gn=!1,r!==null&&(En[An++]=hi,En[An++]=pi,En[An++]=pr,hi=r.id,pi=r.overflow,pr=a),a=Uu(a,d.children),a.flags|=4096);return a}return y?(Ui(),y=d.fallback,A=a.mode,U=r.child,te=U.sibling,d=mi(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,te!==null?y=mi(te,y):(y=hr(y,A,c,null),y.flags|=2),y.return=a,d.return=a,d.sibling=y,a.child=d,d=y,y=a.child,A=r.child.memoizedState,A===null?A=Ou(c):(U=A.cachePool,U!==null?(te=Dt._currentValue,U=U.parent!==te?{parent:te,pool:te}:U):U=$h(),A={baseLanes:A.baseLanes|c,cachePool:U}),y.memoizedState=A,y.childLanes=Bu(r,T,c),a.memoizedState=Pu,d):(Bi(a),c=r.child,r=c.sibling,c=mi(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=c,a.memoizedState=null,c)}function Uu(r,a){return a=so({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function so(r,a){return r=pn(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function zu(r,a,c){return us(a,r.child,null,c),r=Uu(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function ig(r,a,c){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),ru(r.return,a,c)}function Vu(r,a,c,d,y){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=y)}function rg(r,a,c){var d=a.pendingProps,y=d.revealOrder,b=d.tail;if(Gt(r,a,d.children,c),d=Lt.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ig(r,c,a);else if(r.tag===19)ig(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(M(Lt,d),y){case"forwards":for(c=a.child,y=null;c!==null;)r=c.alternate,r!==null&&to(r)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),Vu(a,!1,y,c,b);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(r=y.alternate,r!==null&&to(r)===null){a.child=y;break}r=y.sibling,y.sibling=c,c=y,y=r}Vu(a,!0,c,null,b);break;case"together":Vu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function bi(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),Fi|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(fa(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=mi(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=mi(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function $u(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Ul(r)))}function P2(r,a,c){switch(a.tag){case 3:ue(a,a.stateNode.containerInfo),Ii(a,Dt,r.memoizedState.cache),ua();break;case 27:case 5:Je(a);break;case 4:ue(a,a.stateNode.containerInfo);break;case 10:Ii(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Bi(a),a.flags|=128,null):(c&a.child.childLanes)!==0?ng(r,a,c):(Bi(a),r=bi(r,a,c),r!==null?r.sibling:null);Bi(a);break;case 19:var y=(r.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(fa(r,a,c,!1),d=(c&a.childLanes)!==0),y){if(d)return rg(r,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),M(Lt,Lt.current),d)break;return null;case 22:case 23:return a.lanes=0,Kp(r,a,c);case 24:Ii(a,Dt,r.memoizedState.cache)}return bi(r,a,c)}function sg(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)$t=!0;else{if(!$u(r,c)&&(a.flags&128)===0)return $t=!1,P2(r,a,c);$t=(r.flags&131072)!==0}else $t=!1,at&&(a.flags&1048576)!==0&&Lh(a,Bl,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var d=a.elementType,y=d._init;if(d=y(d._payload),a.type=d,typeof d=="function")Kc(d)?(r=Cr(d,r),a.tag=1,a=eg(null,a,d,r,c)):(a.tag=0,a=Lu(null,a,d,r,c));else{if(d!=null){if(y=d.$$typeof,y===O){a.tag=11,a=Yp(null,a,d,r,c);break e}else if(y===R){a.tag=14,a=Zp(null,a,d,r,c);break e}}throw a=$(d)||d,Error(i(306,a,""))}}return a;case 0:return Lu(r,a,a.type,a.pendingProps,c);case 1:return d=a.type,y=Cr(d,a.pendingProps),eg(r,a,d,y,c);case 3:e:{if(ue(a,a.stateNode.containerInfo),r===null)throw Error(i(387));d=a.pendingProps;var b=a.memoizedState;y=b.element,du(r,a),va(a,d,null,c);var T=a.memoizedState;if(d=T.cache,Ii(a,Dt,d),d!==b.cache&&su(a,[Dt],c,!0),ya(),d=T.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=tg(r,a,d,c);break e}else if(d!==y){y=jn(Error(i(424)),a),da(y),a=tg(r,a,d,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Tt=Un(r.firstChild),tn=a,at=!0,xr=null,Gn=!0,c=Op(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ua(),d===y){a=bi(r,a,c);break e}Gt(r,a,d,c)}a=a.child}return a;case 26:return ro(r,a),r===null?(c=c0(a.type,null,a.pendingProps,null))?a.memoizedState=c:at||(c=a.type,r=a.pendingProps,d=bo(ne.current).createElement(c),d[st]=a,d[It]=r,Yt(d,c,r),Vt(d),a.stateNode=d):a.memoizedState=c0(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Je(a),r===null&&at&&(d=a.stateNode=a0(a.type,a.pendingProps,ne.current),tn=a,Gn=!0,y=Tt,Yi(a.type)?(Nd=y,Tt=Un(d.firstChild)):Tt=y),Gt(r,a,a.pendingProps.children,c),ro(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&at&&((y=d=Tt)&&(d=uw(d,a.type,a.pendingProps,Gn),d!==null?(a.stateNode=d,tn=a,Tt=Un(d.firstChild),Gn=!1,y=!0):y=!1),y||yr(a)),Je(a),y=a.type,b=a.pendingProps,T=r!==null?r.memoizedProps:null,d=b.children,yd(y,b)?d=null:T!==null&&yd(y,T)&&(a.flags|=32),a.memoizedState!==null&&(y=xu(r,a,E2,null,null,c),Va._currentValue=y),ro(r,a),Gt(r,a,d,c),a.child;case 6:return r===null&&at&&((r=c=Tt)&&(c=dw(c,a.pendingProps,Gn),c!==null?(a.stateNode=c,tn=a,Tt=null,r=!0):r=!1),r||yr(a)),null;case 13:return ng(r,a,c);case 4:return ue(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=us(a,null,d,c):Gt(r,a,d,c),a.child;case 11:return Yp(r,a,a.type,a.pendingProps,c);case 7:return Gt(r,a,a.pendingProps,c),a.child;case 8:return Gt(r,a,a.pendingProps.children,c),a.child;case 12:return Gt(r,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,Ii(a,a.type,d.value),Gt(r,a,d.children,c),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,br(a),y=Qt(y),d=d(y),a.flags|=1,Gt(r,a,d,c),a.child;case 14:return Zp(r,a,a.type,a.pendingProps,c);case 15:return Qp(r,a,a.type,a.pendingProps,c);case 19:return rg(r,a,c);case 31:return d=a.pendingProps,c=a.mode,d={mode:d.mode,children:d.children},r===null?(c=so(d,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=mi(r.child,d),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return Kp(r,a,c);case 24:return br(a),d=Qt(Dt),r===null?(y=ou(),y===null&&(y=gt,b=au(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),a.memoizedState={parent:d,cache:y},uu(a),Ii(a,Dt,y)):((r.lanes&c)!==0&&(du(r,a),va(a,null,null,c),ya()),y=r.memoizedState,b=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Ii(a,Dt,d)):(d=b.cache,Ii(a,Dt,d),d!==y.cache&&su(a,[Dt],c,!0))),Gt(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function wi(r){r.flags|=4}function ag(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!h0(a)){if(a=_n.current,a!==null&&((et&4194048)===et?Jn!==null:(et&62914560)!==et&&(et&536870912)===0||a!==Jn))throw ga=cu,qh;r.flags|=8192}}function ao(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ks():536870912,r.lanes|=a,hs|=a)}function ja(r,a){if(!at)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Ct(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(a)for(var y=r.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=d,r.childLanes=c,a}function O2(r,a,c){var d=a.pendingProps;switch(tu(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(a),null;case 1:return Ct(a),null;case 3:return c=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),xi(Dt),Ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ca(a)?wi(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bh())),Ct(a),null;case 26:return c=a.memoizedState,r===null?(wi(a),c!==null?(Ct(a),ag(a,c)):(Ct(a),a.flags&=-16777217)):c?c!==r.memoizedState?(wi(a),Ct(a),ag(a,c)):(Ct(a),a.flags&=-16777217):(r.memoizedProps!==d&&wi(a),Ct(a),a.flags&=-16777217),null;case 27:Xe(a),c=ne.current;var y=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==d&&wi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ct(a),null}r=ge.current,ca(a)?Ph(a):(r=a0(y,d,c),a.stateNode=r,wi(a))}return Ct(a),null;case 5:if(Xe(a),c=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&wi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Ct(a),null}if(r=ge.current,ca(a))Ph(a);else{switch(y=bo(ne.current),r){case 1:r=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}r[st]=a,r[It]=d;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)r.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=r;e:switch(Yt(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&wi(a)}}return Ct(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&wi(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(r=ne.current,ca(a)){if(r=a.stateNode,c=a.memoizedProps,d=null,y=tn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}r[st]=a,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Xg(r.nodeValue,c)),r||yr(a)}else r=bo(r).createTextNode(d),r[st]=a,a.stateNode=r}return Ct(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=ca(a),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[st]=a}else ua(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ct(a),y=!1}else y=Bh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(vi(a),a):(vi(a),null)}if(vi(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return c!==r&&c&&(a.child.flags|=8192),ao(a,a.updateQueue),Ct(a),null;case 4:return Ne(),r===null&&md(a.stateNode.containerInfo),Ct(a),null;case 10:return xi(a.type),Ct(a),null;case 19:if(ee(Lt),y=a.memoizedState,y===null)return Ct(a),null;if(d=(a.flags&128)!==0,b=y.rendering,b===null)if(d)ja(y,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(b=to(r),b!==null){for(a.flags|=128,ja(y,!1),r=b.updateQueue,a.updateQueue=r,ao(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)Dh(c,r),c=c.sibling;return M(Lt,Lt.current&1|2),a.child}r=r.sibling}y.tail!==null&&Bt()>co&&(a.flags|=128,d=!0,ja(y,!1),a.lanes=4194304)}else{if(!d)if(r=to(b),r!==null){if(a.flags|=128,d=!0,r=r.updateQueue,a.updateQueue=r,ao(a,r),ja(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!at)return Ct(a),null}else 2*Bt()-y.renderingStartTime>co&&c!==536870912&&(a.flags|=128,d=!0,ja(y,!1),a.lanes=4194304);y.isBackwards?(b.sibling=a.child,a.child=b):(r=y.last,r!==null?r.sibling=b:a.child=b,y.last=b)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Bt(),a.sibling=null,r=Lt.current,M(Lt,d?r&1|2:r&1),a):(Ct(a),null);case 22:case 23:return vi(a),pu(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(Ct(a),a.subtreeFlags&6&&(a.flags|=8192)):Ct(a),c=a.updateQueue,c!==null&&ao(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),r!==null&&ee(wr),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),xi(Dt),Ct(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function B2(r,a){switch(tu(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return xi(Dt),Ne(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Xe(a),null;case 13:if(vi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ua()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ee(Lt),null;case 4:return Ne(),null;case 10:return xi(a.type),null;case 22:case 23:return vi(a),pu(),r!==null&&ee(wr),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return xi(Dt),null;case 25:return null;default:return null}}function lg(r,a){switch(tu(a),a.tag){case 3:xi(Dt),Ne();break;case 26:case 27:case 5:Xe(a);break;case 4:Ne();break;case 13:vi(a);break;case 19:ee(Lt);break;case 10:xi(a.type);break;case 22:case 23:vi(a),pu(),r!==null&&ee(wr);break;case 24:xi(Dt)}}function ka(r,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&r)===r){d=void 0;var b=c.create,T=c.inst;d=b(),T.destroy=d}c=c.next}while(c!==y)}}catch(A){pt(a,a.return,A)}}function zi(r,a,c){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&r)===r){var T=d.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,y=a;var U=c,te=A;try{te()}catch(oe){pt(y,U,oe)}}}d=d.next}while(d!==b)}}catch(oe){pt(a,a.return,oe)}}function og(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{Zh(a,c)}catch(d){pt(r,r.return,d)}}}function cg(r,a,c){c.props=Cr(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){pt(r,a,d)}}function Ea(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(y){pt(r,a,y)}}function Yn(r,a){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){pt(r,a,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){pt(r,a,y)}else c.current=null}function ug(r){var a=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){pt(r,r.return,y)}}function qu(r,a,c){try{var d=r.stateNode;sw(d,r.type,c,a),d[It]=a}catch(y){pt(r,r.return,y)}}function dg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Yi(r.type)||r.tag===4}function Fu(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||dg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Yi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hu(r,a,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=vo));else if(d!==4&&(d===27&&Yi(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(Hu(r,a,c),r=r.sibling;r!==null;)Hu(r,a,c),r=r.sibling}function lo(r,a,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(d!==4&&(d===27&&Yi(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(lo(r,a,c),r=r.sibling;r!==null;)lo(r,a,c),r=r.sibling}function fg(r){var a=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Yt(a,d,c),a[st]=r,a[It]=c}catch(b){pt(r,r.return,b)}}var Ni=!1,Et=!1,Gu=!1,mg=typeof WeakSet=="function"?WeakSet:Set,qt=null;function U2(r,a){if(r=r.containerInfo,gd=jo,r=Sh(r),Fc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var T=0,A=-1,U=-1,te=0,oe=0,de=r,ie=null;t:for(;;){for(var re;de!==c||y!==0&&de.nodeType!==3||(A=T+y),de!==b||d!==0&&de.nodeType!==3||(U=T+d),de.nodeType===3&&(T+=de.nodeValue.length),(re=de.firstChild)!==null;)ie=de,de=re;for(;;){if(de===r)break t;if(ie===c&&++te===y&&(A=T),ie===b&&++oe===d&&(U=T),(re=de.nextSibling)!==null)break;de=ie,ie=de.parentNode}de=re}c=A===-1||U===-1?null:{start:A,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(xd={focusedElem:r,selectionRange:c},jo=!1,qt=a;qt!==null;)if(a=qt,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,qt=r;else for(;qt!==null;){switch(a=qt,b=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=a,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var De=Cr(c.type,y,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(De,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(Me){pt(c,c.return,Me)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)bd(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,qt=r;break}qt=a.return}}function hg(r,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Vi(r,c),d&4&&ka(5,c);break;case 1:if(Vi(r,c),d&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(T){pt(c,c.return,T)}else{var y=Cr(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(y,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){pt(c,c.return,T)}}d&64&&og(c),d&512&&Ea(c,c.return);break;case 3:if(Vi(r,c),d&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Zh(r,a)}catch(T){pt(c,c.return,T)}}break;case 27:a===null&&d&4&&fg(c);case 26:case 5:Vi(r,c),a===null&&d&4&&ug(c),d&512&&Ea(c,c.return);break;case 12:Vi(r,c);break;case 13:Vi(r,c),d&4&&xg(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Y2.bind(null,c),fw(r,c))));break;case 22:if(d=c.memoizedState!==null||Ni,!d){a=a!==null&&a.memoizedState!==null||Et,y=Ni;var b=Et;Ni=d,(Et=a)&&!b?$i(r,c,(c.subtreeFlags&8772)!==0):Vi(r,c),Ni=y,Et=b}break;case 30:break;default:Vi(r,c)}}function pg(r){var a=r.alternate;a!==null&&(r.alternate=null,pg(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Tc(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Nt=null,ln=!1;function Ci(r,a,c){for(c=c.child;c!==null;)gg(r,a,c),c=c.sibling}function gg(r,a,c){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(le,c)}catch{}switch(c.tag){case 26:Et||Yn(c,a),Ci(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Et||Yn(c,a);var d=Nt,y=ln;Yi(c.type)&&(Nt=c.stateNode,ln=!1),Ci(r,a,c),Oa(c.stateNode),Nt=d,ln=y;break;case 5:Et||Yn(c,a);case 6:if(d=Nt,y=ln,Nt=null,Ci(r,a,c),Nt=d,ln=y,Nt!==null)if(ln)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(c.stateNode)}catch(b){pt(c,a,b)}else try{Nt.removeChild(c.stateNode)}catch(b){pt(c,a,b)}break;case 18:Nt!==null&&(ln?(r=Nt,r0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Ha(r)):r0(Nt,c.stateNode));break;case 4:d=Nt,y=ln,Nt=c.stateNode.containerInfo,ln=!0,Ci(r,a,c),Nt=d,ln=y;break;case 0:case 11:case 14:case 15:Et||zi(2,c,a),Et||zi(4,c,a),Ci(r,a,c);break;case 1:Et||(Yn(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&cg(c,a,d)),Ci(r,a,c);break;case 21:Ci(r,a,c);break;case 22:Et=(d=Et)||c.memoizedState!==null,Ci(r,a,c),Et=d;break;default:Ci(r,a,c)}}function xg(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ha(r)}catch(c){pt(a,a.return,c)}}function z2(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new mg),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new mg),a;default:throw Error(i(435,r.tag))}}function Ju(r,a){var c=z2(r);a.forEach(function(d){var y=Z2.bind(null,r,d);c.has(d)||(c.add(d),d.then(y,y))})}function gn(r,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=r,T=a,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Yi(A.type)){Nt=A.stateNode,ln=!1;break e}break;case 5:Nt=A.stateNode,ln=!1;break e;case 3:case 4:Nt=A.stateNode.containerInfo,ln=!0;break e}A=A.return}if(Nt===null)throw Error(i(160));gg(b,T,y),Nt=null,ln=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)yg(a,r),a=a.sibling}var Bn=null;function yg(r,a){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:gn(a,r),xn(r),d&4&&(zi(3,r,r.return),ka(3,r),zi(5,r,r.return));break;case 1:gn(a,r),xn(r),d&512&&(Et||c===null||Yn(c,c.return)),d&64&&Ni&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Bn;if(gn(a,r),xn(r),d&512&&(Et||c===null||Yn(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Ws]||b[st]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Yt(b,d,c),b[st]=r,Vt(b),d=b;break e;case"link":var T=f0("link","href",y).get(d+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}b=y.createElement(d),Yt(b,d,c),y.head.appendChild(b);break;case"meta":if(T=f0("meta","content",y).get(d+(c.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}b=y.createElement(d),Yt(b,d,c),y.head.appendChild(b);break;default:throw Error(i(468,d))}b[st]=r,Vt(b),d=b}r.stateNode=d}else m0(y,r.type,r.stateNode);else r.stateNode=d0(y,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?m0(y,r.type,r.stateNode):d0(y,d,r.memoizedProps)):d===null&&r.stateNode!==null&&qu(r,r.memoizedProps,c.memoizedProps)}break;case 27:gn(a,r),xn(r),d&512&&(Et||c===null||Yn(c,c.return)),c!==null&&d&4&&qu(r,r.memoizedProps,c.memoizedProps);break;case 5:if(gn(a,r),xn(r),d&512&&(Et||c===null||Yn(c,c.return)),r.flags&32){y=r.stateNode;try{Gr(y,"")}catch(re){pt(r,r.return,re)}}d&4&&r.stateNode!=null&&(y=r.memoizedProps,qu(r,y,c!==null?c.memoizedProps:y)),d&1024&&(Gu=!0);break;case 6:if(gn(a,r),xn(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(re){pt(r,r.return,re)}}break;case 3:if(Co=null,y=Bn,Bn=wo(a.containerInfo),gn(a,r),Bn=y,xn(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ha(a.containerInfo)}catch(re){pt(r,r.return,re)}Gu&&(Gu=!1,vg(r));break;case 4:d=Bn,Bn=wo(r.stateNode.containerInfo),gn(a,r),xn(r),Bn=d;break;case 12:gn(a,r),xn(r);break;case 13:gn(a,r),xn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Xu=Bt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Ju(r,d)));break;case 22:y=r.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,te=Ni,oe=Et;if(Ni=te||y,Et=oe||U,gn(a,r),Et=oe,Ni=te,xn(r),d&8192)e:for(a=r.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(c===null||U||Ni||Et||Sr(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){U=c=a;try{if(b=U.stateNode,y)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=U.stateNode;var de=U.memoizedProps.style,ie=de!=null&&de.hasOwnProperty("display")?de.display:null;A.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(re){pt(U,U.return,re)}}}else if(a.tag===6){if(c===null){U=a;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(re){pt(U,U.return,re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Ju(r,c))));break;case 19:gn(a,r),xn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Ju(r,d)));break;case 30:break;case 21:break;default:gn(a,r),xn(r)}}function xn(r){var a=r.flags;if(a&2){try{for(var c,d=r.return;d!==null;){if(dg(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var y=c.stateNode,b=Fu(r);lo(r,b,y);break;case 5:var T=c.stateNode;c.flags&32&&(Gr(T,""),c.flags&=-33);var A=Fu(r);lo(r,A,T);break;case 3:case 4:var U=c.stateNode.containerInfo,te=Fu(r);Hu(r,te,U);break;default:throw Error(i(161))}}catch(oe){pt(r,r.return,oe)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function vg(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;vg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Vi(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)hg(r,a.alternate,a),a=a.sibling}function Sr(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:zi(4,a,a.return),Sr(a);break;case 1:Yn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&cg(a,a.return,c),Sr(a);break;case 27:Oa(a.stateNode);case 26:case 5:Yn(a,a.return),Sr(a);break;case 22:a.memoizedState===null&&Sr(a);break;case 30:Sr(a);break;default:Sr(a)}r=r.sibling}}function $i(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=r,b=a,T=b.flags;switch(b.tag){case 0:case 11:case 15:$i(y,b,c),ka(4,b);break;case 1:if($i(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){pt(d,d.return,te)}if(d=b,y=d.updateQueue,y!==null){var A=d.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Yh(U[y],A)}catch(te){pt(d,d.return,te)}}c&&T&64&&og(b),Ea(b,b.return);break;case 27:fg(b);case 26:case 5:$i(y,b,c),c&&d===null&&T&4&&ug(b),Ea(b,b.return);break;case 12:$i(y,b,c);break;case 13:$i(y,b,c),c&&T&4&&xg(y,b);break;case 22:b.memoizedState===null&&$i(y,b,c),Ea(b,b.return);break;case 30:break;default:$i(y,b,c)}a=a.sibling}}function Yu(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&ma(c))}function Zu(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ma(r))}function Zn(r,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bg(r,a,c,d),a=a.sibling}function bg(r,a,c,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:Zn(r,a,c,d),y&2048&&ka(9,a);break;case 1:Zn(r,a,c,d);break;case 3:Zn(r,a,c,d),y&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ma(r)));break;case 12:if(y&2048){Zn(r,a,c,d),r=a.stateNode;try{var b=a.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){pt(a,a.return,U)}}else Zn(r,a,c,d);break;case 13:Zn(r,a,c,d);break;case 23:break;case 22:b=a.stateNode,T=a.alternate,a.memoizedState!==null?b._visibility&2?Zn(r,a,c,d):Aa(r,a):b._visibility&2?Zn(r,a,c,d):(b._visibility|=2,ds(r,a,c,d,(a.subtreeFlags&10256)!==0)),y&2048&&Yu(T,a);break;case 24:Zn(r,a,c,d),y&2048&&Zu(a.alternate,a);break;default:Zn(r,a,c,d)}}function ds(r,a,c,d,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=r,T=a,A=c,U=d,te=T.flags;switch(T.tag){case 0:case 11:case 15:ds(b,T,A,U,y),ka(8,T);break;case 23:break;case 22:var oe=T.stateNode;T.memoizedState!==null?oe._visibility&2?ds(b,T,A,U,y):Aa(b,T):(oe._visibility|=2,ds(b,T,A,U,y)),y&&te&2048&&Yu(T.alternate,T);break;case 24:ds(b,T,A,U,y),y&&te&2048&&Zu(T.alternate,T);break;default:ds(b,T,A,U,y)}a=a.sibling}}function Aa(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,d=a,y=d.flags;switch(d.tag){case 22:Aa(c,d),y&2048&&Yu(d.alternate,d);break;case 24:Aa(c,d),y&2048&&Zu(d.alternate,d);break;default:Aa(c,d)}a=a.sibling}}var _a=8192;function fs(r){if(r.subtreeFlags&_a)for(r=r.child;r!==null;)wg(r),r=r.sibling}function wg(r){switch(r.tag){case 26:fs(r),r.flags&_a&&r.memoizedState!==null&&Tw(Bn,r.memoizedState,r.memoizedProps);break;case 5:fs(r);break;case 3:case 4:var a=Bn;Bn=wo(r.stateNode.containerInfo),fs(r),Bn=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=_a,_a=16777216,fs(r),_a=a):fs(r));break;default:fs(r)}}function Ng(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Ma(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];qt=d,Sg(d,r)}Ng(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cg(r),r=r.sibling}function Cg(r){switch(r.tag){case 0:case 11:case 15:Ma(r),r.flags&2048&&zi(9,r,r.return);break;case 3:Ma(r);break;case 12:Ma(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,oo(r)):Ma(r);break;default:Ma(r)}}function oo(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];qt=d,Sg(d,r)}Ng(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:zi(8,a,a.return),oo(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,oo(a));break;default:oo(a)}r=r.sibling}}function Sg(r,a){for(;qt!==null;){var c=qt;switch(c.tag){case 0:case 11:case 15:zi(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ma(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,qt=d;else e:for(c=r;qt!==null;){d=qt;var y=d.sibling,b=d.return;if(pg(d),d===c){qt=null;break e}if(y!==null){y.return=b,qt=y;break e}qt=b}}}var V2={getCacheForType:function(r){var a=Qt(Dt),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c}},$2=typeof WeakMap=="function"?WeakMap:Map,ot=0,gt=null,Ze=null,et=0,ct=0,yn=null,qi=!1,ms=!1,Qu=!1,Si=0,jt=0,Fi=0,Tr=0,Ku=0,Mn=0,hs=0,Ra=null,on=null,Wu=!1,Xu=0,co=1/0,uo=null,Hi=null,Jt=0,Gi=null,ps=null,gs=0,ed=0,td=null,Tg=null,Ia=0,nd=null;function vn(){if((ot&2)!==0&&et!==0)return et&-et;if(P.T!==null){var r=is;return r!==0?r:cd()}return He()}function jg(){Mn===0&&(Mn=(et&536870912)===0||at?Qs():536870912);var r=_n.current;return r!==null&&(r.flags|=32),Mn}function bn(r,a,c){(r===gt&&(ct===2||ct===9)||r.cancelPendingCommit!==null)&&(xs(r,0),Ji(r,et,Mn,!1)),se(r,c),((ot&2)===0||r!==gt)&&(r===gt&&((ot&2)===0&&(Tr|=c),jt===4&&Ji(r,et,Mn,!1)),Qn(r))}function kg(r,a,c){if((ot&6)!==0)throw Error(i(327));var d=!c&&(a&124)===0&&(a&r.expiredLanes)===0||Ht(r,a),y=d?H2(r,a):sd(r,a,!0),b=d;do{if(y===0){ms&&!d&&Ji(r,a,0,!1);break}else{if(c=r.current.alternate,b&&!q2(c)){y=sd(r,a,!1),b=!1;continue}if(y===2){if(b=a,r.errorRecoveryDisabledLanes&b)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var A=r;y=Ra;var U=A.current.memoizedState.isDehydrated;if(U&&(xs(A,T).flags|=256),T=sd(A,T,!1),T!==2){if(Qu&&!U){A.errorRecoveryDisabledLanes|=b,Tr|=b,y=4;break e}b=on,on=y,b!==null&&(on===null?on=b:on.push.apply(on,b))}y=T}if(b=!1,y!==2)continue}}if(y===1){xs(r,0),Ji(r,a,0,!0);break}e:{switch(d=r,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ji(d,a,Mn,!qi);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Xu+300-Bt(),10<y)){if(Ji(d,a,Mn,!qi),ze(d,0,!0)!==0)break e;d.timeoutHandle=n0(Eg.bind(null,d,c,on,uo,Wu,a,Mn,Tr,hs,qi,b,2,-0,0),y);break e}Eg(d,c,on,uo,Wu,a,Mn,Tr,hs,qi,b,0,-0,0)}}break}while(!0);Qn(r)}function Eg(r,a,c,d,y,b,T,A,U,te,oe,de,ie,re){if(r.timeoutHandle=-1,de=a.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(za={stylesheets:null,count:0,unsuspend:Sw},wg(a),de=jw(),de!==null)){r.cancelPendingCommit=de(Lg.bind(null,r,a,b,c,d,y,T,A,U,oe,1,ie,re)),Ji(r,b,T,!te);return}Lg(r,a,b,c,d,y,T,A,U)}function q2(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!hn(b(),y))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ji(r,a,c,d){a&=~Ku,a&=~Tr,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var y=a;0<y;){var b=31-pe(y),T=1<<b;d[b]=-1,y&=~T}c!==0&&ve(r,c,a)}function fo(){return(ot&6)===0?(Da(0),!1):!0}function id(){if(Ze!==null){if(ct===0)var r=Ze.return;else r=Ze,gi=vr=null,bu(r),cs=null,Sa=0,r=Ze;for(;r!==null;)lg(r.alternate,r),r=r.return;Ze=null}}function xs(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,lw(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),id(),gt=r,Ze=c=mi(r.current,null),et=a,ct=0,yn=null,qi=!1,ms=Ht(r,a),Qu=!1,hs=Mn=Ku=Tr=Fi=jt=0,on=Ra=null,Wu=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var y=31-pe(d),b=1<<y;a|=r[y],d&=~b}return Si=a,Il(),c}function Ag(r,a){Ge=null,P.H=Wl,a===pa||a===$l?(a=Gh(),ct=3):a===qh?(a=Gh(),ct=4):ct=a===Jp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yn=a,Ze===null&&(jt=1,io(r,jn(a,r.current)))}function _g(){var r=P.H;return P.H=Wl,r===null?Wl:r}function Mg(){var r=P.A;return P.A=V2,r}function rd(){jt=4,qi||(et&4194048)!==et&&_n.current!==null||(ms=!0),(Fi&134217727)===0&&(Tr&134217727)===0||gt===null||Ji(gt,et,Mn,!1)}function sd(r,a,c){var d=ot;ot|=2;var y=_g(),b=Mg();(gt!==r||et!==a)&&(uo=null,xs(r,a)),a=!1;var T=jt;e:do try{if(ct!==0&&Ze!==null){var A=Ze,U=yn;switch(ct){case 8:id(),T=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(a=!0);var te=ct;if(ct=0,yn=null,ys(r,A,U,te),c&&ms){T=0;break e}break;default:te=ct,ct=0,yn=null,ys(r,A,U,te)}}F2(),T=jt;break}catch(oe){Ag(r,oe)}while(!0);return a&&r.shellSuspendCounter++,gi=vr=null,ot=d,P.H=y,P.A=b,Ze===null&&(gt=null,et=0,Il()),T}function F2(){for(;Ze!==null;)Rg(Ze)}function H2(r,a){var c=ot;ot|=2;var d=_g(),y=Mg();gt!==r||et!==a?(uo=null,co=Bt()+500,xs(r,a)):ms=Ht(r,a);e:do try{if(ct!==0&&Ze!==null){a=Ze;var b=yn;t:switch(ct){case 1:ct=0,yn=null,ys(r,a,b,1);break;case 2:case 9:if(Fh(b)){ct=0,yn=null,Ig(a);break}a=function(){ct!==2&&ct!==9||gt!==r||(ct=7),Qn(r)},b.then(a,a);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Fh(b)?(ct=0,yn=null,Ig(a)):(ct=0,yn=null,ys(r,a,b,7));break;case 5:var T=null;switch(Ze.tag){case 26:T=Ze.memoizedState;case 5:case 27:var A=Ze;if(!T||h0(T)){ct=0,yn=null;var U=A.sibling;if(U!==null)Ze=U;else{var te=A.return;te!==null?(Ze=te,mo(te)):Ze=null}break t}}ct=0,yn=null,ys(r,a,b,5);break;case 6:ct=0,yn=null,ys(r,a,b,6);break;case 8:id(),jt=6;break e;default:throw Error(i(462))}}G2();break}catch(oe){Ag(r,oe)}while(!0);return gi=vr=null,P.H=d,P.A=y,ot=c,Ze!==null?0:(gt=null,et=0,Il(),jt)}function G2(){for(;Ze!==null&&!Xt();)Rg(Ze)}function Rg(r){var a=sg(r.alternate,r,Si);r.memoizedProps=r.pendingProps,a===null?mo(r):Ze=a}function Ig(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=Xp(c,a,a.pendingProps,a.type,void 0,et);break;case 11:a=Xp(c,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:bu(a);default:lg(c,a),a=Ze=Dh(a,Si),a=sg(c,a,Si)}r.memoizedProps=r.pendingProps,a===null?mo(r):Ze=a}function ys(r,a,c,d){gi=vr=null,bu(a),cs=null,Sa=0;var y=a.return;try{if(L2(r,y,a,c,et)){jt=1,io(r,jn(c,r.current)),Ze=null;return}}catch(b){if(y!==null)throw Ze=y,b;jt=1,io(r,jn(c,r.current)),Ze=null;return}a.flags&32768?(at||d===1?r=!0:ms||(et&536870912)!==0?r=!1:(qi=r=!0,(d===2||d===9||d===3||d===6)&&(d=_n.current,d!==null&&d.tag===13&&(d.flags|=16384))),Dg(a,r)):mo(a)}function mo(r){var a=r;do{if((a.flags&32768)!==0){Dg(a,qi);return}r=a.return;var c=O2(a.alternate,a,Si);if(c!==null){Ze=c;return}if(a=a.sibling,a!==null){Ze=a;return}Ze=a=r}while(a!==null);jt===0&&(jt=5)}function Dg(r,a){do{var c=B2(r.alternate,r);if(c!==null){c.flags&=32767,Ze=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Ze=r;return}Ze=r=c}while(r!==null);jt=6,Ze=null}function Lg(r,a,c,d,y,b,T,A,U){r.cancelPendingCommit=null;do ho();while(Jt!==0);if((ot&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Zc,be(r,c,b,T,A,U),r===gt&&(Ze=gt=null,et=0),ps=a,Gi=r,gs=c,ed=b,td=y,Tg=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Q2(Hn,function(){return zg(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,y=Z.p,Z.p=2,T=ot,ot|=4;try{U2(r,a,c)}finally{ot=T,Z.p=y,P.T=d}}Jt=1,Pg(),Og(),Bg()}}function Pg(){if(Jt===1){Jt=0;var r=Gi,a=ps,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=Z.p;Z.p=2;var y=ot;ot|=4;try{yg(a,r);var b=xd,T=Sh(r.containerInfo),A=b.focusedElem,U=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&Ch(A.ownerDocument.documentElement,A)){if(U!==null&&Fc(A)){var te=U.start,oe=U.end;if(oe===void 0&&(oe=te),"selectionStart"in A)A.selectionStart=te,A.selectionEnd=Math.min(oe,A.value.length);else{var de=A.ownerDocument||document,ie=de&&de.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),De=A.textContent.length,Me=Math.min(U.start,De),mt=U.end===void 0?Me:Math.min(U.end,De);!re.extend&&Me>mt&&(T=mt,mt=Me,Me=T);var K=Nh(A,Me),F=Nh(A,mt);if(K&&F&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var X=de.createRange();X.setStart(K.node,K.offset),re.removeAllRanges(),Me>mt?(re.addRange(X),re.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),re.addRange(X))}}}}for(de=[],re=A;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<de.length;A++){var ce=de[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}jo=!!gd,xd=gd=null}finally{ot=y,Z.p=d,P.T=c}}r.current=a,Jt=2}}function Og(){if(Jt===2){Jt=0;var r=Gi,a=ps,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=Z.p;Z.p=2;var y=ot;ot|=4;try{hg(r,a.alternate,a)}finally{ot=y,Z.p=d,P.T=c}}Jt=3}}function Bg(){if(Jt===4||Jt===3){Jt=0,Cn();var r=Gi,a=ps,c=gs,d=Tg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,ps=Gi=null,Ug(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Hi=null),Ie(c),a=a.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(le,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=P.T,y=Z.p,Z.p=2,P.T=null;try{for(var b=r.onRecoverableError,T=0;T<d.length;T++){var A=d[T];b(A.value,{componentStack:A.stack})}}finally{P.T=a,Z.p=y}}(gs&3)!==0&&ho(),Qn(r),y=r.pendingLanes,(c&4194090)!==0&&(y&42)!==0?r===nd?Ia++:(Ia=0,nd=r):Ia=0,Da(0)}}function Ug(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,ma(a)))}function ho(r){return Pg(),Og(),Bg(),zg()}function zg(){if(Jt!==5)return!1;var r=Gi,a=ed;ed=0;var c=Ie(gs),d=P.T,y=Z.p;try{Z.p=32>c?32:c,P.T=null,c=td,td=null;var b=Gi,T=gs;if(Jt=0,ps=Gi=null,gs=0,(ot&6)!==0)throw Error(i(331));var A=ot;if(ot|=4,Cg(b.current),bg(b,b.current,T,c),ot=A,Da(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(le,b)}catch{}return!0}finally{Z.p=y,P.T=d,Ug(r,a)}}function Vg(r,a,c){a=jn(c,a),a=Du(r.stateNode,a,2),r=Pi(r,a,2),r!==null&&(se(r,2),Qn(r))}function pt(r,a,c){if(r.tag===3)Vg(r,r,c);else for(;a!==null;){if(a.tag===3){Vg(a,r,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Hi===null||!Hi.has(d))){r=jn(c,r),c=Hp(2),d=Pi(a,c,2),d!==null&&(Gp(c,d,a,r),se(d,2),Qn(d));break}}a=a.return}}function ad(r,a,c){var d=r.pingCache;if(d===null){d=r.pingCache=new $2;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(c)||(Qu=!0,y.add(c),r=J2.bind(null,r,a,c),a.then(r,r))}function J2(r,a,c){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,gt===r&&(et&c)===c&&(jt===4||jt===3&&(et&62914560)===et&&300>Bt()-Xu?(ot&2)===0&&xs(r,0):Ku|=c,hs===et&&(hs=0)),Qn(r)}function $g(r,a){a===0&&(a=Ks()),r=Xr(r,a),r!==null&&(se(r,a),Qn(r))}function Y2(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),$g(r,c)}function Z2(r,a){var c=0;switch(r.tag){case 13:var d=r.stateNode,y=r.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),$g(r,c)}function Q2(r,a){return wt(r,a)}var po=null,vs=null,ld=!1,go=!1,od=!1,jr=0;function Qn(r){r!==vs&&r.next===null&&(vs===null?po=vs=r:vs=vs.next=r),go=!0,ld||(ld=!0,W2())}function Da(r,a){if(!od&&go){od=!0;do for(var c=!1,d=po;d!==null;){if(r!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var T=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-pe(42|r)+1)-1,b&=y&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Gg(d,b))}else b=et,b=ze(d,d===gt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Ht(d,b)||(c=!0,Gg(d,b));d=d.next}while(c);od=!1}}function K2(){qg()}function qg(){go=ld=!1;var r=0;jr!==0&&(aw()&&(r=jr),jr=0);for(var a=Bt(),c=null,d=po;d!==null;){var y=d.next,b=Fg(d,a);b===0?(d.next=null,c===null?po=y:c.next=y,y===null&&(vs=c)):(c=d,(r!==0||(b&3)!==0)&&(go=!0)),d=y}Da(r)}function Fg(r,a){for(var c=r.suspendedLanes,d=r.pingedLanes,y=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var T=31-pe(b),A=1<<T,U=y[T];U===-1?((A&c)===0||(A&d)!==0)&&(y[T]=zt(A,a)):U<=a&&(r.expiredLanes|=A),b&=~A}if(a=gt,c=et,c=ze(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===a&&(ct===2||ct===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Ot(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ht(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(d!==null&&Ot(d),Ie(c)){case 2:case 8:c=oi;break;case 32:c=Hn;break;case 268435456:c=Pn;break;default:c=Hn}return d=Hg.bind(null,r),c=wt(c,d),r.callbackPriority=a,r.callbackNode=c,a}return d!==null&&d!==null&&Ot(d),r.callbackPriority=2,r.callbackNode=null,2}function Hg(r,a){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(ho()&&r.callbackNode!==c)return null;var d=et;return d=ze(r,r===gt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(kg(r,d,a),Fg(r,Bt()),r.callbackNode!=null&&r.callbackNode===c?Hg.bind(null,r):null)}function Gg(r,a){if(ho())return null;kg(r,a,!0)}function W2(){ow(function(){(ot&6)!==0?wt(Fn,K2):qg()})}function cd(){return jr===0&&(jr=Qs()),jr}function Jg(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:jl(""+r)}function Yg(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function X2(r,a,c,d,y){if(a==="submit"&&c&&c.stateNode===y){var b=Jg((y[It]||null).action),T=d.submitter;T&&(a=(a=T[It]||null)?Jg(a.formAction):T.getAttribute("formAction"),a!==null&&(b=a,T=null));var A=new _l("action","action",null,d,y);r.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(jr!==0){var U=T?Yg(y,T):new FormData(y);Au(c,{pending:!0,data:U,method:y.method,action:b},null,U)}}else typeof b=="function"&&(A.preventDefault(),U=T?Yg(y,T):new FormData(y),Au(c,{pending:!0,data:U,method:y.method,action:b},b,U))},currentTarget:y}]})}}for(var ud=0;ud<Yc.length;ud++){var dd=Yc[ud],ew=dd.toLowerCase(),tw=dd[0].toUpperCase()+dd.slice(1);On(ew,"on"+tw)}On(kh,"onAnimationEnd"),On(Eh,"onAnimationIteration"),On(Ah,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(y2,"onTransitionRun"),On(v2,"onTransitionStart"),On(b2,"onTransitionCancel"),On(_h,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(La));function Zg(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],y=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var T=d.length-1;0<=T;T--){var A=d[T],U=A.instance,te=A.currentTarget;if(A=A.listener,U!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=te;try{b(y)}catch(oe){no(oe)}y.currentTarget=null,b=U}else for(T=0;T<d.length;T++){if(A=d[T],U=A.instance,te=A.currentTarget,A=A.listener,U!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=te;try{b(y)}catch(oe){no(oe)}y.currentTarget=null,b=U}}}}function Qe(r,a){var c=a[Ur];c===void 0&&(c=a[Ur]=new Set);var d=r+"__bubble";c.has(d)||(Qg(a,r,2,!1),c.add(d))}function fd(r,a,c){var d=0;a&&(d|=4),Qg(c,r,d,a)}var xo="_reactListening"+Math.random().toString(36).slice(2);function md(r){if(!r[xo]){r[xo]=!0,qm.forEach(function(c){c!=="selectionchange"&&(nw.has(c)||fd(c,!1,r),fd(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[xo]||(a[xo]=!0,fd("selectionchange",!1,a))}}function Qg(r,a,c,d){switch(b0(a)){case 2:var y=Aw;break;case 8:y=_w;break;default:y=kd}c=y.bind(null,a,c,r),y=void 0,!Lc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?r.addEventListener(a,c,{capture:!0,passive:y}):r.addEventListener(a,c,!0):y!==void 0?r.addEventListener(a,c,{passive:y}):r.addEventListener(a,c,!1)}function hd(r,a,c,d,y){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var A=d.stateNode.containerInfo;if(A===y)break;if(T===4)for(T=d.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;A!==null;){if(T=zr(A),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){d=b=T;continue e}A=A.parentNode}}d=d.return}ih(function(){var te=b,oe=Ic(c),de=[];e:{var ie=Mh.get(r);if(ie!==void 0){var re=_l,De=r;switch(r){case"keypress":if(El(c)===0)break e;case"keydown":case"keyup":re=Qb;break;case"focusin":De="focus",re=Uc;break;case"focusout":De="blur",re=Uc;break;case"beforeblur":case"afterblur":re=Uc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Bb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Xb;break;case kh:case Eh:case Ah:re=Vb;break;case _h:re=t2;break;case"scroll":case"scrollend":re=Pb;break;case"wheel":re=i2;break;case"copy":case"cut":case"paste":re=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=oh;break;case"toggle":case"beforetoggle":re=s2}var Me=(a&4)!==0,mt=!Me&&(r==="scroll"||r==="scrollend"),K=Me?ie!==null?ie+"Capture":null:ie;Me=[];for(var F=te,X;F!==null;){var ce=F;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||K===null||(ce=ea(F,K),ce!=null&&Me.push(Pa(F,ce,X))),mt)break;F=F.return}0<Me.length&&(ie=new re(ie,De,null,c,oe),de.push({event:ie,listeners:Me}))}}if((a&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",ie&&c!==Rc&&(De=c.relatedTarget||c.fromElement)&&(zr(De)||De[ui]))break e;if((re||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(De=c.relatedTarget||c.toElement,re=te,De=De?zr(De):null,De!==null&&(mt=o(De),Me=De.tag,De!==mt||Me!==5&&Me!==27&&Me!==6)&&(De=null)):(re=null,De=te),re!==De)){if(Me=ah,ce="onMouseLeave",K="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Me=oh,ce="onPointerLeave",K="onPointerEnter",F="pointer"),mt=re==null?ie:Xs(re),X=De==null?ie:Xs(De),ie=new Me(ce,F+"leave",re,c,oe),ie.target=mt,ie.relatedTarget=X,ce=null,zr(oe)===te&&(Me=new Me(K,F+"enter",De,c,oe),Me.target=X,Me.relatedTarget=mt,ce=Me),mt=ce,re&&De)t:{for(Me=re,K=De,F=0,X=Me;X;X=bs(X))F++;for(X=0,ce=K;ce;ce=bs(ce))X++;for(;0<F-X;)Me=bs(Me),F--;for(;0<X-F;)K=bs(K),X--;for(;F--;){if(Me===K||K!==null&&Me===K.alternate)break t;Me=bs(Me),K=bs(K)}Me=null}else Me=null;re!==null&&Kg(de,ie,re,Me,!1),De!==null&&mt!==null&&Kg(de,mt,De,Me,!0)}}e:{if(ie=te?Xs(te):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var Te=gh;else if(hh(ie))if(xh)Te=p2;else{Te=m2;var Ye=f2}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?te&&Mc(te.elementType)&&(Te=gh):Te=h2;if(Te&&(Te=Te(r,te))){ph(de,Te,c,oe);break e}Ye&&Ye(r,ie,te),r==="focusout"&&te&&ie.type==="number"&&te.memoizedProps.value!=null&&_c(ie,"number",ie.value)}switch(Ye=te?Xs(te):window,r){case"focusin":(hh(Ye)||Ye.contentEditable==="true")&&(Qr=Ye,Hc=te,oa=null);break;case"focusout":oa=Hc=Qr=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Th(de,c,oe);break;case"selectionchange":if(x2)break;case"keydown":case"keyup":Th(de,c,oe)}var _e;if(Vc)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Zr?fh(r,c)&&(Re="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(ch&&c.locale!=="ko"&&(Zr||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Zr&&(_e=rh()):(Ri=oe,Pc="value"in Ri?Ri.value:Ri.textContent,Zr=!0)),Ye=yo(te,Re),0<Ye.length&&(Re=new lh(Re,r,null,c,oe),de.push({event:Re,listeners:Ye}),_e?Re.data=_e:(_e=mh(c),_e!==null&&(Re.data=_e)))),(_e=l2?o2(r,c):c2(r,c))&&(Re=yo(te,"onBeforeInput"),0<Re.length&&(Ye=new lh("onBeforeInput","beforeinput",null,c,oe),de.push({event:Ye,listeners:Re}),Ye.data=_e)),X2(de,r,te,c,oe)}Zg(de,a)})}function Pa(r,a,c){return{instance:r,listener:a,currentTarget:c}}function yo(r,a){for(var c=a+"Capture",d=[];r!==null;){var y=r,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ea(r,c),y!=null&&d.unshift(Pa(r,y,b)),y=ea(r,a),y!=null&&d.push(Pa(r,y,b))),r.tag===3)return d;r=r.return}return[]}function bs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Kg(r,a,c,d,y){for(var b=a._reactName,T=[];c!==null&&c!==d;){var A=c,U=A.alternate,te=A.stateNode;if(A=A.tag,U!==null&&U===d)break;A!==5&&A!==26&&A!==27||te===null||(U=te,y?(te=ea(c,b),te!=null&&T.unshift(Pa(c,te,U))):y||(te=ea(c,b),te!=null&&T.push(Pa(c,te,U)))),c=c.return}T.length!==0&&r.push({event:a,listeners:T})}var iw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function Wg(r){return(typeof r=="string"?r:""+r).replace(iw,`
`).replace(rw,"")}function Xg(r,a){return a=Wg(a),Wg(r)===a}function vo(){}function ft(r,a,c,d,y,b){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Gr(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Gr(r,""+d);break;case"className":Cl(r,"class",d);break;case"tabIndex":Cl(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Cl(r,c,d);break;case"style":th(r,d,b);break;case"data":if(a!=="object"){Cl(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=jl(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&ft(r,a,"name",y.name,y,null),ft(r,a,"formEncType",y.formEncType,y,null),ft(r,a,"formMethod",y.formMethod,y,null),ft(r,a,"formTarget",y.formTarget,y,null)):(ft(r,a,"encType",y.encType,y,null),ft(r,a,"method",y.method,y,null),ft(r,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=jl(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=vo);break;case"onScroll":d!=null&&Qe("scroll",r);break;case"onScrollEnd":d!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=jl(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),Nl(r,"popover",d);break;case"xlinkActuate":di(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":di(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":di(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":di(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":di(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":di(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":di(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":di(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":di(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Nl(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Db.get(c)||c,Nl(r,c,d))}}function pd(r,a,c,d,y,b){switch(c){case"style":th(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Gr(r,d):(typeof d=="number"||typeof d=="bigint")&&Gr(r,""+d);break;case"onScroll":d!=null&&Qe("scroll",r);break;case"onScrollEnd":d!=null&&Qe("scrollend",r);break;case"onClick":d!=null&&(r.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fm.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),a=c.slice(2,y?c.length-7:void 0),b=r[It]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(a,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,d,y);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Nl(r,c,d)}}}function Yt(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var T=c[b];if(T!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ft(r,a,b,T,c,null)}}y&&ft(r,a,"srcSet",c.srcSet,c,null),d&&ft(r,a,"src",c.src,c,null);return;case"input":Qe("invalid",r);var A=b=T=y=null,U=null,te=null;for(d in c)if(c.hasOwnProperty(d)){var oe=c[d];if(oe!=null)switch(d){case"name":y=oe;break;case"type":T=oe;break;case"checked":U=oe;break;case"defaultChecked":te=oe;break;case"value":b=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:ft(r,a,d,oe,c,null)}}Km(r,b,A,U,te,T,y,!1),Sl(r);return;case"select":Qe("invalid",r),d=T=b=null;for(y in c)if(c.hasOwnProperty(y)&&(A=c[y],A!=null))switch(y){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":d=A;default:ft(r,a,y,A,c,null)}a=b,c=T,r.multiple=!!d,a!=null?Hr(r,!!d,a,!1):c!=null&&Hr(r,!!d,c,!0);return;case"textarea":Qe("invalid",r),b=y=d=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":d=A;break;case"defaultValue":y=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ft(r,a,T,A,c,null)}Xm(r,d,y,b),Sl(r);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(d=c[U],d!=null))switch(U){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ft(r,a,U,d,c,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(d=0;d<La.length;d++)Qe(La[d],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(d=c[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ft(r,a,te,d,c,null)}return;default:if(Mc(a)){for(oe in c)c.hasOwnProperty(oe)&&(d=c[oe],d!==void 0&&pd(r,a,oe,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&ft(r,a,A,d,c,null))}function sw(r,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,T=null,A=null,U=null,te=null,oe=null;for(re in c){var de=c[re];if(c.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":U=de;default:d.hasOwnProperty(re)||ft(r,a,re,null,d,de)}}for(var ie in d){var re=d[ie];if(de=c[ie],d.hasOwnProperty(ie)&&(re!=null||de!=null))switch(ie){case"type":b=re;break;case"name":y=re;break;case"checked":te=re;break;case"defaultChecked":oe=re;break;case"value":T=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:re!==de&&ft(r,a,ie,re,d,de)}}Ac(r,T,A,U,te,oe,b,y);return;case"select":re=T=A=ie=null;for(b in c)if(U=c[b],c.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":re=U;default:d.hasOwnProperty(b)||ft(r,a,b,null,d,U)}for(y in d)if(b=d[y],U=c[y],d.hasOwnProperty(y)&&(b!=null||U!=null))switch(y){case"value":ie=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==U&&ft(r,a,y,b,d,U)}a=A,c=T,d=re,ie!=null?Hr(r,!!c,ie,!1):!!d!=!!c&&(a!=null?Hr(r,!!c,a,!0):Hr(r,!!c,c?[]:"",!1));return;case"textarea":re=ie=null;for(A in c)if(y=c[A],c.hasOwnProperty(A)&&y!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ft(r,a,A,null,d,y)}for(T in d)if(y=d[T],b=c[T],d.hasOwnProperty(T)&&(y!=null||b!=null))switch(T){case"value":ie=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&ft(r,a,T,y,d,b)}Wm(r,ie,re);return;case"option":for(var De in c)if(ie=c[De],c.hasOwnProperty(De)&&ie!=null&&!d.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:ft(r,a,De,null,d,ie)}for(U in d)if(ie=d[U],re=c[U],d.hasOwnProperty(U)&&ie!==re&&(ie!=null||re!=null))switch(U){case"selected":r.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:ft(r,a,U,ie,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in c)ie=c[Me],c.hasOwnProperty(Me)&&ie!=null&&!d.hasOwnProperty(Me)&&ft(r,a,Me,null,d,ie);for(te in d)if(ie=d[te],re=c[te],d.hasOwnProperty(te)&&ie!==re&&(ie!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ft(r,a,te,ie,d,re)}return;default:if(Mc(a)){for(var mt in c)ie=c[mt],c.hasOwnProperty(mt)&&ie!==void 0&&!d.hasOwnProperty(mt)&&pd(r,a,mt,void 0,d,ie);for(oe in d)ie=d[oe],re=c[oe],!d.hasOwnProperty(oe)||ie===re||ie===void 0&&re===void 0||pd(r,a,oe,ie,d,re);return}}for(var K in c)ie=c[K],c.hasOwnProperty(K)&&ie!=null&&!d.hasOwnProperty(K)&&ft(r,a,K,null,d,ie);for(de in d)ie=d[de],re=c[de],!d.hasOwnProperty(de)||ie===re||ie==null&&re==null||ft(r,a,de,ie,d,re)}var gd=null,xd=null;function bo(r){return r.nodeType===9?r:r.ownerDocument}function e0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t0(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function yd(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vd=null;function aw(){var r=window.event;return r&&r.type==="popstate"?r===vd?!1:(vd=r,!0):(vd=null,!1)}var n0=typeof setTimeout=="function"?setTimeout:void 0,lw=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,ow=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(r){return i0.resolve(null).then(r).catch(cw)}:n0;function cw(r){setTimeout(function(){throw r})}function Yi(r){return r==="head"}function r0(r,a){var c=a,d=0,y=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var T=r.ownerDocument;if(c&1&&Oa(T.documentElement),c&2&&Oa(T.body),c&4)for(c=T.head,Oa(c),T=c.firstChild;T;){var A=T.nextSibling,U=T.nodeName;T[Ws]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=A}}if(y===0){r.removeChild(b),Ha(a);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);Ha(a)}function bd(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":bd(c),Tc(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function uw(r,a,c,d){for(;r.nodeType===1;){var y=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Ws])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Un(r.nextSibling),r===null)break}return null}function dw(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Un(r.nextSibling),r===null))return null;return r}function wd(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function fw(r,a){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Un(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var Nd=null;function s0(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return r;a--}else c==="/$"&&a++}r=r.previousSibling}return null}function a0(r,a,c){switch(a=bo(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Oa(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Tc(r)}var Rn=new Map,l0=new Set;function wo(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ti=Z.d;Z.d={f:mw,r:hw,D:pw,C:gw,L:xw,m:yw,X:bw,S:vw,M:ww};function mw(){var r=Ti.f(),a=fo();return r||a}function hw(r){var a=Vr(r);a!==null&&a.tag===5&&a.type==="form"?kp(a):Ti.r(r)}var ws=typeof document>"u"?null:document;function o0(r,a,c){var d=ws;if(d&&typeof a=="string"&&a){var y=Tn(a);y='link[rel="'+r+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),l0.has(y)||(l0.add(y),r={rel:r,crossOrigin:c,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Yt(a,"link",r),Vt(a),d.head.appendChild(a)))}}function pw(r){Ti.D(r),o0("dns-prefetch",r,null)}function gw(r,a){Ti.C(r,a),o0("preconnect",r,a)}function xw(r,a,c){Ti.L(r,a,c);var d=ws;if(d&&r&&a){var y='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Tn(c.imageSizes)+'"]')):y+='[href="'+Tn(r)+'"]';var b=y;switch(a){case"style":b=Ns(r);break;case"script":b=Cs(r)}Rn.has(b)||(r=x({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),Rn.set(b,r),d.querySelector(y)!==null||a==="style"&&d.querySelector(Ba(b))||a==="script"&&d.querySelector(Ua(b))||(a=d.createElement("link"),Yt(a,"link",r),Vt(a),d.head.appendChild(a)))}}function yw(r,a){Ti.m(r,a);var c=ws;if(c&&r){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(r)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Cs(r)}if(!Rn.has(b)&&(r=x({rel:"modulepreload",href:r},a),Rn.set(b,r),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ua(b)))return}d=c.createElement("link"),Yt(d,"link",r),Vt(d),c.head.appendChild(d)}}}function vw(r,a,c){Ti.S(r,a,c);var d=ws;if(d&&r){var y=$r(d).hoistableStyles,b=Ns(r);a=a||"default";var T=y.get(b);if(!T){var A={loading:0,preload:null};if(T=d.querySelector(Ba(b)))A.loading=5;else{r=x({rel:"stylesheet",href:r,"data-precedence":a},c),(c=Rn.get(b))&&Cd(r,c);var U=T=d.createElement("link");Vt(U),Yt(U,"link",r),U._p=new Promise(function(te,oe){U.onload=te,U.onerror=oe}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,No(T,a,d)}T={type:"stylesheet",instance:T,count:1,state:A},y.set(b,T)}}}function bw(r,a){Ti.X(r,a);var c=ws;if(c&&r){var d=$r(c).hoistableScripts,y=Cs(r),b=d.get(y);b||(b=c.querySelector(Ua(y)),b||(r=x({src:r,async:!0},a),(a=Rn.get(y))&&Sd(r,a),b=c.createElement("script"),Vt(b),Yt(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function ww(r,a){Ti.M(r,a);var c=ws;if(c&&r){var d=$r(c).hoistableScripts,y=Cs(r),b=d.get(y);b||(b=c.querySelector(Ua(y)),b||(r=x({src:r,async:!0,type:"module"},a),(a=Rn.get(y))&&Sd(r,a),b=c.createElement("script"),Vt(b),Yt(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function c0(r,a,c,d){var y=(y=ne.current)?wo(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Ns(c.href),c=$r(y).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Ns(c.href);var b=$r(y).hoistableStyles,T=b.get(r);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,T),(b=y.querySelector(Ba(r)))&&!b._p&&(T.instance=b,T.state.loading=5),Rn.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rn.set(r,c),b||Nw(y,r,c,T.state))),a&&d===null)throw Error(i(528,""));return T}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Cs(c),c=$r(y).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ns(r){return'href="'+Tn(r)+'"'}function Ba(r){return'link[rel="stylesheet"]['+r+"]"}function u0(r){return x({},r,{"data-precedence":r.precedence,precedence:null})}function Nw(r,a,c,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Yt(a,"link",c),Vt(a),r.head.appendChild(a))}function Cs(r){return'[src="'+Tn(r)+'"]'}function Ua(r){return"script[async]"+r}function d0(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(d)return a.instance=d,Vt(d),d;var y=x({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Vt(d),Yt(d,"style",y),No(d,c.precedence,r),a.instance=d;case"stylesheet":y=Ns(c.href);var b=r.querySelector(Ba(y));if(b)return a.state.loading|=4,a.instance=b,Vt(b),b;d=u0(c),(y=Rn.get(y))&&Cd(d,y),b=(r.ownerDocument||r).createElement("link"),Vt(b);var T=b;return T._p=new Promise(function(A,U){T.onload=A,T.onerror=U}),Yt(b,"link",d),a.state.loading|=4,No(b,c.precedence,r),a.instance=b;case"script":return b=Cs(c.src),(y=r.querySelector(Ua(b)))?(a.instance=y,Vt(y),y):(d=c,(y=Rn.get(b))&&(d=x({},c),Sd(d,y)),r=r.ownerDocument||r,y=r.createElement("script"),Vt(y),Yt(y,"link",d),r.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,No(d,c.precedence,r));return a.instance}function No(r,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,T=0;T<d.length;T++){var A=d[T];if(A.dataset.precedence===a)b=A;else if(b!==y)break}b?b.parentNode.insertBefore(r,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Cd(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Sd(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Co=null;function f0(r,a,c){if(Co===null){var d=new Map,y=Co=new Map;y.set(c,d)}else y=Co,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),y=0;y<c.length;y++){var b=c[y];if(!(b[Ws]||b[st]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(a)||"";T=r+T;var A=d.get(T);A?A.push(b):d.set(T,[b])}}return d}function m0(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function Cw(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function h0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var za=null;function Sw(){}function Tw(r,a,c){if(za===null)throw Error(i(475));var d=za;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Ns(c.href),b=r.querySelector(Ba(y));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=So.bind(d),r.then(d,d)),a.state.loading|=4,a.instance=b,Vt(b);return}b=r.ownerDocument||r,c=u0(c),(y=Rn.get(y))&&Cd(c,y),b=b.createElement("link"),Vt(b);var T=b;T._p=new Promise(function(A,U){T.onload=A,T.onerror=U}),Yt(b,"link",c),a.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=So.bind(d),r.addEventListener("load",a),r.addEventListener("error",a))}}function jw(){if(za===null)throw Error(i(475));var r=za;return r.stylesheets&&r.count===0&&Td(r,r.stylesheets),0<r.count?function(a){var c=setTimeout(function(){if(r.stylesheets&&Td(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(c)}}:null}function So(){if(this.count--,this.count===0){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var To=null;function Td(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,To=new Map,a.forEach(kw,r),To=null,So.call(r))}function kw(r,a){if(!(a.state.loading&4)){var c=To.get(r);if(c)var d=c.get(null);else{c=new Map,To.set(r,c);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var T=y[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}y=a.instance,T=y.getAttribute("data-precedence"),b=c.get(T)||d,b===d&&c.set(null,y),c.set(T,y),this.count++,d=So.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),a.state.loading|=4}}var Va={$$typeof:D,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Ew(r,a,c,d,y,b,T,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.hiddenUpdates=Br(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function p0(r,a,c,d,y,b,T,A,U,te,oe,de){return r=new Ew(r,a,c,T,A,U,te,de),a=1,b===!0&&(a|=24),b=pn(3,null,null,a),r.current=b,b.stateNode=r,a=au(),a.refCount++,r.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:a},uu(b),r}function g0(r){return r?(r=es,r):es}function x0(r,a,c,d,y,b){y=g0(y),d.context===null?d.context=y:d.pendingContext=y,d=Li(a),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Pi(r,d,a),c!==null&&(bn(c,r,a),xa(c,r,a))}function y0(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function jd(r,a){y0(r,a),(r=r.alternate)&&y0(r,a)}function v0(r){if(r.tag===13){var a=Xr(r,67108864);a!==null&&bn(a,r,67108864),jd(r,67108864)}}var jo=!0;function Aw(r,a,c,d){var y=P.T;P.T=null;var b=Z.p;try{Z.p=2,kd(r,a,c,d)}finally{Z.p=b,P.T=y}}function _w(r,a,c,d){var y=P.T;P.T=null;var b=Z.p;try{Z.p=8,kd(r,a,c,d)}finally{Z.p=b,P.T=y}}function kd(r,a,c,d){if(jo){var y=Ed(d);if(y===null)hd(r,a,d,ko,c),w0(r,d);else if(Rw(y,r,a,c,d))d.stopPropagation();else if(w0(r,d),a&4&&-1<Mw.indexOf(r)){for(;y!==null;){var b=Vr(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=en(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var U=1<<31-pe(T);A.entanglements[1]|=U,T&=~U}Qn(b),(ot&6)===0&&(co=Bt()+500,Da(0))}}break;case 13:A=Xr(b,2),A!==null&&bn(A,b,2),fo(),jd(b,2)}if(b=Ed(d),b===null&&hd(r,a,d,ko,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else hd(r,a,d,null,c)}}function Ed(r){return r=Ic(r),Ad(r)}var ko=null;function Ad(r){if(ko=null,r=zr(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return ko=r,null}function b0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mi()){case Fn:return 2;case oi:return 8;case Hn:case or:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var _d=!1,Zi=null,Qi=null,Ki=null,$a=new Map,qa=new Map,Wi=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(r,a){switch(r){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":$a.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(a.pointerId)}}function Fa(r,a,c,d,y,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Vr(a),a!==null&&v0(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function Rw(r,a,c,d,y){switch(a){case"focusin":return Zi=Fa(Zi,r,a,c,d,y),!0;case"dragenter":return Qi=Fa(Qi,r,a,c,d,y),!0;case"mouseover":return Ki=Fa(Ki,r,a,c,d,y),!0;case"pointerover":var b=y.pointerId;return $a.set(b,Fa($a.get(b)||null,r,a,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,qa.set(b,Fa(qa.get(b)||null,r,a,c,d,y)),!0}return!1}function N0(r){var a=zr(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=u(c),a!==null){r.blockedOn=a,Ke(r.priority,function(){if(c.tag===13){var d=vn();d=ke(d);var y=Xr(c,d);y!==null&&bn(y,c,d),jd(c,d)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Eo(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=Ed(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Rc=d,c.target.dispatchEvent(d),Rc=null}else return a=Vr(c),a!==null&&v0(a),r.blockedOn=c,!1;a.shift()}return!0}function C0(r,a,c){Eo(r)&&c.delete(a)}function Iw(){_d=!1,Zi!==null&&Eo(Zi)&&(Zi=null),Qi!==null&&Eo(Qi)&&(Qi=null),Ki!==null&&Eo(Ki)&&(Ki=null),$a.forEach(C0),qa.forEach(C0)}function Ao(r,a){r.blockedOn===a&&(r.blockedOn=null,_d||(_d=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Iw)))}var _o=null;function S0(r){_o!==r&&(_o=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){_o===r&&(_o=null);for(var a=0;a<r.length;a+=3){var c=r[a],d=r[a+1],y=r[a+2];if(typeof d!="function"){if(Ad(d||c)===null)continue;break}var b=Vr(c);b!==null&&(r.splice(a,3),a-=3,Au(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Ha(r){function a(U){return Ao(U,r)}Zi!==null&&Ao(Zi,r),Qi!==null&&Ao(Qi,r),Ki!==null&&Ao(Ki,r),$a.forEach(a),qa.forEach(a);for(var c=0;c<Wi.length;c++){var d=Wi[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Wi.length&&(c=Wi[0],c.blockedOn===null);)N0(c),c.blockedOn===null&&Wi.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],T=y[It]||null;if(typeof b=="function")T||S0(c);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(y=b,T=b[It]||null)A=T.formAction;else if(Ad(y)!==null)continue}else A=T.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),S0(c)}}}function Md(r){this._internalRoot=r}Mo.prototype.render=Md.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,d=vn();x0(c,d,r,a,null,null)},Mo.prototype.unmount=Md.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;x0(r.current,2,null,r,null,null),fo(),a[ui]=null}};function Mo(r){this._internalRoot=r}Mo.prototype.unstable_scheduleHydration=function(r){if(r){var a=He();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Wi.length&&a!==0&&a<Wi[c].priority;c++);Wi.splice(c,0,r),c===0&&N0(r)}};var T0=e.version;if(T0!=="19.1.0")throw Error(i(527,T0,"19.1.0"));Z.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=g(a),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var Dw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{le=Ro.inject(Dw),he=Ro}catch{}}return Ja.createRoot=function(r,a){if(!l(r))throw Error(i(299));var c=!1,d="",y=Vp,b=$p,T=qp,A=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks)),a=p0(r,1,!1,null,null,c,d,y,b,T,A,null),r[ui]=a.current,md(r),new Md(a)},Ja.hydrateRoot=function(r,a,c){if(!l(r))throw Error(i(299));var d=!1,y="",b=Vp,T=$p,A=qp,U=null,te=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks),c.formState!==void 0&&(te=c.formState)),a=p0(r,1,!0,a,c??null,d,y,b,T,A,U,te),a.context=g0(null),c=a.current,d=vn(),d=ke(d),y=Li(d),y.callback=null,Pi(c,y,d),c=d,a.current.lanes=c,se(a,c),Qn(a),r[ui]=a.current,md(r),new Mo(a)},Ja.version="19.1.0",Ja}var L0;function Fw(){if(L0)return Dd.exports;L0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dd.exports=qw(),Dd.exports}var Hw=Fw();const Gw=ml(Hw);var rt;(function(t){t.assertEqual=l=>{};function e(l){}t.assertIs=e;function n(l){throw new Error}t.assertNever=n,t.arrayToEnum=l=>{const o={};for(const u of l)o[u]=u;return o},t.getValidEnumValues=l=>{const o=t.objectKeys(l).filter(f=>typeof l[l[f]]!="number"),u={};for(const f of o)u[f]=l[f];return t.objectValues(u)},t.objectValues=l=>t.objectKeys(l).map(function(o){return l[o]}),t.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const o=[];for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&o.push(u);return o},t.find=(l,o)=>{for(const u of l)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&Number.isFinite(l)&&Math.floor(l)===l;function i(l,o=" | "){return l.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=i,t.jsonStringifyReplacer=(l,o)=>typeof o=="bigint"?o.toString():o})(rt||(rt={}));var P0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(P0||(P0={}));const je=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nr=t=>{switch(typeof t){case"undefined":return je.undefined;case"string":return je.string;case"number":return Number.isNaN(t)?je.nan:je.number;case"boolean":return je.boolean;case"function":return je.function;case"bigint":return je.bigint;case"symbol":return je.symbol;case"object":return Array.isArray(t)?je.array:t===null?je.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?je.promise:typeof Map<"u"&&t instanceof Map?je.map:typeof Set<"u"&&t instanceof Set?je.set:typeof Date<"u"&&t instanceof Date?je.date:je.object;default:return je.unknown}},ye=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ei extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},i={_errors:[]},l=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(l);else if(u.code==="invalid_return_type")l(u.returnTypeError);else if(u.code==="invalid_arguments")l(u.argumentsError);else if(u.path.length===0)i._errors.push(n(u));else{let f=i,g=0;for(;g<u.path.length;){const m=u.path[g];g===u.path.length-1?(f[m]=f[m]||{_errors:[]},f[m]._errors.push(n(u))):f[m]=f[m]||{_errors:[]},f=f[m],g++}}};return l(this),i}static assert(e){if(!(e instanceof Ei))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const l of this.issues)l.path.length>0?(n[l.path[0]]=n[l.path[0]]||[],n[l.path[0]].push(e(l))):i.push(e(l));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Ei.create=t=>new Ei(t);const Ef=(t,e)=>{let n;switch(t.code){case ye.invalid_type:t.received===je.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ye.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,rt.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:n=`Unrecognized key(s) in object: ${rt.joinValues(t.keys,", ")}`;break;case ye.invalid_union:n="Invalid input";break;case ye.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${rt.joinValues(t.options)}`;break;case ye.invalid_enum_value:n=`Invalid enum value. Expected ${rt.joinValues(t.options)}, received '${t.received}'`;break;case ye.invalid_arguments:n="Invalid function arguments";break;case ye.invalid_return_type:n="Invalid function return type";break;case ye.invalid_date:n="Invalid date";break;case ye.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:rt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ye.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ye.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ye.custom:n="Invalid input";break;case ye.invalid_intersection_types:n="Intersection results could not be merged";break;case ye.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ye.not_finite:n="Number must be finite";break;default:n=e.defaultError,rt.assertNever(t)}return{message:n}};let Jw=Ef;function Yw(){return Jw}const Zw=t=>{const{data:e,path:n,errorMaps:i,issueData:l}=t,o=[...n,...l.path||[]],u={...l,path:o};if(l.message!==void 0)return{...l,path:o,message:l.message};let f="";const g=i.filter(m=>!!m).slice().reverse();for(const m of g)f=m(u,{data:e,defaultError:f}).message;return{...l,path:o,message:f}};function Ce(t,e){const n=Yw(),i=Zw({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ef?void 0:Ef].filter(l=>!!l)});t.common.issues.push(i)}class rn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const l of n){if(l.status==="aborted")return Ue;l.status==="dirty"&&e.dirty(),i.push(l.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const l of n){const o=await l.key,u=await l.value;i.push({key:o,value:u})}return rn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const l of n){const{key:o,value:u}=l;if(o.status==="aborted"||u.status==="aborted")return Ue;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||l.alwaysSet)&&(i[o.value]=u.value)}return{status:e.value,value:i}}}const Ue=Object.freeze({status:"aborted"}),nl=t=>({status:"dirty",value:t}),Ln=t=>({status:"valid",value:t}),O0=t=>t.status==="aborted",B0=t=>t.status==="dirty",Os=t=>t.status==="valid",Ko=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class ii{constructor(e,n,i,l){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=l}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const U0=(t,e)=>{if(Os(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ei(t.common.issues);return this._error=n,this._error}}};function Fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:l}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:l}:{errorMap:(u,f)=>{const{message:g}=t;return u.code==="invalid_enum_value"?{message:g??f.defaultError}:typeof f.data>"u"?{message:g??i??f.defaultError}:u.code!=="invalid_type"?{message:f.defaultError}:{message:g??n??f.defaultError}},description:l}}class We{get description(){return this._def.description}_getType(e){return nr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rn,ctx:{common:e.parent.common,data:e.data,parsedType:nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Ko(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nr(e)},l=this._parseSync({data:e,path:i.path,parent:i});return U0(i,l)}"~validate"(e){var i,l;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nr(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return Os(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(l=(i=o==null?void 0:o.message)==null?void 0:i.toLowerCase())!=null&&l.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>Os(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nr(e)},l=this._parse({data:e,path:i.path,parent:i}),o=await(Ko(l)?l:Promise.resolve(l));return U0(i,o)}refine(e,n){const i=l=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(l):n;return this._refinement((l,o)=>{const u=e(l),f=()=>o.addIssue({code:ye.custom,...i(l)});return typeof Promise<"u"&&u instanceof Promise?u.then(g=>g?!0:(f(),!1)):u?!0:(f(),!1)})}refinement(e,n){return this._refinement((i,l)=>e(i)?!0:(l.addIssue(typeof n=="function"?n(i,l):n),!1))}_refinement(e){return new zs({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ir.create(this,this._def)}nullable(){return Vs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ni.create(this)}promise(){return nc.create(this,this._def)}or(e){return Xo.create([this,e],this._def)}and(e){return ec.create(this,e,this._def)}transform(e){return new zs({...Fe(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Rf({...Fe(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new y5({typeName:Be.ZodBranded,type:this,...Fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new If({...Fe(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return om.create(this,e)}readonly(){return Df.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Qw=/^c[^\s-]{8,}$/i,Kw=/^[0-9a-z]+$/,Ww=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Xw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,e5=/^[a-z0-9_-]{21}$/i,t5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,n5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,i5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,r5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Bd;const s5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,l5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,o5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,c5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,u5=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,L1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",d5=new RegExp(`^${L1}$`);function P1(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function f5(t){return new RegExp(`^${P1(t)}$`)}function m5(t){let e=`${L1}T${P1(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function h5(t,e){return!!((e==="v4"||!e)&&s5.test(t)||(e==="v6"||!e)&&l5.test(t))}function p5(t,e){if(!t5.test(t))return!1;try{const[n]=t.split("."),i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),l=JSON.parse(atob(i));return!(typeof l!="object"||l===null||"typ"in l&&(l==null?void 0:l.typ)!=="JWT"||!l.alg||e&&l.alg!==e)}catch{return!1}}function g5(t,e){return!!((e==="v4"||!e)&&a5.test(t)||(e==="v6"||!e)&&o5.test(t))}class ei extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==je.string){const o=this._getOrReturnCtx(e);return Ce(o,{code:ye.invalid_type,expected:je.string,received:o.parsedType}),Ue}const i=new rn;let l;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="max")e.data.length>o.value&&(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,f=e.data.length<o.value;(u||f)&&(l=this._getOrReturnCtx(e,l),u?Ce(l,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):f&&Ce(l,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),i.dirty())}else if(o.kind==="email")i5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"email",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="emoji")Bd||(Bd=new RegExp(r5,"u")),Bd.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"emoji",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="uuid")Xw.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"uuid",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="nanoid")e5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"nanoid",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid")Qw.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"cuid",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid2")Kw.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"cuid2",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="ulid")Ww.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"ulid",code:ye.invalid_string,message:o.message}),i.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),Ce(l,{validation:"url",code:ye.invalid_string,message:o.message}),i.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"regex",code:ye.invalid_string,message:o.message}),i.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),i.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:{startsWith:o.value},message:o.message}),i.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:{endsWith:o.value},message:o.message}),i.dirty()):o.kind==="datetime"?m5(o).test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:"datetime",message:o.message}),i.dirty()):o.kind==="date"?d5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:"date",message:o.message}),i.dirty()):o.kind==="time"?f5(o).test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.invalid_string,validation:"time",message:o.message}),i.dirty()):o.kind==="duration"?n5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"duration",code:ye.invalid_string,message:o.message}),i.dirty()):o.kind==="ip"?h5(e.data,o.version)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"ip",code:ye.invalid_string,message:o.message}),i.dirty()):o.kind==="jwt"?p5(e.data,o.alg)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"jwt",code:ye.invalid_string,message:o.message}),i.dirty()):o.kind==="cidr"?g5(e.data,o.version)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"cidr",code:ye.invalid_string,message:o.message}),i.dirty()):o.kind==="base64"?c5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"base64",code:ye.invalid_string,message:o.message}),i.dirty()):o.kind==="base64url"?u5.test(e.data)||(l=this._getOrReturnCtx(e,l),Ce(l,{validation:"base64url",code:ye.invalid_string,message:o.message}),i.dirty()):rt.assertNever(o);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(l=>e.test(l),{validation:n,code:ye.invalid_string,...Ae.errToObj(i)})}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ae.errToObj(n)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ei.create=t=>new ei({checks:[],typeName:Be.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Fe(t)});function x5(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,l=n>i?n:i,o=Number.parseInt(t.toFixed(l).replace(".","")),u=Number.parseInt(e.toFixed(l).replace(".",""));return o%u/10**l}class Ar extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==je.number){const o=this._getOrReturnCtx(e);return Ce(o,{code:ye.invalid_type,expected:je.number,received:o.parsedType}),Ue}let i;const l=new rn;for(const o of this._def.checks)o.kind==="int"?rt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.invalid_type,expected:"integer",received:"float",message:o.message}),l.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="multipleOf"?x5(e.data,o.value)!==0&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.not_finite,message:o.message}),l.dirty()):rt.assertNever(o);return{status:l.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,i,l){return new Ar({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ae.toString(l)}]})}_addCheck(e){return new Ar({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&rt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ar.create=t=>new Ar({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class _r extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==je.bigint)return this._getInvalidInput(e);let i;const l=new rn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):rt.assertNever(o);return{status:l.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ce(n,{code:ye.invalid_type,expected:je.bigint,received:n.parsedType}),Ue}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,i,l){return new _r({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ae.toString(l)}]})}_addCheck(e){return new _r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}_r.create=t=>new _r({checks:[],typeName:Be.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Fe(t)});class Wo extends We{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==je.boolean){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.boolean,received:i.parsedType}),Ue}return Ln(e.data)}}Wo.create=t=>new Wo({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Bs extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==je.date){const o=this._getOrReturnCtx(e);return Ce(o,{code:ye.invalid_type,expected:je.date,received:o.parsedType}),Ue}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Ce(o,{code:ye.invalid_date}),Ue}const i=new rn;let l;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),i.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(l=this._getOrReturnCtx(e,l),Ce(l,{code:ye.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),i.dirty()):rt.assertNever(o);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bs({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Bs.create=t=>new Bs({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...Fe(t)});class z0 extends We{_parse(e){if(this._getType(e)!==je.symbol){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.symbol,received:i.parsedType}),Ue}return Ln(e.data)}}z0.create=t=>new z0({typeName:Be.ZodSymbol,...Fe(t)});class V0 extends We{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.undefined,received:i.parsedType}),Ue}return Ln(e.data)}}V0.create=t=>new V0({typeName:Be.ZodUndefined,...Fe(t)});class $0 extends We{_parse(e){if(this._getType(e)!==je.null){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.null,received:i.parsedType}),Ue}return Ln(e.data)}}$0.create=t=>new $0({typeName:Be.ZodNull,...Fe(t)});class q0 extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return Ln(e.data)}}q0.create=t=>new q0({typeName:Be.ZodAny,...Fe(t)});class Af extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ln(e.data)}}Af.create=t=>new Af({typeName:Be.ZodUnknown,...Fe(t)});class rr extends We{_parse(e){const n=this._getOrReturnCtx(e);return Ce(n,{code:ye.invalid_type,expected:je.never,received:n.parsedType}),Ue}}rr.create=t=>new rr({typeName:Be.ZodNever,...Fe(t)});class F0 extends We{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.void,received:i.parsedType}),Ue}return Ln(e.data)}}F0.create=t=>new F0({typeName:Be.ZodVoid,...Fe(t)});class ni extends We{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),l=this._def;if(n.parsedType!==je.array)return Ce(n,{code:ye.invalid_type,expected:je.array,received:n.parsedType}),Ue;if(l.exactLength!==null){const u=n.data.length>l.exactLength.value,f=n.data.length<l.exactLength.value;(u||f)&&(Ce(n,{code:u?ye.too_big:ye.too_small,minimum:f?l.exactLength.value:void 0,maximum:u?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),i.dirty())}if(l.minLength!==null&&n.data.length<l.minLength.value&&(Ce(n,{code:ye.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),i.dirty()),l.maxLength!==null&&n.data.length>l.maxLength.value&&(Ce(n,{code:ye.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((u,f)=>l.type._parseAsync(new ii(n,u,n.path,f)))).then(u=>rn.mergeArray(i,u));const o=[...n.data].map((u,f)=>l.type._parseSync(new ii(n,u,n.path,f)));return rn.mergeArray(i,o)}get element(){return this._def.type}min(e,n){return new ni({...this._def,minLength:{value:e,message:Ae.toString(n)}})}max(e,n){return new ni({...this._def,maxLength:{value:e,message:Ae.toString(n)}})}length(e,n){return new ni({...this._def,exactLength:{value:e,message:Ae.toString(n)}})}nonempty(e){return this.min(1,e)}}ni.create=(t,e)=>new ni({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...Fe(e)});function Es(t){if(t instanceof Rt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=ir.create(Es(i))}return new Rt({...t._def,shape:()=>e})}else return t instanceof ni?new ni({...t._def,type:Es(t.element)}):t instanceof ir?ir.create(Es(t.unwrap())):t instanceof Vs?Vs.create(Es(t.unwrap())):t instanceof Mr?Mr.create(t.items.map(e=>Es(e))):t}class Rt extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=rt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==je.object){const m=this._getOrReturnCtx(e);return Ce(m,{code:ye.invalid_type,expected:je.object,received:m.parsedType}),Ue}const{status:i,ctx:l}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),f=[];if(!(this._def.catchall instanceof rr&&this._def.unknownKeys==="strip"))for(const m in l.data)u.includes(m)||f.push(m);const g=[];for(const m of u){const x=o[m],v=l.data[m];g.push({key:{status:"valid",value:m},value:x._parse(new ii(l,v,l.path,m)),alwaysSet:m in l.data})}if(this._def.catchall instanceof rr){const m=this._def.unknownKeys;if(m==="passthrough")for(const x of f)g.push({key:{status:"valid",value:x},value:{status:"valid",value:l.data[x]}});else if(m==="strict")f.length>0&&(Ce(l,{code:ye.unrecognized_keys,keys:f}),i.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const x of f){const v=l.data[x];g.push({key:{status:"valid",value:x},value:m._parse(new ii(l,v,l.path,x)),alwaysSet:x in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const m=[];for(const x of g){const v=await x.key,N=await x.value;m.push({key:v,value:N,alwaysSet:x.alwaysSet})}return m}).then(m=>rn.mergeObjectSync(i,m)):rn.mergeObjectSync(i,g)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new Rt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var o,u;const l=((u=(o=this._def).errorMap)==null?void 0:u.call(o,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Ae.errToObj(e).message??l}:{message:l}}}:{}})}strip(){return new Rt({...this._def,unknownKeys:"strip"})}passthrough(){return new Rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Rt({...this._def,catchall:e})}pick(e){const n={};for(const i of rt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new Rt({...this._def,shape:()=>n})}omit(e){const n={};for(const i of rt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new Rt({...this._def,shape:()=>n})}deepPartial(){return Es(this)}partial(e){const n={};for(const i of rt.objectKeys(this.shape)){const l=this.shape[i];e&&!e[i]?n[i]=l:n[i]=l.optional()}return new Rt({...this._def,shape:()=>n})}required(e){const n={};for(const i of rt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let o=this.shape[i];for(;o instanceof ir;)o=o._def.innerType;n[i]=o}return new Rt({...this._def,shape:()=>n})}keyof(){return O1(rt.objectKeys(this.shape))}}Rt.create=(t,e)=>new Rt({shape:()=>t,unknownKeys:"strip",catchall:rr.create(),typeName:Be.ZodObject,...Fe(e)});Rt.strictCreate=(t,e)=>new Rt({shape:()=>t,unknownKeys:"strict",catchall:rr.create(),typeName:Be.ZodObject,...Fe(e)});Rt.lazycreate=(t,e)=>new Rt({shape:t,unknownKeys:"strip",catchall:rr.create(),typeName:Be.ZodObject,...Fe(e)});class Xo extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function l(o){for(const f of o)if(f.result.status==="valid")return f.result;for(const f of o)if(f.result.status==="dirty")return n.common.issues.push(...f.ctx.common.issues),f.result;const u=o.map(f=>new Ei(f.ctx.common.issues));return Ce(n,{code:ye.invalid_union,unionErrors:u}),Ue}if(n.common.async)return Promise.all(i.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(l);{let o;const u=[];for(const g of i){const m={...n,common:{...n.common,issues:[]},parent:null},x=g._parseSync({data:n.data,path:n.path,parent:m});if(x.status==="valid")return x;x.status==="dirty"&&!o&&(o={result:x,ctx:m}),m.common.issues.length&&u.push(m.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const f=u.map(g=>new Ei(g));return Ce(n,{code:ye.invalid_union,unionErrors:f}),Ue}}get options(){return this._def.options}}Xo.create=(t,e)=>new Xo({options:t,typeName:Be.ZodUnion,...Fe(e)});function _f(t,e){const n=nr(t),i=nr(e);if(t===e)return{valid:!0,data:t};if(n===je.object&&i===je.object){const l=rt.objectKeys(e),o=rt.objectKeys(t).filter(f=>l.indexOf(f)!==-1),u={...t,...e};for(const f of o){const g=_f(t[f],e[f]);if(!g.valid)return{valid:!1};u[f]=g.data}return{valid:!0,data:u}}else if(n===je.array&&i===je.array){if(t.length!==e.length)return{valid:!1};const l=[];for(let o=0;o<t.length;o++){const u=t[o],f=e[o],g=_f(u,f);if(!g.valid)return{valid:!1};l.push(g.data)}return{valid:!0,data:l}}else return n===je.date&&i===je.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ec extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),l=(o,u)=>{if(O0(o)||O0(u))return Ue;const f=_f(o.value,u.value);return f.valid?((B0(o)||B0(u))&&n.dirty(),{status:n.value,value:f.data}):(Ce(i,{code:ye.invalid_intersection_types}),Ue)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([o,u])=>l(o,u)):l(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ec.create=(t,e,n)=>new ec({left:t,right:e,typeName:Be.ZodIntersection,...Fe(n)});class Mr extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.array)return Ce(i,{code:ye.invalid_type,expected:je.array,received:i.parsedType}),Ue;if(i.data.length<this._def.items.length)return Ce(i,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&i.data.length>this._def.items.length&&(Ce(i,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...i.data].map((u,f)=>{const g=this._def.items[f]||this._def.rest;return g?g._parse(new ii(i,u,i.path,f)):null}).filter(u=>!!u);return i.common.async?Promise.all(o).then(u=>rn.mergeArray(n,u)):rn.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Mr({...this._def,rest:e})}}Mr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Mr({items:t,typeName:Be.ZodTuple,rest:null,...Fe(e)})};class tc extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.object)return Ce(i,{code:ye.invalid_type,expected:je.object,received:i.parsedType}),Ue;const l=[],o=this._def.keyType,u=this._def.valueType;for(const f in i.data)l.push({key:o._parse(new ii(i,f,i.path,f)),value:u._parse(new ii(i,i.data[f],i.path,f)),alwaysSet:f in i.data});return i.common.async?rn.mergeObjectAsync(n,l):rn.mergeObjectSync(n,l)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof We?new tc({keyType:e,valueType:n,typeName:Be.ZodRecord,...Fe(i)}):new tc({keyType:ei.create(),valueType:e,typeName:Be.ZodRecord,...Fe(n)})}}class H0 extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.map)return Ce(i,{code:ye.invalid_type,expected:je.map,received:i.parsedType}),Ue;const l=this._def.keyType,o=this._def.valueType,u=[...i.data.entries()].map(([f,g],m)=>({key:l._parse(new ii(i,f,i.path,[m,"key"])),value:o._parse(new ii(i,g,i.path,[m,"value"]))}));if(i.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const g of u){const m=await g.key,x=await g.value;if(m.status==="aborted"||x.status==="aborted")return Ue;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),f.set(m.value,x.value)}return{status:n.value,value:f}})}else{const f=new Map;for(const g of u){const m=g.key,x=g.value;if(m.status==="aborted"||x.status==="aborted")return Ue;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),f.set(m.value,x.value)}return{status:n.value,value:f}}}}H0.create=(t,e,n)=>new H0({valueType:e,keyType:t,typeName:Be.ZodMap,...Fe(n)});class ul extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.set)return Ce(i,{code:ye.invalid_type,expected:je.set,received:i.parsedType}),Ue;const l=this._def;l.minSize!==null&&i.data.size<l.minSize.value&&(Ce(i,{code:ye.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),n.dirty()),l.maxSize!==null&&i.data.size>l.maxSize.value&&(Ce(i,{code:ye.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),n.dirty());const o=this._def.valueType;function u(g){const m=new Set;for(const x of g){if(x.status==="aborted")return Ue;x.status==="dirty"&&n.dirty(),m.add(x.value)}return{status:n.value,value:m}}const f=[...i.data.values()].map((g,m)=>o._parse(new ii(i,g,i.path,m)));return i.common.async?Promise.all(f).then(g=>u(g)):u(f)}min(e,n){return new ul({...this._def,minSize:{value:e,message:Ae.toString(n)}})}max(e,n){return new ul({...this._def,maxSize:{value:e,message:Ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ul.create=(t,e)=>new ul({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...Fe(e)});class Mf extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Mf.create=(t,e)=>new Mf({getter:t,typeName:Be.ZodLazy,...Fe(e)});class G0 extends We{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ce(n,{received:n.data,code:ye.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}G0.create=(t,e)=>new G0({value:t,typeName:Be.ZodLiteral,...Fe(e)});function O1(t,e){return new Us({values:t,typeName:Be.ZodEnum,...Fe(e)})}class Us extends We{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return Ce(n,{expected:rt.joinValues(i),received:n.parsedType,code:ye.invalid_type}),Ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return Ce(n,{received:n.data,code:ye.invalid_enum_value,options:i}),Ue}return Ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Us.create(e,{...this._def,...n})}exclude(e,n=this._def){return Us.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Us.create=O1;class J0 extends We{_parse(e){const n=rt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==je.string&&i.parsedType!==je.number){const l=rt.objectValues(n);return Ce(i,{expected:rt.joinValues(l),received:i.parsedType,code:ye.invalid_type}),Ue}if(this._cache||(this._cache=new Set(rt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const l=rt.objectValues(n);return Ce(i,{received:i.data,code:ye.invalid_enum_value,options:l}),Ue}return Ln(e.data)}get enum(){return this._def.values}}J0.create=(t,e)=>new J0({values:t,typeName:Be.ZodNativeEnum,...Fe(e)});class nc extends We{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==je.promise&&n.common.async===!1)return Ce(n,{code:ye.invalid_type,expected:je.promise,received:n.parsedType}),Ue;const i=n.parsedType===je.promise?n.data:Promise.resolve(n.data);return Ln(i.then(l=>this._def.type.parseAsync(l,{path:n.path,errorMap:n.common.contextualErrorMap})))}}nc.create=(t,e)=>new nc({type:t,typeName:Be.ZodPromise,...Fe(e)});class zs extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),l=this._def.effect||null,o={addIssue:u=>{Ce(i,u),u.fatal?n.abort():n.dirty()},get path(){return i.path}};if(o.addIssue=o.addIssue.bind(o),l.type==="preprocess"){const u=l.transform(i.data,o);if(i.common.async)return Promise.resolve(u).then(async f=>{if(n.value==="aborted")return Ue;const g=await this._def.schema._parseAsync({data:f,path:i.path,parent:i});return g.status==="aborted"?Ue:g.status==="dirty"||n.value==="dirty"?nl(g.value):g});{if(n.value==="aborted")return Ue;const f=this._def.schema._parseSync({data:u,path:i.path,parent:i});return f.status==="aborted"?Ue:f.status==="dirty"||n.value==="dirty"?nl(f.value):f}}if(l.type==="refinement"){const u=f=>{const g=l.refinement(f,o);if(i.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(i.common.async===!1){const f=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return f.status==="aborted"?Ue:(f.status==="dirty"&&n.dirty(),u(f.value),{status:n.value,value:f.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(f=>f.status==="aborted"?Ue:(f.status==="dirty"&&n.dirty(),u(f.value).then(()=>({status:n.value,value:f.value}))))}if(l.type==="transform")if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Os(u))return Ue;const f=l.transform(u.value,o);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:f}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>Os(u)?Promise.resolve(l.transform(u.value,o)).then(f=>({status:n.value,value:f})):Ue);rt.assertNever(l)}}zs.create=(t,e,n)=>new zs({schema:t,typeName:Be.ZodEffects,effect:e,...Fe(n)});zs.createWithPreprocess=(t,e,n)=>new zs({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...Fe(n)});class ir extends We{_parse(e){return this._getType(e)===je.undefined?Ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ir.create=(t,e)=>new ir({innerType:t,typeName:Be.ZodOptional,...Fe(e)});class Vs extends We{_parse(e){return this._getType(e)===je.null?Ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vs.create=(t,e)=>new Vs({innerType:t,typeName:Be.ZodNullable,...Fe(e)});class Rf extends We{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===je.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Rf.create=(t,e)=>new Rf({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class If extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},l=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Ko(l)?l.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ei(i.common.issues)},input:i.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Ei(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}If.create=(t,e)=>new If({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class Y0 extends We{_parse(e){if(this._getType(e)!==je.nan){const i=this._getOrReturnCtx(e);return Ce(i,{code:ye.invalid_type,expected:je.nan,received:i.parsedType}),Ue}return{status:"valid",value:e.data}}}Y0.create=t=>new Y0({typeName:Be.ZodNaN,...Fe(t)});class y5 extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class om extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?Ue:o.status==="dirty"?(n.dirty(),nl(o.value)):this._def.out._parseAsync({data:o.value,path:i.path,parent:i})})();{const l=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?Ue:l.status==="dirty"?(n.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:i.path,parent:i})}}static create(e,n){return new om({in:e,out:n,typeName:Be.ZodPipeline})}}class Df extends We{_parse(e){const n=this._def.innerType._parse(e),i=l=>(Os(l)&&(l.value=Object.freeze(l.value)),l);return Ko(n)?n.then(l=>i(l)):i(n)}unwrap(){return this._def.innerType}}Df.create=(t,e)=>new Df({innerType:t,typeName:Be.ZodReadonly,...Fe(e)});var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const kr=ei.create,Z0=Ar.create;_r.create;const v5=Wo.create;Bs.create;const Q0=Af.create;rr.create;const il=ni.create,b5=Rt.create,w5=Xo.create;ec.create;Mr.create;const N5=tc.create,C5=Mf.create,S5=Us.create;nc.create;ir.create;Vs.create;const Ss={string:t=>ei.create({...t,coerce:!0}),number:t=>Ar.create({...t,coerce:!0}),boolean:t=>Wo.create({...t,coerce:!0}),bigint:t=>_r.create({...t,coerce:!0}),date:t=>Bs.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let T5,j5;function k5(){return{geminiUrl:T5,vertexUrl:j5}}function E5(t,e,n){var i,l,o;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const u=k5();return t.vertexai?(l=u.vertexUrl)!==null&&l!==void 0?l:e:(o=u.geminiUrl)!==null&&o!==void 0?o:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qs{}function Le(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const o=e[l];return o!=null?String(o):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const u=e[o];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const g=t[f];if(Array.isArray(n))for(let m=0;m<g.length;m++){const x=g[m];p(x,e.slice(o+1),n[m])}else for(const m of g)p(m,e.slice(o+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const g=t[f];p(g[0],e.slice(o+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],l=t[i];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function h(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const l=i.slice(0,-2);if(l in t){const o=t[l];return Array.isArray(o)?o.map(u=>h(u,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var K0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(K0||(K0={}));var W0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(W0||(W0={}));var ti;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ti||(ti={}));var X0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(X0||(X0={}));var ex;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ex||(ex={}));var tx;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(tx||(tx={}));var nx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nx||(nx={}));var ix;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ix||(ix={}));var rx;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(rx||(rx={}));var sx;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sx||(sx={}));var ax;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ax||(ax={}));var lx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(lx||(lx={}));var ox;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ox||(ox={}));var ic;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ic||(ic={}));var cx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cx||(cx={}));var Lf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lf||(Lf={}));var ux;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ux||(ux={}));var dx;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dx||(dx={}));var fx;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(fx||(fx={}));var mx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mx||(mx={}));var hx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(hx||(hx={}));var px;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(px||(px={}));var gx;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gx||(gx={}));var xx;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xx||(xx={}));var yx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(yx||(yx={}));var vx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vx||(vx={}));var bx;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bx||(bx={}));var wx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wx||(wx={}));var Nx;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nx||(Nx={}));var Cx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Cx||(Cx={}));var Sx;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Sx||(Sx={}));var Tx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Tx||(Tx={}));var jx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jx||(jx={}));var kx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kx||(kx={}));var Ex;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ex||(Ex={}));var Ax;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ax||(Ax={}));var _x;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(_x||(_x={}));var Mx;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Mx||(Mx={}));var _s;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(_s||(_s={}));class Pf{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ya{get text(){var e,n,i,l,o,u,f,g;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const v=[];for(const N of(g=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,S]of Object.entries(N))w!=="text"&&w!=="thought"&&(S!==null||S!==void 0)&&v.push(w);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;x=!0,m+=N.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var e,n,i,l,o,u,f,g;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const v of(g=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[N,w]of Object.entries(v))N!=="inlineData"&&(w!==null||w!==void 0)&&x.push(N);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,i,l,o,u,f,g;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,i,l,o,u,f,g,m;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(g=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,i,l,o,u,f,g,m;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(g=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.output}}class Rx{}class Ix{}class A5{}class _5{}class Dx{}class Lx{}class Px{}class M5{}class Ox{}class Bx{}class Ux{}class R5{}class I5{}class D5{}class L5{get text(){var e,n,i;let l="",o=!1;const u=[];for(const f of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[g,m]of Object.entries(f))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,l+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?l:void 0}get data(){var e,n,i;let l="";const o=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&o.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(l+=atob(u.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class P5{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function B1(t,e){const n=vt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function U1(t){return Array.isArray(t)?t.map(e=>rc(e)):[rc(t)]}function rc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function O5(t){const e=rc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function B5(t){const e=rc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function z1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>zx(e)):[zx(t)]}function Of(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $x(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function nn(t){if(t==null)throw new Error("ContentUnion is required");return Of(t)?t:{role:"user",parts:z1(t)}}function V1(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=nn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=nn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>nn(n)):[nn(e)]}function Vn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vx(t)||$x(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(t)]}const e=[],n=[],i=Of(t[0]);for(const l of t){const o=Of(l);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(l);else{if(Vx(l)||$x(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return i||e.push({role:"user",parts:z1(n)}),e}const U5=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),qx=S5(["string","number","integer","object","array","boolean","null"]),z5=w5([qx,il(qx)]);function V5(t=!0){const e=C5(()=>{const n=b5({type:z5.optional(),format:kr().optional(),title:kr().optional(),description:kr().optional(),default:Q0().optional(),items:e.optional(),minItems:Ss.string().optional(),maxItems:Ss.string().optional(),enum:il(Q0()).optional(),properties:N5(kr(),e).optional(),required:il(kr()).optional(),minProperties:Ss.string().optional(),maxProperties:Ss.string().optional(),propertyOrdering:il(kr()).optional(),minimum:Z0().optional(),maximum:Z0().optional(),minLength:Ss.string().optional(),maxLength:Ss.string().optional(),pattern:kr().optional(),anyOf:il(e).optional(),additionalProperties:v5().optional()});return t?n.strict():n});return e}function $5(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ti).includes(n[0].toUpperCase())?n[0].toUpperCase():ti.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ti).includes(i.toUpperCase())?i.toUpperCase():ti.TYPE_UNSPECIFIED})}}function Ms(t){const e={},n=["items"],i=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&$5(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ti).includes(f.toUpperCase())?f.toUpperCase():ti.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ms(f);else if(i.includes(u)){const g=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}g.push(Ms(m))}e[u]=g}else if(l.includes(u)){const g={};for(const[m,x]of Object.entries(f))g[m]=Ms(x);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function sc(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=V5().parse(t);return Ms(e)}else return Ms(t)}function $1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function cm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function hl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=sc(e.parameters)),e.response&&(e.response=sc(e.response));return t}function pl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function q5(t,e,n,i=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function sr(t,e){if(typeof e!="string")throw new Error("name must be a string");return q5(t,e,"cachedContents")}function q1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _i(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function F5(t){return t!=null&&typeof t=="object"&&"name"in t}function H5(t){return t!=null&&typeof t=="object"&&"video"in t}function G5(t){return t!=null&&typeof t=="object"&&"uri"in t}function F1(t){var e;let n;if(F5(t)&&(n=t.name),!(G5(t)&&(n=t.uri,n===void 0))&&!(H5(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function H1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function G1(t){for(const e of["models","tunedModels","publisherModels"])if(J5(t,e))return t[e];return[]}function J5(t,e){return t!==null&&typeof t=="object"&&e in t}function Y5(t,e={}){const n=t,i={name:n.name,description:n.description,parameters:Ms(mc(n.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Z5(t,e={}){const n=[],i=new Set;for(const l of t){const o=l.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const u=Y5(l,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function Q5(t){const e=[];for(const n of t)e.push(mc(n));return e}function K5(t){const e={};for(const[n,i]of Object.entries(t)){const l=i;e[n]=mc(l)}return e}function mc(t){const e=new Set(["items"]),n=new Set(["anyOf"]),i=new Set(["properties"]),l={};for(const[o,u]of Object.entries(t))if(e.has(o))l[o]=mc(u);else if(n.has(o))l[o]=Q5(u);else if(i.has(o))l[o]=K5(u);else if(o==="type"){const f=u.toUpperCase();l[o]=Object.values(ti).includes(f)?f:ti.TYPE_UNSPECIFIED}else U5.has(o)&&(l[o]=u);return l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W5(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function X5(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function eN(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tN(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],W5(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],X5(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],eN(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function Fx(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>tN(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function nN(t){const e={},n=h(t,["behavior"]);n!=null&&p(e,["behavior"],n);const i=h(t,["description"]);i!=null&&p(e,["description"],i);const l=h(t,["name"]);l!=null&&p(e,["name"],l);const o=h(t,["parameters"]);o!=null&&p(e,["parameters"],o);const u=h(t,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=h(t,["response"]);f!=null&&p(e,["response"],f);const g=h(t,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function iN(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function rN(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],iN(n)),e}function sN(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function aN(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],sN(n)),e}function lN(){return{}}function oN(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>nN(g))),p(e,["functionDeclarations"],f)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],rN(i));const l=h(t,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],aN(l)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&p(e,["urlContext"],lN());const u=h(t,["codeExecution"]);return u!=null&&p(e,["codeExecution"],u),e}function cN(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&p(e,["allowedFunctionNames"],i),e}function uN(t){const e={},n=h(t,["latitude"]);n!=null&&p(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&p(e,["longitude"],i),e}function dN(t){const e={},n=h(t,["latLng"]);n!=null&&p(e,["latLng"],uN(n));const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function fN(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],cN(n));const i=h(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],dN(i)),e}function mN(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const l=h(t,["expireTime"]);e!==void 0&&l!=null&&p(e,["expireTime"],l);const o=h(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let x=Vn(u);Array.isArray(x)&&(x=x.map(v=>Fx(v))),p(e,["contents"],x)}const f=h(t,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],Fx(nn(f)));const g=h(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(v=>oN(v))),p(e,["tools"],x)}const m=h(t,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],fN(m)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function hN(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["model"],B1(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],mN(l,n)),n}function pN(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function gN(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function xN(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const l=h(t,["expireTime"]);return e!==void 0&&l!=null&&p(e,["expireTime"],l),n}function yN(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],xN(l,n)),n}function vN(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const l=h(t,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),n}function bN(t){const e={},n=h(t,["config"]);return n!=null&&p(e,["config"],vN(n,e)),e}function wN(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function NN(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["data"]);i!=null&&p(e,["data"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function CN(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&p(e,["fileUri"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function SN(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],wN(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],NN(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],CN(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function Hx(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>SN(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function TN(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const i=h(t,["name"]);i!=null&&p(e,["name"],i);const l=h(t,["parameters"]);l!=null&&p(e,["parameters"],l);const o=h(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&p(e,["response"],u);const f=h(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function jN(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function kN(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],jN(n)),e}function EN(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function AN(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],EN(n)),e}function _N(){return{}}function MN(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function RN(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],MN(n));const i=h(t,["authType"]);i!=null&&p(e,["authType"],i);const l=h(t,["googleServiceAccountConfig"]);l!=null&&p(e,["googleServiceAccountConfig"],l);const o=h(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const u=h(t,["oauthConfig"]);u!=null&&p(e,["oauthConfig"],u);const f=h(t,["oidcConfig"]);return f!=null&&p(e,["oidcConfig"],f),e}function IN(t){const e={},n=h(t,["authConfig"]);return n!=null&&p(e,["authConfig"],RN(n)),e}function DN(){return{}}function LN(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(v=>TN(v))),p(e,["functionDeclarations"],x)}const i=h(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],kN(l));const o=h(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],AN(o)),h(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],_N());const f=h(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],IN(f)),h(t,["urlContext"])!=null&&p(e,["urlContext"],DN());const m=h(t,["codeExecution"]);return m!=null&&p(e,["codeExecution"],m),e}function PN(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&p(e,["allowedFunctionNames"],i),e}function ON(t){const e={},n=h(t,["latitude"]);n!=null&&p(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&p(e,["longitude"],i),e}function BN(t){const e={},n=h(t,["latLng"]);n!=null&&p(e,["latLng"],ON(n));const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function UN(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],PN(n));const i=h(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],BN(i)),e}function zN(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const l=h(t,["expireTime"]);e!==void 0&&l!=null&&p(e,["expireTime"],l);const o=h(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let v=Vn(u);Array.isArray(v)&&(v=v.map(N=>Hx(N))),p(e,["contents"],v)}const f=h(t,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],Hx(nn(f)));const g=h(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(N=>LN(N))),p(e,["tools"],v)}const m=h(t,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],UN(m));const x=h(t,["kmsKeyName"]);return e!==void 0&&x!=null&&p(e,["encryption_spec","kmsKeyName"],x),n}function VN(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["model"],B1(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],zN(l,n)),n}function $N(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function qN(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function FN(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const l=h(t,["expireTime"]);return e!==void 0&&l!=null&&p(e,["expireTime"],l),n}function HN(t,e){const n={},i=h(e,["name"]);i!=null&&p(n,["_url","name"],sr(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],FN(l,n)),n}function GN(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const l=h(t,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),n}function JN(t){const e={},n=h(t,["config"]);return n!=null&&p(e,["config"],GN(n,e)),e}function zo(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["model"]);l!=null&&p(e,["model"],l);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const u=h(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const f=h(t,["expireTime"]);f!=null&&p(e,["expireTime"],f);const g=h(t,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function YN(){return{}}function ZN(t){const e={},n=h(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const i=h(t,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>zo(o))),p(e,["cachedContents"],l)}return e}function Vo(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["model"]);l!=null&&p(e,["model"],l);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const u=h(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const f=h(t,["expireTime"]);f!=null&&p(e,["expireTime"],f);const g=h(t,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function QN(){return{}}function KN(t){const e={},n=h(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const i=h(t,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>Vo(o))),p(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $s;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($s||($s={}));class hc{constructor(e,n,i,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,l)}init(e,n,i){var l,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};i?typeof i=="object"?u=Object.assign({},i):u=i:u={config:{}},u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(o=(l=u.config)===null||l===void 0?void 0:l.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WN extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hc($s.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=VN(this.apiClient,e);return f=Le("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>Vo(x))}else{const m=hN(this.apiClient,e);return f=Le("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>zo(x))}}async get(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=$N(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>Vo(x))}else{const m=pN(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>zo(x))}}async delete(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=qN(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(()=>{const x=QN(),v=new Bx;return Object.assign(v,x),v})}else{const m=gN(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(()=>{const x=YN(),v=new Bx;return Object.assign(v,x),v})}}async update(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=HN(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>Vo(x))}else{const m=yN(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>zo(x))}}async listInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=JN(e);return f=Le("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=KN(x),N=new Ux;return Object.assign(N,v),N})}else{const m=bN(e);return f=Le("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=ZN(x),N=new Ux;return Object.assign(N,v),N})}}}function Gx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bt(t){return this instanceof bt?(this.v=t,this):new bt(t)}function Rs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),l,o=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),l[Symbol.asyncIterator]=function(){return this},l;function u(w){return function(S){return Promise.resolve(S).then(w,v)}}function f(w,S){i[w]&&(l[w]=function(j){return new Promise(function(k,E){o.push([w,j,k,E])>1||g(w,j)})},S&&(l[w]=S(l[w])))}function g(w,S){try{m(i[w](S))}catch(j){N(o[0][3],j)}}function m(w){w.value instanceof bt?Promise.resolve(w.value.v).then(x,v):N(o[0][2],w)}function x(w){g("next",w)}function v(w){g("throw",w)}function N(w,S){w(S),o.shift(),o.length&&g(o[0][0],o[0][1])}}function rl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gx=="function"?Gx(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(u){return new Promise(function(f,g){u=t[o](u),l(f,g,u.done,u.value)})}}function l(o,u,f,g){Promise.resolve(g).then(function(m){o({value:m,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:J1(n)}function J1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function eC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const l=[];let o=!0;for(;i<n&&t[i].role==="model";)l.push(t[i]),o&&!J1(t[i])&&(o=!1),i++;o?e.push(...l):e.pop()}return e}class tC{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new nC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nC{constructor(e,n,i,l={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=l,this.history=o,this.sendPromise=Promise.resolve(),eC(o)}async sendMessage(e){var n;await this.sendPromise;const i=nn(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,u,f;const g=await l,m=(u=(o=g.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content,x=g.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let N=[];x!=null&&(N=(f=x.slice(v))!==null&&f!==void 0?f:[]);const w=m?[m]:[];this.recordHistory(i,w,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const i=nn(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const o=await l;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Jx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,l;return Rs(this,arguments,function*(){var u,f,g,m;const x=[];try{for(var v=!0,N=rl(e),w;w=yield bt(N.next()),u=w.done,!u;v=!0){m=w.value,v=!1;const S=m;if(XN(S)){const j=(l=(i=S.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content;j!==void 0&&x.push(j)}yield yield bt(S)}}catch(S){f={error:S}}finally{try{!v&&!u&&(g=N.return)&&(yield bt(g.call(N)))}finally{if(f)throw f.error}}this.recordHistory(n,x)})}recordHistory(e,n,i){let l=[];n.length>0&&n.every(o=>o.role!==void 0)?l=n:l.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Jx(i)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const l=h(t,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),n}function rC(t){const e={},n=h(t,["config"]);return n!=null&&p(e,["config"],iC(n,e)),e}function sC(t){const e={},n=h(t,["details"]);n!=null&&p(e,["details"],n);const i=h(t,["message"]);i!=null&&p(e,["message"],i);const l=h(t,["code"]);return l!=null&&p(e,["code"],l),e}function aC(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["mimeType"]);l!=null&&p(e,["mimeType"],l);const o=h(t,["sizeBytes"]);o!=null&&p(e,["sizeBytes"],o);const u=h(t,["createTime"]);u!=null&&p(e,["createTime"],u);const f=h(t,["expirationTime"]);f!=null&&p(e,["expirationTime"],f);const g=h(t,["updateTime"]);g!=null&&p(e,["updateTime"],g);const m=h(t,["sha256Hash"]);m!=null&&p(e,["sha256Hash"],m);const x=h(t,["uri"]);x!=null&&p(e,["uri"],x);const v=h(t,["downloadUri"]);v!=null&&p(e,["downloadUri"],v);const N=h(t,["state"]);N!=null&&p(e,["state"],N);const w=h(t,["source"]);w!=null&&p(e,["source"],w);const S=h(t,["videoMetadata"]);S!=null&&p(e,["videoMetadata"],S);const j=h(t,["error"]);return j!=null&&p(e,["error"],sC(j)),e}function lC(t){const e={},n=h(t,["file"]);n!=null&&p(e,["file"],aC(n));const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function oC(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","file"],F1(n));const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function cC(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","file"],F1(n));const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function uC(t){const e={},n=h(t,["details"]);n!=null&&p(e,["details"],n);const i=h(t,["message"]);i!=null&&p(e,["message"],i);const l=h(t,["code"]);return l!=null&&p(e,["code"],l),e}function Bf(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["mimeType"]);l!=null&&p(e,["mimeType"],l);const o=h(t,["sizeBytes"]);o!=null&&p(e,["sizeBytes"],o);const u=h(t,["createTime"]);u!=null&&p(e,["createTime"],u);const f=h(t,["expirationTime"]);f!=null&&p(e,["expirationTime"],f);const g=h(t,["updateTime"]);g!=null&&p(e,["updateTime"],g);const m=h(t,["sha256Hash"]);m!=null&&p(e,["sha256Hash"],m);const x=h(t,["uri"]);x!=null&&p(e,["uri"],x);const v=h(t,["downloadUri"]);v!=null&&p(e,["downloadUri"],v);const N=h(t,["state"]);N!=null&&p(e,["state"],N);const w=h(t,["source"]);w!=null&&p(e,["source"],w);const S=h(t,["videoMetadata"]);S!=null&&p(e,["videoMetadata"],S);const j=h(t,["error"]);return j!=null&&p(e,["error"],uC(j)),e}function dC(t){const e={},n=h(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const i=h(t,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>Bf(o))),p(e,["files"],l)}return e}function fC(){return{}}function mC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hC extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hc($s.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Bf(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rC(e);return o=Le("files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const m=dC(g),x=new R5;return Object.assign(x,m),x})}}async createInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lC(e);return o=Le("upload/v1beta/files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(()=>{const g=fC(),m=new I5;return Object.assign(m,g),m})}}async get(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oC(e);return o=Le("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Bf(g))}}async delete(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cC(e);return o=Le("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(()=>{const g=mC(),m=new D5;return Object.assign(m,g),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pC(t){const e={},n=h(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function gC(t){const e={},n=h(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function Y1(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],pC(n)),e}function xC(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],gC(n)),e}function yC(t){const e={},n=h(t,["speaker"]);n!=null&&p(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&p(e,["voiceConfig"],Y1(i)),e}function vC(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>yC(l))),p(e,["speakerVoiceConfigs"],i)}return e}function bC(t){const e={},n=h(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],Y1(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&p(e,["multiSpeakerVoiceConfig"],vC(i));const l=h(t,["languageCode"]);return l!=null&&p(e,["languageCode"],l),e}function wC(t){const e={},n=h(t,["voiceConfig"]);if(n!=null&&p(e,["voiceConfig"],xC(n)),h(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function NC(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function CC(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function SC(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TC(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["data"]);i!=null&&p(e,["data"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function jC(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function kC(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&p(e,["fileUri"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function EC(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],NC(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],SC(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],jC(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function AC(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],CC(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],TC(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],kC(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function _C(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>EC(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function MC(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>AC(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function RC(t){const e={},n=h(t,["behavior"]);n!=null&&p(e,["behavior"],n);const i=h(t,["description"]);i!=null&&p(e,["description"],i);const l=h(t,["name"]);l!=null&&p(e,["name"],l);const o=h(t,["parameters"]);o!=null&&p(e,["parameters"],o);const u=h(t,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=h(t,["response"]);f!=null&&p(e,["response"],f);const g=h(t,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function IC(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const i=h(t,["name"]);i!=null&&p(e,["name"],i);const l=h(t,["parameters"]);l!=null&&p(e,["parameters"],l);const o=h(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&p(e,["response"],u);const f=h(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function DC(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function LC(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function PC(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],DC(n)),e}function OC(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],LC(n)),e}function BC(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function UC(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function zC(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],BC(n)),e}function VC(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],UC(n)),e}function $C(){return{}}function qC(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function FC(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],qC(n));const i=h(t,["authType"]);i!=null&&p(e,["authType"],i);const l=h(t,["googleServiceAccountConfig"]);l!=null&&p(e,["googleServiceAccountConfig"],l);const o=h(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const u=h(t,["oauthConfig"]);u!=null&&p(e,["oauthConfig"],u);const f=h(t,["oidcConfig"]);return f!=null&&p(e,["oidcConfig"],f),e}function HC(t){const e={},n=h(t,["authConfig"]);return n!=null&&p(e,["authConfig"],FC(n)),e}function GC(){return{}}function JC(){return{}}function YC(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>RC(g))),p(e,["functionDeclarations"],f)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],PC(i));const l=h(t,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],zC(l)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&p(e,["urlContext"],GC());const u=h(t,["codeExecution"]);return u!=null&&p(e,["codeExecution"],u),e}function ZC(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(v=>IC(v))),p(e,["functionDeclarations"],x)}const i=h(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],OC(l));const o=h(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],VC(o)),h(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],$C());const f=h(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],HC(f)),h(t,["urlContext"])!=null&&p(e,["urlContext"],JC());const m=h(t,["codeExecution"]);return m!=null&&p(e,["codeExecution"],m),e}function QC(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KC(t){const e={},n=h(t,["handle"]);n!=null&&p(e,["handle"],n);const i=h(t,["transparent"]);return i!=null&&p(e,["transparent"],i),e}function Yx(){return{}}function Zx(){return{}}function WC(t){const e={},n=h(t,["disabled"]);n!=null&&p(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&p(e,["startOfSpeechSensitivity"],i);const l=h(t,["endOfSpeechSensitivity"]);l!=null&&p(e,["endOfSpeechSensitivity"],l);const o=h(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const u=h(t,["silenceDurationMs"]);return u!=null&&p(e,["silenceDurationMs"],u),e}function XC(t){const e={},n=h(t,["disabled"]);n!=null&&p(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&p(e,["startOfSpeechSensitivity"],i);const l=h(t,["endOfSpeechSensitivity"]);l!=null&&p(e,["endOfSpeechSensitivity"],l);const o=h(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const u=h(t,["silenceDurationMs"]);return u!=null&&p(e,["silenceDurationMs"],u),e}function eS(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],WC(n));const i=h(t,["activityHandling"]);i!=null&&p(e,["activityHandling"],i);const l=h(t,["turnCoverage"]);return l!=null&&p(e,["turnCoverage"],l),e}function tS(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],XC(n));const i=h(t,["activityHandling"]);i!=null&&p(e,["activityHandling"],i);const l=h(t,["turnCoverage"]);return l!=null&&p(e,["turnCoverage"],l),e}function nS(t){const e={},n=h(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function iS(t){const e={},n=h(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function rS(t){const e={},n=h(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&p(e,["slidingWindow"],nS(i)),e}function sS(t){const e={},n=h(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&p(e,["slidingWindow"],iS(i)),e}function aS(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function lS(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function oS(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const l=h(t,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=h(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=h(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=h(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const x=h(t,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],bC(cm(v)));const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],_C(nn(w)));const S=h(t,["tools"]);if(e!==void 0&&S!=null){let H=pl(S);Array.isArray(H)&&(H=H.map(I=>YC(hl(I)))),p(e,["setup","tools"],H)}const j=h(t,["sessionResumption"]);e!==void 0&&j!=null&&p(e,["setup","sessionResumption"],QC(j));const k=h(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&p(e,["setup","inputAudioTranscription"],Yx());const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],Yx());const L=h(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],eS(L));const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&p(e,["setup","contextWindowCompression"],rS(D));const O=h(t,["proactivity"]);return e!==void 0&&O!=null&&p(e,["setup","proactivity"],aS(O)),n}function cS(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const l=h(t,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=h(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=h(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=h(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const x=h(t,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],wC(cm(v)));const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],MC(nn(w)));const S=h(t,["tools"]);if(e!==void 0&&S!=null){let H=pl(S);Array.isArray(H)&&(H=H.map(I=>ZC(hl(I)))),p(e,["setup","tools"],H)}const j=h(t,["sessionResumption"]);e!==void 0&&j!=null&&p(e,["setup","sessionResumption"],KC(j));const k=h(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&p(e,["setup","inputAudioTranscription"],Zx());const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],Zx());const L=h(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],tS(L));const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&p(e,["setup","contextWindowCompression"],sS(D));const O=h(t,["proactivity"]);return e!==void 0&&O!=null&&p(e,["setup","proactivity"],lS(O)),n}function uS(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["setup","model"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],oS(l,n)),n}function dS(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["setup","model"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],cS(l,n)),n}function fS(){return{}}function mS(){return{}}function hS(){return{}}function pS(){return{}}function gS(t){const e={},n=h(t,["media"]);n!=null&&p(e,["mediaChunks"],U1(n));const i=h(t,["audio"]);i!=null&&p(e,["audio"],B5(i));const l=h(t,["audioStreamEnd"]);l!=null&&p(e,["audioStreamEnd"],l);const o=h(t,["video"]);o!=null&&p(e,["video"],O5(o));const u=h(t,["text"]);return u!=null&&p(e,["text"],u),h(t,["activityStart"])!=null&&p(e,["activityStart"],fS()),h(t,["activityEnd"])!=null&&p(e,["activityEnd"],hS()),e}function xS(t){const e={},n=h(t,["media"]);if(n!=null&&p(e,["mediaChunks"],U1(n)),h(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=h(t,["audioStreamEnd"]);if(i!=null&&p(e,["audioStreamEnd"],i),h(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(h(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return h(t,["activityStart"])!=null&&p(e,["activityStart"],mS()),h(t,["activityEnd"])!=null&&p(e,["activityEnd"],pS()),e}function Z1(t){const e={},n=h(t,["text"]);n!=null&&p(e,["text"],n);const i=h(t,["weight"]);return i!=null&&p(e,["weight"],i),e}function yS(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Z1(l))),p(e,["weightedPrompts"],i)}return e}function Q1(t){const e={},n=h(t,["temperature"]);n!=null&&p(e,["temperature"],n);const i=h(t,["topK"]);i!=null&&p(e,["topK"],i);const l=h(t,["seed"]);l!=null&&p(e,["seed"],l);const o=h(t,["guidance"]);o!=null&&p(e,["guidance"],o);const u=h(t,["bpm"]);u!=null&&p(e,["bpm"],u);const f=h(t,["density"]);f!=null&&p(e,["density"],f);const g=h(t,["brightness"]);g!=null&&p(e,["brightness"],g);const m=h(t,["scale"]);m!=null&&p(e,["scale"],m);const x=h(t,["muteBass"]);x!=null&&p(e,["muteBass"],x);const v=h(t,["muteDrums"]);v!=null&&p(e,["muteDrums"],v);const N=h(t,["onlyBassAndDrums"]);return N!=null&&p(e,["onlyBassAndDrums"],N),e}function vS(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],Q1(n)),e}function K1(t){const e={},n=h(t,["model"]);return n!=null&&p(e,["model"],n),e}function W1(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Z1(l))),p(e,["weightedPrompts"],i)}return e}function Uf(t){const e={},n=h(t,["setup"]);n!=null&&p(e,["setup"],K1(n));const i=h(t,["clientContent"]);i!=null&&p(e,["clientContent"],W1(i));const l=h(t,["musicGenerationConfig"]);l!=null&&p(e,["musicGenerationConfig"],Q1(l));const o=h(t,["playbackControl"]);return o!=null&&p(e,["playbackControl"],o),e}function bS(){return{}}function wS(){return{}}function NS(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function CS(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function SS(t){const e={},n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TS(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["data"]);i!=null&&p(e,["data"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function jS(t){const e={},n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function kS(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&p(e,["fileUri"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function ES(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],NS(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],SS(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],jS(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function AS(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],CS(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],TS(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],kS(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function _S(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>ES(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function MS(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>AS(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function Qx(t){const e={},n=h(t,["text"]);n!=null&&p(e,["text"],n);const i=h(t,["finished"]);return i!=null&&p(e,["finished"],i),e}function Kx(t){const e={},n=h(t,["text"]);n!=null&&p(e,["text"],n);const i=h(t,["finished"]);return i!=null&&p(e,["finished"],i),e}function RS(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&p(e,["urlRetrievalStatus"],i),e}function IS(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>RS(l))),p(e,["urlMetadata"],i)}return e}function DS(t){const e={},n=h(t,["modelTurn"]);n!=null&&p(e,["modelTurn"],_S(n));const i=h(t,["turnComplete"]);i!=null&&p(e,["turnComplete"],i);const l=h(t,["interrupted"]);l!=null&&p(e,["interrupted"],l);const o=h(t,["groundingMetadata"]);o!=null&&p(e,["groundingMetadata"],o);const u=h(t,["generationComplete"]);u!=null&&p(e,["generationComplete"],u);const f=h(t,["inputTranscription"]);f!=null&&p(e,["inputTranscription"],Qx(f));const g=h(t,["outputTranscription"]);g!=null&&p(e,["outputTranscription"],Qx(g));const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],IS(m)),e}function LS(t){const e={},n=h(t,["modelTurn"]);n!=null&&p(e,["modelTurn"],MS(n));const i=h(t,["turnComplete"]);i!=null&&p(e,["turnComplete"],i);const l=h(t,["interrupted"]);l!=null&&p(e,["interrupted"],l);const o=h(t,["groundingMetadata"]);o!=null&&p(e,["groundingMetadata"],o);const u=h(t,["generationComplete"]);u!=null&&p(e,["generationComplete"],u);const f=h(t,["inputTranscription"]);f!=null&&p(e,["inputTranscription"],Kx(f));const g=h(t,["outputTranscription"]);return g!=null&&p(e,["outputTranscription"],Kx(g)),e}function PS(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const i=h(t,["args"]);i!=null&&p(e,["args"],i);const l=h(t,["name"]);return l!=null&&p(e,["name"],l),e}function OS(t){const e={},n=h(t,["args"]);n!=null&&p(e,["args"],n);const i=h(t,["name"]);return i!=null&&p(e,["name"],i),e}function BS(t){const e={},n=h(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>PS(l))),p(e,["functionCalls"],i)}return e}function US(t){const e={},n=h(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>OS(l))),p(e,["functionCalls"],i)}return e}function zS(t){const e={},n=h(t,["ids"]);return n!=null&&p(e,["ids"],n),e}function VS(t){const e={},n=h(t,["ids"]);return n!=null&&p(e,["ids"],n),e}function Io(t){const e={},n=h(t,["modality"]);n!=null&&p(e,["modality"],n);const i=h(t,["tokenCount"]);return i!=null&&p(e,["tokenCount"],i),e}function Do(t){const e={},n=h(t,["modality"]);n!=null&&p(e,["modality"],n);const i=h(t,["tokenCount"]);return i!=null&&p(e,["tokenCount"],i),e}function $S(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=h(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const l=h(t,["responseTokenCount"]);l!=null&&p(e,["responseTokenCount"],l);const o=h(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const u=h(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=h(t,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=h(t,["promptTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(w=>Io(w))),p(e,["promptTokensDetails"],N)}const m=h(t,["cacheTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(w=>Io(w))),p(e,["cacheTokensDetails"],N)}const x=h(t,["responseTokensDetails"]);if(x!=null){let N=x;Array.isArray(N)&&(N=N.map(w=>Io(w))),p(e,["responseTokensDetails"],N)}const v=h(t,["toolUsePromptTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(w=>Io(w))),p(e,["toolUsePromptTokensDetails"],N)}return e}function qS(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=h(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const l=h(t,["candidatesTokenCount"]);l!=null&&p(e,["responseTokenCount"],l);const o=h(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const u=h(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=h(t,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=h(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(S=>Do(S))),p(e,["promptTokensDetails"],w)}const m=h(t,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(S=>Do(S))),p(e,["cacheTokensDetails"],w)}const x=h(t,["candidatesTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(S=>Do(S))),p(e,["responseTokensDetails"],w)}const v=h(t,["toolUsePromptTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>Do(S))),p(e,["toolUsePromptTokensDetails"],w)}const N=h(t,["trafficType"]);return N!=null&&p(e,["trafficType"],N),e}function FS(t){const e={},n=h(t,["timeLeft"]);return n!=null&&p(e,["timeLeft"],n),e}function HS(t){const e={},n=h(t,["timeLeft"]);return n!=null&&p(e,["timeLeft"],n),e}function GS(t){const e={},n=h(t,["newHandle"]);n!=null&&p(e,["newHandle"],n);const i=h(t,["resumable"]);i!=null&&p(e,["resumable"],i);const l=h(t,["lastConsumedClientMessageIndex"]);return l!=null&&p(e,["lastConsumedClientMessageIndex"],l),e}function JS(t){const e={},n=h(t,["newHandle"]);n!=null&&p(e,["newHandle"],n);const i=h(t,["resumable"]);i!=null&&p(e,["resumable"],i);const l=h(t,["lastConsumedClientMessageIndex"]);return l!=null&&p(e,["lastConsumedClientMessageIndex"],l),e}function YS(t){const e={};h(t,["setupComplete"])!=null&&p(e,["setupComplete"],bS());const i=h(t,["serverContent"]);i!=null&&p(e,["serverContent"],DS(i));const l=h(t,["toolCall"]);l!=null&&p(e,["toolCall"],BS(l));const o=h(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],zS(o));const u=h(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],$S(u));const f=h(t,["goAway"]);f!=null&&p(e,["goAway"],FS(f));const g=h(t,["sessionResumptionUpdate"]);return g!=null&&p(e,["sessionResumptionUpdate"],GS(g)),e}function ZS(t){const e={};h(t,["setupComplete"])!=null&&p(e,["setupComplete"],wS());const i=h(t,["serverContent"]);i!=null&&p(e,["serverContent"],LS(i));const l=h(t,["toolCall"]);l!=null&&p(e,["toolCall"],US(l));const o=h(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],VS(o));const u=h(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],qS(u));const f=h(t,["goAway"]);f!=null&&p(e,["goAway"],HS(f));const g=h(t,["sessionResumptionUpdate"]);return g!=null&&p(e,["sessionResumptionUpdate"],JS(g)),e}function QS(){return{}}function KS(t){const e={},n=h(t,["text"]);n!=null&&p(e,["text"],n);const i=h(t,["weight"]);return i!=null&&p(e,["weight"],i),e}function WS(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>KS(l))),p(e,["weightedPrompts"],i)}return e}function XS(t){const e={},n=h(t,["temperature"]);n!=null&&p(e,["temperature"],n);const i=h(t,["topK"]);i!=null&&p(e,["topK"],i);const l=h(t,["seed"]);l!=null&&p(e,["seed"],l);const o=h(t,["guidance"]);o!=null&&p(e,["guidance"],o);const u=h(t,["bpm"]);u!=null&&p(e,["bpm"],u);const f=h(t,["density"]);f!=null&&p(e,["density"],f);const g=h(t,["brightness"]);g!=null&&p(e,["brightness"],g);const m=h(t,["scale"]);m!=null&&p(e,["scale"],m);const x=h(t,["muteBass"]);x!=null&&p(e,["muteBass"],x);const v=h(t,["muteDrums"]);v!=null&&p(e,["muteDrums"],v);const N=h(t,["onlyBassAndDrums"]);return N!=null&&p(e,["onlyBassAndDrums"],N),e}function e4(t){const e={},n=h(t,["clientContent"]);n!=null&&p(e,["clientContent"],WS(n));const i=h(t,["musicGenerationConfig"]);return i!=null&&p(e,["musicGenerationConfig"],XS(i)),e}function t4(t){const e={},n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);i!=null&&p(e,["mimeType"],i);const l=h(t,["sourceMetadata"]);return l!=null&&p(e,["sourceMetadata"],e4(l)),e}function n4(t){const e={},n=h(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>t4(l))),p(e,["audioChunks"],i)}return e}function i4(t){const e={},n=h(t,["text"]);n!=null&&p(e,["text"],n);const i=h(t,["filteredReason"]);return i!=null&&p(e,["filteredReason"],i),e}function r4(t){const e={};h(t,["setupComplete"])!=null&&p(e,["setupComplete"],QS());const i=h(t,["serverContent"]);i!=null&&p(e,["serverContent"],n4(i));const l=h(t,["filteredPrompt"]);return l!=null&&p(e,["filteredPrompt"],i4(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s4(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function a4(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function l4(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function o4(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],s4(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],a4(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],l4(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function gc(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>o4(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function c4(t){const e={},n=h(t,["anyOf"]);n!=null&&p(e,["anyOf"],n);const i=h(t,["default"]);i!=null&&p(e,["default"],i);const l=h(t,["description"]);l!=null&&p(e,["description"],l);const o=h(t,["enum"]);o!=null&&p(e,["enum"],o);const u=h(t,["example"]);u!=null&&p(e,["example"],u);const f=h(t,["format"]);f!=null&&p(e,["format"],f);const g=h(t,["items"]);g!=null&&p(e,["items"],g);const m=h(t,["maxItems"]);m!=null&&p(e,["maxItems"],m);const x=h(t,["maxLength"]);x!=null&&p(e,["maxLength"],x);const v=h(t,["maxProperties"]);v!=null&&p(e,["maxProperties"],v);const N=h(t,["maximum"]);N!=null&&p(e,["maximum"],N);const w=h(t,["minItems"]);w!=null&&p(e,["minItems"],w);const S=h(t,["minLength"]);S!=null&&p(e,["minLength"],S);const j=h(t,["minProperties"]);j!=null&&p(e,["minProperties"],j);const k=h(t,["minimum"]);k!=null&&p(e,["minimum"],k);const E=h(t,["nullable"]);E!=null&&p(e,["nullable"],E);const L=h(t,["pattern"]);L!=null&&p(e,["pattern"],L);const D=h(t,["properties"]);D!=null&&p(e,["properties"],D);const O=h(t,["propertyOrdering"]);O!=null&&p(e,["propertyOrdering"],O);const H=h(t,["required"]);H!=null&&p(e,["required"],H);const I=h(t,["title"]);I!=null&&p(e,["title"],I);const R=h(t,["type"]);return R!=null&&p(e,["type"],R),e}function u4(t){const e={};if(h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(t,["category"]);n!=null&&p(e,["category"],n);const i=h(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function d4(t){const e={},n=h(t,["behavior"]);n!=null&&p(e,["behavior"],n);const i=h(t,["description"]);i!=null&&p(e,["description"],i);const l=h(t,["name"]);l!=null&&p(e,["name"],l);const o=h(t,["parameters"]);o!=null&&p(e,["parameters"],o);const u=h(t,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=h(t,["response"]);f!=null&&p(e,["response"],f);const g=h(t,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function f4(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function m4(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],f4(n)),e}function h4(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function p4(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],h4(n)),e}function g4(){return{}}function x4(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>d4(g))),p(e,["functionDeclarations"],f)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],m4(i));const l=h(t,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],p4(l)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&p(e,["urlContext"],g4());const u=h(t,["codeExecution"]);return u!=null&&p(e,["codeExecution"],u),e}function y4(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&p(e,["allowedFunctionNames"],i),e}function v4(t){const e={},n=h(t,["latitude"]);n!=null&&p(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&p(e,["longitude"],i),e}function b4(t){const e={},n=h(t,["latLng"]);n!=null&&p(e,["latLng"],v4(n));const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function w4(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],y4(n));const i=h(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],b4(i)),e}function N4(t){const e={},n=h(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function X1(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],N4(n)),e}function C4(t){const e={},n=h(t,["speaker"]);n!=null&&p(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&p(e,["voiceConfig"],X1(i)),e}function S4(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>C4(l))),p(e,["speakerVoiceConfigs"],i)}return e}function T4(t){const e={},n=h(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],X1(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&p(e,["multiSpeakerVoiceConfig"],S4(i));const l=h(t,["languageCode"]);return l!=null&&p(e,["languageCode"],l),e}function j4(t){const e={},n=h(t,["includeThoughts"]);n!=null&&p(e,["includeThoughts"],n);const i=h(t,["thinkingBudget"]);return i!=null&&p(e,["thinkingBudget"],i),e}function k4(t,e,n){const i={},l=h(e,["systemInstruction"]);n!==void 0&&l!=null&&p(n,["systemInstruction"],gc(nn(l)));const o=h(e,["temperature"]);o!=null&&p(i,["temperature"],o);const u=h(e,["topP"]);u!=null&&p(i,["topP"],u);const f=h(e,["topK"]);f!=null&&p(i,["topK"],f);const g=h(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const m=h(e,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const x=h(e,["stopSequences"]);x!=null&&p(i,["stopSequences"],x);const v=h(e,["responseLogprobs"]);v!=null&&p(i,["responseLogprobs"],v);const N=h(e,["logprobs"]);N!=null&&p(i,["logprobs"],N);const w=h(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const S=h(e,["frequencyPenalty"]);S!=null&&p(i,["frequencyPenalty"],S);const j=h(e,["seed"]);j!=null&&p(i,["seed"],j);const k=h(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const E=h(e,["responseSchema"]);if(E!=null&&p(i,["responseSchema"],c4(sc(E))),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let W=L;Array.isArray(W)&&(W=W.map(G=>u4(G))),p(n,["safetySettings"],W)}const D=h(e,["tools"]);if(n!==void 0&&D!=null){let W=pl(D);Array.isArray(W)&&(W=W.map(G=>x4(hl(G)))),p(n,["tools"],W)}const O=h(e,["toolConfig"]);if(n!==void 0&&O!=null&&p(n,["toolConfig"],w4(O)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=h(e,["cachedContent"]);n!==void 0&&H!=null&&p(n,["cachedContent"],sr(t,H));const I=h(e,["responseModalities"]);I!=null&&p(i,["responseModalities"],I);const R=h(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const q=h(e,["speechConfig"]);if(q!=null&&p(i,["speechConfig"],T4($1(q))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=h(e,["thinkingConfig"]);return B!=null&&p(i,["thinkingConfig"],j4(B)),i}function Wx(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);if(l!=null){let u=Vn(l);Array.isArray(u)&&(u=u.map(f=>gc(f))),p(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&p(n,["generationConfig"],k4(t,o,n)),n}function E4(t,e){const n={},i=h(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const l=h(t,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const o=h(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function A4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);l!=null&&p(n,["requests[]","content"],V1(t,l));const o=h(e,["config"]);o!=null&&p(n,["config"],E4(o,n));const u=h(e,["model"]);return u!==void 0&&p(n,["requests[]","model"],vt(t,u)),n}function _4(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const l=h(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const o=h(t,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=h(t,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=h(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const m=h(t,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const x=h(t,["language"]);e!==void 0&&x!=null&&p(e,["parameters","language"],x);const v=h(t,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const N=h(t,["outputCompressionQuality"]);if(e!==void 0&&N!=null&&p(e,["parameters","outputOptions","compressionQuality"],N),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function M4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["prompt"]);l!=null&&p(n,["instances[0]","prompt"],l);const o=h(e,["config"]);return o!=null&&p(n,["config"],_4(o,n)),n}function R4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","name"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function I4(t,e,n){const i={},l=h(e,["pageSize"]);n!==void 0&&l!=null&&p(n,["_query","pageSize"],l);const o=h(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const u=h(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const f=h(e,["queryBase"]);return n!==void 0&&f!=null&&p(n,["_url","models_url"],H1(t,f)),i}function D4(t,e){const n={},i=h(e,["config"]);return i!=null&&p(n,["config"],I4(t,i,n)),n}function L4(t,e){const n={},i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const l=h(t,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const o=h(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function P4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","name"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],L4(l,n)),n}function O4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","name"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function B4(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function U4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);if(l!=null){let u=Vn(l);Array.isArray(u)&&(u=u.map(f=>gc(f))),p(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&p(n,["config"],B4(o)),n}function z4(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],_i(n));const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function V4(t,e){const n={},i=h(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=h(t,["durationSeconds"]);if(e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["aspectRatio"]);if(e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o),h(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=h(t,["personGeneration"]);if(e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=h(t,["negativePrompt"]);e!==void 0&&f!=null&&p(e,["parameters","negativePrompt"],f);const g=h(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function $4(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["prompt"]);l!=null&&p(n,["instances[0]","prompt"],l);const o=h(e,["image"]);if(o!=null&&p(n,["instances[0]","image"],z4(o)),h(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=h(e,["config"]);return u!=null&&p(n,["config"],V4(u,n)),n}function q4(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function F4(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["data"]);i!=null&&p(e,["data"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function H4(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&p(e,["fileUri"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function G4(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],q4(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],F4(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],H4(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function Fs(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>G4(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function J4(t){const e={},n=h(t,["anyOf"]);n!=null&&p(e,["anyOf"],n);const i=h(t,["default"]);i!=null&&p(e,["default"],i);const l=h(t,["description"]);l!=null&&p(e,["description"],l);const o=h(t,["enum"]);o!=null&&p(e,["enum"],o);const u=h(t,["example"]);u!=null&&p(e,["example"],u);const f=h(t,["format"]);f!=null&&p(e,["format"],f);const g=h(t,["items"]);g!=null&&p(e,["items"],g);const m=h(t,["maxItems"]);m!=null&&p(e,["maxItems"],m);const x=h(t,["maxLength"]);x!=null&&p(e,["maxLength"],x);const v=h(t,["maxProperties"]);v!=null&&p(e,["maxProperties"],v);const N=h(t,["maximum"]);N!=null&&p(e,["maximum"],N);const w=h(t,["minItems"]);w!=null&&p(e,["minItems"],w);const S=h(t,["minLength"]);S!=null&&p(e,["minLength"],S);const j=h(t,["minProperties"]);j!=null&&p(e,["minProperties"],j);const k=h(t,["minimum"]);k!=null&&p(e,["minimum"],k);const E=h(t,["nullable"]);E!=null&&p(e,["nullable"],E);const L=h(t,["pattern"]);L!=null&&p(e,["pattern"],L);const D=h(t,["properties"]);D!=null&&p(e,["properties"],D);const O=h(t,["propertyOrdering"]);O!=null&&p(e,["propertyOrdering"],O);const H=h(t,["required"]);H!=null&&p(e,["required"],H);const I=h(t,["title"]);I!=null&&p(e,["title"],I);const R=h(t,["type"]);return R!=null&&p(e,["type"],R),e}function Y4(t){const e={},n=h(t,["featureSelectionPreference"]);return n!=null&&p(e,["featureSelectionPreference"],n),e}function Z4(t){const e={},n=h(t,["method"]);n!=null&&p(e,["method"],n);const i=h(t,["category"]);i!=null&&p(e,["category"],i);const l=h(t,["threshold"]);return l!=null&&p(e,["threshold"],l),e}function Q4(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const i=h(t,["name"]);i!=null&&p(e,["name"],i);const l=h(t,["parameters"]);l!=null&&p(e,["parameters"],l);const o=h(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&p(e,["response"],u);const f=h(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function K4(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function W4(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],K4(n)),e}function X4(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function e3(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],X4(n)),e}function t3(){return{}}function n3(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function i3(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],n3(n));const i=h(t,["authType"]);i!=null&&p(e,["authType"],i);const l=h(t,["googleServiceAccountConfig"]);l!=null&&p(e,["googleServiceAccountConfig"],l);const o=h(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const u=h(t,["oauthConfig"]);u!=null&&p(e,["oauthConfig"],u);const f=h(t,["oidcConfig"]);return f!=null&&p(e,["oidcConfig"],f),e}function r3(t){const e={},n=h(t,["authConfig"]);return n!=null&&p(e,["authConfig"],i3(n)),e}function s3(){return{}}function ev(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(v=>Q4(v))),p(e,["functionDeclarations"],x)}const i=h(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],W4(l));const o=h(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],e3(o)),h(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],t3());const f=h(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],r3(f)),h(t,["urlContext"])!=null&&p(e,["urlContext"],s3());const m=h(t,["codeExecution"]);return m!=null&&p(e,["codeExecution"],m),e}function a3(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&p(e,["allowedFunctionNames"],i),e}function l3(t){const e={},n=h(t,["latitude"]);n!=null&&p(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&p(e,["longitude"],i),e}function o3(t){const e={},n=h(t,["latLng"]);n!=null&&p(e,["latLng"],l3(n));const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function c3(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],a3(n));const i=h(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],o3(i)),e}function u3(t){const e={},n=h(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function d3(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],u3(n)),e}function f3(t){const e={},n=h(t,["voiceConfig"]);if(n!=null&&p(e,["voiceConfig"],d3(n)),h(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function m3(t){const e={},n=h(t,["includeThoughts"]);n!=null&&p(e,["includeThoughts"],n);const i=h(t,["thinkingBudget"]);return i!=null&&p(e,["thinkingBudget"],i),e}function h3(t,e,n){const i={},l=h(e,["systemInstruction"]);n!==void 0&&l!=null&&p(n,["systemInstruction"],Fs(nn(l)));const o=h(e,["temperature"]);o!=null&&p(i,["temperature"],o);const u=h(e,["topP"]);u!=null&&p(i,["topP"],u);const f=h(e,["topK"]);f!=null&&p(i,["topK"],f);const g=h(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const m=h(e,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const x=h(e,["stopSequences"]);x!=null&&p(i,["stopSequences"],x);const v=h(e,["responseLogprobs"]);v!=null&&p(i,["responseLogprobs"],v);const N=h(e,["logprobs"]);N!=null&&p(i,["logprobs"],N);const w=h(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const S=h(e,["frequencyPenalty"]);S!=null&&p(i,["frequencyPenalty"],S);const j=h(e,["seed"]);j!=null&&p(i,["seed"],j);const k=h(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const E=h(e,["responseSchema"]);E!=null&&p(i,["responseSchema"],J4(sc(E)));const L=h(e,["routingConfig"]);L!=null&&p(i,["routingConfig"],L);const D=h(e,["modelSelectionConfig"]);D!=null&&p(i,["modelConfig"],Y4(D));const O=h(e,["safetySettings"]);if(n!==void 0&&O!=null){let $=O;Array.isArray($)&&($=$.map(Y=>Z4(Y))),p(n,["safetySettings"],$)}const H=h(e,["tools"]);if(n!==void 0&&H!=null){let $=pl(H);Array.isArray($)&&($=$.map(Y=>ev(hl(Y)))),p(n,["tools"],$)}const I=h(e,["toolConfig"]);n!==void 0&&I!=null&&p(n,["toolConfig"],c3(I));const R=h(e,["labels"]);n!==void 0&&R!=null&&p(n,["labels"],R);const q=h(e,["cachedContent"]);n!==void 0&&q!=null&&p(n,["cachedContent"],sr(t,q));const B=h(e,["responseModalities"]);B!=null&&p(i,["responseModalities"],B);const W=h(e,["mediaResolution"]);W!=null&&p(i,["mediaResolution"],W);const G=h(e,["speechConfig"]);G!=null&&p(i,["speechConfig"],f3($1(G)));const J=h(e,["audioTimestamp"]);J!=null&&p(i,["audioTimestamp"],J);const z=h(e,["thinkingConfig"]);return z!=null&&p(i,["thinkingConfig"],m3(z)),i}function Xx(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);if(l!=null){let u=Vn(l);Array.isArray(u)&&(u=u.map(f=>Fs(f))),p(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&p(n,["generationConfig"],h3(t,o,n)),n}function p3(t,e){const n={},i=h(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const l=h(t,["title"]);e!==void 0&&l!=null&&p(e,["instances[]","title"],l);const o=h(t,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const u=h(t,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=h(t,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),n}function g3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);l!=null&&p(n,["instances[]","content"],V1(t,l));const o=h(e,["config"]);return o!=null&&p(n,["config"],p3(o,n)),n}function x3(t,e){const n={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const o=h(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=h(t,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=h(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const m=h(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const x=h(t,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const v=h(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const N=h(t,["includeRaiReason"]);e!==void 0&&N!=null&&p(e,["parameters","includeRaiReason"],N);const w=h(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const S=h(t,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const j=h(t,["outputCompressionQuality"]);e!==void 0&&j!=null&&p(e,["parameters","outputOptions","compressionQuality"],j);const k=h(t,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const E=h(t,["enhancePrompt"]);return e!==void 0&&E!=null&&p(e,["parameters","enhancePrompt"],E),n}function y3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["prompt"]);l!=null&&p(n,["instances[0]","prompt"],l);const o=h(e,["config"]);return o!=null&&p(n,["config"],x3(o,n)),n}function xc(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=h(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],_i(i));const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function v3(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=h(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const l=h(t,["maskDilation"]);return l!=null&&p(e,["dilation"],l),e}function b3(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=h(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function w3(t){const e={},n=h(t,["styleDescription"]);return n!=null&&p(e,["styleDescription"],n),e}function N3(t){const e={},n=h(t,["subjectType"]);n!=null&&p(e,["subjectType"],n);const i=h(t,["subjectDescription"]);return i!=null&&p(e,["subjectDescription"],i),e}function C3(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],xc(n));const i=h(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const l=h(t,["referenceType"]);l!=null&&p(e,["referenceType"],l);const o=h(t,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],v3(o));const u=h(t,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],b3(u));const f=h(t,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],w3(f));const g=h(t,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],N3(g)),e}function S3(t,e){const n={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const o=h(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=h(t,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=h(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const m=h(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const x=h(t,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const v=h(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const N=h(t,["includeRaiReason"]);e!==void 0&&N!=null&&p(e,["parameters","includeRaiReason"],N);const w=h(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const S=h(t,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const j=h(t,["outputCompressionQuality"]);e!==void 0&&j!=null&&p(e,["parameters","outputOptions","compressionQuality"],j);const k=h(t,["editMode"]);e!==void 0&&k!=null&&p(e,["parameters","editMode"],k);const E=h(t,["baseSteps"]);return e!==void 0&&E!=null&&p(e,["parameters","editConfig","baseSteps"],E),n}function T3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["prompt"]);l!=null&&p(n,["instances[0]","prompt"],l);const o=h(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>C3(g))),p(n,["instances[0]","referenceImages"],f)}const u=h(e,["config"]);return u!=null&&p(n,["config"],S3(u,n)),n}function j3(t,e){const n={},i=h(t,["includeRaiReason"]);e!==void 0&&i!=null&&p(e,["parameters","includeRaiReason"],i);const l=h(t,["outputMimeType"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","mimeType"],l);const o=h(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&p(e,["parameters","outputOptions","compressionQuality"],o);const u=h(t,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=h(t,["mode"]);return e!==void 0&&f!=null&&p(e,["parameters","mode"],f),n}function k3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["image"]);l!=null&&p(n,["instances[0]","image"],xc(l));const o=h(e,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const u=h(e,["config"]);return u!=null&&p(n,["config"],j3(u,n)),n}function E3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","name"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function A3(t,e,n){const i={},l=h(e,["pageSize"]);n!==void 0&&l!=null&&p(n,["_query","pageSize"],l);const o=h(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const u=h(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const f=h(e,["queryBase"]);return n!==void 0&&f!=null&&p(n,["_url","models_url"],H1(t,f)),i}function _3(t,e){const n={},i=h(e,["config"]);return i!=null&&p(n,["config"],A3(t,i,n)),n}function M3(t,e){const n={},i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const l=h(t,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const o=h(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function R3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],M3(l,n)),n}function I3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","name"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],l),n}function D3(t,e){const n={},i=h(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Fs(nn(i)));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>ev(f))),p(e,["tools"],u)}const o=h(t,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],o),n}function L3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);if(l!=null){let u=Vn(l);Array.isArray(u)&&(u=u.map(f=>Fs(f))),p(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&p(n,["config"],D3(o,n)),n}function P3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["contents"]);if(l!=null){let u=Vn(l);Array.isArray(u)&&(u=u.map(f=>Fs(f))),p(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&p(n,["config"],o),n}function O3(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=h(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],_i(i));const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function B3(t,e){const n={},i=h(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const l=h(t,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const o=h(t,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const u=h(t,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=h(t,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=h(t,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const m=h(t,["resolution"]);e!==void 0&&m!=null&&p(e,["parameters","resolution"],m);const x=h(t,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const v=h(t,["pubsubTopic"]);e!==void 0&&v!=null&&p(e,["parameters","pubsubTopic"],v);const N=h(t,["negativePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","negativePrompt"],N);const w=h(t,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const S=h(t,["generateAudio"]);e!==void 0&&S!=null&&p(e,["parameters","generateAudio"],S);const j=h(t,["lastFrame"]);return e!==void 0&&j!=null&&p(e,["instances[0]","lastFrame"],xc(j)),n}function U3(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["_url","model"],vt(t,i));const l=h(e,["prompt"]);l!=null&&p(n,["instances[0]","prompt"],l);const o=h(e,["image"]);o!=null&&p(n,["instances[0]","image"],xc(o));const u=h(e,["video"]);u!=null&&p(n,["instances[0]","video"],O3(u));const f=h(e,["config"]);return f!=null&&p(n,["config"],B3(f,n)),n}function z3(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function V3(t){const e={},n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function $3(t){const e={},n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function q3(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],z3(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],V3(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],$3(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function F3(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>q3(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function H3(t){const e={},n=h(t,["citationSources"]);return n!=null&&p(e,["citations"],n),e}function G3(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&p(e,["urlRetrievalStatus"],i),e}function J3(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>G3(l))),p(e,["urlMetadata"],i)}return e}function Y3(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],F3(n));const i=h(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],H3(i));const l=h(t,["tokenCount"]);l!=null&&p(e,["tokenCount"],l);const o=h(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const u=h(t,["urlContextMetadata"]);u!=null&&p(e,["urlContextMetadata"],J3(u));const f=h(t,["avgLogprobs"]);f!=null&&p(e,["avgLogprobs"],f);const g=h(t,["groundingMetadata"]);g!=null&&p(e,["groundingMetadata"],g);const m=h(t,["index"]);m!=null&&p(e,["index"],m);const x=h(t,["logprobsResult"]);x!=null&&p(e,["logprobsResult"],x);const v=h(t,["safetyRatings"]);return v!=null&&p(e,["safetyRatings"],v),e}function ey(t){const e={},n=h(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>Y3(f))),p(e,["candidates"],u)}const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const l=h(t,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const o=h(t,["usageMetadata"]);return o!=null&&p(e,["usageMetadata"],o),e}function Z3(t){const e={},n=h(t,["values"]);return n!=null&&p(e,["values"],n),e}function Q3(){return{}}function K3(t){const e={},n=h(t,["embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>Z3(o))),p(e,["embeddings"],l)}return h(t,["metadata"])!=null&&p(e,["metadata"],Q3()),e}function W3(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],_i(n));const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tv(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=h(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const l=h(t,["contentType"]);return l!=null&&p(e,["contentType"],l),e}function X3(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],W3(n));const i=h(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const l=h(t,["_self"]);return l!=null&&p(e,["safetyAttributes"],tv(l)),e}function eT(t){const e={},n=h(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>X3(o))),p(e,["generatedImages"],l)}const i=h(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],tv(i)),e}function tT(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=h(t,["createTime"]);i!=null&&p(e,["createTime"],i);const l=h(t,["updateTime"]);return l!=null&&p(e,["updateTime"],l),e}function zf(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["description"]);l!=null&&p(e,["description"],l);const o=h(t,["version"]);o!=null&&p(e,["version"],o);const u=h(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],tT(u));const f=h(t,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=h(t,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const m=h(t,["supportedGenerationMethods"]);return m!=null&&p(e,["supportedActions"],m),e}function nT(t,e){const n={},i=h(e,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const l=h(e,["_self"]);if(l!=null){let o=G1(l);Array.isArray(o)&&(o=o.map(u=>zf(u))),p(n,["models"],o)}return n}function iT(){return{}}function rT(t){const e={},n=h(t,["totalTokens"]);n!=null&&p(e,["totalTokens"],n);const i=h(t,["cachedContentTokenCount"]);return i!=null&&p(e,["cachedContentTokenCount"],i),e}function sT(t){const e={},n=h(t,["video","uri"]);n!=null&&p(e,["uri"],n);const i=h(t,["video","encodedVideo"]);i!=null&&p(e,["videoBytes"],_i(i));const l=h(t,["encoding"]);return l!=null&&p(e,["mimeType"],l),e}function aT(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],sT(n)),e}function lT(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>aT(u))),p(e,["generatedVideos"],o)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const l=h(t,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function oT(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["metadata"]);i!=null&&p(e,["metadata"],i);const l=h(t,["done"]);l!=null&&p(e,["done"],l);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const u=h(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],lT(u)),e}function cT(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function uT(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["data"]);i!=null&&p(e,["data"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function dT(t){const e={},n=h(t,["displayName"]);n!=null&&p(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&p(e,["fileUri"],i);const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function fT(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],cT(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],uT(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],dT(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function mT(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>fT(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function hT(t){const e={},n=h(t,["citations"]);return n!=null&&p(e,["citations"],n),e}function pT(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&p(e,["urlRetrievalStatus"],i),e}function gT(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>pT(l))),p(e,["urlMetadata"],i)}return e}function xT(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],mT(n));const i=h(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],hT(i));const l=h(t,["finishMessage"]);l!=null&&p(e,["finishMessage"],l);const o=h(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const u=h(t,["urlContextMetadata"]);u!=null&&p(e,["urlContextMetadata"],gT(u));const f=h(t,["avgLogprobs"]);f!=null&&p(e,["avgLogprobs"],f);const g=h(t,["groundingMetadata"]);g!=null&&p(e,["groundingMetadata"],g);const m=h(t,["index"]);m!=null&&p(e,["index"],m);const x=h(t,["logprobsResult"]);x!=null&&p(e,["logprobsResult"],x);const v=h(t,["safetyRatings"]);return v!=null&&p(e,["safetyRatings"],v),e}function ty(t){const e={},n=h(t,["candidates"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>xT(m))),p(e,["candidates"],g)}const i=h(t,["createTime"]);i!=null&&p(e,["createTime"],i);const l=h(t,["responseId"]);l!=null&&p(e,["responseId"],l);const o=h(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const u=h(t,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=h(t,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function yT(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=h(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function vT(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const i=h(t,["statistics"]);return i!=null&&p(e,["statistics"],yT(i)),e}function bT(t){const e={},n=h(t,["billableCharacterCount"]);return n!=null&&p(e,["billableCharacterCount"],n),e}function wT(t){const e={},n=h(t,["predictions[]","embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>vT(o))),p(e,["embeddings"],l)}const i=h(t,["metadata"]);return i!=null&&p(e,["metadata"],bT(i)),e}function NT(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],_i(i));const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function nv(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=h(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const l=h(t,["contentType"]);return l!=null&&p(e,["contentType"],l),e}function um(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],NT(n));const i=h(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const l=h(t,["_self"]);l!=null&&p(e,["safetyAttributes"],nv(l));const o=h(t,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function CT(t){const e={},n=h(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>um(o))),p(e,["generatedImages"],l)}const i=h(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],nv(i)),e}function ST(t){const e={},n=h(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>um(l))),p(e,["generatedImages"],i)}return e}function TT(t){const e={},n=h(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>um(l))),p(e,["generatedImages"],i)}return e}function jT(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=h(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function kT(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=h(t,["createTime"]);i!=null&&p(e,["createTime"],i);const l=h(t,["updateTime"]);return l!=null&&p(e,["updateTime"],l),e}function ET(t){const e={},n=h(t,["checkpointId"]);n!=null&&p(e,["checkpointId"],n);const i=h(t,["epoch"]);i!=null&&p(e,["epoch"],i);const l=h(t,["step"]);return l!=null&&p(e,["step"],l),e}function Vf(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["displayName"]);i!=null&&p(e,["displayName"],i);const l=h(t,["description"]);l!=null&&p(e,["description"],l);const o=h(t,["versionId"]);o!=null&&p(e,["version"],o);const u=h(t,["deployedModels"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(N=>jT(N))),p(e,["endpoints"],v)}const f=h(t,["labels"]);f!=null&&p(e,["labels"],f);const g=h(t,["_self"]);g!=null&&p(e,["tunedModelInfo"],kT(g));const m=h(t,["defaultCheckpointId"]);m!=null&&p(e,["defaultCheckpointId"],m);const x=h(t,["checkpoints"]);if(x!=null){let v=x;Array.isArray(v)&&(v=v.map(N=>ET(N))),p(e,["checkpoints"],v)}return e}function AT(t,e){const n={},i=h(e,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const l=h(e,["_self"]);if(l!=null){let o=G1(l);Array.isArray(o)&&(o=o.map(u=>Vf(u))),p(n,["models"],o)}return n}function _T(){return{}}function MT(t){const e={},n=h(t,["totalTokens"]);return n!=null&&p(e,["totalTokens"],n),e}function RT(t){const e={},n=h(t,["tokensInfo"]);return n!=null&&p(e,["tokensInfo"],n),e}function IT(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],_i(i));const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function DT(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],IT(n)),e}function LT(t){const e={},n=h(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>DT(u))),p(e,["generatedVideos"],o)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const l=h(t,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function PT(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["metadata"]);i!=null&&p(e,["metadata"],i);const l=h(t,["done"]);l!=null&&p(e,["done"],l);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const u=h(t,["response"]);return u!=null&&p(e,["response"],LT(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OT="Content-Type",BT="X-Server-Timeout",UT="User-Agent",$f="x-goog-api-client",zT="1.6.0",VT=`google-genai-sdk/${zT}`,$T="v1beta1",qT="v1beta",ny=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class FT{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$T,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qT,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const l=[this.getRequestUrlInternal(n)];return i&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))l.searchParams.append(u,String(f));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(l,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[l,o]of Object.entries(n))typeof o=="object"?i[l]=Object.assign(Object.assign({},i[l]),o):o!==void 0&&(i[l]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,i);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(l,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const l=new AbortController,o=l.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>l.abort(),n.timeout),i&&i.addEventListener("abort",()=>{l.abort()}),e.signal=o}return n&&n.extraBody!==null&&HT(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async l=>(await iy(l),new Pf(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async l=>(await iy(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var n;return Rs(this,arguments,function*(){const l=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:g}=yield bt(l.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(g);try{const v=JSON.parse(m);if("error"in v){const N=JSON.parse(JSON.stringify(v.error)),w=N.status,S=N.code,j=`got status: ${w}. ${JSON.stringify(v)}`;if(S>=400&&S<600)throw new pc({message:j,status:S})}}catch(v){if(v.name==="ApiError")throw v}u+=m;let x=u.match(ny);for(;x;){const v=x[1];try{const N=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield bt(new Pf(N)),u=u.slice(x[0].length),x=u.match(ny)}catch(N){throw new Error(`exception parsing stream chunk ${v}. ${N}`)}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=VT+" "+this.clientOptions.userAgentExtra;return e[UT]=n,e[$f]=n,e[OT]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,l]of Object.entries(e.headers))n.append(i,l);e.timeout&&e.timeout>0&&n.append(BT,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const o=this.clientOptions.uploader,u=await o.stat(e);l.sizeBytes=String(u.size);const f=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=f;const g=await this.fetchUploadUrl(l,n);return o.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let l={};n!=null&&n.httpOptions?l=n.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},u=await this.request({path:Le("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function iy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(i);throw n>=400&&n<600?new pc({message:l,status:n}):new Error(l)}}function HT(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,u){const f=Object.assign({},o);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],x=f[g];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?f[g]=i(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),f[g]=m)}return f}const l=i(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GT="mcp_used/unknown";function iv(t){for(const e of t)if(dm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function rv(t){var e;const n=(e=t[$f])!==null&&e!==void 0?e:"";t[$f]=(n+` ${GT}`).trimStart()}function JT(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>dm(l)))!==null&&i!==void 0?i:!1}function YT(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>!dm(l)))!==null&&i!==void 0?i:!1}function dm(t){return t!==null&&typeof t=="object"&&t instanceof fm}function ZT(t,e=100){return Rs(this,arguments,function*(){let i,l=0;for(;l<e;){const o=yield bt(t.listTools({cursor:i}));for(const u of o.tools)yield yield bt(u),l++;if(!o.nextCursor)break;i=o.nextCursor}})}class fm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new fm(e,n)}async initialize(){var e,n,i,l;if(this.mcpTools.length>0)return;const o={},u=[];for(const x of this.mcpClients)try{for(var f=!0,g=(n=void 0,rl(ZT(x))),m;m=await g.next(),e=m.done,!e;f=!0){l=m.value,f=!1;const v=l;u.push(v);const N=v.name;if(o[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);o[N]=x}}catch(v){n={error:v}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Z5(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const u=await l.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QT(t,e,n){const i=new P5;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data);const o=r4(l);Object.assign(i,o),e(i)}class KT{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),u=e6(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const x=new Promise(D=>{m=D}),v=e.callbacks,N=function(){m({})},w=this.apiClient,S={onopen:N,onmessage:D=>{QT(w,v.onmessage,D)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(D){}},j=this.webSocketFactory.create(g,XT(u),S);j.connect(),await x;const k=vt(this.apiClient,e.model),E=K1({model:k}),L=Uf({setup:E});return j.send(JSON.stringify(L)),new WT(j,this.apiClient)}}class WT{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=yS(e),i=W1(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=vS(e),i=Uf(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Uf({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_s.PLAY)}pause(){this.sendPlaybackControl(_s.PAUSE)}stop(){this.sendPlaybackControl(_s.STOP)}resetContext(){this.sendPlaybackControl(_s.RESET_CONTEXT)}close(){this.conn.close()}}function XT(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function e6(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n6(t,e,n){const i=new L5;let l;if(n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),t.isVertexAI()){const o=ZS(l);Object.assign(i,o)}else{const o=YS(l);Object.assign(i,o)}e(i)}class i6{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new KT(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,l,o,u,f;const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const v=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&iv(e.config.tools)&&rv(v);const N=l6(v);if(this.apiClient.isVertexAI())x=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N);else{const B=this.apiClient.getApiKey();let W="BidiGenerateContent",G="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),W="BidiGenerateContentConstrained",G="access_token"),x=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${W}?${G}=${B}`}let w=()=>{};const S=new Promise(B=>{w=B}),j=e.callbacks,k=function(){var B;(B=j==null?void 0:j.onopen)===null||B===void 0||B.call(j),w({})},E=this.apiClient,L={onopen:k,onmessage:B=>{n6(E,j.onmessage,B)},onerror:(n=j==null?void 0:j.onerror)!==null&&n!==void 0?n:function(B){},onclose:(i=j==null?void 0:j.onclose)!==null&&i!==void 0?i:function(B){}},D=this.webSocketFactory.create(x,a6(N),L);D.connect(),await S;let O=vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const B=this.apiClient.getProject(),W=this.apiClient.getLocation();O=`projects/${B}/locations/${W}/`+O}let H={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ic.AUDIO]}:e.config.responseModalities=[ic.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],R=[];for(const B of I)if(this.isCallableTool(B)){const W=B;R.push(await W.tool())}else R.push(B);R.length>0&&(e.config.tools=R);const q={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=dS(this.apiClient,q):H=uS(this.apiClient,q),delete H.config,D.send(JSON.stringify(H)),new s6(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const r6={turnComplete:!0};class s6{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Vn(n.turns),e.isVertexAI()?i=i.map(l=>Fs(l)):i=i.map(l=>gc(l))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(t6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},r6),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:xS(e)}:n={realtimeInput:gS(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function a6(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function l6(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ry=10;function sy(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($o(u)){l=!0;break}if(!l)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function $o(t){return"callTool"in t&&typeof t.callTool=="function"}function ay(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o6 extends qs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,l,o,u,f;const g=await this.processParamsForMcpUsage(n);if(!JT(n)||sy(n.config))return await this.generateContentInternal(g);if(YT(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,x;const v=Vn(g.contents),N=(o=(l=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&o!==void 0?o:ry;let w=0;for(;w<N&&(m=await this.generateContentInternal(g),!(!m.functionCalls||m.functionCalls.length===0));){const S=m.candidates[0].content,j=[];for(const k of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if($o(k)){const L=await k.callTool(m.functionCalls);j.push(...L)}w++,x={role:"user",parts:j},g.contents=Vn(g.contents),g.contents.push(S),g.contents.push(x),ay(g.config)&&(v.push(S),v.push(x))}return ay(g.config)&&(m.automaticFunctionCallingHistory=v),m},this.generateContentStream=async n=>{if(sy(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var l;let o;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?o=g==null?void 0:g.safetyAttributes:u.push(g);let f;return o?f={generatedImages:u,positivePromptSafetyAttributes:o}:f={generatedImages:u},f}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new hc($s.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(l)}}async processParamsForMcpUsage(e){var n,i,l;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const u=await Promise.all(o.map(async g=>$o(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&iv(e.config.tools)){const g=(l=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&l!==void 0?l:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),rv(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var n,i,l;const o=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if($o(u)){const f=u,g=await f.tool();for(const m of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,f)}}return o}async processAfcStream(e){var n,i,l;const o=(l=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:ry;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return function(m,x,v){var N,w;return Rs(this,arguments,function*(){for(var S,j,k,E;f<o;){u&&(f++,u=!1);const H=yield bt(m.processParamsForMcpUsage(v)),I=yield bt(m.generateContentStreamInternal(H)),R=[],q=[];try{for(var L=!0,D=(j=void 0,rl(I)),O;O=yield bt(D.next()),S=O.done,!S;L=!0){E=O.value,L=!1;const B=E;if(yield yield bt(B),B.candidates&&(!((N=B.candidates[0])===null||N===void 0)&&N.content)){q.push(B.candidates[0].content);for(const W of(w=B.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(f<o&&W.functionCall){if(!W.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(W.functionCall.name)){const G=yield bt(x.get(W.functionCall.name).callTool([W.functionCall]));R.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${W.functionCall.name}`)}}}}catch(B){j={error:B}}finally{try{!L&&!S&&(k=D.return)&&(yield bt(k.call(D)))}finally{if(j)throw j.error}}if(R.length>0){u=!0;const B=new Ya;B.candidates=[{content:{role:"user",parts:R}}],yield yield bt(B);const W=[];W.push(...q),W.push({role:"user",parts:R});const G=Vn(v.contents).concat(W);v.contents=G}else break}})}(this,g,e)}async generateContentInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=Xx(this.apiClient,e);return f=Le("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=ty(x),N=new Ya;return Object.assign(N,v),N})}else{const m=Wx(this.apiClient,e);return f=Le("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=ey(x),N=new Ya;return Object.assign(N,v),N})}}async generateContentStreamInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=Xx(this.apiClient,e);return f=Le("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(v){return Rs(this,arguments,function*(){var N,w,S,j;try{for(var k=!0,E=rl(v),L;L=yield bt(E.next()),N=L.done,!N;k=!0){j=L.value,k=!1;const O=ty(yield bt(j.json())),H=new Ya;Object.assign(H,O),yield yield bt(H)}}catch(D){w={error:D}}finally{try{!k&&!N&&(S=E.return)&&(yield bt(S.call(E)))}finally{if(w)throw w.error}}})})}else{const m=Wx(this.apiClient,e);return f=Le("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(v){return Rs(this,arguments,function*(){var N,w,S,j;try{for(var k=!0,E=rl(v),L;L=yield bt(E.next()),N=L.done,!N;k=!0){j=L.value,k=!1;const O=ey(yield bt(j.json())),H=new Ya;Object.assign(H,O),yield yield bt(H)}}catch(D){w={error:D}}finally{try{!k&&!N&&(S=E.return)&&(yield bt(S.call(E)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=g3(this.apiClient,e);return f=Le("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=wT(x),N=new Rx;return Object.assign(N,v),N})}else{const m=A4(this.apiClient,e);return f=Le("{model}:batchEmbedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=K3(x),N=new Rx;return Object.assign(N,v),N})}}async generateImagesInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=y3(this.apiClient,e);return f=Le("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=CT(x),N=new Ix;return Object.assign(N,v),N})}else{const m=M4(this.apiClient,e);return f=Le("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=eT(x),N=new Ix;return Object.assign(N,v),N})}}async editImageInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI()){const f=T3(this.apiClient,e);return o=Le("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const m=ST(g),x=new A5;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI()){const f=k3(this.apiClient,e);return o=Le("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const m=TT(g),x=new _5;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=E3(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>Vf(x))}else{const m=R4(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>zf(x))}}async listInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=_3(this.apiClient,e);return f=Le("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=AT(this.apiClient,x),N=new Dx;return Object.assign(N,v),N})}else{const m=D4(this.apiClient,e);return f=Le("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=nT(this.apiClient,x),N=new Dx;return Object.assign(N,v),N})}}async update(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=R3(this.apiClient,e);return f=Le("{model}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>Vf(x))}else{const m=P4(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>zf(x))}}async delete(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=I3(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(()=>{const x=_T(),v=new Lx;return Object.assign(v,x),v})}else{const m=O4(this.apiClient,e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(()=>{const x=iT(),v=new Lx;return Object.assign(v,x),v})}}async countTokens(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=L3(this.apiClient,e);return f=Le("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=MT(x),N=new Px;return Object.assign(N,v),N})}else{const m=U4(this.apiClient,e);return f=Le("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=rT(x),N=new Px;return Object.assign(N,v),N})}}async computeTokens(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI()){const f=P3(this.apiClient,e);return o=Le("{model}:computeTokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const m=RT(g),x=new M5;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=U3(this.apiClient,e);return f=Le("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>PT(x))}else{const m=$4(this.apiClient,e);return f=Le("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>oT(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c6(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["_url","operationName"],n);const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function u6(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["_url","operationName"],n);const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function d6(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=h(t,["resourceName"]);i!=null&&p(e,["_url","resourceName"],i);const l=h(t,["config"]);return l!=null&&p(e,["config"],l),e}function f6(t){const e={},n=h(t,["video","uri"]);n!=null&&p(e,["uri"],n);const i=h(t,["video","encodedVideo"]);i!=null&&p(e,["videoBytes"],_i(i));const l=h(t,["encoding"]);return l!=null&&p(e,["mimeType"],l),e}function m6(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],f6(n)),e}function h6(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>m6(u))),p(e,["generatedVideos"],o)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const l=h(t,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function p6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["metadata"]);i!=null&&p(e,["metadata"],i);const l=h(t,["done"]);l!=null&&p(e,["done"],l);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const u=h(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],h6(u)),e}function g6(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],_i(i));const l=h(t,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function x6(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],g6(n)),e}function y6(t){const e={},n=h(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>x6(u))),p(e,["generatedVideos"],o)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const l=h(t,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function ly(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["metadata"]);i!=null&&p(e,["metadata"],i);const l=h(t,["done"]);l!=null&&p(e,["done"],l);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const u=h(t,["response"]);return u!=null&&p(e,["response"],y6(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v6 extends qs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let o;return i&&"httpOptions"in i&&(o=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=u6(e);return f=Le("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>ly(x))}else{const m=c6(e);return f=Le("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>p6(x))}}async fetchPredictVideosOperationInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI()){const f=d6(e);return o=Le("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>ly(g))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b6(t){const e={},n=h(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function sv(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],b6(n)),e}function w6(t){const e={},n=h(t,["speaker"]);n!=null&&p(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&p(e,["voiceConfig"],sv(i)),e}function N6(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>w6(l))),p(e,["speakerVoiceConfigs"],i)}return e}function C6(t){const e={},n=h(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],sv(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&p(e,["multiSpeakerVoiceConfig"],N6(i));const l=h(t,["languageCode"]);return l!=null&&p(e,["languageCode"],l),e}function S6(t){const e={},n=h(t,["fps"]);n!=null&&p(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&p(e,["endOffset"],i);const l=h(t,["startOffset"]);return l!=null&&p(e,["startOffset"],l),e}function T6(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&p(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function j6(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function k6(t){const e={},n=h(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],S6(n));const i=h(t,["thought"]);i!=null&&p(e,["thought"],i);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],T6(l));const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],j6(o));const u=h(t,["thoughtSignature"]);u!=null&&p(e,["thoughtSignature"],u);const f=h(t,["codeExecutionResult"]);f!=null&&p(e,["codeExecutionResult"],f);const g=h(t,["executableCode"]);g!=null&&p(e,["executableCode"],g);const m=h(t,["functionCall"]);m!=null&&p(e,["functionCall"],m);const x=h(t,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const v=h(t,["text"]);return v!=null&&p(e,["text"],v),e}function E6(t){const e={},n=h(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>k6(o))),p(e,["parts"],l)}const i=h(t,["role"]);return i!=null&&p(e,["role"],i),e}function A6(t){const e={},n=h(t,["behavior"]);n!=null&&p(e,["behavior"],n);const i=h(t,["description"]);i!=null&&p(e,["description"],i);const l=h(t,["name"]);l!=null&&p(e,["name"],l);const o=h(t,["parameters"]);o!=null&&p(e,["parameters"],o);const u=h(t,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=h(t,["response"]);f!=null&&p(e,["response"],f);const g=h(t,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function _6(t){const e={},n=h(t,["startTime"]);n!=null&&p(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&p(e,["endTime"],i),e}function M6(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],_6(n)),e}function R6(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&p(e,["dynamicThreshold"],i),e}function I6(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],R6(n)),e}function D6(){return{}}function L6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>A6(g))),p(e,["functionDeclarations"],f)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],M6(i));const l=h(t,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],I6(l)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&p(e,["urlContext"],D6());const u=h(t,["codeExecution"]);return u!=null&&p(e,["codeExecution"],u),e}function P6(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oy(){return{}}function O6(t){const e={},n=h(t,["disabled"]);n!=null&&p(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&p(e,["startOfSpeechSensitivity"],i);const l=h(t,["endOfSpeechSensitivity"]);l!=null&&p(e,["endOfSpeechSensitivity"],l);const o=h(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const u=h(t,["silenceDurationMs"]);return u!=null&&p(e,["silenceDurationMs"],u),e}function B6(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],O6(n));const i=h(t,["activityHandling"]);i!=null&&p(e,["activityHandling"],i);const l=h(t,["turnCoverage"]);return l!=null&&p(e,["turnCoverage"],l),e}function U6(t){const e={},n=h(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function z6(t){const e={},n=h(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&p(e,["slidingWindow"],U6(i)),e}function V6(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function $6(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const l=h(t,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=h(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=h(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=h(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const x=h(t,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],C6(cm(v)));const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],E6(nn(w)));const S=h(t,["tools"]);if(e!==void 0&&S!=null){let H=pl(S);Array.isArray(H)&&(H=H.map(I=>L6(hl(I)))),p(e,["setup","tools"],H)}const j=h(t,["sessionResumption"]);e!==void 0&&j!=null&&p(e,["setup","sessionResumption"],P6(j));const k=h(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&p(e,["setup","inputAudioTranscription"],oy());const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],oy());const L=h(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],B6(L));const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&p(e,["setup","contextWindowCompression"],z6(D));const O=h(t,["proactivity"]);return e!==void 0&&O!=null&&p(e,["setup","proactivity"],V6(O)),n}function q6(t,e){const n={},i=h(e,["model"]);i!=null&&p(n,["setup","model"],vt(t,i));const l=h(e,["config"]);return l!=null&&p(n,["config"],$6(l,n)),n}function F6(t,e,n){const i={},l=h(e,["expireTime"]);n!==void 0&&l!=null&&p(n,["expireTime"],l);const o=h(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const u=h(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const f=h(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&p(n,["bidiGenerateContentSetup"],q6(t,f));const g=h(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&p(n,["fieldMask"],g),i}function H6(t,e){const n={},i=h(e,["config"]);return i!=null&&p(n,["config"],F6(t,i,n)),n}function G6(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J6(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const l=Object.keys(i).map(o=>`${n}.${o}`);e.push(...l)}else e.push(n)}return e.join(",")}function Y6(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const o=J6(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];l.length>0&&(f=l.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];o&&g.push(o),f.length>0&&g.push(...f),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class Z6 extends qs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=H6(this.apiClient,e);o=Le("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=Y6(f,e.config);return l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>G6(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function K6(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const l=h(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function W6(t){const e={},n=h(t,["config"]);return n!=null&&p(e,["config"],K6(n,e)),e}function X6(t){const e={},n=h(t,["textInput"]);n!=null&&p(e,["textInput"],n);const i=h(t,["output"]);return i!=null&&p(e,["output"],i),e}function ej(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>X6(l))),p(e,["examples","examples"],i)}return e}function tj(t,e){const n={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=h(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&p(e,["displayName"],i),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=h(t,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=h(t,["batchSize"]);e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","batchSize"],u);const f=h(t,["learningRate"]);return e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","learningRate"],f),n}function nj(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=h(t,["trainingDataset"]);i!=null&&p(e,["tuningTask","trainingData"],ej(i));const l=h(t,["config"]);return l!=null&&p(e,["config"],tj(l,e)),e}function ij(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=h(t,["config"]);return i!=null&&p(e,["config"],i),e}function rj(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const l=h(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function sj(t){const e={},n=h(t,["config"]);return n!=null&&p(e,["config"],rj(n,e)),e}function aj(t,e){const n={},i=h(t,["gcsUri"]);if(e!==void 0&&i!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],i),h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function lj(t){const e={},n=h(t,["gcsUri"]);return n!=null&&p(e,["validationDatasetUri"],n),e}function oj(t,e){const n={},i=h(t,["validationDataset"]);e!==void 0&&i!=null&&p(e,["supervisedTuningSpec"],lj(i));const l=h(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const u=h(t,["epochCount"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=h(t,["learningRateMultiplier"]);e!==void 0&&f!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const g=h(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const m=h(t,["adapterSize"]);if(e!==void 0&&m!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function cj(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=h(t,["trainingDataset"]);i!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],aj(i,e));const l=h(t,["config"]);return l!=null&&p(e,["config"],oj(l,e)),e}function uj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["model"],n);const i=h(t,["name"]);return i!=null&&p(e,["endpoint"],i),e}function av(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["state"]);i!=null&&p(e,["state"],q1(i));const l=h(t,["createTime"]);l!=null&&p(e,["createTime"],l);const o=h(t,["tuningTask","startTime"]);o!=null&&p(e,["startTime"],o);const u=h(t,["tuningTask","completeTime"]);u!=null&&p(e,["endTime"],u);const f=h(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const g=h(t,["description"]);g!=null&&p(e,["description"],g);const m=h(t,["baseModel"]);m!=null&&p(e,["baseModel"],m);const x=h(t,["_self"]);x!=null&&p(e,["tunedModel"],uj(x));const v=h(t,["distillationSpec"]);v!=null&&p(e,["distillationSpec"],v);const N=h(t,["experiment"]);N!=null&&p(e,["experiment"],N);const w=h(t,["labels"]);w!=null&&p(e,["labels"],w);const S=h(t,["pipelineJob"]);S!=null&&p(e,["pipelineJob"],S);const j=h(t,["serviceAccount"]);j!=null&&p(e,["serviceAccount"],j);const k=h(t,["tunedModelDisplayName"]);return k!=null&&p(e,["tunedModelDisplayName"],k),e}function dj(t){const e={},n=h(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const i=h(t,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>av(o))),p(e,["tuningJobs"],l)}return e}function fj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["metadata"]);i!=null&&p(e,["metadata"],i);const l=h(t,["done"]);l!=null&&p(e,["done"],l);const o=h(t,["error"]);return o!=null&&p(e,["error"],o),e}function mj(t){const e={},n=h(t,["checkpointId"]);n!=null&&p(e,["checkpointId"],n);const i=h(t,["epoch"]);i!=null&&p(e,["epoch"],i);const l=h(t,["step"]);l!=null&&p(e,["step"],l);const o=h(t,["endpoint"]);return o!=null&&p(e,["endpoint"],o),e}function hj(t){const e={},n=h(t,["model"]);n!=null&&p(e,["model"],n);const i=h(t,["endpoint"]);i!=null&&p(e,["endpoint"],i);const l=h(t,["checkpoints"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(u=>mj(u))),p(e,["checkpoints"],o)}return e}function qf(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const i=h(t,["state"]);i!=null&&p(e,["state"],q1(i));const l=h(t,["createTime"]);l!=null&&p(e,["createTime"],l);const o=h(t,["startTime"]);o!=null&&p(e,["startTime"],o);const u=h(t,["endTime"]);u!=null&&p(e,["endTime"],u);const f=h(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const g=h(t,["error"]);g!=null&&p(e,["error"],g);const m=h(t,["description"]);m!=null&&p(e,["description"],m);const x=h(t,["baseModel"]);x!=null&&p(e,["baseModel"],x);const v=h(t,["tunedModel"]);v!=null&&p(e,["tunedModel"],hj(v));const N=h(t,["supervisedTuningSpec"]);N!=null&&p(e,["supervisedTuningSpec"],N);const w=h(t,["tuningDataStats"]);w!=null&&p(e,["tuningDataStats"],w);const S=h(t,["encryptionSpec"]);S!=null&&p(e,["encryptionSpec"],S);const j=h(t,["partnerModelTuningSpec"]);j!=null&&p(e,["partnerModelTuningSpec"],j);const k=h(t,["distillationSpec"]);k!=null&&p(e,["distillationSpec"],k);const E=h(t,["experiment"]);E!=null&&p(e,["experiment"],E);const L=h(t,["labels"]);L!=null&&p(e,["labels"],L);const D=h(t,["pipelineJob"]);D!=null&&p(e,["pipelineJob"],D);const O=h(t,["serviceAccount"]);O!=null&&p(e,["serviceAccount"],O);const H=h(t,["tunedModelDisplayName"]);return H!=null&&p(e,["tunedModelDisplayName"],H),e}function pj(t){const e={},n=h(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const i=h(t,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>qf(o))),p(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gj extends qs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new hc($s.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Lf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=ij(e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>qf(x))}else{const m=Q6(e);return f=Le("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>av(x))}}async listInternal(e){var n,i,l,o;let u,f="",g={};if(this.apiClient.isVertexAI()){const m=sj(e);return f=Le("tuningJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),u.then(x=>{const v=pj(x),N=new Ox;return Object.assign(N,v),N})}else{const m=W6(e);return f=Le("tunedModels",m._url),g=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const v=dj(x),N=new Ox;return Object.assign(N,v),N})}}async tuneInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI()){const f=cj(e);return o=Le("tuningJobs",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>qf(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let l,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nj(e);return o=Le("tunedModels",f._url),u=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>fj(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xj{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yj=1024*1024*8,vj=3,bj=1e3,wj=2,Ud="x-goog-upload-status";async function Nj(t,e,n){var i,l,o;let u=0,f=0,g=new Pf(new Response),m="upload";for(u=t.size;f<u;){const v=Math.min(yj,u-f),N=t.slice(f,f+v);f+v>=u&&(m+=", finalize");let w=0,S=bj;for(;w<vj&&(g=await n.request({path:"",body:N,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(f),"Content-Length":String(v)}}}),!(!((i=g==null?void 0:g.headers)===null||i===void 0)&&i[Ud]));)w++,await Sj(S),S=S*wj;if(f+=v,((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[Ud])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await(g==null?void 0:g.json());if(((o=g==null?void 0:g.headers)===null||o===void 0?void 0:o[Ud])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function Cj(t){return{size:t.size,type:t.type}}function Sj(t){return new Promise(e=>setTimeout(e,t))}class Tj{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nj(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Cj(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jj{create(e,n,i){return new kj(e,n,i)}}class kj{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cy="x-goog-api-key";class Ej{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(cy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Aj="gl-node/";class lv{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=E5(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const l=new Ej(this.apiKey);this.apiClient=new FT({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Aj+"web",uploader:new Tj,downloader:new xj}),this.models=new o6(this.apiClient),this.live=new i6(this.apiClient,l,new jj),this.chats=new tC(this.models,this.apiClient),this.caches=new WN(this.apiClient),this.files=new hC(this.apiClient),this.operations=new v6(this.apiClient),this.authTokens=new Z6(this.apiClient),this.tunings=new gj(this.apiClient)}}var Pt=(t=>(t.Easy="easy",t.Normal="normal",t.Hard="hard",t))(Pt||{});const ov={easy:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1},normal:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1},hard:{trueFalse:5,multipleChoice:5,fillInTheBlanks:5,sentenceScramble:5,memoryCardGame:1}},Er={trueFalse:10,multipleChoice:10,fillInTheBlanks:10,sentenceScramble:10,memoryCardGame:2},ut=async(t,e)=>{const n=new lv({apiKey:e}),i="gemini-2.5-flash";try{const l=await n.models.generateContent({model:i,contents:t,config:{responseMimeType:"application/json"}});if(!l.text)throw new Error("AI  API ");let o=l.text.trim();const u=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,f=o.match(u);if(f&&f[2]&&(o=f[2].trim()),!o.startsWith("{")&&!o.startsWith("[")&&(o.includes("{")||o.includes("["))){const g=o.indexOf("{"),m=o.indexOf("[");let x=-1,v=-1;g!==-1&&(m===-1||g<m)?(x=g,v=o.lastIndexOf("}")):m!==-1&&(x=m,v=o.lastIndexOf("]")),x!==-1&&v!==-1&&v>x&&(o=o.substring(x,v+1))}try{return JSON.parse(o)}catch{throw console.error("AI  (JSON parse ):",l.text),new Error("AI  ( JSON)")}}catch(l){let o="";if(l instanceof Error&&(o+=`  ${l.message}`),l&&typeof l=="object"&&"message"in l){const u=l;u.message.includes("API key not valid")||u.message.includes("API_KEY_INVALID")?o="Gemini API ":u.message.includes("quota")||u.message.includes("RESOURCE_EXHAUSTED")?o=" API ":(u.message.toLowerCase().includes("json")||u.message.includes("Unexpected token"))&&(o="AI  ( JSON)")}throw new Error(o)}},cv=async(t,e)=>{const n=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${t}".
    The objectives should be based on scaffolding theory and gamification, and written in the primary language of the topic.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${t}", 
        "description": "${t}...", 
        "teachingExample": "${t}..." 
      },
      { 
        "objective": "${t}", 
        "description": "...", 
        "teachingExample": "${t}..." 
      },
      { 
        "objective": "${t}", 
        "description": "${t}...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(n,e)},_j=async(t,e,n)=>{const i=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(t),l=`
    Based on the following learning objectives: ${JSON.stringify(n)}
    Please break down the topic "${t}" into at least 3 (but more is better if appropriate) micro-units. For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    
    ${i?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5 (array of 3-5 teaching example sentences)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "A", 
        "details": "A...", 
        "teachingExample": "A...",
        "coreConcept": "...",
        "teachingSentences": ["1", "2", "3", "4", "5"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "A", "details": "A...", "teachingExample": "A..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(l,e)},Mj=async(t,e,n)=>{const i=`
    Based on the following learning objectives: ${JSON.stringify(n)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties students may have with "${t}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "",
        "clarification": "",
        "teachingExample": "",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "",
            "wrong": "", 
            "explanation": ""
          }
        ],
        "preventionStrategy": " - ",
        "correctionMethod": " - ",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    Requirements:
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on practical teaching guidance that educators can immediately apply
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(i,e)},Rj=async(t,e,n)=>{const i=`
    Based on the following learning objectives: ${JSON.stringify(n)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${t}".
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "1",
        "description": "1...",
        "objective": "1...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(i,e)},Ij=async(t,e,n)=>{const i=`
    Based on the following learning objectives: ${JSON.stringify(n)}
    Please generate quiz content for "${t}" in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame  1 pairs  5  */ },
      "hard": { /* same structure as easy, memoryCardGame  1 pairs  5  */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${t}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. Only output the JSON object, no explanation or extra text.
  `;return await ut(i,e)},Dj=async(t,e,n)=>{const i=`
    Based on the following learning objectives: ${JSON.stringify(n)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${t}" (use English translation if topic is not English).
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${t}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${t}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(i,e)},Lj=async(t,e,n)=>{const i=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${t}" appropriate for learning level "${e.name}" (${e.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to the learner's level and capabilities described in: "${e.description}".
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${t}${e.name}", 
        "description": "${e.name}...", 
        "teachingExample": "..." 
      },
      { 
        "objective": "${t}${e.name}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      { 
        "objective": "${t}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(i,n)},Pj=async(t,e,n,i)=>{const l=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(t),o=`
    Based on the following learning objectives: ${JSON.stringify(i)}
    Please break down the topic "${t}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${e.name}" level learners (${e.description}). For each, provide a sub-topic, a brief explanation, and a concrete teaching example.
    The content depth and complexity should match the level description: "${e.description}".
    
    ${l?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5 (array of 3-5 teaching example sentences)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "${e.name}A", 
        "details": "A${e.name}...", 
        "teachingExample": "A...",
        "coreConcept": "...",
        "teachingSentences": ["1", "2", "3", "4", "5"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "${e.name}A", "details": "A${e.name}...", "teachingExample": "A..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(o,n)},Oj=async(t,e,n,i)=>{const l=`
    Based on the following learning objectives: ${JSON.stringify(i)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${e.name}" level learners (${e.description}) may have with "${t}".
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "${e.name}",
        "clarification": "${e.description}",
        "teachingExample": "",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "${e.name}",
            "wrong": "", 
            "explanation": ""
          }
        ],
        "preventionStrategy": "${e.name}",
        "correctionMethod": "",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    Requirements:
    - All content should be appropriate for "${e.description}"
    - Each confusing point should include ALL fields above
    - commonErrors: Provide at least 3 typical student mistakes at this level
    - correctVsWrong: Provide at least 1 comparison (more if helpful)  
    - practiceActivities: Provide at least 3 level-appropriate targeted practice activities
    - All text should be in the primary language of the topic
    - Focus on confusion points specific to "${e.name}" level: "${e.description}"
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(l,n)},Bj=async(t,e,n,i)=>{const l=`
    Based on the following learning objectives: ${JSON.stringify(i)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${t}" suitable for "${e.name}" level learners (${e.description}).
    Activities should match the complexity and capabilities described in: "${e.description}".
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "${e.name}1",
        "description": "1...",
        "objective": "1${e.name}...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(l,n)},Uj=async(t,e,n,i)=>{const l=`
    ${t}${e.name}(${e.description})
    ${JSON.stringify(i)}
    
    ${e.name}
    ${e.description}
    
     JSON 
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /*  easymemoryCardGame  1 pairs  5  */ },
      "hard": { /*  easymemoryCardGame  1 pairs  5  */ }
    }
    
     (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble) (easy, normal, hard)  5 
     memoryCardGame 1  "pairs"  5 ${t}/
     memoryCardGame  "instructions" 
     JSON 
  `;return await ut(l,n)},zj=async(t,e,n,i)=>{const l=`
    Based on the following learning objectives: ${JSON.stringify(i)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${t}" (use English translation if topic is not English) appropriate for "${e.name}" level learners (${e.description}).
    Language complexity and vocabulary should match: "${e.description}".
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${t}." },
      { "speaker": "Speaker B", "line": "Great idea! What's the first thing we should discuss regarding ${t}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(l,n)},uv=async(t,e,n)=>{const i=`
    Based on the topic "${t}" and learning objectives: ${JSON.stringify(n)}
    Please generate 3-4 learning levels that are specific to this topic. Each level should have a unique name, description, and order.
    The levels should progress from basic understanding to advanced mastery, tailored specifically to the subject matter.
    
    Output MUST be a valid JSON object with this exact structure:
    {
      "suggestedLevels": [
        {
          "id": "beginner",
          "name": "",
          "description": "${t}",
          "order": 1
        },
        {
          "id": "intermediate", 
          "name": "",
          "description": "${t}",
          "order": 2
        },
        {
          "id": "advanced",
          "name": "", 
          "description": "${t}",
          "order": 3
        }
      ],
      "defaultLevelId": "beginner"
    }
    
    Make sure to:
    1. Create level names and descriptions that are specific to the topic (not generic)
    2. Use appropriate terminology for the subject area
    3. Ensure descriptions explain what learners at each level can do
    4. Use the primary language of the topic for names and descriptions
    
    Do NOT include any explanation or extra text. Only output the JSON object.
  `;return await ut(i,e)},Vj=t=>{const e=["english","grammar","vocabulary","pronunciation","speaking","writing","reading","listening","conversation","toefl","ielts","toeic","english literature","business english","academic english","phrasal verbs","idioms","prepositions","tenses","articles","adjectives","adverbs","nouns","verbs","","","","","","","","","","","","","","","","","","","","","","","","",""],n=t.toLowerCase();return e.some(i=>n.includes(i.toLowerCase()))},$j=async(t,e)=>{if(!e)throw new Error("Gemini API ");const n=await cv(t,e);return await uv(t,e,n)},qj=async(t,e,n)=>{if(!n)throw new Error("Gemini API ");const i=await Lj(t,e,n),[l,o,u,f,g,m]=await Promise.all([Pj(t,e,n,i),Oj(t,e,n,i),Bj(t,e,n,i),Uj(t,e,n,i),zj(t,e,n,i),mm(t,n,i,e)]);return{learningObjectives:i,contentBreakdown:l,confusingPoints:o,classroomActivities:u,onlineInteractiveQuiz:f,englishConversation:g,writingPractice:m}},Fj=async(t,e,n,i)=>{if(!i)throw new Error("Gemini API ");const l=await Hj(t,e,n,i),[o,u,f,g,m,x]=await Promise.all([Gj(t,e,n,i,l),Jj(t,e,n,i,l),Yj(t,e,n,i,l),Zj(t,e,n,i,l),Qj(t,e,n,i,l),mm(t,i,l,e,n)]);return{learningObjectives:l,contentBreakdown:o,confusingPoints:u,classroomActivities:f,onlineInteractiveQuiz:g,englishConversation:m,writingPractice:x}},Hj=async(t,e,n,i)=>{const l=`
    Please generate at least 3 (but more is better if appropriate) clear and distinct learning objectives for the topic: "${t}" appropriate for learning level "${e.name}" (${e.description}) and English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}).
    The objectives should be based on scaffolding theory and gamification, written in the primary language of the topic, and tailored to both the learner's level and vocabulary constraints.
    For each objective, provide the objective statement, a detailed description, and a concrete teaching example (such as a sample sentence, scenario, or application).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${n.wordCount} most common English words
    - Adjust language complexity to match ${n.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      { 
        "objective": "${t}${e.name}${n.wordCount}", 
        "description": "${e.name}${n.name}...", 
        "teachingExample": "${n.wordCount}..." 
      },
      { 
        "objective": "${t}${e.name}${n.name}", 
        "description": "...", 
        "teachingExample": "${n.wordCount}..." 
      },
      { 
        "objective": "${t}", 
        "description": "...", 
        "teachingExample": "..." 
      },
      //...or more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(l,i)},Gj=async(t,e,n,i,l)=>{const o=/english|||grammar|vocabulary|pronunciation|speaking|listening|reading|writing/i.test(t),u=`
    Based on the following learning objectives: ${JSON.stringify(l)}
    Please break down the topic "${t}" into at least 3 (but more is better if appropriate) micro-units appropriate for "${e.name}" level learners (${e.description}) with English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text must use vocabulary within the ${n.wordCount} most common English words
    - Teaching examples should match ${n.description}
    - Avoid complex words that exceed this vocabulary level
    - Sentence structures should be appropriate for ${n.name} learners
    
    ${o?`
    SPECIAL REQUIREMENTS FOR ENGLISH LEARNING TOPICS:
    For each breakdown item, also include:
    - coreConcept:  (core learning concept for this point)
    - teachingSentences: 3-5${n.wordCount} (array of 3-5 teaching sentences using vocabulary within ${n.wordCount} words)
    - teachingTips:  (teaching tips and explanations)
    
    Output format for English learning topics:
    [
      {
        "topic": "${n.name}A", 
        "details": "A${n.wordCount}...", 
        "teachingExample": "A${n.name}...",
        "coreConcept": "...",
        "teachingSentences": ["Simple example 1", "Easy sentence 2", "Basic example 3"],
        "teachingTips": "..."
      }
    ]
    `:`
    Standard output format:
    [
      { "topic": "${n.name}A", "details": "A${n.wordCount}...", "teachingExample": "A${n.name}..." }
    ]
    `}
    
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(u,i)},Jj=async(t,e,n,i,l)=>{const o=`
    Based on the following learning objectives: ${JSON.stringify(l)}
    Generate at least 3 (but more is better if appropriate) comprehensive analysis of common misconceptions or difficulties that "${e.name}" level learners (${e.description}) with English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}) may have with "${t}".
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All explanations must use vocabulary within the ${n.wordCount} most common English words
    - Examples should be appropriate for ${n.description}
    - Focus on confusion points that arise specifically at this vocabulary level
    
    Output MUST be a valid JSON array with the following comprehensive structure:
    [
      {
        "point": "${n.name}",
        "clarification": "${n.wordCount}",
        "teachingExample": "${n.name}",
        "errorType": " (///)",
        "commonErrors": ["1", "2", "3"],
        "correctVsWrong": [
          {
            "correct": "${n.wordCount}",
            "wrong": "",
            "explanation": ""
          }
        ],
        "preventionStrategy": "${n.name}",
        "correctionMethod": "",
        "practiceActivities": ["1", "2", "3"]
      }
    ]
    
    All English content must stay within the ${n.wordCount} word vocabulary limit and match ${e.description}.
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(o,i)},Yj=async(t,e,n,i,l)=>{const o=`
    Based on the following learning objectives: ${JSON.stringify(l)}
    Suggest at least 3 (but more is better if appropriate) engaging, interactive classroom activities (preferably game-like) for the topic "${t}" suitable for "${e.name}" level learners (${e.description}) with English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - Activity instructions must use vocabulary within the ${n.wordCount} most common English words
    - Activity content should match ${n.description}
    - Consider vocabulary limitations when designing complexity
    
    For each activity, provide the following comprehensive fields:
      - title: / (The name of the activity)
      - description:  (Brief description of the core concept)
      - objective:  (Main learning goal or purpose)
      - timing:  (When to use: lesson introduction, during unit, after unit, review, etc.)
      - materials:  (Required tools, materials, or props)
      - environment:  (Seating arrangement, space needs, equipment conditions)
      - steps:  (Step-by-step process of teacher-student interactions as array)
      - assessmentPoints:  (Learning effectiveness observation and assessment criteria as array)
    
    Output MUST be a valid JSON array of objects, e.g.:
    [
      {
        "title": "${n.name}1",
        "description": "1${n.wordCount}...",
        "objective": "1${n.name}...",
        "timing": "//...",
        "materials": "...",
        "environment": "...",
        "steps": ["1: ...", "2: ...", "3: ..."],
        "assessmentPoints": ["", "", ""]
      },
      // ... more items
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(o,i)},Zj=async(t,e,n,i,l)=>{const o=`
    Based on the following learning objectives: ${JSON.stringify(l)}
    Please generate quiz content for "${t}" suitable for learning level "${e.name}" (${e.description}) and English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS for English content:
    - All English text in quiz questions, options, and examples must use vocabulary within the ${n.wordCount} most common English words
    - Sentence structures should be appropriate for ${n.description}
    - Avoid advanced vocabulary that exceeds this level
    
    Output in the following JSON structure (no explanation, no extra text):
    {
      "easy": {
        "trueFalse": [
          { "statement": "1...", "isTrue": true, "explanation": "1" },
          { "statement": "2...", "isTrue": false, "explanation": "2" }
          // ...  5 
        ],
        "multipleChoice": [
          { "question": "1...", "options": ["A", "B", "C"], "correctAnswerIndex": 0 },
          { "question": "2...", "options": ["A", "B", "C"], "correctAnswerIndex": 1 }
          // ...  5 
        ],
        "fillInTheBlanks": [
          { "sentenceWithBlank": "1...____...", "correctAnswer": "1" },
          { "sentenceWithBlank": "2...____...", "correctAnswer": "2" }
          // ...  5 
        ],
        "sentenceScramble": [
          { "originalSentence": "1...", "scrambledWords": ["...", "...", "..."] },
          { "originalSentence": "2...", "scrambledWords": ["...", "...", "..."] }
          // ...  5 
        ],
        "memoryCardGame": [
          {
            "pairs": [
              { "question": "1", "answer": "1" },
              { "question": "2", "answer": "2" },
              { "question": "3", "answer": "3" },
              { "question": "4", "answer": "4" },
              { "question": "5", "answer": "5" }
              // ...  5 
            ],
            "instructions": ""
          }
        ]
      },
      "normal": { /* same structure as easy, memoryCardGame  1 pairs  5  */ },
      "hard": { /* same structure as easy, memoryCardGame  1 pairs  5  */ }
    }
    For each quiz type (trueFalse, multipleChoice, fillInTheBlanks, sentenceScramble), generate at least 5 questions per difficulty level (easy, normal, hard), but more is better if appropriate.
    For memoryCardGame, generate ONLY 1 question per difficulty, but the "pairs" array inside must contain at least 5 pairs (each pair is a related concept, word/definition, Q&A, or translation relevant to '${t}'), and more is better if appropriate.
    Each memoryCardGame question should include clear "instructions" for the matching task.
    All text must be in the primary language of the topic. For English learning topics, limit English vocabulary to ${n.wordCount} most common words. Only output the JSON object, no explanation or extra text.
  `;return await ut(o,i)},Qj=async(t,e,n,i,l)=>{const o=`
    Based on the following learning objectives: ${JSON.stringify(l)}
    Please generate a short, natural English conversation (at least 3 lines, but more is better if appropriate, 2 speakers) about the topic "${t}" (use English translation if topic is not English) appropriate for "${e.name}" level learners (${e.description}) with English vocabulary level "${n.name}" (${n.wordCount} words: ${n.description}).
    
    CRITICAL VOCABULARY CONSTRAINTS:
    - Use ONLY vocabulary within the ${n.wordCount} most common English words
    - Sentence structures must be appropriate for ${n.description}
    - Conversation complexity should match ${n.name} level
    - Avoid advanced vocabulary that exceeds this level
    - Keep sentences simple and clear for ${n.name} learners
    
    Output MUST be a valid JSON array, e.g.:
    [
      { "speaker": "Speaker A", "line": "Hello! Let's talk about ${t} using simple words for ${n.name} level." },
      { "speaker": "Speaker B", "line": "Great idea! What should we discuss first about ${t}?" },
      { "speaker": "Speaker A", "line": "Perhaps we can start with..." },
      { "speaker": "Speaker B", "line": "I think examples would help." }
    ]
    Do NOT include any explanation or extra text. Only output the JSON array.
  `;return await ut(o,i)},Kj=async(t,e)=>{if(!e)throw new Error("Gemini API ");const n=await cv(t,e),[i,l,o,u,f,g,m]=await Promise.all([_j(t,e,n),Mj(t,e,n),Rj(t,e,n),Ij(t,e,n),Dj(t,e,n),uv(t,e,n),mm(t,e,n)]);return{learningObjectives:n,contentBreakdown:i,confusingPoints:l,classroomActivities:o,onlineInteractiveQuiz:u,englishConversation:f,learningLevels:g,writingPractice:m}},Wj=t=>{const e=n=>({trueFalse:Math.max(0,Math.min(n.trueFalse,Er.trueFalse)),multipleChoice:Math.max(0,Math.min(n.multipleChoice,Er.multipleChoice)),fillInTheBlanks:Math.max(0,Math.min(n.fillInTheBlanks,Er.fillInTheBlanks)),sentenceScramble:Math.max(0,Math.min(n.sentenceScramble,Er.sentenceScramble)),memoryCardGame:Math.max(0,Math.min(n.memoryCardGame,Er.memoryCardGame))});return{easy:e(t.easy),normal:e(t.normal),hard:e(t.hard)}},Xj=async(t,e,n,i,l,o)=>{const u=Wj(i),f=async v=>{const N=u[v];let w="";l&&(w=`${l.name} (${l.description}) `);let S="";o&&(S=`
      CRITICAL VOCABULARY CONSTRAINTS for English content:
      - All English text must use vocabulary within the ${o.wordCount} most common English words
      - Examples should be appropriate for ${o.description}
      `);const j=`
      Based on the following learning objectives: ${JSON.stringify(n)}
      Please generate ${w}quiz content for "${t}" with the following specific quantities:
      
      - True/False questions: ${N.trueFalse} questions
      - Multiple choice questions: ${N.multipleChoice} questions  
      - Fill in the blanks questions: ${N.fillInTheBlanks} questions
      - Sentence scramble questions: ${N.sentenceScramble} questions
      - Memory card game questions: ${N.memoryCardGame} questions
      
      ${S}
      
      Output MUST be a valid JSON object with this exact structure:
      {
        "trueFalse": [${N.trueFalse>0?`
          { "statement": "", "isTrue": true, "explanation": "" }
          //  ${N.trueFalse} `:"//  0 "}],
        "multipleChoice": [${N.multipleChoice>0?`
          { "question": "", "options": ["A", "B", "C", "D"], "correctAnswerIndex": 0 }
          //  ${N.multipleChoice} `:"//  0 "}],
        "fillInTheBlanks": [${N.fillInTheBlanks>0?`
          { "sentenceWithBlank": " ____ ", "correctAnswer": "" }
          //  ${N.fillInTheBlanks} `:"//  0 "}],
        "sentenceScramble": [${N.sentenceScramble>0?`
          { "originalSentence": "", "scrambledWords": ["", "", "", ""] }
          //  ${N.sentenceScramble} `:"//  0 "}],
        "memoryCardGame": [${N.memoryCardGame>0?`
          { "pairs": [{"question": "", "answer": ""}, ...], "instructions": "" }
          //  ${N.memoryCardGame}  5 `:"//  0 "}]
      }
      
      IMPORTANT: 
      - Generate EXACTLY the number of questions specified for each type (supports up to 10 questions for most types, 2 for memory card games)
      - If a question type is set to 0, provide an empty array []
      - For memoryCardGame, each question should contain at least 5 pairs in the "pairs" array
      - Maximum limits: trueFalse/multipleChoice/fillInTheBlanks/sentenceScramble up to 10 questions, memoryCardGame up to 2 questions
      - All text must be in the primary language of the topic
      - Do NOT include any explanation or extra text, only output the JSON object
    `;return await ut(j,e)},[g,m,x]=await Promise.all([f("easy"),f("normal"),f("hard")]);return{easy:g,normal:m,hard:x}},ek=async(t,e,n,i,l,o)=>await Xj(t,e,n,i,l,o),mm=async(t,e,n,i,l)=>{const o=`
    Based on the topic "${t}" and learning objectives: ${JSON.stringify(n)}
    Generate 6 sentence-making practice prompts (2 easy, 2 normal, 2 hard difficulty).
    
    ${i?`The content should be suitable for "${i.name}" level learners (${i.description}).`:""}
    ${l?`
    VOCABULARY CONSTRAINTS for English content:
    - All instructions and keywords must use vocabulary within the ${l.wordCount} most common English words
    - Examples should be appropriate for ${l.description}
    `:""}
    
    Output MUST be a valid JSON array:
    [
      {
        "id": "sentence_1",
        "instruction": "",
        "keywords": ["1", "2", "3"],
        "exampleSentence": "",
        "hints": ["1", "2"],
        "difficulty": "easy"
      }
    ]
    
    Requirements:
    - Each prompt should include 2-4 keywords that must be used
    - Provide clear instructions in the primary language of the topic
    - Include helpful hints for sentence construction
    - Example sentences should demonstrate proper usage
    - Progressive difficulty from easy to hard
    
    Do NOT include explanation, only output the JSON array.
  `,u=`
    Based on the topic "${t}" and learning objectives: ${JSON.stringify(n)}
    Generate 6 writing practice prompts (2 easy, 2 normal, 2 hard difficulty).
    
    ${i?`The content should be suitable for "${i.name}" level learners (${i.description}).`:""}
    ${l?`
    VOCABULARY CONSTRAINTS for English content:
    - All instructions and suggested keywords must use vocabulary within the ${l.wordCount} most common English words
    - Writing requirements should match ${l.description}
    `:""}
    
    Output MUST be a valid JSON array:
    [
      {
        "id": "writing_1", 
        "title": "",
        "instruction": "",
        "structure": ["1", "2", "3"],
        "keywords": ["1", "2"],
        "minLength": 100,
        "maxLength": 300,
        "exampleOutline": "",
        "difficulty": "easy"
      }
    ]
    
    Requirements:
    - Easy: 100-200 words, simple structure
    - Normal: 200-400 words, moderate complexity  
    - Hard: 300-600 words, complex structure
    - Provide clear writing guidelines and structure suggestions
    - Include relevant vocabulary recommendations
    - All text in the primary language of the topic
    
    Do NOT include explanation, only output the JSON array.
  `,[f,g]=await Promise.all([ut(o,e),ut(u,e)]);return{sentencePractice:f,writingPractice:g,instructions:"AI"}},tk=async(t,e,n,i,l)=>{const o=/[a-zA-Z]/.test(t),u=o?"English":"Chinese",f=`
    Please provide detailed feedback for this ${e} practice work:
    
    Original Prompt: ${JSON.stringify(n)}
    Student Work: "${t}"
    
    ${l&&o?`
    VOCABULARY LEVEL CONTEXT:
    - Target level: ${l.name} (${l.wordCount} words: ${l.description})
    - Evaluate if vocabulary usage matches this level
    `:""}
    
    Provide comprehensive feedback in JSON format:
    {
      "score": 85,
      "strengths": ["1", "2"],
      "improvements": ["1", "2"],
      "grammarCorrections": [
        {
          "original": "",
          "corrected": "", 
          "explanation": ""
        }
      ],
      "vocabularyTips": ["1", "2"],
      "structureFeedback": "",
      "overallComment": ""
    }
    
    Evaluation Criteria:
    - Content relevance and completion of requirements
    - Grammar and language accuracy
    - Vocabulary usage and variety
    - Structure and organization (for writing)
    - Creativity and expression
    
    ${e==="sentence"?`
    For sentence practice:
    - Check if required keywords are used correctly
    - Evaluate sentence structure and grammar
    - Assess creativity in sentence construction
    `:`
    For writing practice:
    - Evaluate if word count requirements are met
    - Assess paragraph structure and flow
    - Check adherence to suggested outline
    - Evaluate argument development and coherence
    `}
    
    Provide feedback in Traditional Chinese for better understanding.
    Be encouraging and constructive. Score range: 0-100.
    
    Do NOT include explanation, only output the JSON object.
  `;return await ut(f,i)},qo=async(t,e)=>{const n=`
    Transform the following teacher-oriented learning objective into student-friendly, engaging content suitable for interactive learning:
    
    Original Learning Objective:
    ${JSON.stringify(t)}
    
    Transform it into student-centered language that:
    1. Uses "" (you) instead of "" (students)
    2. Makes it personally relevant and motivating
    3. Explains WHY this learning is important to the student
    4. Uses encouraging, accessible language
    5. Includes concrete examples that students can relate to
    6. Makes the learning goal feel achievable and exciting
    
    Output MUST be a valid JSON object with this structure:
    {
      "objective": "",
      "description": "",
      "teachingExample": "",
      "personalRelevance": "",
      "encouragement": ""
    }
    
    Make the content engaging, personal, and motivational. Use Traditional Chinese.
    Do NOT include any explanation or extra text. Only output the JSON object.
  `;return await ut(n,e)},Fo=async(t,e)=>{const n=`
    Transform the following teacher-oriented content breakdown into student-friendly, digestible learning content:
    
    Original Content Breakdown:
    ${JSON.stringify(t)}
    
    Transform it into student-centered content that:
    1. Uses conversational, friendly tone
    2. Explains concepts in simple, relatable terms
    3. Connects to real-world applications students care about
    4. Includes step-by-step learning guidance
    5. Makes complex topics feel approachable
    6. Uses analogies and examples from student life
    
    Output MUST be a valid JSON object with this structure:
    {
      "title": "",
      "introduction": "",
      "keyPoints": ["1", "2", "3"],
      "realLifeExamples": ["1", "2", "3"],
      "learningTips": "",
      "nextSteps": "",
      "encouragement": ""
    }
    
    Make the content feel like a friendly tutor explaining concepts personally to the student.
    Use Traditional Chinese. Do NOT include any explanation or extra text. Only output the JSON object.
  `;return await ut(n,e)},Ho=async(t,e)=>{const n=`
    Transform the following teacher-oriented confusing point analysis into student-friendly, helpful guidance:
    
    Original Confusing Point:
    ${JSON.stringify(t)}
    
    Transform it into student-centered guidance that:
    1. Acknowledges that confusion is normal and okay
    2. Explains the common mistake without making students feel bad
    3. Provides clear, memorable strategies to avoid the mistake
    4. Uses positive, encouraging language
    5. Includes memorable tricks or mnemonics
    6. Shows both wrong and right examples in a supportive way
    
    Output MUST be a valid JSON object with this structure:
    {
      "title": "",
      "normalizeConfusion": "",
      "commonMistake": "",
      "whyItHappens": "",
      "clearExplanation": "",
      "rememberingTricks": ["1", "2", "3"],
      "practiceExamples": [
        {
          "situation": "",
          "wrongThinking": "",
          "rightThinking": "",
          "explanation": ""
        }
      ],
      "confidenceBooster": ""
    }
    
    Make the content supportive and empowering, helping students learn from mistakes without judgment.
    Use Traditional Chinese. Do NOT include any explanation or extra text. Only output the JSON object.
  `;return await ut(n,e)},nk=t=>{const e=[];for(const n of t){if(!n.pairs||!Array.isArray(n.pairs))continue;const i=n.pairs.map(g=>{var m;return(m=g.left)==null?void 0:m.toLowerCase().trim()}).filter(Boolean),l=n.pairs.map(g=>{var m;return(m=g.right)==null?void 0:m.toLowerCase().trim()}).filter(Boolean),o=i.filter((g,m)=>i.indexOf(g)!==m);o.length>0&&e.push(`: ${o.join(", ")}`);const u=l.filter((g,m)=>l.indexOf(g)!==m);u.length>0&&e.push(`: ${u.join(", ")}`);const f=i.filter(g=>l.includes(g));f.length>0&&e.push(`: ${f.join(", ")}`)}return{isValid:e.length===0,issues:e}},ik=async(t,e,n,i)=>{const l=`
    Based on the following transformed student-friendly content, generate quiz questions that help students practice and reinforce their understanding:
    
    Step Type: ${e}
    Content: ${JSON.stringify(t)}
    
    Generate EXACTLY the requested number of questions for each type:
    - True/False: ${i.trueFalse} questions
    - Multiple Choice: ${i.multipleChoice} questions  
    - Memory Card Game: ${i.memoryCardGame} pair set(s)
    
    Quiz Design Principles:
    1. Questions should directly test understanding of the content provided
    2. Use student-friendly language that matches the transformed content tone
    3. Make questions engaging and practical
    4. Include clear explanations for correct answers
    5. For memory card games, create concept-definition or question-answer pairs
    6. Avoid trick questions; focus on genuine comprehension
    
    CRITICAL for Memory Card Games:
    - Each "left" and "right" content must be COMPLETELY UNIQUE across all pairs
    - NO duplicate content on either left or right side
    - Each pair should test a different concept or knowledge point
    - Students should never be confused about which card matches which
    - All content in left column must be distinct from each other
    - All content in right column must be distinct from each other
    - Create clear, unambiguous one-to-one relationships
    
    Output MUST be a valid JSON object with this exact structure:
    {
      "trueFalse": [
        { 
          "statement": "...", 
          "isTrue": true, 
          "explanation": "/..."
        }
        // exactly ${i.trueFalse} items
      ],
      "multipleChoice": [
        { 
          "question": "...", 
          "options": ["A", "B", "C", "D"], 
          "correctAnswerIndex": 0,
          "explanation": "..."
        }
        // exactly ${i.multipleChoice} items
      ],
      "memoryCardGame": [
        {
          "title": "",
          "pairs": [
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" },
            { "left": "", "right": "" }
            // at least 5 pairs per game
          ]
        }
        // exactly ${i.memoryCardGame} games
      ]
    }
    
    All content should be in Traditional Chinese and directly related to the provided learning content.
    Make questions that genuinely help students practice and remember the key concepts.
    Do NOT include any explanation or extra text outside the JSON structure.
  `,o=await ut(l,n);if(o.memoryCardGame&&Array.isArray(o.memoryCardGame)){const u=nk(o.memoryCardGame);u.isValid||(console.warn(":",u.issues),o._validationWarnings=u.issues)}return o},rk=({topic:t,setTopic:e,onGenerate:n,onGenerateWithLevels:i,isLoading:l})=>{const o=f=>{f.preventDefault(),!l&&t.trim()&&n()},u=f=>{f.preventDefault(),!l&&t.trim()&&i&&i()};return s.jsxs("form",{onSubmit:o,className:"mb-8 p-6 bg-white shadow-lg rounded-xl",children:[s.jsx("label",{htmlFor:"topic-input",className:"block text-xl font-semibold text-slate-700 mb-3",children:""}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("input",{id:"topic-input",type:"text",value:t,onChange:f=>e(f.target.value),placeholder:"JavaScript Promises",className:"w-full p-3 border border-slate-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-600 transition-shadow bg-slate-50 text-slate-800 placeholder-slate-500",disabled:l,"aria-label":""}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[i&&s.jsx("button",{type:"button",onClick:u,disabled:l||!t.trim(),className:"flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):" "}),s.jsx("button",{type:"submit",disabled:l||!t.trim(),className:"flex-1 px-6 py-3 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center","aria-live":"polite",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):" "})]}),i&&s.jsxs("div",{className:"text-sm text-slate-600 bg-slate-50 p-3 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:" "})," "]}),s.jsxs("p",{children:[s.jsx("strong",{children:" "})," "]})]})]})]})},dn=()=>s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-sky-600"}),s.jsx("p",{className:"text-sky-700",children:"..."})]}),zn=({title:t,icon:e,children:n,className:i})=>s.jsxs("div",{className:`bg-white shadow-lg rounded-xl p-6 mb-6 ${i||""}`,children:[s.jsxs("h2",{className:"text-2xl font-semibold text-sky-700 mb-4 flex items-center",children:[e&&s.jsx("span",{className:"mr-3 text-sky-600",children:e}),t]}),s.jsx("div",{className:"text-slate-700 space-y-3",children:n})]}),yc=async(t,e)=>{const n=new lv({apiKey:e}),i="gemini-2.5-flash";try{const l=await n.models.generateContent({model:i,contents:t,config:{responseMimeType:"application/json"}});if(!l.text)throw new Error("AI  API ");let o=l.text.trim();const u=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,f=o.match(u);if(f&&f[2]&&(o=f[2].trim()),!o.startsWith("{")&&!o.startsWith("[")&&(o.includes("{")||o.includes("["))){const g=o.indexOf("{"),m=o.indexOf("[");let x=-1,v=-1;g!==-1&&(m===-1||g<m)?(x=g,v=o.lastIndexOf("}")):m!==-1&&(x=m,v=o.lastIndexOf("]")),x!==-1&&v!==-1&&v>x&&(o=o.substring(x,v+1))}try{return JSON.parse(o)}catch{throw console.error("AI  (JSON parse ):",l.text),new Error("AI  ( JSON)")}}catch(l){let o="";throw l instanceof Error&&(o+=`  ${l.message}`),new Error(o)}},sk=t=>{const e=new Map;return t.forEach(n=>{e.has(n.questionType)||e.set(n.questionType,{questionType:n.questionType,totalQuestions:0,correctCount:0,accuracy:0,averageTime:0,commonErrors:[],difficultyBreakdown:{easy:{total:0,correct:0,accuracy:0},normal:{total:0,correct:0,accuracy:0},hard:{total:0,correct:0,accuracy:0}}})}),t.forEach(n=>{const i=e.get(n.questionType);i.totalQuestions++,n.isCorrect&&i.correctCount++;const l=i.difficultyBreakdown[n.difficulty];l.total++,n.isCorrect&&l.correct++,l.accuracy=l.total>0?Math.round(l.correct/l.total*100):0}),e.forEach(n=>{n.accuracy=n.totalQuestions>0?Math.round(n.correctCount/n.totalQuestions*100):0;const l=t.filter(o=>o.questionType===n.questionType).filter(o=>o.responseTime).map(o=>o.responseTime);n.averageTime=l.length>0?Math.round(l.reduce((o,u)=>o+u,0)/l.length):void 0}),Array.from(e.values())},dv=t=>{if(t.length===0)return 0;const e=t.filter(n=>n.isCorrect).length;return Math.round(e/t.length*100)},ak=t=>t>=80?"advanced":t>=60?"intermediate":"beginner",lk=async(t,e,n,i)=>{const l=e.filter(m=>!m.isCorrect),o=e.filter(m=>m.isCorrect),u=l.map(m=>`
    : ${m.questionType}
    : ${m.difficulty}
    : ${JSON.stringify(m.userAnswer)}
    : ${JSON.stringify(m.correctAnswer)}
    : ${m.attempts||1}`).join(`
`),f=o.map(m=>`
    : ${m.questionType}
    : ${m.difficulty}
    : ${JSON.stringify(m.userAnswer)}`).join(`
`),g=`
    ${t}
    
    
    - ${o.length}
    - ${l.length}
    - ${Math.round(o.length/e.length*100)}%
    
    ${u}
    
    ${f}
    
     JSON 
    {
      "strengths": [
        {
          "area": "",
          "description": "",
          "level": "good|excellent|outstanding",
          "examples": [""],
          "leverageOpportunities": [""]
        }
      ],
      "weaknesses": [
        {
          "area": "",
          "description": "",
          "severity": "low|medium|high",
          "affectedTopics": [""],
          "recommendedActions": [""]
        }
      ],
      "learningStyle": "",
      "cognitivePattern": ""
    }
    
    
  `;try{return await yc(g,i)}catch(m){return console.error("AI :",m),{strengths:[],weaknesses:[],learningStyle:"",cognitivePattern:""}}},ok=async(t,e,n,i,l,o)=>{const u=`
    Generate personalized learning recommendations for a student based on their performance analysis.
    
    Context:
    - Topic: "${t}"
    - Overall Score: ${e}%
    - Learning Level: ${n}
    - Key Strengths: ${i.map(f=>f.area).join(", ")}
    - Areas for Improvement: ${l.map(f=>f.area).join(", ")}
    
    Please provide 3-5 personalized recommendations in the following JSON structure (no explanation, no extra text):
    {
      "recommendations": [
        {
          "category": "immediate|short-term|long-term",
          "priority": "high|medium|low",
          "title": "",
          "description": "",
          "actionSteps": ["1", "2"],
          "expectedOutcome": "",
          "estimatedTime": "",
          "resources": [""]
        }
      ]
    }
    
    Focus on actionable, specific recommendations that consider the student's current level and identified strengths/weaknesses.
    Respond in Traditional Chinese ().
  `;try{return(await yc(u,o)).recommendations||[]}catch(f){return console.error("AI :",f),[]}},ck=async(t,e,n,i,l,o,u,f,g)=>{const x=((g==null?void 0:g.filter(N=>!N.isCorrect))||[]).map(N=>`
  - ${N.questionType} (: ${N.difficulty}): ${JSON.stringify(N.userAnswer)}${JSON.stringify(N.correctAnswer)}`).join(""),v=`
    ${t}
    
    
    - ${e}%
    - ${n}
    - ${l.map(N=>N.area).join("")}
    - ${o.map(N=>N.area).join("")}
    
    ${x}
    
     JSON 
    {
      "encouragementMessage": "",
      "keyStrengths": ["", "", ""],
      "improvementAreas": ["", ""],
      "nextSteps": ["", "", ""],
      "studyTips": ["", "", ""],
      "motivationalQuote": ""
    }
    
    
    
  `;try{const N=await yc(v,u);return{studentId:f,overallScore:e,overallLevel:n,encouragementMessage:N.encouragementMessage||"",keyStrengths:N.keyStrengths||[],improvementAreas:N.improvementAreas||[],nextSteps:N.nextSteps||[],studyTips:N.studyTips||[],motivationalQuote:N.motivationalQuote||""}}catch(N){return console.error("AI :",N),{studentId:f,overallScore:e,overallLevel:n,encouragementMessage:"",keyStrengths:["",""],improvementAreas:[""],nextSteps:["","",""],studyTips:["","",""],motivationalQuote:""}}},uk=async(t,e,n,i,l,o,u)=>{const g=((u==null?void 0:u.filter(x=>!x.isCorrect))||[]).map(x=>`
  - : ${x.questionType}, : ${x.difficulty}
    : ${JSON.stringify(x.userAnswer)}
    : ${JSON.stringify(x.correctAnswer)}
    : ${x.attempts||1}`).join(""),m=`
    ${t}
    
    
    - ${e}%
    - ${i.map(x=>x.area).join("")}
    - ${l.map(x=>x.area).join("")}
    - ${n.map(x=>`${x.questionType}: ${x.accuracy}%`).join("")}
    
    ${g}
    
     JSON 
    {
      "immediateInterventions": ["", ""],
      "instructionalStrategies": ["", "", ""],
      "differentiation": ["", ""],
      "parentGuidance": ["", ""]
    }
    
    
    
  `;try{const x=await yc(m,o);return{immediateInterventions:x.immediateInterventions||[],instructionalStrategies:x.instructionalStrategies||[],differentiation:x.differentiation||[],parentGuidance:x.parentGuidance||[]}}catch(x){return console.error("AI :",x),{immediateInterventions:[],instructionalStrategies:[],differentiation:[],parentGuidance:[]}}},dk=async(t,e,n={includeDetailedAnalysis:!0,includeComparativeData:!1,includeVisualCharts:!1,language:"zh-TW",reportFormat:"standard"})=>{try{const i=sk(t.responses),l=dv(t.responses),o=ak(l),u=await lk(t.topic,t.responses,i,e),f=await ok(t.topic,l,o,u.strengths,u.weaknesses,e),g=await ck(t.topic,l,o,i,u.strengths,u.weaknesses,e,t.studentId,t.responses),m=await uk(t.topic,l,i,u.strengths,u.weaknesses,e,t.responses),x={studentId:t.studentId,assessmentDate:new Date().toISOString(),topic:t.topic,overallPerformance:{totalScore:l,level:o,timeSpent:t.endTime&&t.startTime?Math.round((new Date(t.endTime).getTime()-new Date(t.startTime).getTime())/6e4):0},performanceByType:i,learningAnalysis:u,teachingRecommendations:m,personalizedRecommendations:f,progressTracking:{keyMetrics:["","",""],checkpoints:["","",""],reassessmentSuggestion:" 2-3 "}};return{session:t,studentFeedback:g,teacherReport:x,rawData:{responses:t.responses,statistics:i}}}catch(i){throw console.error(":",i),new Error("")}},ac=(t,e)=>({sessionId:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:e,topic:t,startTime:new Date().toISOString(),responses:[],isCompleted:!1,metadata:{userAgent:navigator.userAgent,deviceType:/Mobi|Android/i.test(navigator.userAgent)?"mobile":"desktop"}}),Go=t=>({...t,endTime:new Date().toISOString(),isCompleted:!0}),Ff=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.31M8.25 18.75a12.064 12.064 0 0 0 7.5 0M12 6.75a2.25 2.25 0 1 1 0 4.5 2.25 2.5 0 0 1 0-4.5ZM12 6.75V3.75m0 3a12.022 12.022 0 0 0-5.483 1.348M12 6.75a12.022 12.022 0 0 1 5.483 1.348"})}),lc=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V3.75m0 12.15V21"})}),sl=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 7.756a4.5 4.5 0 1 0 0 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ri=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ir=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),$n=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),fk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Zm3.75 11.625a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),mk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),hk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),pk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15c-1.13 0-2.25-.264-3.25-.73A4.505 4.505 0 0 1 5.25 9.75V8.25A6.75 6.75 0 0 1 12 1.5a6.75 6.75 0 0 1 6.75 6.75v1.5a4.505 4.505 0 0 1-3.5 4.52M12 15V8.25"})}),gk=({className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.254 9.254 9 9.563 9h4.874c.309 0 .563.254.563.563v4.874c0 .309-.254.563-.563.563H9.563A.562.562 0 0 1 9 14.437V9.564Z"})]}),Hf=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-2.184-2.183a1.724 1.724 0 0 0-1.235-.517H7.72c-1.137 0-2.1-.847-2.193-1.98A11.974 11.974 0 0 1 5.5 13H4.75a2.25 2.25 0 0 1-2.25-2.25V6.75a2.25 2.25 0 0 1 2.25-2.25h4.718c.468 0 .92.052 1.354.143L12 6l2.454-2.454L16.5 6h1.252a2.25 2.25 0 0 1 2.25 2.25v.233Z"})}),Is=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),Gf=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),zd=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),xk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),oc=({className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),uy=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 1-4.243-4.243m4.242 4.242L9.88 9.88"})}),fv=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),Vd=({className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),dy=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),yk=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Rr=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),hm=({question:t,itemNumber:e,onAnswer:n})=>{const[i,l]=_.useState(null),[o,u]=_.useState(null),[f,g]=_.useState(0);_.useEffect(()=>{l(null),u(null),g(Date.now())},[t]);const m=x=>{l(x);const v=x===t.isTrue;let N=v?"":"";v||(N+=` ${t.isTrue?" (True)":" (False)"}`),u({isCorrect:v,message:N,explanation:t.explanation});const w=f>0?Date.now()-f:void 0;n&&n(x,v,w)};return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[s.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". ",t.statement||"..."]}),s.jsxs("div",{className:"flex space-x-3 mb-3",children:[s.jsx("button",{onClick:()=>m(!0),className:`px-6 py-2 rounded-md font-medium transition-all
            ${i===!0?o!=null&&o.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":i===!0,disabled:o!==null,children:" (True)"}),s.jsx("button",{onClick:()=>m(!1),className:`px-6 py-2 rounded-md font-medium transition-all
            ${i===!1?o!=null&&o.isCorrect?"bg-green-500 text-white ring-2 ring-green-300":"bg-red-500 text-white ring-2 ring-red-300":"bg-slate-200 hover:bg-slate-300 text-slate-700"}
          `,"aria-pressed":i===!1,disabled:o!==null,children:" (False)"})]}),o&&s.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex flex-col items-start ${o.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s.jsxs("div",{className:"flex items-center",children:[o.isCorrect?s.jsx(ri,{className:"w-5 h-5 mr-2"}):s.jsx(Ir,{className:"w-5 h-5 mr-2"}),o.message]}),o.explanation&&s.jsx("p",{className:"mt-1 pl-7 text-xs italic",children:o.explanation})]})]})},pm=({question:t,itemNumber:e,onAnswer:n})=>{const[i,l]=_.useState(null),[o,u]=_.useState(null),[f,g]=_.useState(0);_.useEffect(()=>{l(null),u(null),g(Date.now())},[t]);const m=()=>{if(i===null){u({isCorrect:!1,message:""});return}const x=i===t.correctAnswerIndex;u({isCorrect:x,message:x?"":` ${(t.options||[])[t.correctAnswerIndex]||""}`});const v=f>0?Date.now()-f:void 0;n&&n(i,x,v)};return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[s.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". ",t.question]}),s.jsx("div",{className:"space-y-2 mb-3",children:(t.options||[]).map((x,v)=>s.jsxs("label",{className:`flex items-center p-2 border rounded-md cursor-pointer hover:bg-sky-50 transition-colors ${i===v?"bg-sky-100 border-sky-500":"border-slate-300"} ${o!==null?"cursor-not-allowed opacity-70":""}`,children:[s.jsx("input",{type:"radio",name:`mcq-${e}-${t.question}`,value:v,checked:i===v,onChange:()=>{o===null&&l(v)},className:"mr-2 h-4 w-4 text-sky-600 focus:ring-sky-500 border-slate-400",disabled:o!==null}),x]},v))}),s.jsx("button",{onClick:m,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:o!==null||i===null,children:""}),o&&s.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${o.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[o.isCorrect?s.jsx(ri,{className:"w-5 h-5 mr-2"}):s.jsx(Ir,{className:"w-5 h-5 mr-2"}),o.message]})]})},mv=({question:t,itemNumber:e,onAnswer:n})=>{var v;const[i,l]=_.useState(""),[o,u]=_.useState(null),[f,g]=_.useState(0);_.useEffect(()=>{l(""),u(null),g(Date.now())},[t]);const m=N=>{if(N.preventDefault(),!i.trim()){u({isCorrect:!1,message:""});return}const w=i.trim().toLowerCase()===t.correctAnswer.toLowerCase();u({isCorrect:w,message:w?"":` ${t.correctAnswer}`});const S=f>0?Date.now()-f:void 0;n&&n(i.trim(),w,S)},x=((v=t.sentenceWithBlank)==null?void 0:v.split("____"))||["",""];return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[s.jsxs("form",{onSubmit:m,className:"space-y-2",children:[s.jsxs("label",{htmlFor:`fillblank-${e}-${t.sentenceWithBlank}`,className:"font-medium text-slate-700 mb-1 block",children:[e,". ",x[0],s.jsx("input",{id:`fillblank-${e}-${t.sentenceWithBlank}`,type:"text",value:i,onChange:N=>{o===null&&l(N.target.value)},className:"mx-1 p-1 border-b-2 border-slate-400 focus:border-sky-500 outline-none w-24 sm:w-32 bg-transparent",placeholder:"",disabled:o!==null}),x[1]]}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors disabled:bg-slate-400",disabled:o!==null||!i.trim(),children:""})]}),o&&s.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-center ${o.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[o.isCorrect?s.jsx(ri,{className:"w-5 h-5 mr-2"}):s.jsx(Ir,{className:"w-5 h-5 mr-2"}),o.message]})]})},hv=({question:t,itemNumber:e,onAnswer:n})=>{const[i,l]=_.useState([]),[o,u]=_.useState([]),[f,g]=_.useState(null),[m,x]=_.useState(0);_.useEffect(()=>{const j=t.scrambledWords||[];u([...j].sort(()=>Math.random()-.5)),l([]),g(null),x(Date.now())},[t]);const v=(j,k)=>{l([...i,j]);const E=[...o];E.splice(k,1),u(E),f&&g(null)},N=(j,k)=>{u([...o,j]);const E=[...i];E.splice(k,1),l(E),f&&g(null)},w=()=>{const j=t.scrambledWords||[];u([...j].sort(()=>Math.random()-.5)),l([]),f&&g(null)},S=()=>{const j=i.join(" ").trim(),k=D=>D.toLowerCase().replace(/[.,!?;:]/g,"").replace(/\s+/g," ").trim(),E=k(j)===k(t.originalSentence);g({isCorrect:E,message:E?"":` "${t.originalSentence}"`});const L=m>0?Date.now()-m:void 0;n&&n(j,E,L)};return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 mb-3",children:[s.jsxs("p",{className:"font-medium text-slate-700 mb-2",children:[e,". "]}),s.jsx("div",{className:"mb-3 p-3 border border-dashed border-slate-400 rounded-md min-h-[40px] bg-white flex flex-wrap gap-2",children:i.length>0?i.map((j,k)=>s.jsx("button",{onClick:()=>N(j,k),className:"px-2 py-1 bg-sky-200 text-sky-800 rounded-md hover:bg-sky-300 transition-colors",children:j},`${j}-${k}-constructed`)):s.jsx("span",{className:"text-slate-400 italic",children:""})}),s.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:o.map((j,k)=>s.jsx("button",{onClick:()=>v(j,k),className:"px-2 py-1 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 transition-colors",children:j},`${j}-${k}-available`))}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:S,className:"px-4 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 transition-colors",children:""}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-slate-500 text-white rounded-md hover:bg-slate-600 transition-colors",children:""})]}),f&&s.jsxs("div",{className:`mt-3 p-2 rounded-md text-sm flex items-center ${f.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[f.isCorrect?s.jsx(ri,{className:"w-5 h-5 mr-2"}):s.jsx(Ir,{className:"w-5 h-5 mr-2"}),f.message]})]})};function vk(t){const e=[...t];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}const gm=({question:t,itemNumber:e,onAnswer:n})=>{const[i,l]=_.useState([]),[o,u]=_.useState([]),[f,g]=_.useState(0),[m,x]=_.useState(0),[v,N]=_.useState(!1),[w,S]=_.useState(0);_.useEffect(()=>{let E=0;const L=(t.pairs||[]).flatMap((D,O)=>[{id:E++,content:D.left||D.question,pairId:O,isFlipped:!1,isMatched:!1},{id:E++,content:D.right||D.answer,pairId:O,isFlipped:!1,isMatched:!1}]);l(vk(L)),u([]),g(0),x(0),N(!1),S(Date.now())},[t]);const j=E=>{if(i[E].isFlipped||i[E].isMatched||o.length===2||v)return;const L=i.map((O,H)=>H===E?{...O,isFlipped:!0}:O),D=[...o,E];if(l(L),u(D),D.length===2&&x(O=>O+1),D.length===2){const[O,H]=D;L[O].pairId===L[H].pairId?setTimeout(()=>{l(I=>I.map((R,q)=>q===O||q===H?{...R,isMatched:!0}:R)),u([]),g(I=>I+1)},600):setTimeout(()=>{l(I=>I.map((R,q)=>q===O||q===H?{...R,isFlipped:!1}:R)),u([])},900)}},k=f===(t.pairs||[]).length;return _.useEffect(()=>{if(k&&!v&&n){N(!0);const E=w>0?Date.now()-w:void 0;n(m,!0,E)}},[k,v,m,n,w]),s.jsxs("div",{className:"mb-4 p-4 border rounded bg-slate-50",children:[s.jsxs("div",{className:"font-semibold mb-2",children:[e,". "]}),t.instructions&&s.jsx("div",{className:"mb-2 text-sky-700 text-sm",children:t.instructions}),s.jsxs("div",{className:"mb-3 text-sm text-gray-600 flex justify-between items-center",children:[s.jsxs("span",{children:[": ",f,"/",(t.pairs||[]).length]}),s.jsxs("span",{children:[": ",m]}),k&&s.jsx("span",{className:"text-green-600 font-medium",children:" "})]}),s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-xl mx-auto mb-2",children:i.map((E,L)=>s.jsxs("button",{className:`relative h-20 w-full rounded shadow border transition-transform duration-200 ${E.isMatched?"bg-green-200 border-green-400":"bg-white border-slate-300"} ${E.isFlipped||E.isMatched?"":"hover:scale-105"}`,onClick:()=>j(L),disabled:E.isFlipped||E.isMatched||o.length===2,style:{perspective:"600px"},children:[s.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-base font-medium transition-all duration-300 ${E.isFlipped||E.isMatched?"opacity-100 rotate-y-0":"opacity-0 rotate-y-180"}`,style:{backfaceVisibility:"hidden",transform:E.isFlipped||E.isMatched?"rotateY(0deg)":"rotateY(180deg)"},children:E.content}),s.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-2xl font-bold text-sky-600 transition-all duration-300 ${E.isFlipped||E.isMatched?"opacity-0 rotate-y-180":"opacity-100 rotate-y-0"}`,style:{backfaceVisibility:"hidden",transform:E.isFlipped||E.isMatched?"rotateY(180deg)":"rotateY(0deg)"},children:"?"})]},E.id))}),k&&s.jsx("div",{className:"text-green-600 font-semibold mt-2",children:""})]})},gl="https://api.jsonbin.io/v3/b",Hs="$2a$10$0PieG5Wm.V.6svtN4PbaTuVxU4LY0nL2Vaz4N3g2aYlb0cL1NG4Qa";async function cc(t){const n=await(await fetch(gl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":Hs,"X-Bin-Private":"false"},body:JSON.stringify(t)})).json();if(!n||!n.metadata||!n.metadata.id)throw new Error(" jsonbin id");return n.metadata.id}async function vc(t){const n=await(await fetch(`https://api.jsonbin.io/v3/b/${t}/latest`,{})).json();if(!n||!n.record)throw new Error("");return n.record}async function bk(t){const e={type:"quiz",quiz:t.quiz,topic:t.topic,apiKey:t.apiKey,metadata:t.metadata,createdAt:new Date().toISOString(),supportsDiagnostic:!!t.apiKey},i=await(await fetch(gl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":Hs,"X-Bin-Private":"false"},body:JSON.stringify(e)})).json();if(!i||!i.metadata||!i.metadata.id)throw new Error("");return i.metadata.id}async function wk(t){const n=await(await fetch(`https://api.jsonbin.io/v3/b/${t}/latest`,{})).json();if(!n||!n.record)throw new Error("");const i=n.record;if(i.type!=="quiz")throw new Error("");return{quiz:i.quiz,topic:i.topic,apiKey:i.apiKey,supportsDiagnostic:i.supportsDiagnostic||!1,metadata:i.metadata}}async function Nk(t){const e={type:"writing",writingPractice:t.writingPractice,topic:t.topic,metadata:t.metadata,createdAt:new Date().toISOString()},i=await(await fetch(gl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":Hs,"X-Bin-Private":"false"},body:JSON.stringify(e)})).json();if(!i||!i.metadata||!i.metadata.id)throw new Error("");return i.metadata.id}async function Ck(t){const n=await(await fetch(`https://api.jsonbin.io/v3/b/${t}/latest`,{})).json();if(!n||!n.record)throw new Error("");const i=n.record;if(i.type!=="writing")throw new Error("");return{writingPractice:i.writingPractice,topic:i.topic,metadata:i.metadata}}async function Sk(t){const e={type:"student-results",...t,createdAt:new Date().toISOString()},i=await(await fetch(gl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":Hs,"X-Bin-Private":"false"},body:JSON.stringify(e)})).json();if(!i||!i.metadata||!i.metadata.id)throw new Error("");return i.metadata.id}async function pv(t){const n=await(await fetch(`https://api.jsonbin.io/v3/b/${t}/latest`,{})).json();if(!n||!n.record)throw new Error("");const i=n.record;if(i.type!=="student-results")throw new Error("");return{studentName:i.studentName,topic:i.topic,difficulty:i.difficulty,responses:i.responses,overallScore:i.overallScore,completedAt:i.completedAt,quizBinId:i.quizBinId,quizContent:i.quizContent,metadata:i.metadata,diagnosticReport:i.diagnosticReport}}async function Tk(t,e){const l={type:"student-results",...{...await pv(t),diagnosticReport:{...e,generatedAt:new Date().toISOString(),resultsBinId:t},updatedAt:new Date().toISOString()}},u=await(await fetch(`https://api.jsonbin.io/v3/b/${t}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":Hs},body:JSON.stringify(l)})).json();if(!u||!u.metadata)throw new Error("")}async function gv(t){const e={type:"conversation-practice",practice:t.practice,metadata:t.metadata,createdAt:new Date().toISOString()},i=await(await fetch(gl,{method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":Hs,"X-Bin-Private":"false"},body:JSON.stringify(e)})).json();if(!i||!i.metadata||!i.metadata.id)throw new Error("");return i.metadata.id}async function jk(t){const n=await(await fetch(`https://api.jsonbin.io/v3/b/${t}/latest`,{})).json();if(!n||!n.record)throw new Error("");return n.record}const kk=({feedback:t,onContinueLearning:e,onRetakeQuiz:n,showActions:i=!0})=>{const l=m=>m>=80?"text-green-600 bg-green-100":m>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",o=m=>m>=80?"border-green-200":m>=60?"border-yellow-200":"border-red-200",u=m=>{switch(m){case"advanced":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25s4.544.16 6.75.471v1.515M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228V2.721A48.133 48.133 0 0 0 12 2.25c-2.291 0-4.544.16-6.75.471v1.515M7.73 9.728l3.75.814.97 4.286c.078.348.14.699.185 1.053m8.272-6.842-3.75.814-.97 4.286a24.216 24.216 0 0 1-.185 1.053M12 19.5a2.25 2.25 0 0 1-2.25-2.25V14.25m4.5 5.25a2.25 2.25 0 0 1 2.25-2.25V14.25"})});case"intermediate":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-yellow-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443a55.381 55.381 0 0 1 5.25 2.882V15"})})}},f=m=>{switch(m){case"advanced":return"";case"intermediate":return"";default:return""}},g=m=>{switch(m){case"advanced":return"";case"intermediate":return"";default:return""}};return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl shadow-lg",children:[s.jsxs("div",{className:`text-center mb-8 p-6 bg-white rounded-lg shadow-md border-2 ${o(t.overallScore)}`,children:[s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[u(t.overallLevel),s.jsx("div",{className:"ml-4",children:s.jsxs("div",{className:`text-4xl font-bold px-4 py-2 rounded-full ${l(t.overallScore)}`,children:[t.overallScore,""]})})]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:f(t.overallLevel)}),s.jsx("p",{className:"text-lg text-gray-600",children:g(t.overallLevel)})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-blue-500 mt-1 flex-shrink-0",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),s.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:t.encouragementMessage})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})})," "]}),t.keyStrengths.length>0?s.jsx("ul",{className:"space-y-3",children:t.keyStrengths.map((m,x)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-1.5",children:""}),s.jsx("span",{className:"text-gray-700",children:m})]},x))}):s.jsx("p",{className:"text-gray-500 italic",children:""})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-orange-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})," "]}),t.improvementAreas.length>0?s.jsx("ul",{className:"space-y-3",children:t.improvementAreas.map((m,x)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-500 mt-1.5",children:""}),s.jsx("span",{className:"text-gray-700",children:m})]},x))}):s.jsx("p",{className:"text-gray-500 italic",children:""})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-blue-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})})," "]}),t.nextSteps.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.nextSteps.map((m,x)=>s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:x+1}),s.jsx("span",{className:"text-gray-700",children:m})]},x))}):s.jsx("p",{className:"text-gray-500 italic",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-md p-6 mb-6 border border-purple-200",children:[s.jsxs("h3",{className:"text-xl font-bold text-purple-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})," "]}),t.studyTips.length>0?s.jsx("ul",{className:"space-y-2",children:t.studyTips.map((m,x)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-500 mt-1",children:""}),s.jsx("span",{className:"text-gray-700",children:m})]},x))}):s.jsx("p",{className:"text-gray-500 italic",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg shadow-lg p-6 text-center text-white mb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})})}),s.jsxs("p",{className:"text-xl font-medium italic",children:['"',t.motivationalQuote,'"']})]}),i&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs("button",{onClick:e,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-2 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12l-7.5 7.5M3 12h16.5"})}),""]}),s.jsxs("button",{onClick:n,className:"px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-2 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]})]})]})},Ek=({report:t,onExportReport:e,onSaveReport:n,showExportOptions:i=!0})=>{const[l,o]=_.useState("overview"),u=w=>w>=80?"text-green-600 bg-green-50 border-green-200":w>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",f=w=>{switch(w){case"high":return"text-red-600 bg-red-100 border-red-200";case"medium":return"text-yellow-600 bg-yellow-100 border-yellow-200";case"low":return"text-blue-600 bg-blue-100 border-blue-200"}},g=w=>{switch(w){case"outstanding":return"text-purple-600 bg-purple-100 border-purple-200";case"excellent":return"text-green-600 bg-green-100 border-green-200";case"good":return"text-blue-600 bg-blue-100 border-blue-200"}},m=w=>{switch(w){case"high":return"text-red-600 bg-red-50 border-l-red-500";case"medium":return"text-yellow-600 bg-yellow-50 border-l-yellow-500";case"low":return"text-green-600 bg-green-50 border-l-green-500"}},x=w=>({trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""})[w]||w,v=w=>new Date(w).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=[{key:"overview",label:"",icon:""},{key:"performance",label:"",icon:""},{key:"analysis",label:"",icon:""},{key:"recommendations",label:"",icon:""},{key:"teaching",label:"",icon:""}];return s.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),s.jsxs("p",{className:"text-gray-600",children:["",s.jsx("span",{className:"font-semibold",children:t.topic})]}),s.jsxs("p",{className:"text-gray-600",children:["",v(t.assessmentDate)]}),t.studentId&&s.jsxs("p",{className:"text-gray-600",children:["ID",s.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:t.studentId})]})]}),i&&s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),""]}),s.jsxs("button",{onClick:e,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-700 mb-1",children:""}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[t.overallPerformance.totalScore,""]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-purple-700 mb-1",children:""}),s.jsx("p",{className:"text-lg font-semibold text-purple-600 capitalize",children:t.overallPerformance.level})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-green-700 mb-1",children:""}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.learningAnalysis.strengths.length})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-700 mb-1",children:""}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.learningAnalysis.weaknesses.length})]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:s.jsx("div",{className:"flex overflow-x-auto",children:N.map(w=>s.jsxs("button",{onClick:()=>o(w.key),className:`flex-shrink-0 px-6 py-4 font-medium text-sm border-b-2 transition-colors ${l===w.key?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx("span",{className:"mr-2",children:w.icon}),w.label]},w.key))})}),s.jsxs("div",{className:"space-y-6",children:[l==="overview"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:""}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsxs("span",{className:"font-semibold",children:[t.overallPerformance.totalScore,"/100"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"font-semibold capitalize",children:t.overallPerformance.level})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsxs("span",{className:"font-semibold",children:[t.overallPerformance.timeSpent," "]})]}),t.overallPerformance.percentile&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsxs("span",{className:"font-semibold",children:[" ",100-t.overallPerformance.percentile,"%"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:""}),s.jsxs("div",{className:"space-y-3",children:[t.learningAnalysis.learningStyle&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"ml-2 font-semibold",children:t.learningAnalysis.learningStyle})]}),t.learningAnalysis.cognitivePattern&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"ml-2 font-semibold",children:t.learningAnalysis.cognitivePattern})]}),s.jsx("div",{className:"pt-2",children:s.jsx("p",{className:"text-sm text-gray-500",children:""})})]})]})]}),l==="performance"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:""}),s.jsx("div",{className:"space-y-6",children:t.performanceByType.map(w=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:x(w.questionType)}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${u(w.accuracy)}`,children:[w.accuracy,"% "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:""}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:w.totalQuestions})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:""}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.correctCount})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:""}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.averageTime?`${Math.round(w.averageTime/1e3)}`:"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("p",{className:"text-xs text-green-700 font-medium",children:""}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[w.difficultyBreakdown.easy.accuracy,"%"]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[w.difficultyBreakdown.easy.correct,"/",w.difficultyBreakdown.easy.total]})]}),s.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:""}),s.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[w.difficultyBreakdown.normal.accuracy,"%"]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[w.difficultyBreakdown.normal.correct,"/",w.difficultyBreakdown.normal.total]})]}),s.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("p",{className:"text-xs text-red-700 font-medium",children:""}),s.jsxs("p",{className:"text-lg font-bold text-red-600",children:[w.difficultyBreakdown.hard.accuracy,"%"]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[w.difficultyBreakdown.hard.correct,"/",w.difficultyBreakdown.hard.total]})]})]}),w.commonErrors.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:w.commonErrors.map((S,j)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 mt-1",children:""}),S]},j))})]})]},w.questionType))})]}),l==="analysis"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25s4.544.16 6.75.471v1.515M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228V2.721A48.133 48.133 0 0 0 12 2.25c-2.291 0-4.544.16-6.75.471v1.515M7.73 9.728l3.75.814.97 4.286c.078.348.14.699.185 1.053m8.272-6.842-3.75.814-.97 4.286a24.216 24.216 0 0 1-.185 1.053M12 19.5a2.25 2.25 0 0 1-2.25-2.25V14.25m4.5 5.25a2.25 2.25 0 0 1 2.25-2.25V14.25"})}),""]}),s.jsx("div",{className:"space-y-4",children:t.learningAnalysis.strengths.map((w,S)=>s.jsxs("div",{className:`p-4 rounded-lg border ${g(w.level)}`,children:[s.jsx("h4",{className:"font-semibold mb-2",children:w.area}),s.jsx("p",{className:"text-sm mb-3",children:w.description}),w.examples.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),s.jsx("ul",{className:"text-xs space-y-1",children:w.examples.map((j,k)=>s.jsxs("li",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-green-500 mt-1",children:""}),j]},k))})]}),w.leverageOpportunities.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),s.jsx("ul",{className:"text-xs space-y-1",children:w.leverageOpportunities.map((j,k)=>s.jsxs("li",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),j]},k))})]})]},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-red-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),""]}),s.jsx("div",{className:"space-y-4",children:t.learningAnalysis.weaknesses.map((w,S)=>s.jsxs("div",{className:`p-4 rounded-lg border ${f(w.severity)}`,children:[s.jsx("h4",{className:"font-semibold mb-2",children:w.area}),s.jsx("p",{className:"text-sm mb-3",children:w.description}),w.affectedTopics.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),s.jsx("div",{className:"flex flex-wrap gap-1",children:w.affectedTopics.map((j,k)=>s.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 rounded-full",children:j},k))})]}),w.recommendedActions.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:""}),s.jsx("ul",{className:"text-xs space-y-1",children:w.recommendedActions.map((j,k)=>s.jsxs("li",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-orange-500 mt-1",children:""}),j]},k))})]})]},S))})]})]}),l==="recommendations"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-700 mb-6",children:""}),s.jsx("div",{className:"space-y-6",children:t.personalizedRecommendations.map((w,S)=>s.jsxs("div",{className:`p-6 rounded-lg border-l-4 ${m(w.priority)}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-1",children:w.title}),s.jsxs("div",{className:"flex gap-2 text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded-full border ${w.category==="immediate"?"text-red-600 bg-red-100 border-red-200":w.category==="short-term"?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-blue-600 bg-blue-100 border-blue-200"}`,children:w.category==="immediate"?"":w.category==="short-term"?"":""}),s.jsx("span",{className:`px-2 py-1 rounded-full border ${w.priority==="high"?"text-red-600 bg-red-100 border-red-200":w.priority==="medium"?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-green-600 bg-green-100 border-green-200"}`,children:w.priority==="high"?"":w.priority==="medium"?"":""})]})]}),s.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:w.estimatedTime})]}),s.jsx("p",{className:"text-gray-700 mb-4",children:w.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("ol",{className:"text-sm space-y-1",children:w.actionSteps.map((j,k)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:k+1}),j]},k))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.expectedOutcome}),w.resources&&w.resources.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("ul",{className:"text-sm space-y-1",children:w.resources.map((j,k)=>s.jsxs("li",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-green-500 mt-1",children:""}),j]},k))})]})]})]})]},S))})]}),l==="teaching"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-red-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),""]}),s.jsx("ul",{className:"space-y-3",children:t.teachingRecommendations.immediateInterventions.map((w,S)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("span",{className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"!"}),s.jsx("span",{className:"text-gray-700",children:w})]},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-blue-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443a55.381 55.381 0 0 1 5.25 2.882V15"})}),""]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.teachingRecommendations.instructionalStrategies.map((w,S)=>s.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:S+1}),s.jsx("span",{className:"text-gray-700",children:w})]})},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-purple-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})}),""]}),s.jsx("ul",{className:"space-y-3",children:t.teachingRecommendations.differentiation.map((w,S)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[s.jsx("span",{className:"bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:""}),s.jsx("span",{className:"text-gray-700",children:w})]},S))})]}),t.teachingRecommendations.parentGuidance&&t.teachingRecommendations.parentGuidance.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),""]}),s.jsx("ul",{className:"space-y-3",children:t.teachingRecommendations.parentGuidance.map((w,S)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("span",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:""}),s.jsx("span",{className:"text-gray-700",children:w})]},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-indigo-700 mb-4 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})}),""]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),s.jsx("ul",{className:"text-sm space-y-1",children:t.progressTracking.keyMetrics.map((w,S)=>s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),w]},S))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),s.jsx("ul",{className:"text-sm space-y-1",children:t.progressTracking.checkpoints.map((w,S)=>s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),w]},S))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-sm text-gray-600",children:t.progressTracking.reassessmentSuggestion})]})]})]})]})]})]})},xm=({topic:t,quizData:e,studentId:n,apiKey:i,mode:l="both",onClose:o,onRetakeQuiz:u,onContinueLearning:f,initialResponses:g=[],existingReport:m,resultsBinId:x,onReportSaved:v})=>{const[N,w]=_.useState(null),[S,j]=_.useState(!1),[k,E]=_.useState(null),[L,D]=_.useState(l==="teacher"?"teacher":"student"),[O,H]=_.useState(null),I=_.useCallback(async B=>{if(!i){E(" API Key ");return}j(!0),E(null);try{const J={...await dk(B,i,{includeDetailedAnalysis:!0,includeComparativeData:!1,includeVisualCharts:!1,language:"zh-TW",reportFormat:"standard"}),generatedAt:new Date().toISOString(),resultsBinId:x};if(w(J),x)try{await Tk(x,J),console.log(""),v==null||v(J)}catch(z){console.warn(":",z)}}catch(W){console.error(":",W),E(W instanceof Error?W.message:"")}finally{j(!1)}},[i,x,v]);_.useEffect(()=>{if(m){w(m);const B=ac(t,n);B.responses=g,H(Go(B))}else if(t&&g.length>0){const B=ac(t,n);B.responses=g,H(Go(B)),I(B)}},[t,n,g,m,I]),_.useCallback(B=>{if(!O)return;const W={...O,responses:[...O.responses,B]};H(W)},[O]),_.useCallback(()=>{if(!O)return;const B=Go(O);H(B),I(B)},[O,I]);const R=_.useCallback(()=>{if(!N)return;const B={studentFeedback:N.studentFeedback,teacherReport:N.teacherReport,exportDate:new Date().toISOString()},W=JSON.stringify(B,null,2),G="data:application/json;charset=utf-8,"+encodeURIComponent(W),J=`learning_diagnostic_${t}_${new Date().toISOString().split("T")[0]}.json`,z=document.createElement("a");z.setAttribute("href",G),z.setAttribute("download",J),z.click()},[N,t]),q=_.useCallback(()=>{if(!N)return;const B=JSON.parse(localStorage.getItem("learningDiagnosticReports")||"[]");B.push({id:`report_${Date.now()}`,topic:t,studentId:n,createdAt:new Date().toISOString(),result:N}),localStorage.setItem("learningDiagnosticReports",JSON.stringify(B)),alert("")},[N,t,n]);return S?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dn,{}),s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:""}),s.jsx("p",{className:"text-gray-600",children:"AI ..."}),s.jsx("div",{className:"flex items-center justify-center space-x-1 mt-4",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}):k?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-6",children:k}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:()=>O&&I(O),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),o&&s.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})]})]})}):N?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:""}),l==="both"&&s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>D("student"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${L==="student"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""}),s.jsx("button",{onClick:()=>D("teacher"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${L==="teacher"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[L==="teacher"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:q,className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),""]}),s.jsxs("button",{onClick:R,className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]})]}),o&&s.jsx("button",{onClick:o,className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:""})]})]})})}),s.jsxs("div",{className:"py-8",children:[(l==="student"||l==="both"&&L==="student")&&s.jsx(kk,{feedback:N.studentFeedback,onContinueLearning:f,onRetakeQuiz:u,showActions:l!=="both"}),(l==="teacher"||l==="both"&&L==="teacher")&&s.jsx(Ek,{report:N.teacherReport,onExportReport:R,onSaveReport:q,showExportOptions:l!=="both"})]}),l==="both"&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsxs("button",{onClick:u,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]}),s.jsxs("button",{onClick:f,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center gap-2 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12l-7.5 7.5M3 12h16.5"})}),""]})]})})})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-6",children:""}),o&&s.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})]})})},Ak=({quizzes:t,topic:e,studentId:n,apiKey:i,onDiagnosticComplete:l,enableDiagnostic:o=!0})=>{const[u,f]=_.useState(Pt.Easy),[g,m]=_.useState(null),[x,v]=_.useState([]),[N,w]=_.useState(!1),[S,j]=_.useState(new Set),k=_.useRef(null);_.useEffect(()=>{if(o&&e&&!g){const J=ac(e,n);m(J),k.current=Date.now()}},[e,n,o,g]);const E=()=>{if(!t||!q)return 0;let J=0;return Object.values(q).forEach(z=>{Array.isArray(z)&&(J+=z.length)}),J},L=()=>{const J=u.toLowerCase();return x.filter(z=>z.difficulty===J).length},D=()=>{const J=u.toLowerCase();return x.filter(z=>z.difficulty===J)},O=_.useCallback((J,z,$,Y,P,Z)=>{if(!o||!g)return;const fe=k.current?Date.now()-k.current:void 0,Q={questionId:J,questionType:z,difficulty:$,userAnswer:Y,correctAnswer:P,isCorrect:Z,responseTime:fe,attempts:1};v(C=>C.find(ee=>ee.questionId===J)?C.map(ee=>ee.questionId===J?{...Q,attempts:(ee.attempts||0)+1}:ee):[...C,Q]),j(C=>new Set([...C,J])),k.current=Date.now()},[o,g]),H=_.useCallback(()=>{if(!g||!o)return;const J=Go(g);J.responses=x,m(J),w(!0),l&&l({session:J,responses:x})},[g,x,o,l]),I=_.useCallback(()=>{w(!1);const J=u.toLowerCase();if(v(z=>z.filter($=>$.difficulty!==J)),j(z=>{const $=new Set(z),Y=u.toLowerCase();return Array.from(z).forEach(P=>{P.startsWith(`${Y}-`)&&$.delete(P)}),$}),o){const z=ac(e,n);m(z),k.current=Date.now()}},[o,e,n,u]),R=_.useCallback(()=>{w(!1)},[]);if(N&&o){const J=u===Pt.Easy?"":u===Pt.Normal?"":"";return s.jsx(xm,{topic:`${e} (${J})`,quizData:t,studentId:n,apiKey:i,mode:"both",onRetakeQuiz:I,onContinueLearning:R,onClose:()=>w(!1),initialResponses:D()})}if(!t)return s.jsx(zn,{title:"",icon:s.jsx(sl,{}),children:""});const q=t[u],B=[{key:Pt.Easy,label:""},{key:Pt.Normal,label:""},{key:Pt.Hard,label:""}],W={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},G=()=>{const J=E(),z=L();return J>0?z/J*100:0};return s.jsxs(zn,{title:"",icon:s.jsx(sl,{className:"w-7 h-7"}),children:[o&&s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:""}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[": ",L()," / ",E()]}),s.jsxs("button",{onClick:H,disabled:L()===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),""]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${G()}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:" "})]}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-300 pb-3 mb-4",children:B.map(({key:J,label:z})=>s.jsx("button",{onClick:()=>f(J),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors
                ${u===J?"bg-sky-600 text-white shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:z},J))})}),q?Object.keys(W).map(J=>{if(!q.hasOwnProperty(J))return null;const z=q[J];return!z||z.length===0?null:s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-xl font-semibold text-slate-700 mb-3 border-b-2 border-sky-200 pb-1 flex items-center justify-between",children:[s.jsx("span",{children:W[J]}),o&&s.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:[": ",x.filter($=>$.questionType===J&&$.difficulty===u).length," / ",z.length]})]}),J==="trueFalse"&&z.map(($,Y)=>{const P=`${u}-tf-${Y}`;return s.jsx("div",{className:S.has(P)?"opacity-75":"",children:s.jsx(hm,{question:$,itemNumber:Y+1,onAnswer:o?(Z,fe)=>{O(P,"trueFalse",u,Z,$.isTrue,fe)}:void 0})},P)}),J==="multipleChoice"&&z.map(($,Y)=>{const P=`${u}-mc-${Y}`;return s.jsx("div",{className:S.has(P)?"opacity-75":"",children:s.jsx(pm,{question:$,itemNumber:Y+1,onAnswer:o?(Z,fe)=>{O(P,"multipleChoice",u,Z,$.correctAnswerIndex,fe)}:void 0})},P)}),J==="fillInTheBlanks"&&z.map(($,Y)=>{const P=`${u}-fb-${Y}`;return s.jsx("div",{className:S.has(P)?"opacity-75":"",children:s.jsx(mv,{question:$,itemNumber:Y+1,onAnswer:o?(Z,fe)=>{O(P,"fillInTheBlanks",u,Z,$.correctAnswer,fe)}:void 0})},P)}),J==="sentenceScramble"&&z.map(($,Y)=>{const P=`${u}-ss-${Y}`;return s.jsx("div",{className:S.has(P)?"opacity-75":"",children:s.jsx(hv,{question:$,itemNumber:Y+1,onAnswer:o?(Z,fe)=>{O(P,"sentenceScramble",u,Z,$.originalSentence,fe)}:void 0})},P)}),J==="memoryCardGame"&&z.map(($,Y)=>{const P=`${u}-mcg-${Y}`;return s.jsx("div",{className:S.has(P)?"opacity-75":"",children:s.jsx(gm,{question:$,itemNumber:Y+1,onAnswer:o?(Z,fe)=>{O(P,"memoryCardGame",u,Z,$.pairs,fe)}:void 0})},P)})]},`${u}-${J}`)}):s.jsx("p",{children:""}),o&&L()>0&&s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:""}),s.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:[" ",L()," AI "]})]})]})})]})},_k=({dialogue:t})=>{const[e,n]=_.useState(null),[i,l]=_.useState(null),[o,u]=_.useState(!1),[f,g]=_.useState(""),[m,x]=_.useState(null),[v,N]=_.useState(!1),[w,S]=_.useState({tts:!0,sr:!0}),j=_.useRef(null),k=_.useRef(null);_.useEffect(()=>{const I="speechSynthesis"in window,R="SpeechRecognition"in window||"webkitSpeechRecognition"in window;if(S({tts:I,sr:R}),R){const q=window.SpeechRecognition||window.webkitSpeechRecognition;j.current=new q,j.current.continuous=!1,j.current.interimResults=!1,j.current.lang="en-US",j.current.onresult=B=>{const W=B.results[0][0].transcript;g(W),H(W)},j.current.onerror=B=>{console.error("Speech recognition error:",B.error),x({type:"error",message:`: ${B.error==="no-speech"?"":B.error==="audio-capture"?"":B.error==="not-allowed"?"":""}`}),u(!1)},j.current.onend=()=>{u(!1)}}return()=>{window.speechSynthesis&&window.speechSynthesis.speaking&&window.speechSynthesis.cancel()}},[]);const E=(I,R)=>{if(!w.tts||!I)return;window.speechSynthesis.speaking&&window.speechSynthesis.cancel();const q=new SpeechSynthesisUtterance(I);q.lang="en-US";const B=window.speechSynthesis.getVoices(),W=B.find(G=>G.lang.startsWith("en")&&G.name.includes("Google")&&G.localService)||B.find(G=>G.lang.startsWith("en")&&G.localService)||B.find(G=>G.lang.startsWith("en"));W&&(q.voice=W),q.onstart=()=>{N(!0),n(R)},q.onend=()=>{N(!1),n(null)},q.onerror=G=>{console.error("Speech synthesis error:",G),N(!1),n(null),x({type:"error",message:""})},k.current=q,window.speechSynthesis.speak(q)},L=I=>{if(!(!w.sr||!j.current||o)){l(I),g(""),x(null),u(!0);try{j.current.start()}catch(R){console.error("Error starting recognition: ",R),u(!1),x({type:"error",message:""})}}},D=()=>{j.current&&o&&(j.current.stop(),u(!1))},O=I=>I.toLowerCase().replace(/[.,!?;:"']/g,"").trim(),H=I=>{if(i===null)return;const R=t[i].line;O(I)===O(R)?x({type:"success",message:`: "${I}"`}):x({type:"error",message:`: "${I}": "${R}"`})};return!t||t.length===0?s.jsx(zn,{title:"",icon:s.jsx(Hf,{className:"w-7 h-7"}),children:s.jsx("p",{className:"text-slate-600",children:""})}):s.jsxs(zn,{title:"",icon:s.jsx(Hf,{className:"w-7 h-7"}),children:[!w.tts&&s.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md",children:" (TTS)"}),!w.sr&&s.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded-md mt-2",children:" (SR) Chrome  Edge"}),s.jsx("div",{className:"space-y-4",children:t.map((I,R)=>s.jsxs("div",{className:`p-3 rounded-lg ${I.speaker==="Speaker A"?"bg-sky-50":"bg-indigo-50"} border ${I.speaker==="Speaker A"?"border-sky-200":"border-indigo-200"}`,children:[s.jsxs("p",{className:"font-semibold text-sm mb-1 ${item.speaker === 'Speaker A' ? 'text-sky-700' : 'text-indigo-700'}",children:[I.speaker,":"]}),s.jsx("p",{className:"text-slate-800 mb-2",children:I.line}),s.jsxs("div",{className:"flex items-center space-x-2",children:[w.tts&&s.jsx("button",{onClick:()=>E(I.line,R),disabled:v&&e!==R,className:`p-1.5 rounded-full hover:bg-slate-200 transition-colors disabled:opacity-50 ${v&&e===R?"text-sky-500 animate-pulse":"text-slate-600"}`,"aria-label":` ${I.speaker} `,children:s.jsx(hk,{className:"w-5 h-5"})}),w.sr&&(o&&i===R?s.jsx("button",{onClick:D,className:"p-1.5 rounded-full text-red-600 hover:bg-red-100 transition-colors","aria-label":"",children:s.jsx(gk,{className:"w-5 h-5"})}):s.jsx("button",{onClick:()=>L(R),disabled:o||v,className:"p-1.5 rounded-full text-slate-600 hover:bg-slate-200 transition-colors disabled:opacity-50","aria-label":` ${I.speaker} `,children:s.jsx(pk,{className:"w-5 h-5"})}))]}),i===R&&f&&s.jsxs("p",{className:"mt-2 text-sm text-slate-600 italic",children:[': "',f,'"']}),i===R&&m&&s.jsxs("div",{className:`mt-2 p-2 rounded-md text-sm flex items-start ${m.type==="success"?"bg-green-100 text-green-700":m.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:[m.type==="success"&&s.jsx(ri,{className:"w-5 h-5 mr-2 flex-shrink-0"}),m.type==="error"&&s.jsx(Ir,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{children:m.message})]})]},R))}),o&&s.jsx("p",{className:"mt-4 text-center text-sky-600 font-medium animate-pulse",children:"..."})]})},xv=({content:t,apiKey:e,vocabularyLevel:n,isStudentMode:i=!1})=>{const[l,o]=_.useState("sentence"),[u,f]=_.useState({}),[g,m]=_.useState({}),[x,v]=_.useState({}),N=_.useCallback((k,E)=>{f(L=>({...L,[k]:E}))},[]),w=_.useCallback(async(k,E)=>{if(!e){alert(" API Key  AI ");return}const L=u[k.id];if(!(L!=null&&L.trim())){alert("");return}v(D=>({...D,[k.id]:!0}));try{const D=await tk(L,E,k,e,n);m(O=>({...O,[k.id]:D}))}catch(D){console.error("AI :",D),alert("AI  API Key ")}finally{v(D=>({...D,[k.id]:!1}))}},[e,u,n]),S=()=>s.jsx("div",{className:"space-y-6",children:t.sentencePractice.map((k,E)=>{var L;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-blue-200",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:[" ",E+1,s.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${k.difficulty==="easy"?"bg-green-100 text-green-700":k.difficulty==="normal"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:k.difficulty==="easy"?"":k.difficulty==="normal"?"":""})]}),s.jsx("p",{className:"text-gray-700 mb-3",children:k.instruction}),k.keywords.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k.keywords.map((D,O)=>s.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:D},O))})]}),k.exampleSentence&&s.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),s.jsx("p",{className:"text-gray-700 italic",children:k.exampleSentence})]}),k.hints&&k.hints.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:k.hints.map((D,O)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),D]},O))})]})]})}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("textarea",{value:u[k.id]||"",onChange:D=>N(k.id,D.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"..."}),s.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[": ",(u[k.id]||"").length]}),e&&s.jsx("button",{onClick:()=>w(k,"sentence"),disabled:!((L=u[k.id])!=null&&L.trim())||x[k.id],className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x[k.id]?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),"AI ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})," AI "]})})]})]}),g[k.id]&&s.jsx(fy,{feedback:g[k.id]})]},k.id)})}),j=()=>s.jsx("div",{className:"space-y-6",children:t.writingPractice.map((k,E)=>{var L;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-purple-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:[k.title,s.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${k.difficulty==="easy"?"bg-green-100 text-green-700":k.difficulty==="normal"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:k.difficulty==="easy"?"":k.difficulty==="normal"?"":""})]}),s.jsx("p",{className:"text-gray-700 mb-3",children:k.instruction}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:""}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:k.structure.map((D,O)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-500 mt-1",children:""}),D]},O))})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2",children:[": ",k.minLength," - ",k.maxLength," "]}),k.keywords&&k.keywords.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),s.jsx("div",{className:"flex flex-wrap gap-1",children:k.keywords.map((D,O)=>s.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs",children:D},O))})]})]})]}),k.exampleOutline&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:""}),s.jsx("p",{className:"text-gray-700 text-sm",children:k.exampleOutline})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("textarea",{value:u[k.id]||"",onChange:D=>N(k.id,D.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:8,placeholder:"..."}),s.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:[s.jsxs("span",{children:[": ",(u[k.id]||"").length]}),s.jsx("span",{className:"ml-4",children:(u[k.id]||"").length<k.minLength?` ${k.minLength-(u[k.id]||"").length} `:(u[k.id]||"").length>k.maxLength?` ${(u[k.id]||"").length-k.maxLength} `:""})]}),e&&s.jsx("button",{onClick:()=>w(k,"writing"),disabled:!((L=u[k.id])!=null&&L.trim())||x[k.id],className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x[k.id]?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),"AI ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})," AI "]})})]})]}),g[k.id]&&s.jsx(fy,{feedback:g[k.id]})]},k.id)})});return s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mt-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:" AI "}),s.jsx("p",{className:"text-gray-600 text-sm",children:t.instructions})]})]}),!i&&s.jsxs("div",{className:"text-sm text-gray-500 bg-white px-3 py-2 rounded-lg border",children:[s.jsxs("div",{children:[": ",t.sentencePractice.length," "]}),s.jsxs("div",{children:[": ",t.writingPractice.length," "]})]})]}),s.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[s.jsxs("button",{onClick:()=>o("sentence"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${l==="sentence"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[" (",t.sentencePractice.length,")"]}),s.jsxs("button",{onClick:()=>o("writing"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${l==="writing"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[" (",t.writingPractice.length,")"]})]}),l==="sentence"?S():j()]})},fy=({feedback:t})=>s.jsxs("div",{className:"mt-4 border-t pt-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4",children:[s.jsxs("h5",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-green-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.847a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.847.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),"AI ",s.jsxs("div",{className:`ml-2 px-3 py-1 rounded-full text-sm font-bold ${t.score>=85?"bg-green-100 text-green-800":t.score>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.score," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.strengths.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"font-medium text-green-700 mb-2",children:" "}),s.jsx("ul",{className:"space-y-1",children:t.strengths.map((e,n)=>s.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-1",children:""}),e]},n))})]}),t.improvements.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"font-medium text-orange-700 mb-2",children:" "}),s.jsx("ul",{className:"space-y-1",children:t.improvements.map((e,n)=>s.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-500 mt-1",children:""}),e]},n))})]})]}),t.grammarCorrections&&t.grammarCorrections.length>0&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx("h6",{className:"font-medium text-yellow-800 mb-2",children:" "}),t.grammarCorrections.map((e,n)=>s.jsxs("div",{className:"mb-2 last:mb-0",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-red-600 line-through",children:e.original}),s.jsx("span",{className:"mx-2",children:""}),s.jsx("span",{className:"text-green-600 font-medium",children:e.corrected})]}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:e.explanation})]},n))]}),t.vocabularyTips&&t.vocabularyTips.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h6",{className:"font-medium text-blue-700 mb-2",children:" "}),s.jsx("ul",{className:"space-y-1",children:t.vocabularyTips.map((e,n)=>s.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),e]},n))})]}),t.structureFeedback&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h6",{className:"font-medium text-purple-700 mb-2",children:" "}),s.jsx("p",{className:"text-sm text-gray-700",children:t.structureFeedback})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("h6",{className:"font-medium text-gray-800 mb-2",children:" "}),s.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:t.overallComment})]})]}),Mk=t=>`
    <div class="tabs">
      <button class="tab-btn active" data-tab-target="easy-quiz-content" data-difficulty="easy"></button>
      <button class="tab-btn" data-tab-target="normal-quiz-content" data-difficulty="normal"></button>
      <button class="tab-btn" data-tab-target="hard-quiz-content" data-difficulty="hard"></button>
    </div>
    <div id="easy-quiz-content" class="tab-content active">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="easy"></div>
    </div>
    <div id="normal-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="normal"></div>
    </div>
    <div id="hard-quiz-content" class="tab-content">
      <!-- Content rendered by JS -->
      <div class="quiz-items-container" data-difficulty="hard"></div>
    </div>
    <script type="application/json" id="quizDataStore">
      ${t}
    <\/script>
  `,Rk=(t,e)=>{const n=t.learningObjectives&&t.learningObjectives.length>0?t.learningObjectives.map(S=>`
        <div class="objective-item" style="margin-bottom:20px; padding:16px; background:#f0fdf4; border-left:4px solid #10b981; border-radius:6px;">
          <h3 style="color:#059669; margin-bottom:8px; font-size:1.1em; font-weight:600;">${S.objective}</h3>
          <p style="color:#047857; margin-bottom:8px; line-height:1.6;">${S.description}</p>
          ${S.teachingExample?`
            <div style="background:#ecfdf5; border:1px solid #a7f3d0; padding:12px; border-radius:4px; margin-top:8px;">
              <strong style="color:#065f46; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#047857; font-size:0.9em;">${S.teachingExample}</span>
            </div>`:""}
        </div>`).join(""):"<p></p>",i=t.contentBreakdown&&t.contentBreakdown.length>0?t.contentBreakdown.map(S=>`
        <div class="breakdown-item" style="margin-bottom:24px; padding-bottom:20px; border-bottom:1px solid #e2e8f0;">
          <h3 style="color:#0369a1; margin-bottom:8px;">${S.topic}</h3>
          <p style="margin-bottom:12px; color:#475569;">${S.details}</p>
          
          ${S.coreConcept?`
            <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#1e40af; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#1e3a8a; font-size:0.9em;">${S.coreConcept}</span>
            </div>`:""}
          
          ${S.teachingSentences&&S.teachingSentences.length>0?`
            <div style="background:#eef2ff; border-left:4px solid #6366f1; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#4338ca; font-size:0.85em; display:block; margin-bottom:8px;"></strong>
              <div style="line-height:1.6;">
                ${S.teachingSentences.map((j,k)=>`
                  <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                    <span style="color:#6366f1; font-family:monospace;">${k+1}.</span> ${j}
                  </div>
                `).join("")}
              </div>
            </div>`:""}
          
          ${S.teachingTips?`
            <div style="background:#faf5ff; border-left:4px solid #8b5cf6; padding:12px; border-radius:4px; margin-bottom:12px;">
              <strong style="color:#7c3aed; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#6b21a8; font-size:0.9em;">${S.teachingTips}</span>
            </div>`:""}
          
          ${S.teachingExample?`
            <div style="background:#f0f9ff; border-left:4px solid #0ea5e9; padding:12px; border-radius:4px;">
              <strong style="color:#0284c7; font-size:0.85em; display:block; margin-bottom:4px;"></strong>
              <span style="color:#0c4a6e; font-size:0.9em;">${S.teachingExample}</span>
            </div>`:""}
        </div>`).join(""):"<p></p>",l=t.confusingPoints&&t.confusingPoints.length>0?t.confusingPoints.map(S=>`
        <div class="confusing-point-item" style="border:1px solid #e2e8f0; border-radius:8px; padding:20px; margin-bottom:24px; background:#fefefe;">
          <h3 style="color:#b91c1c; margin-bottom:12px; font-size:1.3em; font-weight:600;">${S.point}</h3>
          <p style="margin-bottom:16px; color:#475569; line-height:1.6;">${S.clarification}</p>
          
          ${S.errorType?`
          <div style="background:#fff7ed; border-left:4px solid #f97316; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#c2410c; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#9a3412; font-size:0.9em;">${S.errorType}</span>
          </div>`:""}
          
          ${S.commonErrors&&S.commonErrors.length>0?`
          <div style="background:#fef2f2; border-left:4px solid #ef4444; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            <div style="margin-left:0;">
              ${S.commonErrors.map((j,k)=>`
                <div style="color:#991b1b; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#dc2626; font-family:monospace; margin-right:6px;">${k+1}.</span>${j}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${S.correctVsWrong&&S.correctVsWrong.length>0?`
          <div style="background:#fefce8; border-left:4px solid #eab308; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#a16207; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            ${S.correctVsWrong.map((j,k)=>`
              <div style="border:1px solid #fde047; background:#fffbeb; padding:12px; margin-bottom:8px; border-radius:6px;">
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:8px;">
                  <div style="background:#f0fdf4; padding:10px; border-radius:4px; border:1px solid #bbf7d0;">
                    <strong style="color:#166534; font-size:0.8em; display:block; margin-bottom:4px;"> </strong>
                    <span style="color:#15803d; font-size:0.9em;">${j.correct}</span>
                  </div>
                  <div style="background:#fef2f2; padding:10px; border-radius:4px; border:1px solid #fecaca;">
                    <strong style="color:#dc2626; font-size:0.8em; display:block; margin-bottom:4px;"> </strong>
                    <span style="color:#991b1b; font-size:0.9em;">${j.wrong}</span>
                  </div>
                </div>
                <div style="background:#eff6ff; padding:10px; border-radius:4px; border:1px solid #bfdbfe;">
                  <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
                  <span style="color:#1e40af; font-size:0.9em;">${j.explanation}</span>
                </div>
              </div>
            `).join("")}
          </div>`:""}
          
          ${S.preventionStrategy?`
          <div style="background:#eff6ff; border-left:4px solid #3b82f6; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#1d4ed8; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#1e40af; font-size:0.9em;">${S.preventionStrategy}</span>
          </div>`:""}
          
          ${S.correctionMethod?`
          <div style="background:#faf5ff; border-left:4px solid #a855f7; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#7c3aed; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#6b21a8; font-size:0.9em;">${S.correctionMethod}</span>
          </div>`:""}
          
          ${S.practiceActivities&&S.practiceActivities.length>0?`
          <div style="background:#f0f9ff; border-left:4px solid #6366f1; padding:12px; margin-bottom:12px; border-radius:4px;">
            <strong style="color:#4338ca; font-size:0.8em; display:block; margin-bottom:8px;"></strong>
            <div style="margin-left:0;">
              ${S.practiceActivities.map((j,k)=>`
                <div style="color:#312e81; font-size:0.9em; margin-bottom:4px;">
                  <span style="color:#4338ca; font-family:monospace; margin-right:6px;">${k+1}.</span>${j}
                </div>
              `).join("")}
            </div>
          </div>`:""}
          
          ${S.teachingExample?`
          <div style="background:#f9fafb; border-left:4px solid #6b7280; padding:12px; border-radius:4px;">
            <strong style="color:#374151; font-size:0.8em; display:block; margin-bottom:4px;"></strong>
            <span style="color:#111827; font-size:0.9em;">${S.teachingExample}</span>
          </div>`:""}
        </div>`).join(""):"<p></p>",o=t.classroomActivities&&t.classroomActivities.length>0?t.classroomActivities.map(S=>`
        <div class="activity-item" style="border:1px solid #e0e7ef; border-radius:6px; padding:16px; margin-bottom:16px; background:#f8fafc;">
          <h3 style="color:#2563eb; margin-bottom:8px; font-size:1.2em;">${S.title}</h3>
          <p style="margin-bottom:12px; color:#475569;">${S.description}</p>
          
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px;">
            ${S.objective?`
              <div>
                <strong style="color:#0f172a;"></strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${S.objective}</p>
              </div>`:""}
            ${S.timing?`
              <div>
                <strong style="color:#0f172a;"></strong>
                <p style="margin:4px 0 0 0; font-size:0.9em;">${S.timing}</p>
              </div>`:""}
            ${S.materials?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${S.materials}</p>
            </div>`:""}
            ${S.environment?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <p style="margin:4px 0 0 0; font-size:0.9em;">${S.environment}</p>
            </div>`:""}
          </div>
          
          ${S.steps&&S.steps.length>0?`
            <div style="margin-bottom:12px;">
              <strong style="color:#0f172a;"></strong>
              <ol style="margin:8px 0 0 20px; padding:0;">
                ${S.steps.map(j=>`<li style="margin-bottom:4px; font-size:0.9em;">${j}</li>`).join("")}
              </ol>
            </div>`:""}
          
          ${S.assessmentPoints&&S.assessmentPoints.length>0?`
            <div>
              <strong style="color:#0f172a;"></strong>
              <ul style="margin:8px 0 0 20px; padding:0;">
                ${S.assessmentPoints.map(j=>`<li style="margin-bottom:4px; font-size:0.9em;">${j}</li>`).join("")}
              </ul>
            </div>`:""}
        </div>
      `).join(""):"<p></p>",u=t.englishConversation&&t.englishConversation.length>0?t.englishConversation.map(S=>`
        <div class="dialogue-line ${S.speaker==="Speaker A"?"speakerA":"speakerB"}">
          <span class="speaker">${S.speaker}:</span> ${S.line}
        </div>`).join("")+"<p><small><em></em></small></p>":"<p></p>",f=t.learningLevels&&t.learningLevels.suggestedLevels&&t.learningLevels.suggestedLevels.length>0?t.learningLevels.suggestedLevels.sort((S,j)=>S.order-j.order).map(S=>`
          <div class="level-item" style="border:1px solid #e0e7ef; border-radius:8px; padding:16px; margin-bottom:12px; background:${S.id===t.learningLevels.defaultLevelId?"#eff8ff":"#f8fafc"}; border-left: 4px solid ${S.id===t.learningLevels.defaultLevelId?"#0ea5e9":"#e2e8f0"};">
            <div style="display:flex; align-items:center; margin-bottom:8px;">
              <div style="width:32px; height:32px; border-radius:50%; background-color:${S.id===t.learningLevels.defaultLevelId?"#0ea5e9":"#94a3b8"}; color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; margin-right:12px;">${S.order}</div>
              <h3 style="margin:0; color:${S.id===t.learningLevels.defaultLevelId?"#0c4a6e":"#334155"};">${S.name}</h3>
              ${S.id===t.learningLevels.defaultLevelId?'<span style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:4px; font-size:0.8em; margin-left:8px;"></span>':""}
            </div>
            <p style="margin:0; color:#64748b; line-height:1.5;">${S.description}</p>
          </div>
        `).join(""):"<p></p>",g=JSON.stringify(t.onlineInteractiveQuiz||{}),m=Mk(g),x=`
    <!DOCTYPE html>
    <html lang="zh-Hant">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${e}</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 20px; line-height: 1.6; background-color: #f4f7f9; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #3498db; margin-top: 30px; border-bottom: 1px solid #eee; padding-bottom: 8px;}
        h3 { color: #2980b9; margin-top: 20px; }
        h4 { color: #16a085; margin-top:15px; font-size: 1.1em; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px dashed #bdc3c7;}
        ul { list-style-type: disc; padding-left: 20px; }
        li { margin-bottom: 8px; }
        p { margin-bottom: 10px; }
        .section { margin-bottom: 25px; }
        .breakdown-item, .confusing-point-item { border-left: 3px solid #3498db; padding-left: 15px; margin-bottom: 15px; background-color: #fdfdfe; padding:10px; border-radius: 0 4px 4px 0;}
        .dialogue-line { margin-bottom: 8px; padding: 10px; border-radius: 5px; }
        .dialogue-line .speaker { font-weight: bold; color: #0056b3; }
        .dialogue-line.speakerA { background-color: #e7f3ff; border-left: 3px solid #79a6dc; }
        .dialogue-line.speakerB { background-color: #e6fff0; border-left: 3px solid #68d19a; }
        
        .tabs { display: flex; margin-bottom: 0; border-bottom: 1px solid #ccc;}
        .tabs button { padding: 10px 15px; cursor: pointer; border: 1px solid #ccc; background-color: #f0f0f0; margin-right: 0px; border-bottom: none; border-radius: 5px 5px 0 0; font-size: 1em;}
        .tabs button.active { background-color: #fff; border-bottom: 1px solid #fff; color: #3498db; font-weight: bold; position:relative; top:1px;}
        .tab-content { display: none; padding: 15px; border: 1px solid #ccc; border-top: none; background-color:#fff; border-radius: 0 0 5px 5px;}
        .tab-content.active { display: block; }

        .quiz-item { border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 15px; border-radius: 5px; background: #f9f9f9; }
        .quiz-question { font-weight: 500; margin-bottom: 8px; color: #333; }
        .quiz-item p:first-child { margin-top: 0; }
        .quiz-feedback { padding: 8px; margin-top: 10px; border-radius: 4px; font-size: 0.9em; }
        .quiz-feedback.correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .quiz-feedback.incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .quiz-feedback em { color: #555;}
        
        .tf-options button { margin-right: 10px; padding: 8px 12px; border-radius: 4px; border: 1px solid #ccc; cursor: pointer; }
        .tf-options button.selected.correct, .tf-options button.correct { background-color: #28a745; color: white; border-color: #28a745; }
        .tf-options button.selected.incorrect, .tf-options button.incorrect { background-color: #dc3545; color: white; border-color: #dc3545; }
        .tf-options button:disabled { opacity: 0.7; cursor: not-allowed; }

        .mc-options label { display: block; margin-bottom: 8px; padding: 8px; border: 1px solid #eee; border-radius: 4px; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; }
        .mc-options label:hover { background-color: #f0f8ff; }
        .mc-options input[type="radio"] { margin-right: 8px; }
        .mc-options label.selected { background-color: #e0f0ff; border-color: #79a6dc; }
        .mc-options label.correct-answer { background-color: #d4edda !important; border-color: #c3e6cb !important; color: #155724;}
        .mc-options label.incorrect-selection { background-color: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24;}
        .mc-options label.disabled { cursor: not-allowed; opacity: 0.7; }


        .fb-input { padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin: 0 5px; min-width:100px; }
        .fb-input:disabled { background-color: #eee; }

        .ss-word-bank, .ss-constructed-sentence-area { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; border: 1px dashed #ccc; border-radius: 4px; min-height: 40px; margin-bottom: 10px; }
        .ss-word-bank { background-color: #f0f8ff; }
        .ss-constructed-sentence-area { background-color: #e6fff0; }
        .ss-word-bank button, .ss-constructed-sentence-area button { padding: 5px 10px; background-color: #add8e6; border: none; border-radius: 4px; cursor: pointer; font-size: 0.95em;}
        .ss-word-bank button:hover, .ss-constructed-sentence-area button:hover { background-color: #90cce0; }
        .ss-constructed-sentence-area button { background-color: #a2d2ff; }


        .quiz-item button.check-answer-btn, .quiz-item button.ss-action-btn {
          background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; margin-top: 10px; transition: background-color 0.2s;
        }
        .quiz-item button.check-answer-btn:hover, .quiz-item button.ss-action-btn:hover { background-color: #2980b9; }
        .quiz-item button.ss-action-btn.ss-clear { background-color: #e74c3c; margin-left: 5px;}
        .quiz-item button.ss-action-btn.ss-clear:hover { background-color: #c0392b; }
        .quiz-item button:disabled, .quiz-item button.check-answer-btn:disabled, .quiz-item button.ss-action-btn:disabled { background-color: #bdc3c7; cursor: not-allowed; opacity: 0.7;}
        
        footer { text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd; font-size: 0.9em; color: #777; }
      </style>
    </head>
    <body>
      <div class="container">
        <h1>${e}</h1>

        <div class="section">
          <h2></h2>
          ${f}
        </div>

        <div class="section">
          <h2></h2>
          ${n}
        </div>

        <div class="section">
          <h2></h2>
          ${i}
        </div>

        <div class="section">
          <h2></h2>
          ${l}
        </div>

        <div class="section">
          <h2></h2>
          ${o}
        </div>
        
        <div class="section">
          <h2></h2>
          ${u}
        </div>

        <div class="section">
          <h2></h2>
          ${m}
        </div>
        
        <footer>
          <p> AI ${new Date().toLocaleString()}</p>
        </footer>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const quizData = JSON.parse(document.getElementById('quizDataStore').textContent || '{}');
          let sentenceScrambleStates = {}; // To store dynamic state for sentence scramble

          const normalizeText = (str) => {
            if (typeof str !== 'string') return '';
            // Corrected regex for multiple spaces: s+ instead of \\s+
            return str.toLowerCase().replace(/[.,!?;:'"'""]/g, '').replace(/s+/g, ' ').trim();
          };

          const renderQuizzesForDifficulty = (difficulty) => {
            const container = document.querySelector(\`.quiz-items-container[data-difficulty="\${difficulty}"]\`);
            if (!container) return;
            container.innerHTML = ''; 
            sentenceScrambleStates[difficulty] = {}; // Reset states for this difficulty

            const difficultyData = quizData[difficulty];
            if (!difficultyData || Object.keys(difficultyData).every(type => !difficultyData[type] || difficultyData[type].length === 0)) {
              container.innerHTML = '<p></p>';
              return;
            }

            let itemGlobalIndex = 0;
            const typeLabels = { trueFalse: "", multipleChoice: "", fillInTheBlanks: "", sentenceScramble: ""};

            const createHtml = (type, q, index) => {
              const questionId = \`\${difficulty}-\${type}-\${index}\`;
              let itemHtml = \`<div class="quiz-item \${type}-item" id="item-\${questionId}">\`;
              
              if (type === 'trueFalse') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.statement}</p>\`;
                itemHtml += \`<div class="tf-options">\`;
                itemHtml += \`<button data-value="true" data-question-id="\${questionId}"> (True)</button>\`;
                itemHtml += \`<button data-value="false" data-question-id="\${questionId}"> (False)</button>\`;
                itemHtml += \`</div>\`;
              } else if (type === 'multipleChoice') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.question}</p>\`;
                itemHtml += \`<div class="mc-options">\`;
                q.options.forEach((opt, optIndex) => {
                  itemHtml += \`<label><input type="radio" name="mc-\${questionId}" value="\${optIndex}"> \${String.fromCharCode(65 + optIndex)}. \${opt}</label>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<button class="check-answer-btn mc-check" data-question-id="\${questionId}"></button>\`;
              } else if (type === 'fillInTheBlanks') {
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. \${q.sentenceWithBlank.replace('____', '<input type="text" class="fb-input" id="fb-input-\${questionId}" placeholder="">')}</p>\`;
                itemHtml += \`<button class="check-answer-btn fb-check" data-question-id="\${questionId}"></button>\`;
              } else if (type === 'sentenceScramble') {
                sentenceScrambleStates[difficulty][questionId] = {
                    availableWords: q.scrambledWords.slice().sort(() => Math.random() - 0.5),
                    constructedWords: []
                };
                itemHtml += \`<p class="quiz-question">\${itemGlobalIndex + 1}. </p>\`;
                itemHtml += \`<p class="ss-instruction"></p>\`
                itemHtml += \`<div class="ss-word-bank" id="ss-bank-\${questionId}">\`;
                sentenceScrambleStates[difficulty][questionId].availableWords.forEach(word => {
                   itemHtml += \`<button class="ss-word" data-word="\${word}" data-question-id="\${questionId}" data-source="bank">\${word}</button>\`;
                });
                itemHtml += \`</div>\`;
                itemHtml += \`<p class="quiz-question"></p><div class="ss-constructed-sentence-area" id="ss-area-\${questionId}"></div>\`;
                itemHtml += \`<button class="check-answer-btn ss-check" data-question-id="\${questionId}"></button>\`;
                itemHtml += \`<button class="ss-action-btn ss-clear" data-question-id="\${questionId}"></button>\`;
              }
              itemHtml += \`<div class="quiz-feedback" id="feedback-\${questionId}"></div></div>\`;
              itemGlobalIndex++;
              return itemHtml;
            };
            
            const quizTypes = ['trueFalse', 'multipleChoice', 'fillInTheBlanks', 'sentenceScramble'];
            let hasContentForDifficulty = false;

            quizTypes.forEach(type => {
              if (difficultyData[type] && difficultyData[type].length > 0) {
                hasContentForDifficulty = true;
                const typeHeader = document.createElement('h4');
                typeHeader.textContent = typeLabels[type];
                container.appendChild(typeHeader);
                difficultyData[type].forEach((q, i) => {
                  const questionElement = document.createElement('div');
                  questionElement.innerHTML = createHtml(type, q, i);
                  container.appendChild(questionElement.firstChild);
                });
              }
            });
             if (!hasContentForDifficulty) {
                 container.innerHTML = '<p></p>';
            }
          };

          const tabButtons = document.querySelectorAll('.tabs .tab-btn');
          const tabContents = document.querySelectorAll('.tab-content');

          tabButtons.forEach(button => {
            button.addEventListener('click', () => {
              tabButtons.forEach(btn => btn.classList.remove('active'));
              tabContents.forEach(content => content.classList.remove('active'));

              button.classList.add('active');
              const targetContentId = button.getAttribute('data-tab-target');
              document.getElementById(targetContentId).classList.add('active');
              
              const difficulty = button.getAttribute('data-difficulty');
              renderQuizzesForDifficulty(difficulty);
            });
          });
          
          // Initial render for the default active tab
          renderQuizzesForDifficulty('easy');


          // Event delegation for quiz interactions
          document.querySelector('.container').addEventListener('click', (event) => {
            const target = event.target;
            // Ensure target is an HTMLElement before trying to access attributes or match selectors
            if (!(target instanceof HTMLElement)) return;

            const questionId = target.getAttribute('data-question-id');
            if (!questionId) return;

            const [difficulty, type, indexStr] = questionId.split('-');
            const index = parseInt(indexStr);
            const questionData = quizData[difficulty]?.[type]?.[index];
            const feedbackEl = document.getElementById(\`feedback-\${questionId}\`);

            if (!questionData || !feedbackEl) return;

            // True/False
            if (target.matches('.tf-options button')) {
              const selectedValue = target.getAttribute('data-value') === 'true';
              const isCorrect = selectedValue === questionData.isTrue;
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '' : \`\${questionData.isTrue ? ' (True)' : ' (False)'}\`;
              if (questionData.explanation) message += \` <em>\${questionData.explanation}</em>\`;
              feedbackEl.innerHTML = message;
              
              target.classList.add('selected', isCorrect ? 'correct' : 'incorrect');
              Array.from(target.parentElement.children).forEach(btn => btn.disabled = true);
            }

            // Multiple Choice Check
            else if (target.matches('.mc-check')) {
              const selectedRadio = document.querySelector(\`input[name="mc-\${questionId}"]:checked\`);
              if (!selectedRadio) {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '';
                return;
              }
              const selectedOptionIndex = parseInt(selectedRadio.value);
              const isCorrect = selectedOptionIndex === questionData.correctAnswerIndex;
              
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              let message = isCorrect ? '' : \`\${String.fromCharCode(65 + questionData.correctAnswerIndex)}. \${questionData.options[questionData.correctAnswerIndex]}\`;
              feedbackEl.innerHTML = message;

              // Visually mark options
              const optionLabels = document.querySelectorAll(\`#item-\${questionId} .mc-options label\`);
              optionLabels.forEach((label, idx) => {
                label.classList.add('disabled');
                const radioInLabel = label.querySelector('input');
                if (radioInLabel) radioInLabel.disabled = true;

                if (idx === questionData.correctAnswerIndex) {
                    label.classList.add('correct-answer');
                }
                if (idx === selectedOptionIndex && !isCorrect) {
                    label.classList.add('incorrect-selection');
                }
                 if (idx === selectedOptionIndex) {
                    label.classList.add('selected');
                }
              });
              target.disabled = true;
            }

            // Fill in the Blanks Check
            else if (target.matches('.fb-check')) {
              const inputEl = document.getElementById(\`fb-input-\${questionId}\`);
              // Add null check for inputEl
              if (!inputEl) {
                  console.error('Fill-in-the-blanks input element not found for ID:', \`fb-input-\${questionId}\`);
                  feedbackEl.className = 'quiz-feedback incorrect';
                  feedbackEl.textContent = '';
                  return;
              }
              const userAnswer = inputEl.value.trim();
              if (userAnswer === '') {
                feedbackEl.className = 'quiz-feedback incorrect';
                feedbackEl.textContent = '';
                return;
              }
              const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.correctAnswer);
              feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
              feedbackEl.textContent = isCorrect ? '' : \` "\${questionData.correctAnswer}"\`;
              inputEl.disabled = true;
              target.disabled = true;
            }
            
            // Sentence Scramble
            else if (target.matches('.ss-word') || target.matches('.ss-check') || target.matches('.ss-clear')) {
                const state = sentenceScrambleStates[difficulty][questionId];
                if (!state) return; // Should not happen if initialized correctly

                const bankEl = document.getElementById(\`ss-bank-\${questionId}\`);
                const areaEl = document.getElementById(\`ss-area-\${questionId}\`);
                
                if(!bankEl || !areaEl) return;


                const redrawScramble = () => {
                    bankEl.innerHTML = '';
                    state.availableWords.forEach(w => {
                        bankEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="bank">\${w}</button>\`;
                    });
                    areaEl.innerHTML = '';
                    state.constructedWords.forEach(w => {
                        areaEl.innerHTML += \`<button class="ss-word" data-word="\${w}" data-question-id="\${questionId}" data-source="area">\${w}</button>\`;
                    });
                };

                if (target.matches('.ss-word')) {
                    const word = target.getAttribute('data-word');
                    const source = target.getAttribute('data-source');
                    if (source === 'bank') {
                        state.constructedWords.push(word);
                        // Correctly remove only one instance of the word from availableWords
                        const wordIndexInBank = state.availableWords.indexOf(word);
                        if (wordIndexInBank > -1) {
                            state.availableWords.splice(wordIndexInBank, 1);
                        }
                    } else { // source === 'area'
                        state.availableWords.push(word);
                        // Correctly remove only one instance of the word from constructedWords
                        const wordIndexInArea = state.constructedWords.indexOf(word);
                        if (wordIndexInArea > -1) {
                            state.constructedWords.splice(wordIndexInArea, 1);
                        }
                    }
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                } else if (target.matches('.ss-check')) {
                    const userAnswer = state.constructedWords.join(' ').trim();
                    const isCorrect = normalizeText(userAnswer) === normalizeText(questionData.originalSentence);
                    feedbackEl.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'incorrect');
                    feedbackEl.textContent = isCorrect ? '' : \` "\${questionData.originalSentence}"\`;
                    target.disabled = true;
                    const clearButton = document.querySelector(\`#item-\${questionId} .ss-clear\`);
                    if(clearButton) clearButton.disabled = true;
                    
                    bankEl.querySelectorAll('button').forEach(b => b.disabled = true);
                    areaEl.querySelectorAll('button').forEach(b => b.disabled = true);

                } else if (target.matches('.ss-clear')) {
                    state.availableWords = questionData.scrambledWords.slice().sort(() => Math.random() - 0.5);
                    state.constructedWords = [];
                    redrawScramble();
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                }
            }

          });
        });
      <\/script>
    </body>
    </html>
  `,v=new Blob([x],{type:"text/html;charset=utf-8"}),N=URL.createObjectURL(v),w=document.createElement("a");w.href=N,w.download=`learning-plan-${e.replace(/\s+/g,"_")||"untitled"}.html`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(N)},ym="AES-GCM",Ik=256,Jf=12;async function yv(t,e){const n=new TextEncoder,i=await crypto.subtle.importKey("raw",n.encode(t),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},i,{name:ym,length:Ik},!1,["encrypt","decrypt"])}async function Dk(t,e="ai-page-gen-2024"){try{const i=new TextEncoder().encode(t),l=crypto.getRandomValues(new Uint8Array(16)),o=crypto.getRandomValues(new Uint8Array(Jf)),u=await yv(e,l),f=await crypto.subtle.encrypt({name:ym,iv:o},u,i),g=new Uint8Array(l.length+o.length+f.byteLength);return g.set(l,0),g.set(o,l.length),g.set(new Uint8Array(f),l.length+o.length),Pk(g)}catch(n){throw console.error(" API Key :",n),new Error("")}}async function Lk(t,e="ai-page-gen-2024"){try{const n=Ok(t),i=n.slice(0,16),l=n.slice(16,16+Jf),o=n.slice(16+Jf),u=await yv(e,i),f=await crypto.subtle.decrypt({name:ym,iv:l},u,o);return new TextDecoder().decode(f)}catch(n){throw console.error(" API Key :",n),new Error("")}}function Pk(t){const e=new Uint8Array(t);let n="";for(let i=0;i<e.byteLength;i++)n+=String.fromCharCode(e[i]);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ok(t){const e="=".repeat((4-t.length%4)%4),n=t.replace(/-/g,"+").replace(/_/g,"/")+e,i=atob(n),l=new Uint8Array(i.length);for(let o=0;o<i.length;o++)l[o]=i.charCodeAt(o);return l}function vv(){return typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.encrypt=="function"}async function my(t){if(!vv())return console.warn("Web Crypto API "),`apikey=${encodeURIComponent(t)}`;const e=await Dk(t);return`enckey=${encodeURIComponent(e)}`}async function bv(t){const e=t.get("enckey");if(e&&vv())try{return await Lk(decodeURIComponent(e))}catch(i){console.error(" API Key :",i)}const n=t.get("apikey");return n?decodeURIComponent(n):null}const Bk=({tabs:t,current:e,onChange:n,children:i})=>s.jsxs("div",{children:[s.jsx("div",{className:"flex border-b mb-4",children:t.map(l=>s.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium transition-colors focus:outline-none ${e===l.key?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-slate-500 hover:text-indigo-600"}`,onClick:()=>n(l.key),type:"button",children:l.label},l.key))}),s.jsx("div",{children:i[t.findIndex(l=>l.key===e)]})]});class Uk{async generateConversationPractice(e,n){const i=this.buildConversationPrompt(e),l=await ut(i,n);return{id:`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...l}}buildConversationPrompt(e){return`
Generate an English conversation practice exercise with the following specifications:

Topic: "${e.topic}"
Scenario: "${e.scenario}"
Difficulty Level: ${e.difficulty}
Number of Participants: ${e.participantCount}
Target Duration: ${e.duration} minutes
${e.focusAreas?`Focus Areas: ${e.focusAreas.join(", ")}`:""}
${e.culturalContext?`Cultural Context: ${e.culturalContext}`:""}

Please generate a comprehensive conversation practice in the following JSON structure (output ONLY the JSON, no explanation):

{
  "title": "Conversation title in English",
  "scenario": "Detailed scenario description",
  "description": "What students will learn from this practice",
  "difficulty": "${e.difficulty}",
  "duration": ${e.duration},
  "participants": ["Role 1", "Role 2"${e.participantCount===3?', "Role 3"':""}],
  "dialogue": [
    {
      "id": "turn_001",
      "speaker": "Role name",
      "text": "English dialogue text",
      "translation": "Chinese translation",
      "pronunciation": "Phonetic transcription for difficult words",
      "keyWords": ["key", "vocabulary", "words"],
      "difficulty": "easy|normal|hard",
      "practicePoint": "What to focus on in this turn",
      "expectedResponseHints": ["Hint 1 for student response", "Hint 2"]
    }
    // Generate at least 8-12 dialogue turns for ${e.difficulty} level
    // Easy: 8-10 turns, Normal: 10-14 turns, Hard: 12-16 turns
  ],
  "vocabulary": [
    {
      "word": "vocabulary word",
      "pronunciation": "/fnetk/",
      "meaning": "",
      "example": "Example sentence in English",
      "difficulty": "easy|normal|hard"
    }
    // Include at least 10-15 vocabulary items relevant to the conversation
  ],
  "practiceGoals": [
    "Learning objective 1",
    "Learning objective 2",
    "Learning objective 3"
    // At least 3-5 clear learning objectives
  ],
  "evaluationCriteria": {
    "pronunciation": 0.3,
    "grammar": 0.25,
    "fluency": 0.25,
    "appropriateness": 0.2
  },
  "culturalNotes": [
    "Cultural insight 1",
    "Cultural insight 2"
    // 2-4 cultural notes if relevant
  ],
  "commonMistakes": [
    "Common mistake 1 with correction",
    "Common mistake 2 with correction"
    // 3-5 common mistakes students might make
  ]
}

Requirements for dialogue generation:
1. Each dialogue turn should be natural and contextually appropriate
2. Include varied sentence structures appropriate for ${e.difficulty} level
3. Incorporate the vocabulary items naturally in the dialogue
4. Provide helpful hints for expected student responses
5. Progress the conversation logically toward a natural conclusion
6. Include appropriate greetings, transitions, and closings
7. For ${e.difficulty} level:
   - Easy: Simple present/past tense, basic vocabulary, short sentences
   - Normal: Mixed tenses, moderate vocabulary, compound sentences
   - Hard: Complex grammar, advanced vocabulary, sophisticated expressions

All text content should be natural English with accurate Chinese translations.
Focus on practical, real-world communication that students can apply.
`}async generateConversationFeedback(e,n,i,l){const o=`
Evaluate this English conversation practice response:

Context: ${i.practicePoint}
Expected Response Hints: ${i.expectedHints.join(", ")}
Difficulty Level: ${i.difficulty}

Original Prompt/Situation: "${e}"
Student Response: "${n}"

Please provide detailed feedback in the following JSON format (output ONLY JSON):

{
  "overallScore": [0-100 integer],
  "pronunciationScore": [0-100 integer, based on word choice and structure],
  "grammarScore": [0-100 integer],
  "fluencyScore": [0-100 integer, based on coherence and naturalness],
  "appropriatenessScore": [0-100 integer, based on context appropriateness],
  "feedback": [
    "Positive feedback point 1",
    "Positive feedback point 2",
    "Area for improvement 1",
    "Area for improvement 2"
  ],
  "suggestions": [
    "Specific suggestion 1",
    "Specific suggestion 2",
    "Alternative expression suggestion"
  ],
  "encouragement": "Encouraging message for the student"
}

Evaluation criteria:
- Pronunciation: Judge based on likely pronunciation of written response
- Grammar: Check sentence structure, tenses, word order
- Fluency: Assess naturalness and coherence of response  
- Appropriateness: How well the response fits the conversational context
- Be constructive and encouraging while providing specific improvement suggestions
- Consider the difficulty level when scoring (more lenient for easy level)
`;return await ut(o,l)}getConversationTemplates(){return[{category:" (Daily Life)",scenarios:[{title:"",scenario:"Student plays customer ordering coffee and snacks",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Tourist asking for directions to nearby attractions",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Shopping for groceries and asking about products",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Business English)",scenarios:[{title:"",scenario:"Job interview for entry-level position",suggestedDifficulty:"hard",participants:["",""]},{title:"",scenario:"Team meeting discussing project progress",suggestedDifficulty:"hard",participants:["","A","B"]},{title:"",scenario:"Handling customer complaints and inquiries",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Travel English)",scenarios:[{title:"",scenario:"Checking in at the airport and asking about flights",suggestedDifficulty:"normal",participants:["",""]},{title:"",scenario:"Checking into hotel and requesting services",suggestedDifficulty:"easy",participants:["",""]},{title:"",scenario:"Visiting tourist attractions and asking about information",suggestedDifficulty:"normal",participants:["",""]}]},{category:" (Academic English)",scenarios:[{title:"",scenario:"Participating in classroom discussion about a topic",suggestedDifficulty:"hard",participants:["",""]},{title:"",scenario:"Asking librarian for help finding resources",suggestedDifficulty:"normal",participants:["",""]}]}]}getDifficultyLevels(){return[{level:"easy",description:" - ",characteristics:["","","","",""]},{level:"normal",description:" - ",characteristics:["","","","",""]},{level:"hard",description:" - ",characteristics:["","","","",""]}]}}const Jo=new Uk,zk=({config:t,onConfigChange:e,onRegenerate:n,isGenerating:i})=>{const l={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},o=(m,x)=>{const v=Er[m],N=Math.max(0,Math.min(v,x)),w={easy:{...t.easy,[m]:N},normal:{...t.normal,[m]:N},hard:{...t.hard,[m]:N}};e(w)},u=()=>{e(ov)},f=()=>{const m=Object.values(t.easy).reduce((N,w)=>N+w,0),x=Object.values(t.normal).reduce((N,w)=>N+w,0),v=Object.values(t.hard).reduce((N,w)=>N+w,0);return m+x+v},g=m=>t.easy[m]+t.normal[m]+t.hard[m];return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-indigo-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-indigo-600",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["  : ",s.jsx("span",{className:"font-semibold text-indigo-600",children:f()})," "]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:u,className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:n,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-md flex items-center gap-2 font-medium",children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),""]})})]})]}),s.jsx("div",{className:"space-y-6",children:Object.keys(l).map(m=>{const x=Er[m],v=t.easy[m],N=g(m);return s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 rounded-lg p-5 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),s.jsx("h4",{className:"font-semibold text-lg text-gray-800",children:l[m]}),s.jsxs("span",{className:"text-sm text-gray-500 bg-white px-2 py-1 rounded-full border",children:[": 0-",x," "]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",s.jsx("span",{className:"font-mono font-medium",children:v})," "]}),s.jsxs("div",{className:"text-xs text-indigo-600",children:[": ",s.jsx("span",{className:"font-semibold",children:N})," "]})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>o(m,v-1),className:"w-10 h-10 rounded-full bg-red-100 hover:bg-red-200 flex items-center justify-center text-red-600 font-bold text-lg transition-colors shadow-sm",disabled:v<=0,children:"-"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:v}),s.jsx("div",{className:"text-xs text-gray-500",children:""})]}),s.jsx("button",{onClick:()=>o(m,v+1),className:"w-10 h-10 rounded-full bg-green-100 hover:bg-green-200 flex items-center justify-center text-green-600 font-bold text-lg transition-colors shadow-sm",disabled:v>=x,children:"+"})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-700 text-sm font-semibold mb-1",children:t.easy[m]}),s.jsx("div",{className:"text-xs text-green-700",children:""})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-700 text-sm font-semibold mb-1",children:t.normal[m]}),s.jsx("div",{className:"text-xs text-yellow-700",children:""})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-red-700 text-sm font-semibold mb-1",children:t.hard[m]}),s.jsx("div",{className:"text-xs text-red-700",children:""})]})]})]},m)})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-blue-600 mt-0.5 flex-shrink-0",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),s.jsx("p",{children:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),s.jsx("p",{children:": 0-10 | : 0-2"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),s.jsx("p",{children:" 0 "})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900 mb-1",children:" "}),s.jsx("p",{children:" 1-2 "})]})]})]})]})})]})};var Ts={},$d,hy;function Vk(){return hy||(hy=1,$d=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),$d}var qd={},er={},py;function Dr(){if(py)return er;py=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return er.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},er.getSymbolTotalCodewords=function(i){return e[i]},er.getBCHDigit=function(n){let i=0;for(;n!==0;)i++,n>>>=1;return i},er.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},er.isKanjiModeEnabled=function(){return typeof t<"u"},er.toSJIS=function(i){return t(i)},er}var Fd={},gy;function vm(){return gy||(gy=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,l){if(t.isValid(i))return i;try{return e(i)}catch{return l}}}(Fd)),Fd}var Hd,xy;function $k(){if(xy)return Hd;xy=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let i=0;i<n;i++)this.putBit((e>>>n-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Hd=t,Hd}var Gd,yy;function qk(){if(yy)return Gd;yy=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,i,l){const o=e*this.size+n;this.data[o]=i,l&&(this.reservedBit[o]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,i){this.data[e*this.size+n]^=i},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Gd=t,Gd}var Jd={},vy;function Fk(){return vy||(vy=1,function(t){const e=Dr().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const l=Math.floor(i/7)+2,o=e(i),u=o===145?26:Math.ceil((o-13)/(2*l-2))*2,f=[o-7];for(let g=1;g<l-1;g++)f[g]=f[g-1]-u;return f.push(6),f.reverse()},t.getPositions=function(i){const l=[],o=t.getRowColCoords(i),u=o.length;for(let f=0;f<u;f++)for(let g=0;g<u;g++)f===0&&g===0||f===0&&g===u-1||f===u-1&&g===0||l.push([o[f],o[g]]);return l}}(Jd)),Jd}var Yd={},by;function Hk(){if(by)return Yd;by=1;const t=Dr().getSymbolSize,e=7;return Yd.getPositions=function(i){const l=t(i);return[[0,0],[l-e,0],[0,l-e]]},Yd}var Zd={},wy;function Gk(){return wy||(wy=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const o=l.size;let u=0,f=0,g=0,m=null,x=null;for(let v=0;v<o;v++){f=g=0,m=x=null;for(let N=0;N<o;N++){let w=l.get(v,N);w===m?f++:(f>=5&&(u+=e.N1+(f-5)),m=w,f=1),w=l.get(N,v),w===x?g++:(g>=5&&(u+=e.N1+(g-5)),x=w,g=1)}f>=5&&(u+=e.N1+(f-5)),g>=5&&(u+=e.N1+(g-5))}return u},t.getPenaltyN2=function(l){const o=l.size;let u=0;for(let f=0;f<o-1;f++)for(let g=0;g<o-1;g++){const m=l.get(f,g)+l.get(f,g+1)+l.get(f+1,g)+l.get(f+1,g+1);(m===4||m===0)&&u++}return u*e.N2},t.getPenaltyN3=function(l){const o=l.size;let u=0,f=0,g=0;for(let m=0;m<o;m++){f=g=0;for(let x=0;x<o;x++)f=f<<1&2047|l.get(m,x),x>=10&&(f===1488||f===93)&&u++,g=g<<1&2047|l.get(x,m),x>=10&&(g===1488||g===93)&&u++}return u*e.N3},t.getPenaltyN4=function(l){let o=0;const u=l.data.length;for(let g=0;g<u;g++)o+=l.data[g];return Math.abs(Math.ceil(o*100/u/5)-10)*e.N4};function n(i,l,o){switch(i){case t.Patterns.PATTERN000:return(l+o)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(l+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return l*o%2+l*o%3===0;case t.Patterns.PATTERN110:return(l*o%2+l*o%3)%2===0;case t.Patterns.PATTERN111:return(l*o%3+(l+o)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(l,o){const u=o.size;for(let f=0;f<u;f++)for(let g=0;g<u;g++)o.isReserved(g,f)||o.xor(g,f,n(l,g,f))},t.getBestMask=function(l,o){const u=Object.keys(t.Patterns).length;let f=0,g=1/0;for(let m=0;m<u;m++){o(m),t.applyMask(m,l);const x=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(m,l),x<g&&(g=x,f=m)}return f}}(Zd)),Zd}var Lo={},Ny;function wv(){if(Ny)return Lo;Ny=1;const t=vm(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Lo.getBlocksCount=function(l,o){switch(o){case t.L:return e[(l-1)*4+0];case t.M:return e[(l-1)*4+1];case t.Q:return e[(l-1)*4+2];case t.H:return e[(l-1)*4+3];default:return}},Lo.getTotalCodewordsCount=function(l,o){switch(o){case t.L:return n[(l-1)*4+0];case t.M:return n[(l-1)*4+1];case t.Q:return n[(l-1)*4+2];case t.H:return n[(l-1)*4+3];default:return}},Lo}var Qd={},Za={},Cy;function Jk(){if(Cy)return Za;Cy=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let i=1;for(let l=0;l<255;l++)t[l]=i,e[i]=l,i<<=1,i&256&&(i^=285);for(let l=255;l<512;l++)t[l]=t[l-255]}(),Za.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},Za.exp=function(i){return t[i]},Za.mul=function(i,l){return i===0||l===0?0:t[e[i]+e[l]]},Za}var Sy;function Yk(){return Sy||(Sy=1,function(t){const e=Jk();t.mul=function(i,l){const o=new Uint8Array(i.length+l.length-1);for(let u=0;u<i.length;u++)for(let f=0;f<l.length;f++)o[u+f]^=e.mul(i[u],l[f]);return o},t.mod=function(i,l){let o=new Uint8Array(i);for(;o.length-l.length>=0;){const u=o[0];for(let g=0;g<l.length;g++)o[g]^=e.mul(l[g],u);let f=0;for(;f<o.length&&o[f]===0;)f++;o=o.slice(f)}return o},t.generateECPolynomial=function(i){let l=new Uint8Array([1]);for(let o=0;o<i;o++)l=t.mul(l,new Uint8Array([1,e.exp(o)]));return l}}(Qd)),Qd}var Kd,Ty;function Zk(){if(Ty)return Kd;Ty=1;const t=Yk();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(i.length+this.degree);l.set(i);const o=t.mod(l,this.genPoly),u=this.degree-o.length;if(u>0){const f=new Uint8Array(this.degree);return f.set(o,u),f}return o},Kd=e,Kd}var Wd={},Xd={},ef={},jy;function Nv(){return jy||(jy=1,ef.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ef}var Kn={},ky;function Cv(){if(ky)return Kn;ky=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Kn.KANJI=new RegExp(n,"g"),Kn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Kn.BYTE=new RegExp(i,"g"),Kn.NUMERIC=new RegExp(t,"g"),Kn.ALPHANUMERIC=new RegExp(e,"g");const l=new RegExp("^"+n+"$"),o=new RegExp("^"+t+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Kn.testKanji=function(g){return l.test(g)},Kn.testNumeric=function(g){return o.test(g)},Kn.testAlphanumeric=function(g){return u.test(g)},Kn}var Ey;function Lr(){return Ey||(Ey=1,function(t){const e=Nv(),n=Cv();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,u){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?o.ccBits[0]:u<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return n.testNumeric(o)?t.NUMERIC:n.testAlphanumeric(o)?t.ALPHANUMERIC:n.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function i(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(o,u){if(t.isValid(o))return o;try{return i(o)}catch{return u}}}(Xd)),Xd}var Ay;function Qk(){return Ay||(Ay=1,function(t){const e=Dr(),n=wv(),i=vm(),l=Lr(),o=Nv(),u=7973,f=e.getBCHDigit(u);function g(N,w,S){for(let j=1;j<=40;j++)if(w<=t.getCapacity(j,S,N))return j}function m(N,w){return l.getCharCountIndicator(N,w)+4}function x(N,w){let S=0;return N.forEach(function(j){const k=m(j.mode,w);S+=k+j.getBitsLength()}),S}function v(N,w){for(let S=1;S<=40;S++)if(x(N,S)<=t.getCapacity(S,w,l.MIXED))return S}t.from=function(w,S){return o.isValid(w)?parseInt(w,10):S},t.getCapacity=function(w,S,j){if(!o.isValid(w))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=l.BYTE);const k=e.getSymbolTotalCodewords(w),E=n.getTotalCodewordsCount(w,S),L=(k-E)*8;if(j===l.MIXED)return L;const D=L-m(j,w);switch(j){case l.NUMERIC:return Math.floor(D/10*3);case l.ALPHANUMERIC:return Math.floor(D/11*2);case l.KANJI:return Math.floor(D/13);case l.BYTE:default:return Math.floor(D/8)}},t.getBestVersionForData=function(w,S){let j;const k=i.from(S,i.M);if(Array.isArray(w)){if(w.length>1)return v(w,k);if(w.length===0)return 1;j=w[0]}else j=w;return g(j.mode,j.getLength(),k)},t.getEncodedBits=function(w){if(!o.isValid(w)||w<7)throw new Error("Invalid QR Code version");let S=w<<12;for(;e.getBCHDigit(S)-f>=0;)S^=u<<e.getBCHDigit(S)-f;return w<<12|S}}(Wd)),Wd}var tf={},_y;function Kk(){if(_y)return tf;_y=1;const t=Dr(),e=1335,n=21522,i=t.getBCHDigit(e);return tf.getEncodedBits=function(o,u){const f=o.bit<<3|u;let g=f<<10;for(;t.getBCHDigit(g)-i>=0;)g^=e<<t.getBCHDigit(g)-i;return(f<<10|g)^n},tf}var nf={},rf,My;function Wk(){if(My)return rf;My=1;const t=Lr();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let l,o,u;for(l=0;l+3<=this.data.length;l+=3)o=this.data.substr(l,3),u=parseInt(o,10),i.put(u,10);const f=this.data.length-l;f>0&&(o=this.data.substr(l),u=parseInt(o,10),i.put(u,f*3+1))},rf=e,rf}var sf,Ry;function Xk(){if(Ry)return sf;Ry=1;const t=Lr(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(i){this.mode=t.ALPHANUMERIC,this.data=i}return n.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(l){let o;for(o=0;o+2<=this.data.length;o+=2){let u=e.indexOf(this.data[o])*45;u+=e.indexOf(this.data[o+1]),l.put(u,11)}this.data.length%2&&l.put(e.indexOf(this.data[o]),6)},sf=n,sf}var af,Iy;function eE(){if(Iy)return af;Iy=1;const t=Lr();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let i=0,l=this.data.length;i<l;i++)n.put(this.data[i],8)},af=e,af}var lf,Dy;function tE(){if(Dy)return lf;Dy=1;const t=Lr(),e=Dr();function n(i){this.mode=t.KANJI,this.data=i}return n.getBitsLength=function(l){return l*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let l;for(l=0;l<this.data.length;l++){let o=e.toSJIS(this.data[l]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),i.put(o,13)}},lf=n,lf}var of={exports:{}},Ly;function nE(){return Ly||(Ly=1,function(t){var e={single_source_shortest_paths:function(n,i,l){var o={},u={};u[i]=0;var f=e.PriorityQueue.make();f.push(i,0);for(var g,m,x,v,N,w,S,j,k;!f.empty();){g=f.pop(),m=g.value,v=g.cost,N=n[m]||{};for(x in N)N.hasOwnProperty(x)&&(w=N[x],S=v+w,j=u[x],k=typeof u[x]>"u",(k||j>S)&&(u[x]=S,f.push(x,S),o[x]=m))}if(typeof l<"u"&&typeof u[l]>"u"){var E=["Could not find a path from ",i," to ",l,"."].join("");throw new Error(E)}return o},extract_shortest_path_from_predecessor_list:function(n,i){for(var l=[],o=i;o;)l.push(o),n[o],o=n[o];return l.reverse(),l},find_path:function(n,i,l){var o=e.single_source_shortest_paths(n,i,l);return e.extract_shortest_path_from_predecessor_list(o,l)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,l={},o;n=n||{};for(o in i)i.hasOwnProperty(o)&&(l[o]=i[o]);return l.queue=[],l.sorter=n.sorter||i.default_sorter,l},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var l={value:n,cost:i};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(of)),of.exports}var Py;function iE(){return Py||(Py=1,function(t){const e=Lr(),n=Wk(),i=Xk(),l=eE(),o=tE(),u=Cv(),f=Dr(),g=nE();function m(E){return unescape(encodeURIComponent(E)).length}function x(E,L,D){const O=[];let H;for(;(H=E.exec(D))!==null;)O.push({data:H[0],index:H.index,mode:L,length:H[0].length});return O}function v(E){const L=x(u.NUMERIC,e.NUMERIC,E),D=x(u.ALPHANUMERIC,e.ALPHANUMERIC,E);let O,H;return f.isKanjiModeEnabled()?(O=x(u.BYTE,e.BYTE,E),H=x(u.KANJI,e.KANJI,E)):(O=x(u.BYTE_KANJI,e.BYTE,E),H=[]),L.concat(D,O,H).sort(function(R,q){return R.index-q.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function N(E,L){switch(L){case e.NUMERIC:return n.getBitsLength(E);case e.ALPHANUMERIC:return i.getBitsLength(E);case e.KANJI:return o.getBitsLength(E);case e.BYTE:return l.getBitsLength(E)}}function w(E){return E.reduce(function(L,D){const O=L.length-1>=0?L[L.length-1]:null;return O&&O.mode===D.mode?(L[L.length-1].data+=D.data,L):(L.push(D),L)},[])}function S(E){const L=[];for(let D=0;D<E.length;D++){const O=E[D];switch(O.mode){case e.NUMERIC:L.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:L.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:L.push([O,{data:O.data,mode:e.BYTE,length:m(O.data)}]);break;case e.BYTE:L.push([{data:O.data,mode:e.BYTE,length:m(O.data)}])}}return L}function j(E,L){const D={},O={start:{}};let H=["start"];for(let I=0;I<E.length;I++){const R=E[I],q=[];for(let B=0;B<R.length;B++){const W=R[B],G=""+I+B;q.push(G),D[G]={node:W,lastCount:0},O[G]={};for(let J=0;J<H.length;J++){const z=H[J];D[z]&&D[z].node.mode===W.mode?(O[z][G]=N(D[z].lastCount+W.length,W.mode)-N(D[z].lastCount,W.mode),D[z].lastCount+=W.length):(D[z]&&(D[z].lastCount=W.length),O[z][G]=N(W.length,W.mode)+4+e.getCharCountIndicator(W.mode,L))}}H=q}for(let I=0;I<H.length;I++)O[H[I]].end=0;return{map:O,table:D}}function k(E,L){let D;const O=e.getBestModeForData(E);if(D=e.from(L,O),D!==e.BYTE&&D.bit<O.bit)throw new Error('"'+E+'" cannot be encoded with mode '+e.toString(D)+`.
 Suggested mode is: `+e.toString(O));switch(D===e.KANJI&&!f.isKanjiModeEnabled()&&(D=e.BYTE),D){case e.NUMERIC:return new n(E);case e.ALPHANUMERIC:return new i(E);case e.KANJI:return new o(E);case e.BYTE:return new l(E)}}t.fromArray=function(L){return L.reduce(function(D,O){return typeof O=="string"?D.push(k(O,null)):O.data&&D.push(k(O.data,O.mode)),D},[])},t.fromString=function(L,D){const O=v(L,f.isKanjiModeEnabled()),H=S(O),I=j(H,D),R=g.find_path(I.map,"start","end"),q=[];for(let B=1;B<R.length-1;B++)q.push(I.table[R[B]].node);return t.fromArray(w(q))},t.rawSplit=function(L){return t.fromArray(v(L,f.isKanjiModeEnabled()))}}(nf)),nf}var Oy;function rE(){if(Oy)return qd;Oy=1;const t=Dr(),e=vm(),n=$k(),i=qk(),l=Fk(),o=Hk(),u=Gk(),f=wv(),g=Zk(),m=Qk(),x=Kk(),v=Lr(),N=iE();function w(I,R){const q=I.size,B=o.getPositions(R);for(let W=0;W<B.length;W++){const G=B[W][0],J=B[W][1];for(let z=-1;z<=7;z++)if(!(G+z<=-1||q<=G+z))for(let $=-1;$<=7;$++)J+$<=-1||q<=J+$||(z>=0&&z<=6&&($===0||$===6)||$>=0&&$<=6&&(z===0||z===6)||z>=2&&z<=4&&$>=2&&$<=4?I.set(G+z,J+$,!0,!0):I.set(G+z,J+$,!1,!0))}}function S(I){const R=I.size;for(let q=8;q<R-8;q++){const B=q%2===0;I.set(q,6,B,!0),I.set(6,q,B,!0)}}function j(I,R){const q=l.getPositions(R);for(let B=0;B<q.length;B++){const W=q[B][0],G=q[B][1];for(let J=-2;J<=2;J++)for(let z=-2;z<=2;z++)J===-2||J===2||z===-2||z===2||J===0&&z===0?I.set(W+J,G+z,!0,!0):I.set(W+J,G+z,!1,!0)}}function k(I,R){const q=I.size,B=m.getEncodedBits(R);let W,G,J;for(let z=0;z<18;z++)W=Math.floor(z/3),G=z%3+q-8-3,J=(B>>z&1)===1,I.set(W,G,J,!0),I.set(G,W,J,!0)}function E(I,R,q){const B=I.size,W=x.getEncodedBits(R,q);let G,J;for(G=0;G<15;G++)J=(W>>G&1)===1,G<6?I.set(G,8,J,!0):G<8?I.set(G+1,8,J,!0):I.set(B-15+G,8,J,!0),G<8?I.set(8,B-G-1,J,!0):G<9?I.set(8,15-G-1+1,J,!0):I.set(8,15-G-1,J,!0);I.set(B-8,8,1,!0)}function L(I,R){const q=I.size;let B=-1,W=q-1,G=7,J=0;for(let z=q-1;z>0;z-=2)for(z===6&&z--;;){for(let $=0;$<2;$++)if(!I.isReserved(W,z-$)){let Y=!1;J<R.length&&(Y=(R[J]>>>G&1)===1),I.set(W,z-$,Y),G--,G===-1&&(J++,G=7)}if(W+=B,W<0||q<=W){W-=B,B=-B;break}}}function D(I,R,q){const B=new n;q.forEach(function($){B.put($.mode.bit,4),B.put($.getLength(),v.getCharCountIndicator($.mode,I)),$.write(B)});const W=t.getSymbolTotalCodewords(I),G=f.getTotalCodewordsCount(I,R),J=(W-G)*8;for(B.getLengthInBits()+4<=J&&B.put(0,4);B.getLengthInBits()%8!==0;)B.putBit(0);const z=(J-B.getLengthInBits())/8;for(let $=0;$<z;$++)B.put($%2?17:236,8);return O(B,I,R)}function O(I,R,q){const B=t.getSymbolTotalCodewords(R),W=f.getTotalCodewordsCount(R,q),G=B-W,J=f.getBlocksCount(R,q),z=B%J,$=J-z,Y=Math.floor(B/J),P=Math.floor(G/J),Z=P+1,fe=Y-P,Q=new g(fe);let C=0;const V=new Array(J),ee=new Array(J);let M=0;const ge=new Uint8Array(I.buffer);for(let Ne=0;Ne<J;Ne++){const Je=Ne<$?P:Z;V[Ne]=ge.slice(C,C+Je),ee[Ne]=Q.encode(V[Ne]),C+=Je,M=Math.max(M,Je)}const we=new Uint8Array(B);let ne=0,me,ue;for(me=0;me<M;me++)for(ue=0;ue<J;ue++)me<V[ue].length&&(we[ne++]=V[ue][me]);for(me=0;me<fe;me++)for(ue=0;ue<J;ue++)we[ne++]=ee[ue][me];return we}function H(I,R,q,B){let W;if(Array.isArray(I))W=N.fromArray(I);else if(typeof I=="string"){let Y=R;if(!Y){const P=N.rawSplit(I);Y=m.getBestVersionForData(P,q)}W=N.fromString(I,Y||40)}else throw new Error("Invalid data");const G=m.getBestVersionForData(W,q);if(!G)throw new Error("The amount of data is too big to be stored in a QR Code");if(!R)R=G;else if(R<G)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+G+`.
`);const J=D(R,q,W),z=t.getSymbolSize(R),$=new i(z);return w($,R),S($),j($,R),E($,q,0),R>=7&&k($,R),L($,J),isNaN(B)&&(B=u.getBestMask($,E.bind(null,$,q))),u.applyMask(B,$),E($,q,B),{modules:$,version:R,errorCorrectionLevel:q,maskPattern:B,segments:W}}return qd.create=function(R,q){if(typeof R>"u"||R==="")throw new Error("No input text");let B=e.M,W,G;return typeof q<"u"&&(B=e.from(q.errorCorrectionLevel,e.M),W=m.from(q.version),G=u.from(q.maskPattern),q.toSJISFunc&&t.setToSJISFunction(q.toSJISFunc)),H(R,W,B,G)},qd}var cf={},uf={},By;function Sv(){return By||(By=1,function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(o){return[o,o]}))),i.length===6&&i.push("F","F");const l=parseInt(i.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const l=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,o=i.width&&i.width>=21?i.width:void 0,u=i.scale||4;return{width:o,scale:o?4:u,margin:l,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,l){return l.width&&l.width>=i+l.margin*2?l.width/(i+l.margin*2):l.scale},t.getImageWidth=function(i,l){const o=t.getScale(i,l);return Math.floor((i+l.margin*2)*o)},t.qrToImageData=function(i,l,o){const u=l.modules.size,f=l.modules.data,g=t.getScale(u,o),m=Math.floor((u+o.margin*2)*g),x=o.margin*g,v=[o.color.light,o.color.dark];for(let N=0;N<m;N++)for(let w=0;w<m;w++){let S=(N*m+w)*4,j=o.color.light;if(N>=x&&w>=x&&N<m-x&&w<m-x){const k=Math.floor((N-x)/g),E=Math.floor((w-x)/g);j=v[f[k*u+E]?1:0]}i[S++]=j.r,i[S++]=j.g,i[S++]=j.b,i[S]=j.a}}}(uf)),uf}var Uy;function sE(){return Uy||(Uy=1,function(t){const e=Sv();function n(l,o,u){l.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=u,o.width=u,o.style.height=u+"px",o.style.width=u+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,u,f){let g=f,m=u;typeof g>"u"&&(!u||!u.getContext)&&(g=u,u=void 0),u||(m=i()),g=e.getOptions(g);const x=e.getImageWidth(o.modules.size,g),v=m.getContext("2d"),N=v.createImageData(x,x);return e.qrToImageData(N.data,o,g),n(v,m,x),v.putImageData(N,0,0),m},t.renderToDataURL=function(o,u,f){let g=f;typeof g>"u"&&(!u||!u.getContext)&&(g=u,u=void 0),g||(g={});const m=t.render(o,u,g),x=g.type||"image/png",v=g.rendererOpts||{};return m.toDataURL(x,v.quality)}}(cf)),cf}var df={},zy;function aE(){if(zy)return df;zy=1;const t=Sv();function e(l,o){const u=l.a/255,f=o+'="'+l.hex+'"';return u<1?f+" "+o+'-opacity="'+u.toFixed(2).slice(1)+'"':f}function n(l,o,u){let f=l+o;return typeof u<"u"&&(f+=" "+u),f}function i(l,o,u){let f="",g=0,m=!1,x=0;for(let v=0;v<l.length;v++){const N=Math.floor(v%o),w=Math.floor(v/o);!N&&!m&&(m=!0),l[v]?(x++,v>0&&N>0&&l[v-1]||(f+=m?n("M",N+u,.5+w+u):n("m",g,0),g=0,m=!1),N+1<o&&l[v+1]||(f+=n("h",x),x=0)):g++}return f}return df.render=function(o,u,f){const g=t.getOptions(u),m=o.modules.size,x=o.modules.data,v=m+g.margin*2,N=g.color.light.a?"<path "+e(g.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",w="<path "+e(g.color.dark,"stroke")+' d="'+i(x,m,g.margin)+'"/>',S='viewBox="0 0 '+v+" "+v+'"',k='<svg xmlns="http://www.w3.org/2000/svg" '+(g.width?'width="'+g.width+'" height="'+g.width+'" ':"")+S+' shape-rendering="crispEdges">'+N+w+`</svg>
`;return typeof f=="function"&&f(null,k),k},df}var Vy;function lE(){if(Vy)return Ts;Vy=1;const t=Vk(),e=rE(),n=sE(),i=aE();function l(o,u,f,g,m){const x=[].slice.call(arguments,1),v=x.length,N=typeof x[v-1]=="function";if(!N&&!t())throw new Error("Callback required as last argument");if(N){if(v<2)throw new Error("Too few arguments provided");v===2?(m=f,f=u,u=g=void 0):v===3&&(u.getContext&&typeof m>"u"?(m=g,g=void 0):(m=g,g=f,f=u,u=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(f=u,u=g=void 0):v===2&&!u.getContext&&(g=f,f=u,u=void 0),new Promise(function(w,S){try{const j=e.create(f,g);w(o(j,u,g))}catch(j){S(j)}})}try{const w=e.create(f,g);m(null,o(w,u,g))}catch(w){m(w)}}return Ts.create=e.create,Ts.toCanvas=l.bind(null,n.render),Ts.toDataURL=l.bind(null,n.renderToDataURL),Ts.toString=l.bind(null,function(o,u,f){return i.render(o,f)}),Ts}var oE=lE();const $y=ml(oE),As=({url:t,title:e="QR Code",size:n=256,className:i="",showDownload:l=!0,onError:o})=>{const[u,f]=_.useState(""),[g,m]=_.useState(!0),[x,v]=_.useState(null),N=_.useRef(null);_.useEffect(()=>{t&&(async()=>{try{m(!0),v(null);const k={width:n,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"},E=await $y.toDataURL(t,k);f(E),N.current&&await $y.toCanvas(N.current,t,k)}catch(k){const E=k instanceof Error?k.message:"QR Code ";v(E),o==null||o(E)}finally{m(!1)}})()},[t,n,o]);const w=()=>{if(N.current)try{const j=document.createElement("a");j.download=`qrcode-${Date.now()}.png`,j.href=N.current.toDataURL(),document.body.appendChild(j),j.click(),document.body.removeChild(j)}catch(j){console.error(" QR Code :",j)}},S=async()=>{if(N.current)try{N.current.toBlob(async j=>{if(j&&navigator.clipboard)try{await navigator.clipboard.write([new ClipboardItem({"image/png":j})]),alert("QR Code ")}catch(k){console.error(":",k),alert("")}})}catch(j){console.error(" QR Code :",j)}};return g?s.jsxs("div",{className:`flex flex-col items-center p-4 ${i}`,children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-3"}),s.jsx("p",{className:"text-sm text-gray-600",children:" QR Code ..."})]}):x?s.jsxs("div",{className:`flex flex-col items-center p-4 text-red-600 ${i}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 mb-2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),s.jsx("p",{className:"text-sm text-center",children:x})]}):s.jsxs("div",{className:`flex flex-col items-center ${i}`,children:[e&&s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 text-center",children:e}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border",children:s.jsx("img",{src:u,alt:`QR Code for ${e}`,className:"block",style:{width:n,height:n}})}),s.jsx("canvas",{ref:N,style:{display:"none"},width:n,height:n}),s.jsx("div",{className:"mt-3 max-w-xs w-full",children:s.jsx("p",{className:"text-xs text-gray-500 text-center break-all",children:t})}),l&&s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),""]}),s.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),""]})]})]})},qy=[{key:"objectives",label:""},{key:"breakdown",label:""},{key:"confusing",label:""},{key:"activities",label:""},{key:"conversation",label:""},{key:"writing",label:""},{key:"quiz",label:""}],bm=({content:t,topic:e,selectedLevel:n,selectedVocabularyLevel:i,apiKey:l,onContentUpdate:o})=>{const[u,f]=qe.useState(""),[g,m]=qe.useState(""),[x,v]=qe.useState(qy[0].key),[N,w]=qe.useState(!1),[S,j]=qe.useState(""),[k,E]=qe.useState(""),[L,D]=qe.useState(!1),[O,H]=qe.useState(""),[I,R]=qe.useState(""),[q,B]=qe.useState(!1),[W,G]=qe.useState(!1),[J,z]=qe.useState(""),[$,Y]=qe.useState(""),[P,Z]=qe.useState(!1),[fe,Q]=qe.useState(!1),[C,V]=qe.useState(""),[ee,M]=qe.useState(""),[ge,we]=qe.useState(!1),[ne,me]=qe.useState(!1),[ue,Ne]=qe.useState(""),[Je,Xe]=qe.useState(""),[ht,wt]=qe.useState(!1),[Ot,Xt]=qe.useState(ov),[Cn,Bt]=qe.useState(!1),[Mi,Fn]=qe.useState(!1),oi=()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2)).then(()=>{f("JSON "),setTimeout(()=>f(""),2e3)}).catch(ae=>{f(""),console.error("Failed to copy: ",ae),setTimeout(()=>f(""),2e3)})},Hn=()=>{try{Rk(t,e),m("HTML "),setTimeout(()=>m(""),3e3)}catch(ae){console.error("Failed to export HTML:",ae),m(" HTML "),setTimeout(()=>m(""),3e3)}},or=async()=>{w(!0),j(""),E("");try{const ae={...t,topic:e,selectedLevel:n,selectedVocabularyLevel:i,sharedAt:new Date().toISOString()},pe=await cc(ae),Ee=`${window.location.origin}/ai-page-gen/share?binId=${pe}`;E(Ee)}catch(ae){j(ae.message||"")}finally{w(!1)}},Pn=async()=>{if(D(!0),H(""),R(""),!t.onlineInteractiveQuiz){H(""),D(!1);return}try{const ae=await bk({quiz:t.onlineInteractiveQuiz,topic:e,apiKey:l,metadata:{selectedLevel:n==null?void 0:n.name,selectedVocabularyLevel:i==null?void 0:i.name,createdAt:new Date().toISOString(),supportsDiagnostic:!!l}});let pe=`${window.location.origin}/ai-page-gen/quiz?binId=${ae}`;if(l)try{const Ee=await my(l);pe+=`&${Ee}`}catch(Ee){console.warn(" API Key  API Key:",Ee)}R(pe)}catch(ae){H(ae.message||"")}finally{D(!1)}},ci=async()=>{if(G(!0),z(""),Y(""),!t.writingPractice){z(""),G(!1);return}try{const ae=await Nk({writingPractice:t.writingPractice,topic:e,metadata:{selectedLevel:n==null?void 0:n.name,selectedVocabularyLevel:i==null?void 0:i.name,createdAt:new Date().toISOString()}});let pe=`${window.location.origin}/ai-page-gen/writing?binId=${ae}`;if(l)try{const Ee=await my(l);pe+=`&${Ee}`}catch(Ee){console.warn(" API Key  API Key:",Ee)}Y(pe)}catch(ae){z(ae.message||"")}finally{G(!1)}},cr=async()=>{Q(!0),V(""),M("");try{const ae={...t,topic:e,selectedLevel:n,selectedVocabularyLevel:i,sharedAt:new Date().toISOString()},pe=await cc(ae),Ee=`${window.location.origin}/ai-page-gen/teacher-interactive-prep?binId=${pe}`;M(Ee)}catch(ae){V(ae.message||"")}finally{Q(!1)}},le=async()=>{if(!t.learningObjectives){alert("");return}const ae=localStorage.getItem("gemini_api_key")||l;if(!ae){alert(" Gemini API ");return}Bt(!0);try{const pe=await ek(e,ae,t.learningObjectives,Ot,n,i),Ee={...t,onlineInteractiveQuiz:pe};o&&o(Ee),Fn(!1),alert("")}catch(pe){console.error(":",pe),alert(": "+(pe.message||""))}finally{Bt(!1)}},he=async()=>{var ae;if(!l){Ne(" Gemini API ");return}if(!t.learningObjectives||t.learningObjectives.length===0){Ne("");return}me(!0),Ne(""),Xe("");try{const pe={topic:e,scenario:`Practice conversation based on learning objectives: ${t.learningObjectives.map(Oe=>Oe.objective).join(", ")}`,difficulty:(n==null?void 0:n.name)===""?"easy":(n==null?void 0:n.name)===""?"hard":"normal",participantCount:2,duration:10,focusAreas:t.learningObjectives.map(Oe=>Oe.objective),culturalContext:(ae=t.contentBreakdown)==null?void 0:ae.map(Oe=>Oe.details).join("; ")},tt={practice:await Jo.generateConversationPractice(pe,l),metadata:{basedOnTopic:e,createdFrom:"lesson-plan",selectedLevel:n==null?void 0:n.name,selectedVocabularyLevel:i==null?void 0:i.name,createdAt:new Date().toISOString()}},mn=await gv(tt),Ut=`${window.location.origin}/ai-page-gen/conversation-practice/${mn}`;Xe(Ut)}catch(pe){console.error("Failed to generate advanced conversation practice:",pe),Ne(pe.message||"")}finally{me(!1)}};return s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-2 mb-4",children:[s.jsxs("button",{onClick:oi,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors flex items-center text-sm","aria-label":" JSON ",children:[s.jsx(mk,{className:"w-4 h-4 mr-2"}),"  JSON"]}),s.jsxs("button",{onClick:Hn,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center text-sm","aria-label":" HTML ",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})," HTML"]}),s.jsx("button",{onClick:or,className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:N,children:N?s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):s.jsx("span",{children:""})}),s.jsx("button",{onClick:cr,className:"px-4 py-2 bg-emerald-500 text-white rounded-md hover:bg-emerald-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:fe,children:fe?s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})}),""]})}),u&&s.jsx("span",{className:"text-sm text-green-600",children:u}),g&&s.jsx("span",{className:"text-sm text-blue-600",children:g}),S&&s.jsx("span",{className:"text-sm text-red-600",children:S}),C&&s.jsx("span",{className:"text-sm text-red-600",children:C})]}),k&&s.jsxs("div",{className:"mb-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-purple-700 mb-2",children:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:k,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-purple-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(k)}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(k),className:"px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm",children:""})]})]}),ee&&s.jsxs("div",{className:"mb-4 p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-emerald-700 mb-2",children:""}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("input",{type:"text",value:ee,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-emerald-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(ee)}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(ee),className:"px-3 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm",children:""}),s.jsxs("button",{onClick:()=>we(!ge),className:"px-3 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm flex items-center gap-1",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"})]}),"QR"]})]}),ge&&s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(As,{url:ee,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),s.jsx("div",{className:"text-xs text-emerald-600 bg-emerald-100 px-3 py-2 rounded-lg",children:" "})]}),s.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ff,{className:"w-5 h-5 text-indigo-600 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-indigo-600",children:""})]}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-0 truncate",children:e})]}),(n||i)&&s.jsxs("div",{className:"flex gap-3 ml-6 flex-shrink-0",children:[n&&s.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-indigo-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx($n,{className:"w-4 h-4 text-indigo-500"}),s.jsx("span",{className:"text-xs font-medium text-indigo-600",children:""})]}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:n.name}),s.jsx("div",{className:"text-xs text-gray-500 truncate max-w-32",title:n.description,children:n.description.length>20?n.description.substring(0,20)+"...":n.description})]}),i&&s.jsxs("div",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border border-blue-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(lc,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-xs font-medium text-blue-600",children:""})]}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[i.wordCount," "]})]})]})]})}),s.jsxs(Bk,{tabs:qy,current:x,onChange:v,children:[s.jsx(zn,{title:"",icon:s.jsx($n,{className:"w-7 h-7"}),children:t.learningObjectives&&t.learningObjectives.length>0?t.learningObjectives.map((ae,pe)=>s.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 last:border-b-0 last:pb-0",children:[s.jsx("h4",{className:"font-semibold text-lg text-green-800 mb-1",children:ae.objective}),s.jsx("p",{className:"text-slate-700 mb-2",children:ae.description}),ae.teachingExample&&s.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-3 rounded-md mt-2",children:[s.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:""}),s.jsx("span",{className:"text-green-900 text-sm",children:ae.teachingExample})]})]},pe)):s.jsx("p",{children:""})}),s.jsx(zn,{title:"",icon:s.jsx(lc,{className:"w-7 h-7"}),children:t.contentBreakdown&&t.contentBreakdown.length>0?t.contentBreakdown.map((ae,pe)=>s.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[s.jsx("h4",{className:"font-semibold text-lg text-sky-800 mb-1",children:ae.topic}),s.jsx("p",{className:"text-slate-700 mb-3",children:ae.details}),ae.coreConcept&&s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),s.jsx("span",{className:"text-blue-900 text-sm",children:ae.coreConcept})]}),ae.teachingSentences&&ae.teachingSentences.length>0&&s.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:""}),s.jsx("div",{className:"space-y-1",children:ae.teachingSentences.map((Ee,tt)=>s.jsxs("div",{className:"text-indigo-900 text-sm",children:[s.jsxs("span",{className:"font-mono text-indigo-600",children:[tt+1,"."]})," ",Ee]},tt))})]}),ae.teachingTips&&s.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:""}),s.jsx("span",{className:"text-purple-900 text-sm",children:ae.teachingTips})]}),ae.teachingExample&&s.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-400 p-3 rounded-md",children:[s.jsx("span",{className:"block text-xs font-semibold text-sky-700 mb-1",children:""}),s.jsx("span",{className:"text-sky-900 text-sm",children:ae.teachingExample})]})]},pe)):s.jsx("p",{children:""})}),s.jsx(zn,{title:"",icon:s.jsx(Ff,{className:"w-7 h-7"}),children:t.confusingPoints&&t.confusingPoints.length>0?t.confusingPoints.map((ae,pe)=>s.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200 last:border-b-0 last:pb-0",children:[s.jsx("h4",{className:"font-semibold text-lg text-red-700 mb-2",children:ae.point}),s.jsx("p",{className:"text-slate-700 mb-3",children:ae.clarification}),ae.errorType&&s.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-orange-700 mb-1",children:""}),s.jsx("span",{className:"text-orange-900 text-sm",children:ae.errorType})]}),ae.commonErrors&&ae.commonErrors.length>0&&s.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-2",children:""}),s.jsx("div",{className:"space-y-1",children:ae.commonErrors.map((Ee,tt)=>s.jsxs("div",{className:"text-red-900 text-sm",children:[s.jsxs("span",{className:"font-mono text-red-600",children:[tt+1,"."]})," ",Ee]},tt))})]}),ae.correctVsWrong&&ae.correctVsWrong.length>0&&s.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-yellow-700 mb-2",children:""}),s.jsx("div",{className:"space-y-3",children:ae.correctVsWrong.map((Ee,tt)=>s.jsxs("div",{className:"border border-yellow-200 rounded-md p-2 bg-white",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-2",children:[s.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:[s.jsx("span",{className:"block text-xs font-semibold text-green-700 mb-1",children:" "}),s.jsx("span",{className:"text-green-900 text-sm",children:Ee.correct})]}),s.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[s.jsx("span",{className:"block text-xs font-semibold text-red-700 mb-1",children:" "}),s.jsx("span",{className:"text-red-900 text-sm",children:Ee.wrong})]})]}),s.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[s.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),s.jsx("span",{className:"text-blue-900 text-sm",children:Ee.explanation})]})]},tt))})]}),ae.preventionStrategy&&s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-blue-700 mb-1",children:""}),s.jsx("span",{className:"text-blue-900 text-sm",children:ae.preventionStrategy})]}),ae.correctionMethod&&s.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-purple-700 mb-1",children:""}),s.jsx("span",{className:"text-purple-900 text-sm",children:ae.correctionMethod})]}),ae.practiceActivities&&ae.practiceActivities.length>0&&s.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-md mb-3",children:[s.jsx("span",{className:"block text-xs font-semibold text-indigo-700 mb-2",children:""}),s.jsx("div",{className:"space-y-1",children:ae.practiceActivities.map((Ee,tt)=>s.jsxs("div",{className:"text-indigo-900 text-sm",children:[s.jsxs("span",{className:"font-mono text-indigo-600",children:[tt+1,"."]})," ",Ee]},tt))})]}),ae.teachingExample&&s.jsxs("div",{className:"bg-gray-50 border-l-4 border-gray-400 p-3 rounded-md",children:[s.jsx("span",{className:"block text-xs font-semibold text-gray-700 mb-1",children:""}),s.jsx("span",{className:"text-gray-900 text-sm",children:ae.teachingExample})]})]},pe)):s.jsx("p",{children:""})}),s.jsx(zn,{title:"",icon:s.jsx(fk,{className:"w-7 h-7"}),children:t.classroomActivities&&t.classroomActivities.length>0?s.jsx("div",{className:"space-y-6",children:t.classroomActivities.map((ae,pe)=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:[s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-6 py-4 border-b border-slate-200 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-sky-500 text-white rounded-full font-bold text-sm",children:pe+1}),s.jsx("h4",{className:"font-bold text-xl text-sky-800",children:ae.title})]}),s.jsx("p",{className:"mt-3 text-slate-700 leading-relaxed",children:ae.description})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[ae.objective&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-semibold text-green-800 text-sm",children:""})]}),s.jsx("p",{className:"text-green-900 text-sm leading-relaxed",children:ae.objective})]}),ae.timing&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsx("span",{className:"font-semibold text-purple-800 text-sm",children:""})]}),s.jsx("p",{className:"text-purple-900 text-sm leading-relaxed",children:ae.timing})]}),ae.materials&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsx("span",{className:"font-semibold text-orange-800 text-sm",children:""})]}),s.jsx("p",{className:"text-orange-900 text-sm leading-relaxed",children:ae.materials})]}),ae.environment&&s.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"}),s.jsx("span",{className:"font-semibold text-teal-800 text-sm",children:""})]}),s.jsx("p",{className:"text-teal-900 text-sm leading-relaxed",children:ae.environment})]})]}),ae.steps&&ae.steps.length>0&&s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-blue-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),s.jsx("span",{className:"font-semibold text-blue-800",children:""})]}),s.jsx("div",{className:"space-y-3",children:ae.steps.map((Ee,tt)=>s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full font-semibold text-xs flex-shrink-0 mt-0.5",children:tt+1}),s.jsx("p",{className:"text-blue-900 text-sm leading-relaxed flex-1",children:Ee})]},tt))})]})}),ae.assessmentPoints&&ae.assessmentPoints.length>0&&s.jsx("div",{children:s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 text-indigo-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),s.jsx("span",{className:"font-semibold text-indigo-800",children:""})]}),s.jsx("div",{className:"space-y-2",children:ae.assessmentPoints.map((Ee,tt)=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("p",{className:"text-indigo-900 text-sm leading-relaxed",children:Ee})]},tt))})]})})]})]},pe))}):s.jsx("p",{children:""})}),s.jsx(zn,{title:"",icon:s.jsx(Hf,{className:"w-7 h-7"}),children:t.englishConversation&&t.englishConversation.length>0?s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:""}),s.jsx(_k,{dialogue:t.englishConversation})]}),l&&s.jsxs("div",{className:"border-t pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"AI"})]}),s.jsx("button",{onClick:he,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2 text-sm",disabled:ne||!l,children:ne?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]})})]}),ue&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ue}),Je&&s.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-green-800 mb-1",children:""}),s.jsx("div",{className:"text-xs text-green-600",children:""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>navigator.clipboard.writeText(Je),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:""}),s.jsx("button",{onClick:()=>wt(!ht),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"QR Code"})]})]}),ht&&s.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:s.jsx(As,{url:Je,title:`${e} - `})})]})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:""}),l&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:""}),s.jsx("button",{onClick:he,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2 mx-auto",disabled:ne,children:ne?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]})}),ue&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm max-w-md mx-auto",children:ue}),Je&&s.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg max-w-md mx-auto",children:[s.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:()=>navigator.clipboard.writeText(Je),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:""}),s.jsx("button",{onClick:()=>wt(!ht),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"QR Code"})]}),ht&&s.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:s.jsx(As,{url:Je,title:`${e} - `})})]})]})]})}),t.writingPractice?s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsx("button",{onClick:ci,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 text-sm",disabled:W,children:W?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),""]})})}),J&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:J}),$&&s.jsxs("div",{className:"mb-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("p",{className:"text-sm text-purple-700",children:""}),l&&s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:$,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-purple-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText($)}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsx("button",{onClick:()=>navigator.clipboard.writeText($),className:"flex-1 px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm transition-colors",children:""}),s.jsxs("button",{onClick:()=>Z(!P),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm flex items-center justify-center gap-1 transition-colors",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]}),P&&s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(As,{url:$,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),l&&s.jsx("p",{className:"text-xs text-purple-600 mt-2",children:"  API Key AI "})]}),s.jsx(xv,{content:t.writingPractice,apiKey:l,vocabularyLevel:i||void 0})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-200",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),s.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:""}),s.jsx("p",{className:"text-gray-500",children:""})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-2 mb-4",children:[s.jsx("button",{onClick:Pn,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors flex items-center text-sm disabled:opacity-60","aria-label":"",disabled:L,children:L?s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),""]})}),s.jsxs("button",{onClick:()=>Fn(!Mi),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-colors flex items-center text-sm","aria-label":"",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-2",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]})]}),O&&s.jsx("span",{className:"text-sm text-red-600",children:O}),I&&s.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("p",{className:"text-sm text-orange-700",children:""}),l&&s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:I,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-orange-300 rounded text-sm",onClick:()=>navigator.clipboard.writeText(I)}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsxs("button",{onClick:()=>navigator.clipboard.writeText(I),className:"flex-1 px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm flex items-center justify-center gap-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),""]}),s.jsxs("button",{onClick:()=>B(!q),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm flex items-center justify-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]}),q&&s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(As,{url:I,title:" QR Code",size:200,className:"bg-white p-4 rounded-lg shadow-sm"})}),l&&s.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"  API Key AI "})]}),Mi&&s.jsx(zk,{config:Ot,onConfigChange:Xt,onRegenerate:le,isGenerating:Cn}),s.jsx(Ak,{quizzes:t.onlineInteractiveQuiz,topic:e,apiKey:l,enableDiagnostic:!!l})]})]})]})},cE=({learningLevels:t,onLevelSelect:e,onGenerateWithLevel:n,selectedLevelId:i,isLoading:l=!1})=>{var m;const[o,u]=_.useState(i||t.defaultLevelId),f=x=>{u(x.id),e==null||e(x)},g=[...t.suggestedLevels].sort((x,v)=>x.order-v.order);return s.jsx(zn,{title:"",icon:s.jsx($n,{className:"w-7 h-7"}),children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:""}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:g.map(x=>s.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${o===x.id?"border-sky-500 bg-sky-50 shadow-md":"border-slate-300 bg-white hover:border-sky-300 hover:shadow-sm"}
              `,onClick:()=>f(x),children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`
                  flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                  ${o===x.id?"bg-sky-500 text-white":"bg-slate-200 text-slate-700"}
                `,children:x.order}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:`
                    text-lg font-semibold mb-2
                    ${o===x.id?"text-sky-700":"text-slate-700"}
                  `,children:x.name}),s.jsx("p",{className:`
                    text-sm leading-relaxed
                    ${o===x.id?"text-sky-600":"text-slate-600"}
                  `,children:x.description})]})]}),o===x.id&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-3 h-3 bg-sky-500 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},x.id))}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{children:["",s.jsx("strong",{children:(m=g.find(x=>x.id===o))==null?void 0:m.name})]})]})}),n&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:()=>{const x=g.find(v=>v.id===o);x&&n(x)},disabled:l,className:"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})})})]})]})})},ff=[{id:"beginner",name:" (100-500)",wordCount:500,description:""},{id:"elementary",name:" (500-1000)",wordCount:1e3,description:""},{id:"pre-intermediate",name:" (1000-2000)",wordCount:2e3,description:""},{id:"intermediate",name:" (2000-3500)",wordCount:3500,description:""},{id:"upper-intermediate",name:" (3500-5000)",wordCount:5e3,description:""},{id:"advanced",name:" (5000-7000)",wordCount:7e3,description:""}],uE=({onVocabularyLevelSelect:t,selectedLevel:e,isVisible:n=!0})=>{var u,f;const[i,l]=_.useState((e==null?void 0:e.id)||"intermediate"),o=g=>{l(g.id),t(g)};return n?s.jsx(zn,{title:"",icon:s.jsx(lc,{className:"w-7 h-7"}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-600",children:""}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:ff.map(g=>s.jsxs("div",{className:`
                relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                ${i===g.id?"border-green-500 bg-green-50 shadow-md":"border-slate-300 bg-white hover:border-green-300 hover:shadow-sm"}
              `,onClick:()=>o(g),children:[s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`
                    flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                    ${i===g.id?"bg-green-500 text-white":"bg-slate-200 text-slate-700"}
                  `,children:g.wordCount>=1e3?`${g.wordCount/1e3}k`:g.wordCount}),s.jsx("h4",{className:`
                    text-sm font-semibold
                    ${i===g.id?"text-green-700":"text-slate-700"}
                  `,children:g.name})]}),s.jsx("p",{className:`
                  text-xs leading-relaxed
                  ${i===g.id?"text-green-600":"text-slate-600"}
                `,children:g.description})]}),i===g.id&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]},g.id))}),s.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[s.jsx(lc,{className:"w-4 h-4"}),s.jsxs("span",{children:["",s.jsx("strong",{children:(u=ff.find(g=>g.id===i))==null?void 0:u.name}),"",(f=ff.find(g=>g.id===i))==null?void 0:f.wordCount," "]})]})})]})}):null},Tv=({isOpen:t,onSave:e})=>{const[n,i]=_.useState("");return t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-sky-700",children:" Gemini API "}),s.jsx("input",{type:"password",className:"w-full border border-slate-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-sky-400",placeholder:" Gemini API Key...",value:n,onChange:l=>i(l.target.value)}),s.jsx("button",{className:"w-full bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 rounded transition",onClick:()=>{n.trim()&&(e(n.trim()),i(""))},children:""}),s.jsx("p",{className:"text-xs text-slate-500 mt-3",children:""})]})}):null},Fy=({onClose:t,className:e=""})=>{const[n,i]=_.useState(""),[l,o]=_.useState(!1),[u,f]=_.useState(!1),[g,m]=_.useState(!1);_.useEffect(()=>{const j=localStorage.getItem("gemini_api_key");j?(i(j),m(!0)):f(!0)},[]);const x=()=>{const j=n.trim();j&&(localStorage.setItem("gemini_api_key",j),i(j),m(!0),f(!1),t&&t())},v=()=>{f(!0),o(!0)},N=()=>{confirm(" API Key  AI ")&&(localStorage.removeItem("gemini_api_key"),i(""),m(!1),f(!0),o(!1))},w=()=>{if(g){const j=localStorage.getItem("gemini_api_key");i(j||""),f(!1),o(!1)}t&&t()},S=l?n:n.replace(/./g,"");return s.jsx("div",{className:`bg-white rounded-lg shadow-lg border border-gray-200 ${e}`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fv,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Gemini API Key "})]}),t&&s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(yk,{className:"w-5 h-5"})})]}),g&&!u&&s.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ri,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-800",children:"API Key "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"text-sm text-gray-700 bg-white px-2 py-1 rounded border flex-1",children:S}),s.jsx("button",{onClick:()=>o(!l),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:l?" API Key":" API Key",children:l?s.jsx(uy,{className:"w-4 h-4"}):s.jsx(oc,{className:"w-4 h-4"})})]})]}),u&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:l?"text":"password",value:n,onChange:j=>i(j.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" Gemini API Key"}),s.jsx("button",{onClick:()=>o(!l),className:"px-3 py-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-lg transition-colors",title:l?"":"",children:l?s.jsx(uy,{className:"w-4 h-4"}):s.jsx(oc,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",s.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google AI Studio"}),"  API Key"]})]}),s.jsx("div",{className:"flex gap-2 justify-end",children:u?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:x,disabled:!n.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:""})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:N,className:"px-4 py-2 text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:""}),s.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})}),s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:" API Key"}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:" API Key "}),s.jsx("li",{children:"  Google AI "}),s.jsx("li",{children:"  API Key"})]})]})]})})},dE=({className:t="",compact:e=!1})=>{const[n,i]=_.useState(!1),[l,o]=_.useState(!1),[u,f]=_.useState("");_.useEffect(()=>{g()},[]);const g=()=>{const x=localStorage.getItem("gemini_api_key");if(x&&x.trim()){i(!0);const v=x.length>10?`${x.substring(0,6)}...${x.substring(x.length-4)}`:"";f(v)}else i(!1),f("")},m=()=>{o(!1),g()};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`flex items-center ${t}`,children:n?s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-3 py-2 text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors text-sm",title:" API Key",children:[s.jsx(ri,{className:"w-4 h-4"}),s.jsx("span",{children:"API Key "}),s.jsx(Vd,{className:"w-3 h-3"})]}):s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-3 py-2 text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors text-sm",title:" API Key",children:[s.jsx(dy,{className:"w-4 h-4"}),s.jsx("span",{children:" API Key"}),s.jsx(Vd,{className:"w-3 h-3"})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Fy,{onClose:m})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 ${t}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fv,{className:`w-5 h-5 ${n?"text-green-600":"text-gray-400"}`}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"API Key "}),n?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ri,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-xs text-green-600",children:""}),s.jsx("code",{className:"text-xs text-gray-500",children:u})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dy,{className:"w-4 h-4 text-yellow-600"}),s.jsx("span",{className:"text-xs text-yellow-600",children:" -  AI "})]})]})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[s.jsx(Vd,{className:"w-4 h-4"}),n?"":""]})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Fy,{onClose:m})})})]})};var Qa={},Hy;function fE(){if(Hy)return Qa;Hy=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.parse=u,Qa.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,o=(()=>{const N=function(){};return N.prototype=Object.create(null),N})();function u(N,w){const S=new o,j=N.length;if(j<2)return S;const k=(w==null?void 0:w.decode)||x;let E=0;do{const L=N.indexOf("=",E);if(L===-1)break;const D=N.indexOf(";",E),O=D===-1?j:D;if(L>O){E=N.lastIndexOf(";",L-1)+1;continue}const H=f(N,E,L),I=g(N,L,H),R=N.slice(H,I);if(S[R]===void 0){let q=f(N,L+1,O),B=g(N,O,q);const W=k(N.slice(q,B));S[R]=W}E=O+1}while(E<j);return S}function f(N,w,S){do{const j=N.charCodeAt(w);if(j!==32&&j!==9)return w}while(++w<S);return S}function g(N,w,S){for(;w>S;){const j=N.charCodeAt(--w);if(j!==32&&j!==9)return w+1}return S}function m(N,w,S){const j=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(N))throw new TypeError(`argument name is invalid: ${N}`);const k=j(w);if(!e.test(k))throw new TypeError(`argument val is invalid: ${w}`);let E=N+"="+k;if(!S)return E;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);E+="; Max-Age="+S.maxAge}if(S.domain){if(!n.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);E+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);E+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);E+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(E+="; HttpOnly"),S.secure&&(E+="; Secure"),S.partitioned&&(E+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return E}function x(N){if(N.indexOf("%")===-1)return N;try{return decodeURIComponent(N)}catch{return N}}function v(N){return l.call(N)==="[object Date]"}return Qa}fE();var Gy="popstate";function mE(t={}){function e(i,l){let{pathname:o,search:u,hash:f}=i.location;return Yf("",{pathname:o,search:u,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:dl(l)}return pE(e,n,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hE(){return Math.random().toString(36).substring(2,10)}function Jy(t,e){return{usr:t.state,key:t.key,idx:e}}function Yf(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gs(e):e,state:n,key:e&&e.key||i||hE()}}function dl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function pE(t,e,n,i={}){let{window:l=document.defaultView,v5Compat:o=!1}=i,u=l.history,f="POP",g=null,m=x();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function x(){return(u.state||{idx:null}).idx}function v(){f="POP";let k=x(),E=k==null?null:k-m;m=k,g&&g({action:f,location:j.location,delta:E})}function N(k,E){f="PUSH";let L=Yf(j.location,k,E);m=x()+1;let D=Jy(L,m),O=j.createHref(L);try{u.pushState(D,"",O)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(O)}o&&g&&g({action:f,location:j.location,delta:1})}function w(k,E){f="REPLACE";let L=Yf(j.location,k,E);m=x();let D=Jy(L,m),O=j.createHref(L);u.replaceState(D,"",O),o&&g&&g({action:f,location:j.location,delta:0})}function S(k){return gE(k)}let j={get action(){return f},get location(){return t(l,u)},listen(k){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Gy,v),g=k,()=>{l.removeEventListener(Gy,v),g=null}},createHref(k){return e(l,k)},createURL:S,encodeLocation(k){let E=S(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:N,replace:w,go(k){return u.go(k)}};return j}function gE(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:dl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function jv(t,e,n="/"){return xE(t,e,n,!1)}function xE(t,e,n,i){let l=typeof e=="string"?Gs(e):e,o=Ai(l.pathname||"/",n);if(o==null)return null;let u=kv(t);yE(u);let f=null;for(let g=0;f==null&&g<u.length;++g){let m=AE(o);f=kE(u[g],m,i)}return f}function kv(t,e=[],n=[],i=""){let l=(o,u,f)=>{let g={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};g.relativePath.startsWith("/")&&(St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let m=ki([i,g.relativePath]),x=n.concat(g);o.children&&o.children.length>0&&(St(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),kv(o.children,e,x,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:TE(m,o.index),routesMeta:x})};return t.forEach((o,u)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))l(o,u);else for(let g of Ev(o.path))l(o,u,g)}),e}function Ev(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return l?[o,""]:[o];let u=Ev(i.join("/")),f=[];return f.push(...u.map(g=>g===""?o:[o,g].join("/"))),l&&f.push(...u),f.map(g=>t.startsWith("/")&&g===""?"/":g)}function yE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var vE=/^:[\w-]+$/,bE=3,wE=2,NE=1,CE=10,SE=-2,Yy=t=>t==="*";function TE(t,e){let n=t.split("/"),i=n.length;return n.some(Yy)&&(i+=SE),e&&(i+=wE),n.filter(l=>!Yy(l)).reduce((l,o)=>l+(vE.test(o)?bE:o===""?NE:CE),i)}function jE(t,e){return t.length===e.length&&t.slice(0,-1).every((i,l)=>i===e[l])?t[t.length-1]-e[e.length-1]:0}function kE(t,e,n=!1){let{routesMeta:i}=t,l={},o="/",u=[];for(let f=0;f<i.length;++f){let g=i[f],m=f===i.length-1,x=o==="/"?e:e.slice(o.length)||"/",v=uc({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},x),N=g.route;if(!v&&m&&n&&!i[i.length-1].route.index&&(v=uc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:ki([o,v.pathname]),pathnameBase:IE(ki([o,v.pathnameBase])),route:N}),v.pathnameBase!=="/"&&(o=ki([o,v.pathnameBase]))}return u}function uc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=EE(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let o=l[0],u=o.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:i.reduce((m,{paramName:x,isOptional:v},N)=>{if(x==="*"){let S=f[N]||"";u=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=f[N];return v&&!w?m[x]=void 0:m[x]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:t}}function EE(t,e=!1,n=!0){qn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function AE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ai(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function _E(t,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof t=="string"?Gs(t):t;return{pathname:n?n.startsWith("/")?n:ME(n,e):e,search:DE(i),hash:LE(l)}}function ME(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function mf(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Av(t){let e=RE(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function _v(t,e,n,i=!1){let l;typeof t=="string"?l=Gs(t):(l={...t},St(!l.pathname||!l.pathname.includes("?"),mf("?","pathname","search",l)),St(!l.pathname||!l.pathname.includes("#"),mf("#","pathname","hash",l)),St(!l.search||!l.search.includes("#"),mf("#","search","hash",l)));let o=t===""||l.pathname==="",u=o?"/":l.pathname,f;if(u==null)f=n;else{let v=e.length-1;if(!i&&u.startsWith("..")){let N=u.split("/");for(;N[0]==="..";)N.shift(),v-=1;l.pathname=N.join("/")}f=v>=0?e[v]:"/"}let g=_E(l,f),m=u&&u!=="/"&&u.endsWith("/"),x=(o||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(m||x)&&(g.pathname+="/"),g}var ki=t=>t.join("/").replace(/\/\/+/g,"/"),IE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Mv=["POST","PUT","PATCH","DELETE"];new Set(Mv);var OE=["GET",...Mv];new Set(OE);var Js=_.createContext(null);Js.displayName="DataRouter";var bc=_.createContext(null);bc.displayName="DataRouterState";var Rv=_.createContext({isTransitioning:!1});Rv.displayName="ViewTransition";var BE=_.createContext(new Map);BE.displayName="Fetchers";var UE=_.createContext(null);UE.displayName="Await";var ai=_.createContext(null);ai.displayName="Navigation";var xl=_.createContext(null);xl.displayName="Location";var li=_.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var wm=_.createContext(null);wm.displayName="RouteError";function zE(t,{relative:e}={}){St(yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(ai),{hash:l,pathname:o,search:u}=vl(t,{relative:e}),f=o;return n!=="/"&&(f=o==="/"?n:ki([n,o])),i.createHref({pathname:f,search:u,hash:l})}function yl(){return _.useContext(xl)!=null}function ar(){return St(yl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(xl).location}var Iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dv(t){_.useContext(ai).static||_.useLayoutEffect(t)}function Nm(){let{isDataRoute:t}=_.useContext(li);return t?eA():VE()}function VE(){St(yl(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Js),{basename:e,navigator:n}=_.useContext(ai),{matches:i}=_.useContext(li),{pathname:l}=ar(),o=JSON.stringify(Av(i)),u=_.useRef(!1);return Dv(()=>{u.current=!0}),_.useCallback((g,m={})=>{if(qn(u.current,Iv),!u.current)return;if(typeof g=="number"){n.go(g);return}let x=_v(g,JSON.parse(o),l,m.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ki([e,x.pathname])),(m.replace?n.replace:n.push)(x,m.state,m)},[e,n,o,l,t])}_.createContext(null);function $E(){let{matches:t}=_.useContext(li),e=t[t.length-1];return e?e.params:{}}function vl(t,{relative:e}={}){let{matches:n}=_.useContext(li),{pathname:i}=ar(),l=JSON.stringify(Av(n));return _.useMemo(()=>_v(t,JSON.parse(l),i,e==="path"),[t,l,i,e])}function qE(t,e){return Lv(t,e)}function Lv(t,e,n,i){var E;St(yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=_.useContext(ai),{matches:o}=_.useContext(li),u=o[o.length-1],f=u?u.params:{},g=u?u.pathname:"/",m=u?u.pathnameBase:"/",x=u&&u.route;{let L=x&&x.path||"";Pv(g,!x||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=ar(),N;if(e){let L=typeof e=="string"?Gs(e):e;St(m==="/"||((E=L.pathname)==null?void 0:E.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${L.pathname}" was given in the \`location\` prop.`),N=L}else N=v;let w=N.pathname||"/",S=w;if(m!=="/"){let L=m.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(L.length).join("/")}let j=jv(t,{pathname:S});qn(x||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),qn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=YE(j&&j.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:ki([m,l.encodeLocation?l.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:ki([m,l.encodeLocation?l.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,n,i);return e&&k?_.createElement(xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},k):k}function FE(){let t=XE(),e=PE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:o},"ErrorBoundary")," or"," ",_.createElement("code",{style:o},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,u)}var HE=_.createElement(FE,null),GE=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?_.createElement(li.Provider,{value:this.props.routeContext},_.createElement(wm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JE({routeContext:t,match:e,children:n}){let i=_.useContext(Js);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(li.Provider,{value:t},n)}function YE(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,o=n==null?void 0:n.errors;if(o!=null){let g=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let u=!1,f=-1;if(n)for(let g=0;g<l.length;g++){let m=l[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:x,errors:v}=n,N=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||N){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((g,m,x)=>{let v,N=!1,w=null,S=null;n&&(v=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||HE,u&&(f<0&&x===0?(Pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,S=null):f===x&&(N=!0,S=m.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,x+1)),k=()=>{let E;return v?E=w:N?E=S:m.route.Component?E=_.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=g,_.createElement(JE,{match:m,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:E})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?_.createElement(GE,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):k()},null)}function Cm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(t){let e=_.useContext(Js);return St(e,Cm(t)),e}function QE(t){let e=_.useContext(bc);return St(e,Cm(t)),e}function KE(t){let e=_.useContext(li);return St(e,Cm(t)),e}function Sm(t){let e=KE(t),n=e.matches[e.matches.length-1];return St(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function WE(){return Sm("useRouteId")}function XE(){var i;let t=_.useContext(wm),e=QE("useRouteError"),n=Sm("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function eA(){let{router:t}=ZE("useNavigate"),e=Sm("useNavigate"),n=_.useRef(!1);return Dv(()=>{n.current=!0}),_.useCallback(async(l,o={})=>{qn(n.current,Iv),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...o}))},[t,e])}var Zy={};function Pv(t,e,n){!e&&!Zy[t]&&(Zy[t]=!0,qn(!1,n))}_.memo(tA);function tA({routes:t,future:e,state:n}){return Lv(t,void 0,n,e)}function In(t){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nA({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:o=!1}){St(!yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:u,navigator:l,static:o,future:{}}),[u,l,o]);typeof n=="string"&&(n=Gs(n));let{pathname:g="/",search:m="",hash:x="",state:v=null,key:N="default"}=n,w=_.useMemo(()=>{let S=Ai(g,u);return S==null?null:{location:{pathname:S,search:m,hash:x,state:v,key:N},navigationType:i}},[u,g,m,x,v,N,i]);return qn(w!=null,`<Router basename="${u}"> is not able to match the URL "${g}${m}${x}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:_.createElement(ai.Provider,{value:f},_.createElement(xl.Provider,{children:e,value:w}))}function iA({children:t,location:e}){return qE(Zf(t),e)}function Zf(t,e=[]){let n=[];return _.Children.forEach(t,(i,l)=>{if(!_.isValidElement(i))return;let o=[...e,l];if(i.type===_.Fragment){n.push.apply(n,Zf(i.props.children,o));return}St(i.type===In,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Zf(i.props.children,o)),n.push(u)}),n}var Yo="get",Zo="application/x-www-form-urlencoded";function wc(t){return t!=null&&typeof t.tagName=="string"}function rA(t){return wc(t)&&t.tagName.toLowerCase()==="button"}function sA(t){return wc(t)&&t.tagName.toLowerCase()==="form"}function aA(t){return wc(t)&&t.tagName.toLowerCase()==="input"}function lA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oA(t,e){return t.button===0&&(!e||e==="_self")&&!lA(t)}function Qf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function cA(t,e){let n=Qf(t);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(o=>{n.append(l,o)})}),n}var Po=null;function uA(){if(Po===null)try{new FormData(document.createElement("form"),0),Po=!1}catch{Po=!0}return Po}var dA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hf(t){return t!=null&&!dA.has(t)?(qn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zo}"`),null):t}function fA(t,e){let n,i,l,o,u;if(sA(t)){let f=t.getAttribute("action");i=f?Ai(f,e):null,n=t.getAttribute("method")||Yo,l=hf(t.getAttribute("enctype"))||Zo,o=new FormData(t)}else if(rA(t)||aA(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||f.getAttribute("action");if(i=g?Ai(g,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||Yo,l=hf(t.getAttribute("formenctype"))||hf(f.getAttribute("enctype"))||Zo,o=new FormData(f,t),!uA()){let{name:m,type:x,value:v}=t;if(x==="image"){let N=m?`${m}.`:"";o.append(`${N}x`,"0"),o.append(`${N}y`,"0")}else m&&o.append(m,v)}}else{if(wc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yo,i=null,l=Zo,u=t}return o&&l==="text/plain"&&(u=o,o=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:o,body:u}}function Tm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function mA(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pA(t,e,n){let i=await Promise.all(t.map(async l=>{let o=e.routes[l.route.id];if(o){let u=await mA(o,n);return u.links?u.links():[]}return[]}));return vA(i.flat(1).filter(hA).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Qy(t,e,n,i,l,o){let u=(g,m)=>n[m]?g.route.id!==n[m].route.id:!0,f=(g,m)=>{var x;return n[m].pathname!==g.pathname||((x=n[m].route.path)==null?void 0:x.endsWith("*"))&&n[m].params["*"]!==g.params["*"]};return o==="assets"?e.filter((g,m)=>u(g,m)||f(g,m)):o==="data"?e.filter((g,m)=>{var v;let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(u(g,m)||f(g,m))return!0;if(g.route.shouldRevalidate){let N=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function gA(t,e,{includeHydrateFallback:n}={}){return xA(t.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function xA(t){return[...new Set(t)]}function yA(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function vA(t,e){let n=new Set;return new Set(e),t.reduce((i,l)=>{let o=JSON.stringify(yA(l));return n.has(o)||(n.add(o),i.push({key:o,link:l})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bA=new Set([100,101,204,205]);function wA(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ai(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Ov(){let t=_.useContext(Js);return Tm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function NA(){let t=_.useContext(bc);return Tm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jm=_.createContext(void 0);jm.displayName="FrameworkContext";function Bv(){let t=_.useContext(jm);return Tm(t,"You must render this element inside a <HydratedRouter> element"),t}function CA(t,e){let n=_.useContext(jm),[i,l]=_.useState(!1),[o,u]=_.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:m,onMouseLeave:x,onTouchStart:v}=e,N=_.useRef(null);_.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let j=E=>{E.forEach(L=>{u(L.isIntersecting)})},k=new IntersectionObserver(j,{threshold:.5});return N.current&&k.observe(N.current),()=>{k.disconnect()}}},[t]),_.useEffect(()=>{if(i){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[i]);let w=()=>{l(!0)},S=()=>{l(!1),u(!1)};return n?t!=="intent"?[o,N,{}]:[o,N,{onFocus:Ka(f,w),onBlur:Ka(g,S),onMouseEnter:Ka(m,w),onMouseLeave:Ka(x,S),onTouchStart:Ka(v,w)}]:[!1,N,{}]}function Ka(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SA({page:t,...e}){let{router:n}=Ov(),i=_.useMemo(()=>jv(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?_.createElement(jA,{page:t,matches:i,...e}):null}function TA(t){let{manifest:e,routeModules:n}=Bv(),[i,l]=_.useState([]);return _.useEffect(()=>{let o=!1;return pA(t,e,n).then(u=>{o||l(u)}),()=>{o=!0}},[t,e,n]),i}function jA({page:t,matches:e,...n}){let i=ar(),{manifest:l,routeModules:o}=Bv(),{basename:u}=Ov(),{loaderData:f,matches:g}=NA(),m=_.useMemo(()=>Qy(t,e,g,l,i,"data"),[t,e,g,l,i]),x=_.useMemo(()=>Qy(t,e,g,l,i,"assets"),[t,e,g,l,i]),v=_.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,j=!1;if(e.forEach(E=>{var D;let L=l.routes[E.route.id];!L||!L.hasLoader||(!m.some(O=>O.route.id===E.route.id)&&E.route.id in f&&((D=o[E.route.id])!=null&&D.shouldRevalidate)||L.hasClientLoader?j=!0:S.add(E.route.id))}),S.size===0)return[];let k=wA(t,u);return j&&S.size>0&&k.searchParams.set("_routes",e.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[u,f,i,l,m,e,t,o]),N=_.useMemo(()=>gA(x,l),[x,l]),w=TA(x);return _.createElement(_.Fragment,null,v.map(S=>_.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),N.map(S=>_.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:j})=>_.createElement("link",{key:S,...j})))}function kA(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Uv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uv&&(window.__reactRouterVersion="7.6.2")}catch{}function EA({basename:t,children:e,window:n}){let i=_.useRef();i.current==null&&(i.current=mE({window:n,v5Compat:!0}));let l=i.current,[o,u]=_.useState({action:l.action,location:l.location}),f=_.useCallback(g=>{_.startTransition(()=>u(g))},[u]);return _.useLayoutEffect(()=>l.listen(f),[l,f]),_.createElement(nA,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:l})}var zv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vv=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:o,replace:u,state:f,target:g,to:m,preventScrollReset:x,viewTransition:v,...N},w){let{basename:S}=_.useContext(ai),j=typeof m=="string"&&zv.test(m),k,E=!1;if(typeof m=="string"&&j&&(k=m,Uv))try{let B=new URL(window.location.href),W=m.startsWith("//")?new URL(B.protocol+m):new URL(m),G=Ai(W.pathname,S);W.origin===B.origin&&G!=null?m=G+W.search+W.hash:E=!0}catch{qn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=zE(m,{relative:l}),[D,O,H]=CA(i,N),I=RA(m,{replace:u,state:f,target:g,preventScrollReset:x,relative:l,viewTransition:v});function R(B){e&&e(B),B.defaultPrevented||I(B)}let q=_.createElement("a",{...N,...H,href:k||L,onClick:E||o?e:R,ref:kA(w,O),target:g,"data-discover":!j&&n==="render"?"true":void 0});return D&&!j?_.createElement(_.Fragment,null,q,_.createElement(SA,{page:L})):q});Vv.displayName="Link";var AA=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:o,to:u,viewTransition:f,children:g,...m},x){let v=vl(u,{relative:m.relative}),N=ar(),w=_.useContext(bc),{navigator:S,basename:j}=_.useContext(ai),k=w!=null&&OA(v)&&f===!0,E=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,L=N.pathname,D=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(L=L.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&j&&(D=Ai(D,j)||D);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let H=L===E||!l&&L.startsWith(E)&&L.charAt(O)==="/",I=D!=null&&(D===E||!l&&D.startsWith(E)&&D.charAt(E.length)==="/"),R={isActive:H,isPending:I,isTransitioning:k},q=H?e:void 0,B;typeof i=="function"?B=i(R):B=[i,H?"active":null,I?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let W=typeof o=="function"?o(R):o;return _.createElement(Vv,{...m,"aria-current":q,className:B,ref:x,style:W,to:u,viewTransition:f},typeof g=="function"?g(R):g)});AA.displayName="NavLink";var _A=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:o,method:u=Yo,action:f,onSubmit:g,relative:m,preventScrollReset:x,viewTransition:v,...N},w)=>{let S=LA(),j=PA(f,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",E=typeof f=="string"&&zv.test(f),L=D=>{if(g&&g(D),D.defaultPrevented)return;D.preventDefault();let O=D.nativeEvent.submitter,H=(O==null?void 0:O.getAttribute("formmethod"))||u;S(O||D.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:l,state:o,relative:m,preventScrollReset:x,viewTransition:v})};return _.createElement("form",{ref:w,method:k,action:j,onSubmit:i?g:L,...N,"data-discover":!E&&t==="render"?"true":void 0})});_A.displayName="Form";function MA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $v(t){let e=_.useContext(Js);return St(e,MA(t)),e}function RA(t,{target:e,replace:n,state:i,preventScrollReset:l,relative:o,viewTransition:u}={}){let f=Nm(),g=ar(),m=vl(t,{relative:o});return _.useCallback(x=>{if(oA(x,e)){x.preventDefault();let v=n!==void 0?n:dl(g)===dl(m);f(t,{replace:v,state:i,preventScrollReset:l,relative:o,viewTransition:u})}},[g,f,m,n,i,e,t,l,o,u])}function Pr(t){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(Qf(t)),n=_.useRef(!1),i=ar(),l=_.useMemo(()=>cA(i.search,n.current?null:e.current),[i.search]),o=Nm(),u=_.useCallback((f,g)=>{const m=Qf(typeof f=="function"?f(l):f);n.current=!0,o("?"+m,g)},[o,l]);return[l,u]}var IA=0,DA=()=>`__${String(++IA)}__`;function LA(){let{router:t}=$v("useSubmit"),{basename:e}=_.useContext(ai),n=WE();return _.useCallback(async(i,l={})=>{let{action:o,method:u,encType:f,formData:g,body:m}=fA(i,e);if(l.navigate===!1){let x=l.fetcherKey||DA();await t.fetch(x,n,l.action||o,{preventScrollReset:l.preventScrollReset,formData:g,body:m,formMethod:l.method||u,formEncType:l.encType||f,flushSync:l.flushSync})}else await t.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:g,body:m,formMethod:l.method||u,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,n])}function PA(t,{relative:e}={}){let{basename:n}=_.useContext(ai),i=_.useContext(li);St(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),o={...vl(t||".",{relative:e})},u=ar();if(t==null){o.search=u.search;let f=new URLSearchParams(o.search),g=f.getAll("index");if(g.some(x=>x==="")){f.delete("index"),g.filter(v=>v).forEach(v=>f.append("index",v));let x=f.toString();o.search=x?`?${x}`:""}}return(!t||t===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ki([n,o.pathname])),dl(o)}function OA(t,e={}){let n=_.useContext(Rv);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=$v("useViewTransitionState"),l=vl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ai(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Ai(n.nextLocation.pathname,i)||n.nextLocation.pathname;return uc(l.pathname,u)!=null||uc(l.pathname,o)!=null}[...bA];class BA{constructor(){this.dbName="AILearningPageGenerator",this.version=1,this.storeName="lessonPlans",this.db=null}async init(){return new Promise((e,n)=>{const i=indexedDB.open(this.dbName,this.version);i.onerror=()=>{n(new Error("Failed to open IndexedDB"))},i.onsuccess=l=>{this.db=l.target.result,e()},i.onupgradeneeded=l=>{const o=l.target.result;if(!o.objectStoreNames.contains(this.storeName)){const u=o.createObjectStore(this.storeName,{keyPath:"id"});u.createIndex("topic","topic",{unique:!1}),u.createIndex("createdAt","createdAt",{unique:!1}),u.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1})}}})}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("Database not initialized");return this.db}async saveLessonPlan(e){const n=await this.ensureDB();return new Promise((i,l)=>{const f=n.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);f.onsuccess=()=>i(),f.onerror=()=>l(new Error("Failed to save lesson plan"))})}async getAllLessonPlans(){const e=await this.ensureDB();return new Promise((n,i)=>{const f=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("lastAccessedAt").openCursor(null,"prev"),g=[];f.onsuccess=m=>{const x=m.target.result;x?(g.push(x.value),x.continue()):n(g)},f.onerror=()=>i(new Error("Failed to get lesson plans"))})}async getLessonPlan(e){const n=await this.ensureDB();return new Promise((i,l)=>{const f=n.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);f.onsuccess=()=>{const g=f.result;i(g||null)},f.onerror=()=>l(new Error("Failed to get lesson plan"))})}async updateLastAccessed(e){const n=await this.getLessonPlan(e);n&&(n.lastAccessedAt=new Date().toISOString(),await this.saveLessonPlan(n))}async deleteLessonPlan(e){const n=await this.ensureDB();return new Promise((i,l)=>{const f=n.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);f.onsuccess=()=>i(),f.onerror=()=>l(new Error("Failed to delete lesson plan"))})}async searchLessonPlans(e){const n=await this.getAllLessonPlans(),i=e.toLowerCase();return n.filter(l=>l.topic.toLowerCase().includes(i))}async getSharedLessonPlans(){return(await this.getAllLessonPlans()).filter(n=>{var i;return((i=n.metadata)==null?void 0:i.isShared)===!0})}async getLocalLessonPlans(){return(await this.getAllLessonPlans()).filter(n=>{var i;return!((i=n.metadata)!=null&&i.isShared)})}async cleanupOldLessonPlans(e=50){const n=await this.getAllLessonPlans();if(n.length>e){const i=n.slice(e);for(const l of i)await this.deleteLessonPlan(l.id)}}async getStorageStats(){var n,i;const e=await this.getAllLessonPlans();return{totalCount:e.length,totalSizeEstimate:JSON.stringify(e).length,oldestPlan:(n=e[e.length-1])==null?void 0:n.topic,newestPlan:(i=e[0])==null?void 0:i.topic}}}const Zt=new BA,UA=t=>{const e=Date.now(),n=Math.random().toString(36).substr(2,9);return`lesson_${e}_${n}`},zA=(t,e)=>{const n=new Date().toISOString();return{id:UA(),topic:t,createdAt:n,lastAccessedAt:n,content:e,metadata:{totalSections:[e.learningObjectives,e.contentBreakdown,e.confusionPoints,e.classroomActivities,e.quiz,e.writingPractice].filter(Boolean).length,hasQuiz:!!e.quiz,hasWriting:!!e.writingPractice}}},VA=({quiz:t,topic:e,apiKey:n,supportsDiagnostic:i=!1,quizBinId:l})=>{const[o,u]=_.useState(Pt.Easy),[f,g]=_.useState([]),[m,x]=_.useState(!1),[v,N]=_.useState(""),[w,S]=_.useState(!1),[j,k]=_.useState(""),[E,L]=_.useState(!1),[D,O]=_.useState(!1),H=_.useCallback((z,$,Y,P,Z,fe)=>{if(!i)return;const Q=`${o}-${z}-${$}`,C={questionId:Q,questionType:z,difficulty:o.toLowerCase(),userAnswer:Y,correctAnswer:P,isCorrect:Z,responseTime:fe,attempts:1};g(V=>{const ee=V.findIndex(M=>M.questionId===Q);if(ee>=0){const M=[...V];return M[ee]={...M[ee],userAnswer:Y,isCorrect:Z,attempts:(M[ee].attempts||1)+1},M}return[...V,C]})},[o,i]),I=(z,$)=>{switch(z){case"trueFalse":return $.isTrue;case"multipleChoice":return $.options[$.correctAnswerIndex];case"fillInTheBlanks":return $.correctAnswers;case"sentenceScramble":return $.originalSentence;case"memoryCardGame":return $.pairs;default:return null}},R=()=>{const z=o.toLowerCase();return f.filter($=>$.difficulty===z)},q=_.useCallback(async()=>{const z=R();if(z.length===0){alert("");return}if(!v.trim()){L(!0);return}S(!0);try{const $=dv(z),Y=o===Pt.Easy?"":o===Pt.Normal?"":"",P=(t==null?void 0:t[o])||{},Z=await Sk({studentName:v.trim(),topic:e,difficulty:Y,responses:z,overallScore:$,completedAt:new Date().toISOString(),quizBinId:l,quizContent:P,metadata:{totalQuestions:z.length,correctAnswers:z.filter(C=>C.isCorrect).length,selectedDifficulty:o}}),Q=`${window.location.origin}/ai-page-gen/student-results?binId=${Z}`;k(Q),navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(Q),alert("")):alert("")}catch($){console.error(":",$),alert("")}finally{S(!1)}},[R,v,e,o,l]);if(m&&i&&n&&R().length>0)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Is,{className:"w-8 h-8 text-indigo-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),s.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 text-sm font-medium rounded-full",children:[o===Pt.Easy?"":o===Pt.Normal?"":""," "]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx($n,{className:"w-5 h-5"}),s.jsx("span",{className:"text-lg font-medium",children:e})]})]})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsx(xm,{topic:`${e} (${o===Pt.Easy?"":o===Pt.Normal?"":""})`,apiKey:n,mode:"student",initialResponses:R(),onClose:()=>x(!1),onRetakeQuiz:()=>{const z=o.toLowerCase();g($=>$.filter(Y=>Y.difficulty!==z)),x(!1)},onContinueLearning:()=>x(!1)})})]});if(!t)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sl,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 text-lg",children:""})]});const B=t[o],W=[{key:Pt.Easy,label:"",color:"bg-green-500 hover:bg-green-600"},{key:Pt.Normal,label:"",color:"bg-yellow-500 hover:bg-yellow-600"},{key:Pt.Hard,label:"",color:"bg-red-500 hover:bg-red-600"}],G={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""},J=(z,$)=>{if(!$||$.length===0)return null;const Y=P=>i?(Z,fe,Q)=>{const C=I(z,$[P]);H(z,P,Z,C,fe,Q)}:void 0;switch(z){case"trueFalse":return s.jsx("div",{className:"space-y-4",children:$.map((P,Z)=>s.jsx(hm,{question:P,itemNumber:Z+1,onAnswer:Y(Z)},`${o}-tf-${Z}`))});case"multipleChoice":return s.jsx("div",{className:"space-y-4",children:$.map((P,Z)=>s.jsx(pm,{question:P,itemNumber:Z+1,onAnswer:Y(Z)},`${o}-mc-${Z}`))});case"fillInTheBlanks":return s.jsx("div",{className:"space-y-4",children:$.map((P,Z)=>s.jsx(mv,{question:P,itemNumber:Z+1,onAnswer:Y(Z)},`${o}-fb-${Z}`))});case"sentenceScramble":return s.jsx("div",{className:"space-y-4",children:$.map((P,Z)=>s.jsx(hv,{question:P,itemNumber:Z+1,onAnswer:Y(Z)},`${o}-ss-${Z}`))});case"memoryCardGame":return s.jsx("div",{className:"space-y-4",children:$.map((P,Z)=>s.jsx(gm,{question:P,itemNumber:Z+1,onAnswer:Y(Z)},`${o}-mcg-${Z}`))});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sl,{className:"w-8 h-8 text-indigo-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx($n,{className:"w-5 h-5"}),s.jsx("span",{className:"text-lg font-medium",children:e}),i&&s.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:" AI "})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[i&&R().length>0&&s.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx(Is,{className:"w-5 h-5"})," (",R().length,")"]}),R().length>0&&s.jsxs("button",{onClick:q,disabled:w,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),w?"...":` (${R().length})`]})]})]})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Is,{className:"w-5 h-5 text-blue-400 mt-0.5"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm text-blue-700 font-medium",children:" AI "}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:""})]})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:""}),s.jsx("div",{className:"flex flex-wrap gap-3",children:W.map(({key:z,label:$,color:Y})=>s.jsx("button",{onClick:()=>u(z),className:`px-6 py-3 rounded-lg text-white font-medium transition-all transform hover:scale-105 shadow-md
                  ${o===z?`${Y} ring-4 ring-opacity-50`:"bg-gray-400 hover:bg-gray-500"}
                `,children:$},z))})]}),B&&s.jsx("div",{className:"space-y-8",children:Object.keys(G).map(z=>{const $=B[z],Y=J(z,$);return Y?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-3 border-b border-gray-200",children:[s.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:G[z]})]}),Y]},z):null})}),(!B||Object.values(B).every(z=>!z||z.length===0))&&s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsx(sl,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 text-lg",children:""}),s.jsx("p",{className:"text-slate-500 text-sm mt-2",children:""})]})})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:z=>{z.target===z.currentTarget&&L(!1)},children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),s.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:""}),s.jsx("input",{type:"text",value:v,onChange:z=>N(z.target.value),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",onKeyPress:z=>z.key==="Enter"&&q()}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:""}),s.jsx("button",{onClick:q,disabled:!v.trim()||w,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?"...":""})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:z=>{z.target===z.currentTarget&&(k(""),O(!1))},children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" "}),s.jsx("button",{onClick:()=>{k(""),O(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:""}),s.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:j,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded text-sm"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsx("button",{onClick:async()=>{navigator.clipboard&&window.isSecureContext&&(await navigator.clipboard.writeText(j),alert(""))},className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:""}),s.jsxs("button",{onClick:()=>O(!D),className:"flex-1 px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors flex items-center justify-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5H8.25v1.5H13.5V13.5ZM13.5 16.5H8.25V18H13.5v-1.5ZM16.5 16.5h1.5V18h-1.5v-1.5ZM16.5 13.5h1.5v1.5h-1.5v-1.5Z"})]})," QR Code"]})]})]})}),D&&s.jsx("div",{className:"mb-4 flex justify-center",children:s.jsx(As,{url:j,title:" QR Code",size:200,className:"bg-white"})}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[" ",s.jsx("strong",{children:""}),s.jsx("br",{})," ",v," ",e,"(",o===Pt.Easy?"":o===Pt.Normal?"":"",")  AI "]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>{k(""),O(!1)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:""})})]})}),s.jsx("footer",{className:"bg-white border-t mt-12 py-6",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:" AI   "})})})]})},$A=()=>{const[t]=Pr(),e=t.get("binId"),[n,i]=qe.useState(null),[l,o]=qe.useState(""),[u,f]=qe.useState(""),[g,m]=qe.useState(!1),[x,v]=qe.useState(!1),[N,w]=qe.useState("");return qe.useEffect(()=>{if(!e){w("ID");return}(async()=>{v(!0);try{const j=await wk(e);i(j.quiz),o(j.topic);let k=j.apiKey||"";try{const E=await bv(t);E&&(k=E,console.log(" URL  API Key "))}catch(E){console.warn(" URL API Key :",E)}f(k),m(!!k)}catch(j){w(j.message||"")}finally{v(!1)}})()},[e,t]),x?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dn,{}),s.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):N?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-4",children:N}),s.jsx("p",{className:"text-sm text-gray-500",children:""})]})}):!n||!l?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-4 text-center",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]})}):s.jsx(VA,{quiz:n,topic:l,apiKey:u,supportsDiagnostic:g,quizBinId:e})},qA=()=>{const[t]=Pr(),[e,n]=_.useState(null),[i,l]=_.useState(!0),[o,u]=_.useState(null),[f,g]=_.useState(""),[m,x]=_.useState("manual"),v=t.get("binId");_.useEffect(()=>{(async()=>{if(!v){u(" ID"),l(!1);return}try{l(!0);const S=await Ck(v);n(S.writingPractice);try{const j=await bv(t);j&&(g(j),x("url"),localStorage.setItem("gemini_api_key",j),console.log(" URL  API Key  AI "))}catch(j){console.warn(" URL API Key :",j)}}catch(S){console.error(":",S),u("")}finally{l(!1)}})()},[v,t]),_.useEffect(()=>{if(!f){const w=localStorage.getItem("gemini_api_key");w&&(g(w),x("localStorage"))}},[]);const N=w=>{w.preventDefault();const S=f.trim();S&&(localStorage.setItem("gemini_api_key",S),g(S),x("manual"))};return i?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dn,{}),s.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-6",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 text-blue-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:" "}),s.jsx("p",{className:"text-gray-600",children:" AI "})]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]})]}),!f&&s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:" API Key  AI "}),s.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:[" Google Gemini API Key  AI ",s.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:" API Key"})]})]})]}),s.jsxs("form",{onSubmit:N,className:"flex gap-3",children:[s.jsx("input",{type:"password",value:f,onChange:w=>g(w.target.value),placeholder:" Gemini API Key",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{type:"submit",disabled:!f.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""})]})]}),f&&s.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"API Key  AI "}),m==="url"&&s.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:" -  AI "})]}),m==="localStorage"&&s.jsxs("div",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:""})]})]})]}),s.jsx("button",{onClick:()=>{localStorage.removeItem("gemini_api_key"),g(""),x("manual")},className:"text-sm text-green-600 hover:text-green-800 underline",children:""})]})})]}),e&&s.jsx(xv,{content:e,apiKey:f,isStudentMode:!0}),s.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[s.jsx("p",{children:"  Google Gemini AI "}),s.jsx("p",{className:"mt-1",children:"  AI "})]})]})})},FA=({responses:t,quizContent:e})=>{const n=(u,f)=>{if(!e)return null;const g=u.questionType,m=e[g];if(!m||!Array.isArray(m))return null;let x=f;if(u.questionId&&typeof u.questionId=="string"){const v=u.questionId.match(/\d+$/);v&&(x=parseInt(v[0]))}return m[x]||null},i=(u,f)=>{var g,m;if(!u)return s.jsx("div",{className:"text-gray-400 italic",children:""});switch(f){case"trueFalse":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:" :"}),s.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:u.statement}),u.explanation&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("div",{className:"font-medium",children:": "}),s.jsx("div",{children:u.explanation})]})]});case"multipleChoice":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:" :"}),s.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:u.question}),s.jsx("div",{className:"font-medium",children:":"}),s.jsx("div",{className:"space-y-1",children:(g=u.options)==null?void 0:g.map((x,v)=>s.jsxs("div",{className:`p-2 rounded text-sm ${v===u.correctAnswerIndex?"bg-green-100 border border-green-300":"bg-gray-50"}`,children:[String.fromCharCode(65+v),". ",x,v===u.correctAnswerIndex&&s.jsx("span",{className:"ml-2 text-green-600",children:" "})]},v))})]});case"fillInTheBlanks":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:" :"}),s.jsx("div",{className:"bg-blue-50 p-3 rounded text-gray-800",children:u.sentence}),s.jsxs("div",{className:"text-sm text-green-700",children:[s.jsx("span",{className:"font-medium",children:": "}),Array.isArray(u.correctAnswers)?u.correctAnswers.join(", "):u.correctAnswers]})]});case"sentenceScramble":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:" :"}),s.jsx("div",{className:"text-sm text-gray-600",children:":"}),s.jsx("div",{className:"bg-yellow-50 p-2 rounded text-sm",children:Array.isArray(u.scrambledWords)?u.scrambledWords.join(" | "):""}),s.jsxs("div",{className:"text-sm text-green-700",children:[s.jsx("span",{className:"font-medium",children:": "}),u.correctSentence]})]});case"memoryCardGame":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:" :"}),u.instructions&&s.jsx("div",{className:"text-sm text-sky-700 bg-sky-50 p-2 rounded",children:u.instructions}),s.jsx("div",{className:"space-y-1",children:(m=u.pairs)==null?void 0:m.map((x,v)=>s.jsxs("div",{className:"flex items-center justify-between bg-purple-50 p-2 rounded text-sm",children:[s.jsxs("span",{children:[" ",x.question]}),s.jsx("span",{className:"text-purple-600",children:""}),s.jsxs("span",{children:[" ",x.answer]})]},v))})]});default:return s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(u,null,2)})}},l=(u,f)=>f==="memoryCardGame"&&typeof u=="number"?`: ${u}`:f==="multipleChoice"&&typeof u=="number"?` ${String.fromCharCode(65+u)} (${u})`:typeof u=="object"?JSON.stringify(u,null,2):String(u),o={trueFalse:"",multipleChoice:"",fillInTheBlanks:"",sentenceScramble:"",memoryCardGame:""};return s.jsx("div",{className:"space-y-6",children:t.map((u,f)=>{const g=n(u,f);return s.jsxs("div",{className:`p-6 rounded-lg border-2 ${u.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[u.isCorrect?s.jsx(ri,{className:"w-5 h-5 text-green-600"}):s.jsx(Ir,{className:"w-5 h-5 text-red-600"}),s.jsxs("span",{className:"font-bold text-lg text-gray-800",children:[" ",f+1,"  - ",o[u.questionType]||u.questionType]})]}),s.jsx("div",{className:"text-sm text-gray-500",children:u.attempts&&u.attempts>1&&` ${u.attempts} `})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:" :"}),s.jsx("div",{className:"border-l-4 border-blue-300 pl-4",children:i(g,u.questionType)})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:" :"}),s.jsx("div",{className:"bg-white p-3 rounded border",children:l(u.userAnswer,u.questionType)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:u.isCorrect?" ":" "}),s.jsx("div",{className:`p-3 rounded border ${u.isCorrect?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:u.isCorrect?"":""})]})]})]},u.questionId||f)})})},HA=()=>{var I,R;const[t]=Pr(),e=t.get("binId"),[n,i]=_.useState(null),[l,o]=_.useState(!0),[u,f]=_.useState(null),[g,m]=_.useState(""),[x,v]=_.useState(!1),[N,w]=_.useState(!1),[S,j]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!e){f("ID"),o(!1);return}try{o(!0);const B=await pv(e);i(B),v(!!B.diagnosticReport)}catch(B){console.error(":",B),f(B instanceof Error?B.message:"")}finally{o(!1)}})()},[e]),_.useEffect(()=>{const q=localStorage.getItem("gemini_api_key");q?(m(q),console.log(" localStorage  API Key")):console.log(" API Key")},[]);const k=q=>{q.preventDefault();const B=g.trim();B&&(localStorage.setItem("gemini_api_key",B),m(B),j(!1))},E=()=>{if(!g){j(!0);return}w(!0)},L=()=>{n!=null&&n.diagnosticReport&&w(!0)};if(l)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dn,{}),s.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})});if(u)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-red-500 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-6",children:u}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})});if(N&&n)return s.jsx(xm,{topic:`${n.topic} (${n.difficulty}) - ${n.studentName}`,apiKey:g,mode:"teacher",initialResponses:n.responses,quizData:n.quizContent?{topic:n.topic,[((R=(I=n.metadata)==null?void 0:I.selectedDifficulty)==null?void 0:R.toLowerCase())||"normal"]:n.quizContent}:void 0,existingReport:n.diagnosticReport,resultsBinId:e,onClose:()=>w(!1),onReportSaved:q=>{i(B=>B?{...B,diagnosticReport:q}:null),v(!0)}});if(!n)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 text-gray-400 mx-auto mb-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]})});const D=n.responses.filter(q=>q.isCorrect).length,O=n.responses.length,H=new Date(n.completedAt).toLocaleString("zh-TW");return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($n,{className:"w-8 h-8 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]})]}),s.jsx("div",{className:"flex items-center gap-2 text-gray-600",children:s.jsx("span",{className:"text-lg font-medium",children:""})})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:[" ",n.studentName||""," "]}),s.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-4 h-4"}),s.jsxs("span",{children:["",n.topic]})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["",n.difficulty]})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gf,{className:"w-4 h-4"}),s.jsxs("span",{children:["",H]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[n.overallScore,"%"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[D,"/",O," "]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ri,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:D}),s.jsx("div",{className:"text-sm text-green-600",children:""})]})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ir,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-700",children:O-D}),s.jsx("div",{className:"text-sm text-red-600",children:""})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Is,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[n.overallScore,"%"]}),s.jsx("div",{className:"text-sm text-blue-600",children:""})]})]})})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex gap-4 items-center",children:[x?s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-medium",children:[s.jsx(Is,{className:"w-5 h-5"})," AI "]}),s.jsx("button",{onClick:E,className:"flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-medium text-sm",children:" "})]}):s.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-medium",children:[s.jsx(Is,{className:"w-5 h-5"})," AI "]}),g?s.jsx("div",{className:"text-sm text-green-600 flex items-center gap-1",children:" API Key  AI "}):s.jsx("div",{className:"text-sm text-amber-600 flex items-center gap-1",children:"  API Key  AI "})]}),s.jsx("div",{className:"text-xs text-gray-500",children:x?s.jsx("span",{children:" "}):g?s.jsx("span",{children:"  API Key"}):null})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  ()"}),s.jsx(FA,{responses:n.responses,quizContent:n.quizContent})]})]}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:q=>{q.target===q.currentTarget&&j(!1)},children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" API Key"}),s.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("p",{className:"text-gray-600 mb-4",children:[" AI  Google Gemini API Key",s.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600 ml-1",children:" API Key"})]}),s.jsxs("form",{onSubmit:k,children:[s.jsx("input",{type:"password",value:g,onChange:q=>m(q.target.value),placeholder:" Gemini API Key",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:""}),s.jsx("button",{type:"submit",disabled:!g.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""})]})]})]})})]})},GA=()=>{const[t,e]=_.useState([]),[n,i]=_.useState(!0),[l,o]=_.useState(null),[u,f]=_.useState(""),[g,m]=_.useState(null),[x,v]=_.useState("list"),[N,w]=_.useState(null),[S,j]=_.useState(null);_.useEffect(()=>{const R=localStorage.getItem("gemini_api_key");j(R),k()},[]);const k=async()=>{try{i(!0),o(null),await Zt.init();const R=await Zt.getAllLessonPlans();e(R)}catch(R){console.error(":",R),o("")}finally{i(!1)}},E=async()=>{if(!u.trim()){await k();return}try{i(!0);const R=await Zt.searchLessonPlans(u);e(R)}catch(R){console.error(":",R),o("")}finally{i(!1)}},L=async R=>{m(R),v("view");try{await Zt.updateLastAccessed(R.id)}catch(q){console.error(":",q)}},D=async R=>{if(!S){alert(" API Key ");return}w(R.id);try{const q={...R.content,topic:R.topic,selectedLevel:R.content.selectedLevel||null,selectedVocabularyLevel:R.content.selectedVocabularyLevel||null},B=await cc(q,S,!0),W=`${window.location.origin}/ai-page-gen/share?binId=${B}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(W),alert("");else{const G=document.createElement("textarea");G.value=W,document.body.appendChild(G),G.select(),document.execCommand("copy"),document.body.removeChild(G),alert(`\\n${W}`)}await Zt.updateLastAccessed(R.id)}catch(q){console.error(":",q),alert("")}finally{w(null)}},O=async R=>{if(confirm(`${R.topic}`))try{await Zt.deleteLessonPlan(R.id),await k()}catch(q){console.error(":",q),alert("")}},H=R=>new Date(R).toLocaleString("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=u.trim()?t.filter(R=>R.topic.toLowerCase().includes(u.toLowerCase())):t;return x==="view"&&g?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>{v("list"),m(null)},className:"flex items-center gap-2 px-3 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),""]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:g.topic}),s.jsxs("p",{className:"text-sm text-gray-600",children:[" ",H(g.createdAt)]})]}),s.jsxs("button",{onClick:()=>D(g),disabled:N===g.id,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[N===g.id?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(zd,{className:"w-4 h-4"}),""]})]})})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:s.jsx(bm,{content:g.content,topic:g.topic,selectedLevel:g.content.selectedLevel||null,selectedVocabularyLevel:g.content.selectedVocabularyLevel||null,apiKey:S||void 0,onContentUpdate:async R=>{const q={...g,content:R,lastAccessedAt:new Date().toISOString()};m(q);try{await Zt.saveLessonPlan(q),console.log(" IndexedDB")}catch(B){console.error(" IndexedDB :",B)}}})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($n,{className:"w-8 h-8 text-indigo-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",children:[s.jsx(Rr,{className:"w-5 h-5"}),""]})]}),s.jsx("p",{className:"text-gray-600",children:""})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"text",value:u,onChange:R=>f(R.target.value),placeholder:"...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyPress:R=>R.key==="Enter"&&E()}),s.jsx("button",{onClick:E,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""}),s.jsx("button",{onClick:k,className:"px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:""})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:s.jsx($n,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length}),s.jsx("p",{className:"text-gray-600",children:""})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Gf,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(R=>{var q;return(q=R.metadata)==null?void 0:q.hasQuiz}).length}),s.jsx("p",{className:"text-gray-600",children:""})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-purple-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(R=>{var q;return(q=R.metadata)==null?void 0:q.hasWriting}).length}),s.jsx("p",{className:"text-gray-600",children:""})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:u.trim()?` (${I.length})`:""})}),n?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(dn,{}),s.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]}):l?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:l}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]}):I.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx($n,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg mb-2",children:u.trim()?"":""}),s.jsx("p",{className:"text-gray-500",children:u.trim()?"":""})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:I.map(R=>{var q,B,W,G;return s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.topic}),((q=R.metadata)==null?void 0:q.isShared)&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(zd,{className:"w-3 h-3"}),""]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gf,{className:"w-4 h-4"}),"",H(R.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oc,{className:"w-4 h-4"}),"",H(R.lastAccessedAt)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full",children:[((B=R.metadata)==null?void 0:B.totalSections)||0," "]}),((W=R.metadata)==null?void 0:W.hasQuiz)&&s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:""}),((G=R.metadata)==null?void 0:G.hasWriting)&&s.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsxs("button",{onClick:()=>L(R),className:"flex items-center gap-2 px-3 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:[s.jsx(oc,{className:"w-4 h-4"}),""]}),s.jsxs("a",{href:`/ai-page-gen/teacher-interactive-prep?contentId=${R.id}`,className:"flex items-center gap-2 px-3 py-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",target:"_blank",rel:"noopener noreferrer",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),""]}),s.jsxs("button",{onClick:()=>D(R),disabled:N===R.id,className:"flex items-center gap-2 px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[N===R.id?s.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):s.jsx(zd,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:()=>O(R),className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[s.jsx(xk,{className:"w-4 h-4"}),""]})]})]})},R.id)})})]})]})]})};function JA(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const YA=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZA=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,QA={};function Ky(t,e){return(QA.jsx?ZA:YA).test(t)}const KA=/[ \t\n\f\r]/g;function WA(t){return typeof t=="object"?t.type==="text"?Wy(t.value):!1:Wy(t)}function Wy(t){return t.replace(KA,"")===""}class bl{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}bl.prototype.normal={};bl.prototype.property={};bl.prototype.space=void 0;function qv(t,e){const n={},i={};for(const l of t)Object.assign(n,l.property),Object.assign(i,l.normal);return new bl(n,i,e)}function Kf(t){return t.toLowerCase()}class fn{constructor(e,n){this.attribute=n,this.property=e}}fn.prototype.attribute="";fn.prototype.booleanish=!1;fn.prototype.boolean=!1;fn.prototype.commaOrSpaceSeparated=!1;fn.prototype.commaSeparated=!1;fn.prototype.defined=!1;fn.prototype.mustUseProperty=!1;fn.prototype.number=!1;fn.prototype.overloadedBoolean=!1;fn.prototype.property="";fn.prototype.spaceSeparated=!1;fn.prototype.space=void 0;let XA=0;const $e=Or(),Mt=Or(),Wf=Or(),xe=Or(),xt=Or(),Ds=Or(),wn=Or();function Or(){return 2**++XA}const Xf=Object.freeze(Object.defineProperty({__proto__:null,boolean:$e,booleanish:Mt,commaOrSpaceSeparated:wn,commaSeparated:Ds,number:xe,overloadedBoolean:Wf,spaceSeparated:xt},Symbol.toStringTag,{value:"Module"})),pf=Object.keys(Xf);class km extends fn{constructor(e,n,i,l){let o=-1;if(super(e,n),Xy(this,"space",l),typeof i=="number")for(;++o<pf.length;){const u=pf[o];Xy(this,pf[o],(i&Xf[u])===Xf[u])}}}km.prototype.defined=!0;function Xy(t,e,n){n&&(t[e]=n)}function Ys(t){const e={},n={};for(const[i,l]of Object.entries(t.properties)){const o=new km(i,t.transform(t.attributes||{},i),l,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,n[Kf(i)]=i,n[Kf(o.attribute)]=i}return new bl(e,n,t.space)}const Fv=Ys({properties:{ariaActiveDescendant:null,ariaAtomic:Mt,ariaAutoComplete:null,ariaBusy:Mt,ariaChecked:Mt,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:xt,ariaCurrent:null,ariaDescribedBy:xt,ariaDetails:null,ariaDisabled:Mt,ariaDropEffect:xt,ariaErrorMessage:null,ariaExpanded:Mt,ariaFlowTo:xt,ariaGrabbed:Mt,ariaHasPopup:null,ariaHidden:Mt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xt,ariaLevel:xe,ariaLive:null,ariaModal:Mt,ariaMultiLine:Mt,ariaMultiSelectable:Mt,ariaOrientation:null,ariaOwns:xt,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:Mt,ariaReadOnly:Mt,ariaRelevant:null,ariaRequired:Mt,ariaRoleDescription:xt,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:Mt,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Hv(t,e){return e in t?t[e]:e}function Gv(t,e){return Hv(t,e.toLowerCase())}const e_=Ys({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ds,acceptCharset:xt,accessKey:xt,action:null,allow:null,allowFullScreen:$e,allowPaymentRequest:$e,allowUserMedia:$e,alt:null,as:null,async:$e,autoCapitalize:null,autoComplete:xt,autoFocus:$e,autoPlay:$e,blocking:xt,capture:null,charSet:null,checked:$e,cite:null,className:xt,cols:xe,colSpan:null,content:null,contentEditable:Mt,controls:$e,controlsList:xt,coords:xe|Ds,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$e,defer:$e,dir:null,dirName:null,disabled:$e,download:Wf,draggable:Mt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$e,formTarget:null,headers:xt,height:xe,hidden:Wf,high:xe,href:null,hrefLang:null,htmlFor:xt,httpEquiv:xt,id:null,imageSizes:null,imageSrcSet:null,inert:$e,inputMode:null,integrity:null,is:null,isMap:$e,itemId:null,itemProp:xt,itemRef:xt,itemScope:$e,itemType:xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$e,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:$e,muted:$e,name:null,nonce:null,noModule:$e,noValidate:$e,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$e,optimum:xe,pattern:null,ping:xt,placeholder:null,playsInline:$e,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$e,referrerPolicy:null,rel:xt,required:$e,reversed:$e,rows:xe,rowSpan:xe,sandbox:xt,scope:null,scoped:$e,seamless:$e,selected:$e,shadowRootClonable:$e,shadowRootDelegatesFocus:$e,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:Mt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:$e,useMap:null,value:Mt,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:xt,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$e,declare:$e,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:$e,noHref:$e,noShade:$e,noWrap:$e,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:Mt,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$e,disableRemotePlayback:$e,prefix:null,property:null,results:xe,security:null,unselectable:null},space:"html",transform:Gv}),t_=Ys({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wn,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:$e,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ds,g2:Ds,glyphName:Ds,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:wn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wn,rev:wn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wn,requiredFeatures:wn,requiredFonts:wn,requiredFormats:wn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:wn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wn,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Hv}),Jv=Ys({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Yv=Ys({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gv}),Zv=Ys({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),n_={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},i_=/[A-Z]/g,e1=/-[a-z]/g,r_=/^data[-\w.:]+$/i;function s_(t,e){const n=Kf(e);let i=e,l=fn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&r_.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(e1,l_);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!e1.test(o)){let u=o.replace(i_,a_);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}l=km}return new l(i,e)}function a_(t){return"-"+t.toLowerCase()}function l_(t){return t.charAt(1).toUpperCase()}const o_=qv([Fv,e_,Jv,Yv,Zv],"html"),Em=qv([Fv,t_,Jv,Yv,Zv],"svg");function c_(t){return t.join(" ").trim()}var js={},gf,t1;function u_(){if(t1)return gf;t1=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,f=/^\s+|\s+$/g,g=`
`,m="/",x="*",v="",N="comment",w="declaration";gf=function(j,k){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];k=k||{};var E=1,L=1;function D(z){var $=z.match(e);$&&(E+=$.length);var Y=z.lastIndexOf(g);L=~Y?z.length-Y:L+z.length}function O(){var z={line:E,column:L};return function($){return $.position=new H(z),q(),$}}function H(z){this.start=z,this.end={line:E,column:L},this.source=k.source}H.prototype.content=j;function I(z){var $=new Error(k.source+":"+E+":"+L+": "+z);if($.reason=z,$.filename=k.source,$.line=E,$.column=L,$.source=j,!k.silent)throw $}function R(z){var $=z.exec(j);if($){var Y=$[0];return D(Y),j=j.slice(Y.length),$}}function q(){R(n)}function B(z){var $;for(z=z||[];$=W();)$!==!1&&z.push($);return z}function W(){var z=O();if(!(m!=j.charAt(0)||x!=j.charAt(1))){for(var $=2;v!=j.charAt($)&&(x!=j.charAt($)||m!=j.charAt($+1));)++$;if($+=2,v===j.charAt($-1))return I("End of comment missing");var Y=j.slice(2,$-2);return L+=2,D(Y),j=j.slice($),L+=2,z({type:N,comment:Y})}}function G(){var z=O(),$=R(i);if($){if(W(),!R(l))return I("property missing ':'");var Y=R(o),P=z({type:w,property:S($[0].replace(t,v)),value:Y?S(Y[0].replace(t,v)):v});return R(u),P}}function J(){var z=[];B(z);for(var $;$=G();)$!==!1&&(z.push($),B(z));return z}return q(),J()};function S(j){return j?j.replace(f,v):v}return gf}var n1;function d_(){if(n1)return js;n1=1;var t=js&&js.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(js,"__esModule",{value:!0}),js.default=n;var e=t(u_());function n(i,l){var o=null;if(!i||typeof i!="string")return o;var u=(0,e.default)(i),f=typeof l=="function";return u.forEach(function(g){if(g.type==="declaration"){var m=g.property,x=g.value;f?l(m,x,g):x&&(o=o||{},o[m]=x)}}),o}return js}var Wa={},i1;function f_(){if(i1)return Wa;i1=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(m){return!m||n.test(m)||t.test(m)},u=function(m,x){return x.toUpperCase()},f=function(m,x){return"".concat(x,"-")},g=function(m,x){return x===void 0&&(x={}),o(m)?m:(m=m.toLowerCase(),x.reactCompat?m=m.replace(l,f):m=m.replace(i,f),m.replace(e,u))};return Wa.camelCase=g,Wa}var Xa,r1;function m_(){if(r1)return Xa;r1=1;var t=Xa&&Xa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},e=t(d_()),n=f_();function i(l,o){var u={};return!l||typeof l!="string"||(0,e.default)(l,function(f,g){f&&g&&(u[(0,n.camelCase)(f,o)]=g)}),u}return i.default=i,Xa=i,Xa}var h_=m_();const p_=ml(h_),Qv=Kv("end"),Am=Kv("start");function Kv(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function g_(t){const e=Am(t),n=Qv(t);if(e&&n)return{start:e,end:n}}function al(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?s1(t.position):"start"in t||"end"in t?s1(t):"line"in t||"column"in t?em(t):""}function em(t){return a1(t&&t.line)+":"+a1(t&&t.column)}function s1(t){return em(t&&t.start)+"-"+em(t&&t.end)}function a1(t){return t&&typeof t=="number"?t:1}class Wt extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let l="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?l=e:!o.cause&&e&&(u=!0,l=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const g=i.indexOf(":");g===-1?o.ruleId=i:(o.source=i.slice(0,g),o.ruleId=i.slice(g+1))}if(!o.place&&o.ancestors&&o.ancestors){const g=o.ancestors[o.ancestors.length-1];g&&(o.place=g.position)}const f=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=f?f.line:void 0,this.name=al(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wt.prototype.file="";Wt.prototype.name="";Wt.prototype.reason="";Wt.prototype.message="";Wt.prototype.stack="";Wt.prototype.column=void 0;Wt.prototype.line=void 0;Wt.prototype.ancestors=void 0;Wt.prototype.cause=void 0;Wt.prototype.fatal=void 0;Wt.prototype.place=void 0;Wt.prototype.ruleId=void 0;Wt.prototype.source=void 0;const _m={}.hasOwnProperty,x_=new Map,y_=/[A-Z]/g,v_=new Set(["table","tbody","thead","tfoot","tr"]),b_=new Set(["td","th"]),Wv="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function w_(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=A_(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=E_(n,e.jsx,e.jsxs)}const l={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Em:o_,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Xv(l,t,void 0);return o&&typeof o!="string"?o:l.create(t,l.Fragment,{children:o||void 0},void 0)}function Xv(t,e,n){if(e.type==="element")return N_(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return C_(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return T_(t,e,n);if(e.type==="mdxjsEsm")return S_(t,e);if(e.type==="root")return j_(t,e,n);if(e.type==="text")return k_(t,e)}function N_(t,e,n){const i=t.schema;let l=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(l=Em,t.schema=l),t.ancestors.push(e);const o=tb(t,e.tagName,!1),u=__(t,e);let f=Rm(t,e);return v_.has(e.tagName)&&(f=f.filter(function(g){return typeof g=="string"?!WA(g):!0})),eb(t,u,o,e),Mm(u,f),t.ancestors.pop(),t.schema=i,t.create(e,o,u,n)}function C_(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}fl(t,e.position)}function S_(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);fl(t,e.position)}function T_(t,e,n){const i=t.schema;let l=i;e.name==="svg"&&i.space==="html"&&(l=Em,t.schema=l),t.ancestors.push(e);const o=e.name===null?t.Fragment:tb(t,e.name,!0),u=M_(t,e),f=Rm(t,e);return eb(t,u,o,e),Mm(u,f),t.ancestors.pop(),t.schema=i,t.create(e,o,u,n)}function j_(t,e,n){const i={};return Mm(i,Rm(t,e)),t.create(e,t.Fragment,i,n)}function k_(t,e){return e.value}function eb(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Mm(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function E_(t,e,n){return i;function i(l,o,u,f){const m=Array.isArray(u.children)?n:e;return f?m(o,u,f):m(o,u)}}function A_(t,e){return n;function n(i,l,o,u){const f=Array.isArray(o.children),g=Am(i);return e(l,o,u,f,{columnNumber:g?g.column-1:void 0,fileName:t,lineNumber:g?g.line:void 0},void 0)}}function __(t,e){const n={};let i,l;for(l in e.properties)if(l!=="children"&&_m.call(e.properties,l)){const o=R_(t,l,e.properties[l]);if(o){const[u,f]=o;t.tableCellAlignToStyle&&u==="align"&&typeof f=="string"&&b_.has(e.tagName)?i=f:n[u]=f}}if(i){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function M_(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const o=i.data.estree.body[0];o.type;const u=o.expression;u.type;const f=u.properties[0];f.type,Object.assign(n,t.evaluater.evaluateExpression(f.argument))}else fl(t,e.position);else{const l=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const f=i.value.data.estree.body[0];f.type,o=t.evaluater.evaluateExpression(f.expression)}else fl(t,e.position);else o=i.value===null?!0:i.value;n[l]=o}return n}function Rm(t,e){const n=[];let i=-1;const l=t.passKeys?new Map:x_;for(;++i<e.children.length;){const o=e.children[i];let u;if(t.passKeys){const g=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(g){const m=l.get(g)||0;u=g+"-"+m,l.set(g,m+1)}}const f=Xv(t,o,u);f!==void 0&&n.push(f)}return n}function R_(t,e,n){const i=s_(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?JA(n):c_(n)),i.property==="style"){let l=typeof n=="object"?n:I_(t,String(n));return t.stylePropertyNameCase==="css"&&(l=D_(l)),["style",l]}return[t.elementAttributeNameCase==="react"&&i.space?n_[i.property]||i.property:i.attribute,n]}}function I_(t,e){try{return p_(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,l=new Wt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=t.filePath||void 0,l.url=Wv+"#cannot-parse-style-attribute",l}}function tb(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const l=e.split(".");let o=-1,u;for(;++o<l.length;){const f=Ky(l[o])?{type:"Identifier",name:l[o]}:{type:"Literal",value:l[o]};u=u?{type:"MemberExpression",object:u,property:f,computed:!!(o&&f.type==="Literal"),optional:!1}:f}i=u}else i=Ky(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const l=i.value;return _m.call(t.components,l)?t.components[l]:l}if(t.evaluater)return t.evaluater.evaluateExpression(i);fl(t)}function fl(t,e){const n=new Wt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Wv+"#cannot-handle-mdx-estrees-without-createevaluater",n}function D_(t){const e={};let n;for(n in t)_m.call(t,n)&&(e[L_(n)]=t[n]);return e}function L_(t){let e=t.replace(y_,P_);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function P_(t){return"-"+t.toLowerCase()}const xf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},O_={};function B_(t,e){const n=O_,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return nb(t,i,l)}function nb(t,e,n){if(U_(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return l1(t.children,e,n)}return Array.isArray(t)?l1(t,e,n):""}function l1(t,e,n){const i=[];let l=-1;for(;++l<t.length;)i[l]=nb(t[l],e,n);return i.join("")}function U_(t){return!!(t&&typeof t=="object")}const o1=document.createElement("i");function Im(t){const e="&"+t+";";o1.innerHTML=e;const n=o1.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function si(t,e,n,i){const l=t.length;let o=0,u;if(e<0?e=-e>l?0:l+e:e=e>l?l:e,n=n>0?n:0,i.length<1e4)u=Array.from(i),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<i.length;)u=i.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function Dn(t,e){return t.length>0?(si(t,t.length,0,e),t):e}const c1={}.hasOwnProperty;function z_(t){const e={};let n=-1;for(;++n<t.length;)V_(e,t[n]);return e}function V_(t,e){let n;for(n in e){const l=(c1.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){c1.call(l,u)||(l[u]=[]);const f=o[u];$_(l[u],Array.isArray(f)?f:f?[f]:[])}}}function $_(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);si(t,0,0,i)}function ib(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ls(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xn=lr(/[A-Za-z]/),Nn=lr(/[\dA-Za-z]/),q_=lr(/[#-'*+\--9=?A-Z^-~]/);function tm(t){return t!==null&&(t<32||t===127)}const nm=lr(/\d/),F_=lr(/[\dA-Fa-f]/),H_=lr(/[!-/:-@[-`{-~]/);function Pe(t){return t!==null&&t<-2}function un(t){return t!==null&&(t<0||t===32)}function lt(t){return t===-2||t===-1||t===32}const G_=lr(new RegExp("\\p{P}|\\p{S}","u")),J_=lr(/\s/);function lr(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Zs(t){const e=[];let n=-1,i=0,l=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&Nn(t.charCodeAt(n+1))&&Nn(t.charCodeAt(n+2)))l=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const f=t.charCodeAt(n+1);o<56320&&f>56319&&f<57344?(u=String.fromCharCode(o,f),l=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(i,n),encodeURIComponent(u)),i=n+l+1,u=""),l&&(n+=l,l=0)}return e.join("")+t.slice(i)}function yt(t,e,n,i){const l=i?i-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(g){return lt(g)?(t.enter(n),f(g)):e(g)}function f(g){return lt(g)&&o++<l?(t.consume(g),f):(t.exit(n),e(g))}}const Y_={tokenize:Z_};function Z_(t){const e=t.attempt(this.parser.constructs.contentInitial,i,l);let n;return e;function i(f){if(f===null){t.consume(f);return}return t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),yt(t,e,"linePrefix")}function l(f){return t.enter("paragraph"),o(f)}function o(f){const g=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=g),n=g,u(f)}function u(f){if(f===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(f);return}return Pe(f)?(t.consume(f),t.exit("chunkText"),o):(t.consume(f),u)}}const Q_={tokenize:K_},u1={tokenize:W_};function K_(t){const e=this,n=[];let i=0,l,o,u;return f;function f(D){if(i<n.length){const O=n[i];return e.containerState=O[1],t.attempt(O[0].continuation,g,m)(D)}return m(D)}function g(D){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,l&&L();const O=e.events.length;let H=O,I;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){I=e.events[H][1].end;break}E(i);let R=O;for(;R<e.events.length;)e.events[R][1].end={...I},R++;return si(e.events,H+1,0,e.events.slice(O)),e.events.length=R,m(D)}return f(D)}function m(D){if(i===n.length){if(!l)return N(D);if(l.currentConstruct&&l.currentConstruct.concrete)return S(D);e.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(u1,x,v)(D)}function x(D){return l&&L(),E(i),N(D)}function v(D){return e.parser.lazy[e.now().line]=i!==n.length,u=e.now().offset,S(D)}function N(D){return e.containerState={},t.attempt(u1,w,S)(D)}function w(D){return i++,n.push([e.currentConstruct,e.containerState]),N(D)}function S(D){if(D===null){l&&L(),E(0),t.consume(D);return}return l=l||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:o}),j(D)}function j(D){if(D===null){k(t.exit("chunkFlow"),!0),E(0),t.consume(D);return}return Pe(D)?(t.consume(D),k(t.exit("chunkFlow")),i=0,e.interrupt=void 0,f):(t.consume(D),j)}function k(D,O){const H=e.sliceStream(D);if(O&&H.push(null),D.previous=o,o&&(o.next=D),o=D,l.defineSkip(D.start),l.write(H),e.parser.lazy[D.start.line]){let I=l.events.length;for(;I--;)if(l.events[I][1].start.offset<u&&(!l.events[I][1].end||l.events[I][1].end.offset>u))return;const R=e.events.length;let q=R,B,W;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){if(B){W=e.events[q][1].end;break}B=!0}for(E(i),I=R;I<e.events.length;)e.events[I][1].end={...W},I++;si(e.events,q+1,0,e.events.slice(R)),e.events.length=I}}function E(D){let O=n.length;for(;O-- >D;){const H=n[O];e.containerState=H[1],H[0].exit.call(e,t)}n.length=D}function L(){l.write([null]),o=void 0,l=void 0,e.containerState._closeFlow=void 0}}function W_(t,e,n){return yt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function d1(t){if(t===null||un(t)||J_(t))return 1;if(G_(t))return 2}function Dm(t,e,n){const i=[];let l=-1;for(;++l<t.length;){const o=t[l].resolveAll;o&&!i.includes(o)&&(e=o(e,n),i.push(o))}return e}const im={name:"attention",resolveAll:X_,tokenize:e7};function X_(t,e){let n=-1,i,l,o,u,f,g,m,x;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;g=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const v={...t[i][1].end},N={...t[n][1].start};f1(v,-g),f1(N,g),u={type:g>1?"strongSequence":"emphasisSequence",start:v,end:{...t[i][1].end}},f={type:g>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:N},o={type:g>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},l={type:g>1?"strong":"emphasis",start:{...u.start},end:{...f.end}},t[i][1].end={...u.start},t[n][1].start={...f.end},m=[],t[i][1].end.offset-t[i][1].start.offset&&(m=Dn(m,[["enter",t[i][1],e],["exit",t[i][1],e]])),m=Dn(m,[["enter",l,e],["enter",u,e],["exit",u,e],["enter",o,e]]),m=Dn(m,Dm(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),m=Dn(m,[["exit",o,e],["enter",f,e],["exit",f,e],["exit",l,e]]),t[n][1].end.offset-t[n][1].start.offset?(x=2,m=Dn(m,[["enter",t[n][1],e],["exit",t[n][1],e]])):x=0,si(t,i-1,n-i+3,m),n=i+m.length-x-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function e7(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,l=d1(i);let o;return u;function u(g){return o=g,t.enter("attentionSequence"),f(g)}function f(g){if(g===o)return t.consume(g),f;const m=t.exit("attentionSequence"),x=d1(g),v=!x||x===2&&l||n.includes(g),N=!l||l===2&&x||n.includes(i);return m._open=!!(o===42?v:v&&(l||!N)),m._close=!!(o===42?N:N&&(x||!v)),e(g)}}function f1(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const t7={name:"autolink",tokenize:n7};function n7(t,e,n){let i=0;return l;function l(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(w){return Xn(w)?(t.consume(w),u):w===64?n(w):m(w)}function u(w){return w===43||w===45||w===46||Nn(w)?(i=1,f(w)):m(w)}function f(w){return w===58?(t.consume(w),i=0,g):(w===43||w===45||w===46||Nn(w))&&i++<32?(t.consume(w),f):(i=0,m(w))}function g(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):w===null||w===32||w===60||tm(w)?n(w):(t.consume(w),g)}function m(w){return w===64?(t.consume(w),x):q_(w)?(t.consume(w),m):n(w)}function x(w){return Nn(w)?v(w):n(w)}function v(w){return w===46?(t.consume(w),i=0,x):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):N(w)}function N(w){if((w===45||Nn(w))&&i++<63){const S=w===45?N:v;return t.consume(w),S}return n(w)}}const Nc={partial:!0,tokenize:i7};function i7(t,e,n){return i;function i(o){return lt(o)?yt(t,l,"linePrefix")(o):l(o)}function l(o){return o===null||Pe(o)?e(o):n(o)}}const rb={continuation:{tokenize:s7},exit:a7,name:"blockQuote",tokenize:r7};function r7(t,e,n){const i=this;return l;function l(u){if(u===62){const f=i.containerState;return f.open||(t.enter("blockQuote",{_container:!0}),f.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return lt(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function s7(t,e,n){const i=this;return l;function l(u){return lt(u)?yt(t,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt(rb,e,n)(u)}}function a7(t){t.exit("blockQuote")}const sb={name:"characterEscape",tokenize:l7};function l7(t,e,n){return i;function i(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),l}function l(o){return H_(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const ab={name:"characterReference",tokenize:o7};function o7(t,e,n){const i=this;let l=0,o,u;return f;function f(v){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(v),t.exit("characterReferenceMarker"),g}function g(v){return v===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(v),t.exit("characterReferenceMarkerNumeric"),m):(t.enter("characterReferenceValue"),o=31,u=Nn,x(v))}function m(v){return v===88||v===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(v),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=F_,x):(t.enter("characterReferenceValue"),o=7,u=nm,x(v))}function x(v){if(v===59&&l){const N=t.exit("characterReferenceValue");return u===Nn&&!Im(i.sliceSerialize(N))?n(v):(t.enter("characterReferenceMarker"),t.consume(v),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(v)&&l++<o?(t.consume(v),x):n(v)}}const m1={partial:!0,tokenize:u7},h1={concrete:!0,name:"codeFenced",tokenize:c7};function c7(t,e,n){const i=this,l={partial:!0,tokenize:H};let o=0,u=0,f;return g;function g(I){return m(I)}function m(I){const R=i.events[i.events.length-1];return o=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,f=I,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),x(I)}function x(I){return I===f?(u++,t.consume(I),x):u<3?n(I):(t.exit("codeFencedFenceSequence"),lt(I)?yt(t,v,"whitespace")(I):v(I))}function v(I){return I===null||Pe(I)?(t.exit("codeFencedFence"),i.interrupt?e(I):t.check(m1,j,O)(I)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),N(I))}function N(I){return I===null||Pe(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),v(I)):lt(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),yt(t,w,"whitespace")(I)):I===96&&I===f?n(I):(t.consume(I),N)}function w(I){return I===null||Pe(I)?v(I):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S(I))}function S(I){return I===null||Pe(I)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),v(I)):I===96&&I===f?n(I):(t.consume(I),S)}function j(I){return t.attempt(l,O,k)(I)}function k(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),E}function E(I){return o>0&&lt(I)?yt(t,L,"linePrefix",o+1)(I):L(I)}function L(I){return I===null||Pe(I)?t.check(m1,j,O)(I):(t.enter("codeFlowValue"),D(I))}function D(I){return I===null||Pe(I)?(t.exit("codeFlowValue"),L(I)):(t.consume(I),D)}function O(I){return t.exit("codeFenced"),e(I)}function H(I,R,q){let B=0;return W;function W(Y){return I.enter("lineEnding"),I.consume(Y),I.exit("lineEnding"),G}function G(Y){return I.enter("codeFencedFence"),lt(Y)?yt(I,J,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):J(Y)}function J(Y){return Y===f?(I.enter("codeFencedFenceSequence"),z(Y)):q(Y)}function z(Y){return Y===f?(B++,I.consume(Y),z):B>=u?(I.exit("codeFencedFenceSequence"),lt(Y)?yt(I,$,"whitespace")(Y):$(Y)):q(Y)}function $(Y){return Y===null||Pe(Y)?(I.exit("codeFencedFence"),R(Y)):q(Y)}}}function u7(t,e,n){const i=this;return l;function l(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return i.parser.lazy[i.now().line]?n(u):e(u)}}const yf={name:"codeIndented",tokenize:f7},d7={partial:!0,tokenize:m7};function f7(t,e,n){const i=this;return l;function l(m){return t.enter("codeIndented"),yt(t,o,"linePrefix",5)(m)}function o(m){const x=i.events[i.events.length-1];return x&&x[1].type==="linePrefix"&&x[2].sliceSerialize(x[1],!0).length>=4?u(m):n(m)}function u(m){return m===null?g(m):Pe(m)?t.attempt(d7,u,g)(m):(t.enter("codeFlowValue"),f(m))}function f(m){return m===null||Pe(m)?(t.exit("codeFlowValue"),u(m)):(t.consume(m),f)}function g(m){return t.exit("codeIndented"),e(m)}}function m7(t,e,n){const i=this;return l;function l(u){return i.parser.lazy[i.now().line]?n(u):Pe(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l):yt(t,o,"linePrefix",5)(u)}function o(u){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?e(u):Pe(u)?l(u):n(u)}}const h7={name:"codeText",previous:g7,resolve:p7,tokenize:x7};function p7(t){let e=t.length-4,n=3,i,l;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)l===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(l=i):(i===e||t[i][1].type==="lineEnding")&&(t[l][1].type="codeTextData",i!==l+2&&(t[l][1].end=t[i-1][1].end,t.splice(l+2,i-l-2),e-=i-l-2,i=l+2),l=void 0);return t}function g7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function x7(t,e,n){let i=0,l,o;return u;function u(v){return t.enter("codeText"),t.enter("codeTextSequence"),f(v)}function f(v){return v===96?(t.consume(v),i++,f):(t.exit("codeTextSequence"),g(v))}function g(v){return v===null?n(v):v===32?(t.enter("space"),t.consume(v),t.exit("space"),g):v===96?(o=t.enter("codeTextSequence"),l=0,x(v)):Pe(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),g):(t.enter("codeTextData"),m(v))}function m(v){return v===null||v===32||v===96||Pe(v)?(t.exit("codeTextData"),g(v)):(t.consume(v),m)}function x(v){return v===96?(t.consume(v),l++,x):l===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(v)):(o.type="codeTextData",m(v))}}class y7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const l=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return i&&el(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),el(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),el(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);el(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);el(this.left,n.reverse())}}}function el(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function lb(t){const e={};let n=-1,i,l,o,u,f,g,m;const x=new y7(t);for(;++n<x.length;){for(;n in e;)n=e[n];if(i=x.get(n),n&&i[1].type==="chunkFlow"&&x.get(n-1)[1].type==="listItemPrefix"&&(g=i[1]._tokenizer.events,o=0,o<g.length&&g[o][1].type==="lineEndingBlank"&&(o+=2),o<g.length&&g[o][1].type==="content"))for(;++o<g.length&&g[o][1].type!=="content";)g[o][1].type==="chunkText"&&(g[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,v7(x,n)),n=e[n],m=!0);else if(i[1]._container){for(o=n,l=void 0;o--;)if(u=x.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(l&&(x.get(l)[1].type="lineEndingBlank"),u[1].type="lineEnding",l=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;l&&(i[1].end={...x.get(l)[1].start},f=x.slice(l,n),f.unshift(i),x.splice(l,n-l+1,f))}}return si(t,0,Number.POSITIVE_INFINITY,x.slice(0)),!m}function v7(t,e){const n=t.get(e)[1],i=t.get(e)[2];let l=e-1;const o=[];let u=n._tokenizer;u||(u=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const f=u.events,g=[],m={};let x,v,N=-1,w=n,S=0,j=0;const k=[j];for(;w;){for(;t.get(++l)[1]!==w;);o.push(l),w._tokenizer||(x=i.sliceStream(w),w.next||x.push(null),v&&u.defineSkip(w.start),w._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(x),w._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),v=w,w=w.next}for(w=n;++N<f.length;)f[N][0]==="exit"&&f[N-1][0]==="enter"&&f[N][1].type===f[N-1][1].type&&f[N][1].start.line!==f[N][1].end.line&&(j=N+1,k.push(j),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(u.events=[],w?(w._tokenizer=void 0,w.previous=void 0):k.pop(),N=k.length;N--;){const E=f.slice(k[N],k[N+1]),L=o.pop();g.push([L,L+E.length-1]),t.splice(L,2,E)}for(g.reverse(),N=-1;++N<g.length;)m[S+g[N][0]]=S+g[N][1],S+=g[N][1]-g[N][0]-1;return m}const b7={resolve:N7,tokenize:C7},w7={partial:!0,tokenize:S7};function N7(t){return lb(t),t}function C7(t,e){let n;return i;function i(f){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),l(f)}function l(f){return f===null?o(f):Pe(f)?t.check(w7,u,o)(f):(t.consume(f),l)}function o(f){return t.exit("chunkContent"),t.exit("content"),e(f)}function u(f){return t.consume(f),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function S7(t,e,n){const i=this;return l;function l(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),yt(t,o,"linePrefix")}function o(u){if(u===null||Pe(u))return n(u);const f=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?e(u):t.interrupt(i.parser.constructs.flow,n,e)(u)}}function ob(t,e,n,i,l,o,u,f,g){const m=g||Number.POSITIVE_INFINITY;let x=0;return v;function v(E){return E===60?(t.enter(i),t.enter(l),t.enter(o),t.consume(E),t.exit(o),N):E===null||E===32||E===41||tm(E)?n(E):(t.enter(i),t.enter(u),t.enter(f),t.enter("chunkString",{contentType:"string"}),j(E))}function N(E){return E===62?(t.enter(o),t.consume(E),t.exit(o),t.exit(l),t.exit(i),e):(t.enter(f),t.enter("chunkString",{contentType:"string"}),w(E))}function w(E){return E===62?(t.exit("chunkString"),t.exit(f),N(E)):E===null||E===60||Pe(E)?n(E):(t.consume(E),E===92?S:w)}function S(E){return E===60||E===62||E===92?(t.consume(E),w):w(E)}function j(E){return!x&&(E===null||E===41||un(E))?(t.exit("chunkString"),t.exit(f),t.exit(u),t.exit(i),e(E)):x<m&&E===40?(t.consume(E),x++,j):E===41?(t.consume(E),x--,j):E===null||E===32||E===40||tm(E)?n(E):(t.consume(E),E===92?k:j)}function k(E){return E===40||E===41||E===92?(t.consume(E),j):j(E)}}function cb(t,e,n,i,l,o){const u=this;let f=0,g;return m;function m(w){return t.enter(i),t.enter(l),t.consume(w),t.exit(l),t.enter(o),x}function x(w){return f>999||w===null||w===91||w===93&&!g||w===94&&!f&&"_hiddenFootnoteSupport"in u.parser.constructs?n(w):w===93?(t.exit(o),t.enter(l),t.consume(w),t.exit(l),t.exit(i),e):Pe(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),x):(t.enter("chunkString",{contentType:"string"}),v(w))}function v(w){return w===null||w===91||w===93||Pe(w)||f++>999?(t.exit("chunkString"),x(w)):(t.consume(w),g||(g=!lt(w)),w===92?N:v)}function N(w){return w===91||w===92||w===93?(t.consume(w),f++,v):v(w)}}function ub(t,e,n,i,l,o){let u;return f;function f(N){return N===34||N===39||N===40?(t.enter(i),t.enter(l),t.consume(N),t.exit(l),u=N===40?41:N,g):n(N)}function g(N){return N===u?(t.enter(l),t.consume(N),t.exit(l),t.exit(i),e):(t.enter(o),m(N))}function m(N){return N===u?(t.exit(o),g(u)):N===null?n(N):Pe(N)?(t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),yt(t,m,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),x(N))}function x(N){return N===u||N===null||Pe(N)?(t.exit("chunkString"),m(N)):(t.consume(N),N===92?v:x)}function v(N){return N===u||N===92?(t.consume(N),x):x(N)}}function ll(t,e){let n;return i;function i(l){return Pe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),n=!0,i):lt(l)?yt(t,i,n?"linePrefix":"lineSuffix")(l):e(l)}}const T7={name:"definition",tokenize:k7},j7={partial:!0,tokenize:E7};function k7(t,e,n){const i=this;let l;return o;function o(w){return t.enter("definition"),u(w)}function u(w){return cb.call(i,t,f,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function f(w){return l=Ls(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),g):n(w)}function g(w){return un(w)?ll(t,m)(w):m(w)}function m(w){return ob(t,x,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function x(w){return t.attempt(j7,v,v)(w)}function v(w){return lt(w)?yt(t,N,"whitespace")(w):N(w)}function N(w){return w===null||Pe(w)?(t.exit("definition"),i.parser.defined.push(l),e(w)):n(w)}}function E7(t,e,n){return i;function i(f){return un(f)?ll(t,l)(f):n(f)}function l(f){return ub(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function o(f){return lt(f)?yt(t,u,"whitespace")(f):u(f)}function u(f){return f===null||Pe(f)?e(f):n(f)}}const A7={name:"hardBreakEscape",tokenize:_7};function _7(t,e,n){return i;function i(o){return t.enter("hardBreakEscape"),t.consume(o),l}function l(o){return Pe(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const M7={name:"headingAtx",resolve:R7,tokenize:I7};function R7(t,e){let n=t.length-2,i=3,l,o;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(l={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},o={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},si(t,i,n-i+1,[["enter",l,e],["enter",o,e],["exit",o,e],["exit",l,e]])),t}function I7(t,e,n){let i=0;return l;function l(x){return t.enter("atxHeading"),o(x)}function o(x){return t.enter("atxHeadingSequence"),u(x)}function u(x){return x===35&&i++<6?(t.consume(x),u):x===null||un(x)?(t.exit("atxHeadingSequence"),f(x)):n(x)}function f(x){return x===35?(t.enter("atxHeadingSequence"),g(x)):x===null||Pe(x)?(t.exit("atxHeading"),e(x)):lt(x)?yt(t,f,"whitespace")(x):(t.enter("atxHeadingText"),m(x))}function g(x){return x===35?(t.consume(x),g):(t.exit("atxHeadingSequence"),f(x))}function m(x){return x===null||x===35||un(x)?(t.exit("atxHeadingText"),f(x)):(t.consume(x),m)}}const D7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],p1=["pre","script","style","textarea"],L7={concrete:!0,name:"htmlFlow",resolveTo:B7,tokenize:U7},P7={partial:!0,tokenize:V7},O7={partial:!0,tokenize:z7};function B7(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function U7(t,e,n){const i=this;let l,o,u,f,g;return m;function m(M){return x(M)}function x(M){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(M),v}function v(M){return M===33?(t.consume(M),N):M===47?(t.consume(M),o=!0,j):M===63?(t.consume(M),l=3,i.interrupt?e:C):Xn(M)?(t.consume(M),u=String.fromCharCode(M),k):n(M)}function N(M){return M===45?(t.consume(M),l=2,w):M===91?(t.consume(M),l=5,f=0,S):Xn(M)?(t.consume(M),l=4,i.interrupt?e:C):n(M)}function w(M){return M===45?(t.consume(M),i.interrupt?e:C):n(M)}function S(M){const ge="CDATA[";return M===ge.charCodeAt(f++)?(t.consume(M),f===ge.length?i.interrupt?e:J:S):n(M)}function j(M){return Xn(M)?(t.consume(M),u=String.fromCharCode(M),k):n(M)}function k(M){if(M===null||M===47||M===62||un(M)){const ge=M===47,we=u.toLowerCase();return!ge&&!o&&p1.includes(we)?(l=1,i.interrupt?e(M):J(M)):D7.includes(u.toLowerCase())?(l=6,ge?(t.consume(M),E):i.interrupt?e(M):J(M)):(l=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(M):o?L(M):D(M))}return M===45||Nn(M)?(t.consume(M),u+=String.fromCharCode(M),k):n(M)}function E(M){return M===62?(t.consume(M),i.interrupt?e:J):n(M)}function L(M){return lt(M)?(t.consume(M),L):W(M)}function D(M){return M===47?(t.consume(M),W):M===58||M===95||Xn(M)?(t.consume(M),O):lt(M)?(t.consume(M),D):W(M)}function O(M){return M===45||M===46||M===58||M===95||Nn(M)?(t.consume(M),O):H(M)}function H(M){return M===61?(t.consume(M),I):lt(M)?(t.consume(M),H):D(M)}function I(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),g=M,R):lt(M)?(t.consume(M),I):q(M)}function R(M){return M===g?(t.consume(M),g=null,B):M===null||Pe(M)?n(M):(t.consume(M),R)}function q(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||un(M)?H(M):(t.consume(M),q)}function B(M){return M===47||M===62||lt(M)?D(M):n(M)}function W(M){return M===62?(t.consume(M),G):n(M)}function G(M){return M===null||Pe(M)?J(M):lt(M)?(t.consume(M),G):n(M)}function J(M){return M===45&&l===2?(t.consume(M),P):M===60&&l===1?(t.consume(M),Z):M===62&&l===4?(t.consume(M),V):M===63&&l===3?(t.consume(M),C):M===93&&l===5?(t.consume(M),Q):Pe(M)&&(l===6||l===7)?(t.exit("htmlFlowData"),t.check(P7,ee,z)(M)):M===null||Pe(M)?(t.exit("htmlFlowData"),z(M)):(t.consume(M),J)}function z(M){return t.check(O7,$,ee)(M)}function $(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),Y}function Y(M){return M===null||Pe(M)?z(M):(t.enter("htmlFlowData"),J(M))}function P(M){return M===45?(t.consume(M),C):J(M)}function Z(M){return M===47?(t.consume(M),u="",fe):J(M)}function fe(M){if(M===62){const ge=u.toLowerCase();return p1.includes(ge)?(t.consume(M),V):J(M)}return Xn(M)&&u.length<8?(t.consume(M),u+=String.fromCharCode(M),fe):J(M)}function Q(M){return M===93?(t.consume(M),C):J(M)}function C(M){return M===62?(t.consume(M),V):M===45&&l===2?(t.consume(M),C):J(M)}function V(M){return M===null||Pe(M)?(t.exit("htmlFlowData"),ee(M)):(t.consume(M),V)}function ee(M){return t.exit("htmlFlow"),e(M)}}function z7(t,e,n){const i=this;return l;function l(u){return Pe(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return i.parser.lazy[i.now().line]?n(u):e(u)}}function V7(t,e,n){return i;function i(l){return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),t.attempt(Nc,e,n)}}const $7={name:"htmlText",tokenize:q7};function q7(t,e,n){const i=this;let l,o,u;return f;function f(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),g}function g(C){return C===33?(t.consume(C),m):C===47?(t.consume(C),H):C===63?(t.consume(C),D):Xn(C)?(t.consume(C),q):n(C)}function m(C){return C===45?(t.consume(C),x):C===91?(t.consume(C),o=0,S):Xn(C)?(t.consume(C),L):n(C)}function x(C){return C===45?(t.consume(C),w):n(C)}function v(C){return C===null?n(C):C===45?(t.consume(C),N):Pe(C)?(u=v,Z(C)):(t.consume(C),v)}function N(C){return C===45?(t.consume(C),w):v(C)}function w(C){return C===62?P(C):C===45?N(C):v(C)}function S(C){const V="CDATA[";return C===V.charCodeAt(o++)?(t.consume(C),o===V.length?j:S):n(C)}function j(C){return C===null?n(C):C===93?(t.consume(C),k):Pe(C)?(u=j,Z(C)):(t.consume(C),j)}function k(C){return C===93?(t.consume(C),E):j(C)}function E(C){return C===62?P(C):C===93?(t.consume(C),E):j(C)}function L(C){return C===null||C===62?P(C):Pe(C)?(u=L,Z(C)):(t.consume(C),L)}function D(C){return C===null?n(C):C===63?(t.consume(C),O):Pe(C)?(u=D,Z(C)):(t.consume(C),D)}function O(C){return C===62?P(C):D(C)}function H(C){return Xn(C)?(t.consume(C),I):n(C)}function I(C){return C===45||Nn(C)?(t.consume(C),I):R(C)}function R(C){return Pe(C)?(u=R,Z(C)):lt(C)?(t.consume(C),R):P(C)}function q(C){return C===45||Nn(C)?(t.consume(C),q):C===47||C===62||un(C)?B(C):n(C)}function B(C){return C===47?(t.consume(C),P):C===58||C===95||Xn(C)?(t.consume(C),W):Pe(C)?(u=B,Z(C)):lt(C)?(t.consume(C),B):P(C)}function W(C){return C===45||C===46||C===58||C===95||Nn(C)?(t.consume(C),W):G(C)}function G(C){return C===61?(t.consume(C),J):Pe(C)?(u=G,Z(C)):lt(C)?(t.consume(C),G):B(C)}function J(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),l=C,z):Pe(C)?(u=J,Z(C)):lt(C)?(t.consume(C),J):(t.consume(C),$)}function z(C){return C===l?(t.consume(C),l=void 0,Y):C===null?n(C):Pe(C)?(u=z,Z(C)):(t.consume(C),z)}function $(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||un(C)?B(C):(t.consume(C),$)}function Y(C){return C===47||C===62||un(C)?B(C):n(C)}function P(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function Z(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),fe}function fe(C){return lt(C)?yt(t,Q,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):Q(C)}function Q(C){return t.enter("htmlTextData"),u(C)}}const Lm={name:"labelEnd",resolveAll:J7,resolveTo:Y7,tokenize:Z7},F7={tokenize:Q7},H7={tokenize:K7},G7={tokenize:W7};function J7(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const l=i.type==="labelImage"?4:2;i.type="data",e+=l}}return t.length!==n.length&&si(t,0,t.length,n),t}function Y7(t,e){let n=t.length,i=0,l,o,u,f;for(;n--;)if(l=t[n][1],o){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;t[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(o=n,l.type!=="labelLink")){i=2;break}}else l.type==="labelEnd"&&(u=n);const g={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},m={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},x={type:"labelText",start:{...t[o+i+2][1].end},end:{...t[u-2][1].start}};return f=[["enter",g,e],["enter",m,e]],f=Dn(f,t.slice(o+1,o+i+3)),f=Dn(f,[["enter",x,e]]),f=Dn(f,Dm(e.parser.constructs.insideSpan.null,t.slice(o+i+4,u-3),e)),f=Dn(f,[["exit",x,e],t[u-2],t[u-1],["exit",m,e]]),f=Dn(f,t.slice(u+1)),f=Dn(f,[["exit",g,e]]),si(t,o,t.length,f),t}function Z7(t,e,n){const i=this;let l=i.events.length,o,u;for(;l--;)if((i.events[l][1].type==="labelImage"||i.events[l][1].type==="labelLink")&&!i.events[l][1]._balanced){o=i.events[l][1];break}return f;function f(N){return o?o._inactive?v(N):(u=i.parser.defined.includes(Ls(i.sliceSerialize({start:o.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(N),t.exit("labelMarker"),t.exit("labelEnd"),g):n(N)}function g(N){return N===40?t.attempt(F7,x,u?x:v)(N):N===91?t.attempt(H7,x,u?m:v)(N):u?x(N):v(N)}function m(N){return t.attempt(G7,x,v)(N)}function x(N){return e(N)}function v(N){return o._balanced=!0,n(N)}}function Q7(t,e,n){return i;function i(v){return t.enter("resource"),t.enter("resourceMarker"),t.consume(v),t.exit("resourceMarker"),l}function l(v){return un(v)?ll(t,o)(v):o(v)}function o(v){return v===41?x(v):ob(t,u,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function u(v){return un(v)?ll(t,g)(v):x(v)}function f(v){return n(v)}function g(v){return v===34||v===39||v===40?ub(t,m,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):x(v)}function m(v){return un(v)?ll(t,x)(v):x(v)}function x(v){return v===41?(t.enter("resourceMarker"),t.consume(v),t.exit("resourceMarker"),t.exit("resource"),e):n(v)}}function K7(t,e,n){const i=this;return l;function l(f){return cb.call(i,t,o,u,"reference","referenceMarker","referenceString")(f)}function o(f){return i.parser.defined.includes(Ls(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(f):n(f)}function u(f){return n(f)}}function W7(t,e,n){return i;function i(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),l}function l(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const X7={name:"labelStartImage",resolveAll:Lm.resolveAll,tokenize:eM};function eM(t,e,n){const i=this;return l;function l(f){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(f),t.exit("labelImageMarker"),o}function o(f){return f===91?(t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelImage"),u):n(f)}function u(f){return f===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(f):e(f)}}const tM={name:"labelStartLink",resolveAll:Lm.resolveAll,tokenize:nM};function nM(t,e,n){const i=this;return l;function l(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):e(u)}}const vf={name:"lineEnding",tokenize:iM};function iM(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),yt(t,e,"linePrefix")}}const Qo={name:"thematicBreak",tokenize:rM};function rM(t,e,n){let i=0,l;return o;function o(m){return t.enter("thematicBreak"),u(m)}function u(m){return l=m,f(m)}function f(m){return m===l?(t.enter("thematicBreakSequence"),g(m)):i>=3&&(m===null||Pe(m))?(t.exit("thematicBreak"),e(m)):n(m)}function g(m){return m===l?(t.consume(m),i++,g):(t.exit("thematicBreakSequence"),lt(m)?yt(t,f,"whitespace")(m):f(m))}}const cn={continuation:{tokenize:oM},exit:uM,name:"list",tokenize:lM},sM={partial:!0,tokenize:dM},aM={partial:!0,tokenize:cM};function lM(t,e,n){const i=this,l=i.events[i.events.length-1];let o=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,u=0;return f;function f(w){const S=i.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!i.containerState.marker||w===i.containerState.marker:nm(w)){if(i.containerState.type||(i.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(Qo,n,m)(w):m(w);if(!i.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),g(w)}return n(w)}function g(w){return nm(w)&&++u<10?(t.consume(w),g):(!i.interrupt||u<2)&&(i.containerState.marker?w===i.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),m(w)):n(w)}function m(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||w,t.check(Nc,i.interrupt?n:x,t.attempt(sM,N,v))}function x(w){return i.containerState.initialBlankLine=!0,o++,N(w)}function v(w){return lt(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),N):n(w)}function N(w){return i.containerState.size=o+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(w)}}function oM(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Nc,l,o);function l(f){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,yt(t,e,"listItemIndent",i.containerState.size+1)(f)}function o(f){return i.containerState.furtherBlankLines||!lt(f)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,u(f)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(aM,e,u)(f))}function u(f){return i.containerState._closeFlow=!0,i.interrupt=void 0,yt(t,t.attempt(cn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function cM(t,e,n){const i=this;return yt(t,l,"listItemIndent",i.containerState.size+1);function l(o){const u=i.events[i.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===i.containerState.size?e(o):n(o)}}function uM(t){t.exit(this.containerState.type)}function dM(t,e,n){const i=this;return yt(t,l,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(o){const u=i.events[i.events.length-1];return!lt(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const g1={name:"setextUnderline",resolveTo:fM,tokenize:mM};function fM(t,e){let n=t.length,i,l,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(l=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[l][1].type="setextHeadingText",o?(t.splice(l,0,["enter",u,e]),t.splice(o+1,0,["exit",t[i][1],e]),t[i][1].end={...t[o][1].end}):t[i][1]=u,t.push(["exit",u,e]),t}function mM(t,e,n){const i=this;let l;return o;function o(m){let x=i.events.length,v;for(;x--;)if(i.events[x][1].type!=="lineEnding"&&i.events[x][1].type!=="linePrefix"&&i.events[x][1].type!=="content"){v=i.events[x][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(t.enter("setextHeadingLine"),l=m,u(m)):n(m)}function u(m){return t.enter("setextHeadingLineSequence"),f(m)}function f(m){return m===l?(t.consume(m),f):(t.exit("setextHeadingLineSequence"),lt(m)?yt(t,g,"lineSuffix")(m):g(m))}function g(m){return m===null||Pe(m)?(t.exit("setextHeadingLine"),e(m)):n(m)}}const hM={tokenize:pM};function pM(t){const e=this,n=t.attempt(Nc,i,t.attempt(this.parser.constructs.flowInitial,l,yt(t,t.attempt(this.parser.constructs.flow,l,t.attempt(b7,l)),"linePrefix")));return n;function i(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function l(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const gM={resolveAll:fb()},xM=db("string"),yM=db("text");function db(t){return{resolveAll:fb(t==="text"?vM:void 0),tokenize:e};function e(n){const i=this,l=this.parser.constructs[t],o=n.attempt(l,u,f);return u;function u(x){return m(x)?o(x):f(x)}function f(x){if(x===null){n.consume(x);return}return n.enter("data"),n.consume(x),g}function g(x){return m(x)?(n.exit("data"),o(x)):(n.consume(x),g)}function m(x){if(x===null)return!0;const v=l[x];let N=-1;if(v)for(;++N<v.length;){const w=v[N];if(!w.previous||w.previous.call(i,i.previous))return!0}return!1}}}function fb(t){return e;function e(n,i){let l=-1,o;for(;++l<=n.length;)o===void 0?n[l]&&n[l][1].type==="data"&&(o=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==o+2&&(n[o][1].end=n[l-1][1].end,n.splice(o+2,l-o-2),l=o+2),o=void 0);return t?t(n,i):n}}function vM(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],l=e.sliceStream(i);let o=l.length,u=-1,f=0,g;for(;o--;){const m=l[o];if(typeof m=="string"){for(u=m.length;m.charCodeAt(u-1)===32;)f++,u--;if(u)break;u=-1}else if(m===-2)g=!0,f++;else if(m!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(f=0),f){const m={type:n===t.length||g||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:i.start._bufferIndex+u,_index:i.start._index+o,line:i.end.line,column:i.end.column-f,offset:i.end.offset-f},end:{...i.end}};i.end={...m.start},i.start.offset===i.end.offset?Object.assign(i,m):(t.splice(n,0,["enter",m,e],["exit",m,e]),n+=2)}n++}return t}const bM={42:cn,43:cn,45:cn,48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,62:rb},wM={91:T7},NM={[-2]:yf,[-1]:yf,32:yf},CM={35:M7,42:Qo,45:[g1,Qo],60:L7,61:g1,95:Qo,96:h1,126:h1},SM={38:ab,92:sb},TM={[-5]:vf,[-4]:vf,[-3]:vf,33:X7,38:ab,42:im,60:[t7,$7],91:tM,92:[A7,sb],93:Lm,95:im,96:h7},jM={null:[im,gM]},kM={null:[42,95]},EM={null:[]},AM=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kM,contentInitial:wM,disable:EM,document:bM,flow:CM,flowInitial:NM,insideSpan:jM,string:SM,text:TM},Symbol.toStringTag,{value:"Module"}));function _M(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},o=[];let u=[],f=[];const g={attempt:R(H),check:R(I),consume:L,enter:D,exit:O,interrupt:R(I,{interrupt:!0})},m={code:null,containerState:{},defineSkip:j,events:[],now:S,parser:t,previous:null,sliceSerialize:N,sliceStream:w,write:v};let x=e.tokenize.call(m,g);return e.resolveAll&&o.push(e),m;function v(G){return u=Dn(u,G),k(),u[u.length-1]!==null?[]:(q(e,0),m.events=Dm(o,m.events,m),m.events)}function N(G,J){return RM(w(G),J)}function w(G){return MM(u,G)}function S(){const{_bufferIndex:G,_index:J,line:z,column:$,offset:Y}=i;return{_bufferIndex:G,_index:J,line:z,column:$,offset:Y}}function j(G){l[G.line]=G.column,W()}function k(){let G;for(;i._index<u.length;){const J=u[i._index];if(typeof J=="string")for(G=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===G&&i._bufferIndex<J.length;)E(J.charCodeAt(i._bufferIndex));else E(J)}}function E(G){x=x(G)}function L(G){Pe(G)?(i.line++,i.column=1,i.offset+=G===-3?2:1,W()):G!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===u[i._index].length&&(i._bufferIndex=-1,i._index++)),m.previous=G}function D(G,J){const z=J||{};return z.type=G,z.start=S(),m.events.push(["enter",z,m]),f.push(z),z}function O(G){const J=f.pop();return J.end=S(),m.events.push(["exit",J,m]),J}function H(G,J){q(G,J.from)}function I(G,J){J.restore()}function R(G,J){return z;function z($,Y,P){let Z,fe,Q,C;return Array.isArray($)?ee($):"tokenize"in $?ee([$]):V($);function V(ne){return me;function me(ue){const Ne=ue!==null&&ne[ue],Je=ue!==null&&ne.null,Xe=[...Array.isArray(Ne)?Ne:Ne?[Ne]:[],...Array.isArray(Je)?Je:Je?[Je]:[]];return ee(Xe)(ue)}}function ee(ne){return Z=ne,fe=0,ne.length===0?P:M(ne[fe])}function M(ne){return me;function me(ue){return C=B(),Q=ne,ne.partial||(m.currentConstruct=ne),ne.name&&m.parser.constructs.disable.null.includes(ne.name)?we():ne.tokenize.call(J?Object.assign(Object.create(m),J):m,g,ge,we)(ue)}}function ge(ne){return G(Q,C),Y}function we(ne){return C.restore(),++fe<Z.length?M(Z[fe]):P}}}function q(G,J){G.resolveAll&&!o.includes(G)&&o.push(G),G.resolve&&si(m.events,J,m.events.length-J,G.resolve(m.events.slice(J),m)),G.resolveTo&&(m.events=G.resolveTo(m.events,m))}function B(){const G=S(),J=m.previous,z=m.currentConstruct,$=m.events.length,Y=Array.from(f);return{from:$,restore:P};function P(){i=G,m.previous=J,m.currentConstruct=z,m.events.length=$,f=Y,W()}}function W(){i.line in l&&i.column<2&&(i.column=l[i.line],i.offset+=l[i.line]-1)}}function MM(t,e){const n=e.start._index,i=e.start._bufferIndex,l=e.end._index,o=e.end._bufferIndex;let u;if(n===l)u=[t[n].slice(i,o)];else{if(u=t.slice(n,l),i>-1){const f=u[0];typeof f=="string"?u[0]=f.slice(i):u.shift()}o>0&&u.push(t[l].slice(0,o))}return u}function RM(t,e){let n=-1;const i=[];let l;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&l)continue;u=" ";break}default:u=String.fromCharCode(o)}l=o===-2,i.push(u)}return i.join("")}function IM(t){const i={constructs:z_([AM,...(t||{}).extensions||[]]),content:l(Y_),defined:[],document:l(Q_),flow:l(hM),lazy:{},string:l(xM),text:l(yM)};return i;function l(o){return u;function u(f){return _M(i,o,f)}}}function DM(t){for(;!lb(t););return t}const x1=/[\0\t\n\r]/g;function LM(){let t=1,e="",n=!0,i;return l;function l(o,u,f){const g=[];let m,x,v,N,w;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),v=0,e="",n&&(o.charCodeAt(0)===65279&&v++,n=void 0);v<o.length;){if(x1.lastIndex=v,m=x1.exec(o),N=m&&m.index!==void 0?m.index:o.length,w=o.charCodeAt(N),!m){e=o.slice(v);break}if(w===10&&v===N&&i)g.push(-3),i=void 0;else switch(i&&(g.push(-5),i=void 0),v<N&&(g.push(o.slice(v,N)),t+=N-v),w){case 0:{g.push(65533),t++;break}case 9:{for(x=Math.ceil(t/4)*4,g.push(-2);t++<x;)g.push(-1);break}case 10:{g.push(-4),t=1;break}default:i=!0,t=1}v=N+1}return f&&(i&&g.push(-5),e&&g.push(e),g.push(null)),g}}const PM=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function OM(t){return t.replace(PM,BM)}function BM(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),o=l===120||l===88;return ib(n.slice(o?2:1),o?16:10)}return Im(n)||t}const mb={}.hasOwnProperty;function UM(t,e,n){return typeof e!="string"&&(n=e,e=void 0),zM(n)(DM(IM(n).document().write(LM()(t,e,!0))))}function zM(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Fn),autolinkProtocol:B,autolinkEmail:B,atxHeading:o(Xt),blockQuote:o(Je),characterEscape:B,characterReference:B,codeFenced:o(Xe),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(Xe,u),codeText:o(ht,u),codeTextData:B,data:B,codeFlowValue:B,definition:o(wt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(Ot),hardBreakEscape:o(Cn),hardBreakTrailing:o(Cn),htmlFlow:o(Bt,u),htmlFlowData:B,htmlText:o(Bt,u),htmlTextData:B,image:o(Mi),label:u,link:o(Fn),listItem:o(Hn),listItemValue:N,listOrdered:o(oi,v),listUnordered:o(oi),paragraph:o(or),reference:M,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(Xt),strong:o(Pn),thematicBreak:o(cr)},exit:{atxHeading:g(),atxHeadingSequence:H,autolink:g(),autolinkEmail:Ne,autolinkProtocol:ue,blockQuote:g(),characterEscapeValue:W,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:ne,characterReference:me,codeFenced:g(k),codeFencedFence:j,codeFencedFenceInfo:w,codeFencedFenceMeta:S,codeFlowValue:W,codeIndented:g(E),codeText:g(Y),codeTextData:W,data:W,definition:g(),definitionDestinationString:O,definitionLabelString:L,definitionTitleString:D,emphasis:g(),hardBreakEscape:g(J),hardBreakTrailing:g(J),htmlFlow:g(z),htmlFlowData:W,htmlText:g($),htmlTextData:W,image:g(Z),label:Q,labelText:fe,lineEnding:G,link:g(P),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:ge,resourceDestinationString:C,resourceTitleString:V,resource:ee,setextHeading:g(q),setextHeadingLineSequence:R,setextHeadingText:I,strong:g(),thematicBreak:g()}};hb(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(le){let he={type:"root",children:[]};const ae={stack:[he],tokenStack:[],config:e,enter:f,exit:m,buffer:u,resume:x,data:n},pe=[];let Ee=-1;for(;++Ee<le.length;)if(le[Ee][1].type==="listOrdered"||le[Ee][1].type==="listUnordered")if(le[Ee][0]==="enter")pe.push(Ee);else{const tt=pe.pop();Ee=l(le,tt,Ee)}for(Ee=-1;++Ee<le.length;){const tt=e[le[Ee][0]];mb.call(tt,le[Ee][1].type)&&tt[le[Ee][1].type].call(Object.assign({sliceSerialize:le[Ee][2].sliceSerialize},ae),le[Ee][1])}if(ae.tokenStack.length>0){const tt=ae.tokenStack[ae.tokenStack.length-1];(tt[1]||y1).call(ae,void 0,tt[0])}for(he.position={start:tr(le.length>0?le[0][1].start:{line:1,column:1,offset:0}),end:tr(le.length>0?le[le.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<e.transforms.length;)he=e.transforms[Ee](he)||he;return he}function l(le,he,ae){let pe=he-1,Ee=-1,tt=!1,mn,Ut,Oe,en;for(;++pe<=ae;){const ze=le[pe];switch(ze[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ze[0]==="enter"?Ee++:Ee--,en=void 0;break}case"lineEndingBlank":{ze[0]==="enter"&&(mn&&!en&&!Ee&&!Oe&&(Oe=pe),en=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:en=void 0}if(!Ee&&ze[0]==="enter"&&ze[1].type==="listItemPrefix"||Ee===-1&&ze[0]==="exit"&&(ze[1].type==="listUnordered"||ze[1].type==="listOrdered")){if(mn){let Ht=pe;for(Ut=void 0;Ht--;){const zt=le[Ht];if(zt[1].type==="lineEnding"||zt[1].type==="lineEndingBlank"){if(zt[0]==="exit")continue;Ut&&(le[Ut][1].type="lineEndingBlank",tt=!0),zt[1].type="lineEnding",Ut=Ht}else if(!(zt[1].type==="linePrefix"||zt[1].type==="blockQuotePrefix"||zt[1].type==="blockQuotePrefixWhitespace"||zt[1].type==="blockQuoteMarker"||zt[1].type==="listItemIndent"))break}Oe&&(!Ut||Oe<Ut)&&(mn._spread=!0),mn.end=Object.assign({},Ut?le[Ut][1].start:ze[1].end),le.splice(Ut||pe,0,["exit",mn,ze[2]]),pe++,ae++}if(ze[1].type==="listItemPrefix"){const Ht={type:"listItem",_spread:!1,start:Object.assign({},ze[1].start),end:void 0};mn=Ht,le.splice(pe,0,["enter",Ht,ze[2]]),pe++,ae++,Oe=void 0,en=!0}}}return le[he][1]._spread=tt,ae}function o(le,he){return ae;function ae(pe){f.call(this,le(pe),pe),he&&he.call(this,pe)}}function u(){this.stack.push({type:"fragment",children:[]})}function f(le,he,ae){this.stack[this.stack.length-1].children.push(le),this.stack.push(le),this.tokenStack.push([he,ae||void 0]),le.position={start:tr(he.start),end:void 0}}function g(le){return he;function he(ae){le&&le.call(this,ae),m.call(this,ae)}}function m(le,he){const ae=this.stack.pop(),pe=this.tokenStack.pop();if(pe)pe[0].type!==le.type&&(he?he.call(this,le,pe[0]):(pe[1]||y1).call(this,le,pe[0]));else throw new Error("Cannot close `"+le.type+"` ("+al({start:le.start,end:le.end})+"): its not open");ae.position.end=tr(le.end)}function x(){return B_(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function N(le){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(le),10),this.data.expectingFirstListItemValue=void 0}}function w(){const le=this.resume(),he=this.stack[this.stack.length-1];he.lang=le}function S(){const le=this.resume(),he=this.stack[this.stack.length-1];he.meta=le}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const le=this.resume(),he=this.stack[this.stack.length-1];he.value=le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const le=this.resume(),he=this.stack[this.stack.length-1];he.value=le.replace(/(\r?\n|\r)$/g,"")}function L(le){const he=this.resume(),ae=this.stack[this.stack.length-1];ae.label=he,ae.identifier=Ls(this.sliceSerialize(le)).toLowerCase()}function D(){const le=this.resume(),he=this.stack[this.stack.length-1];he.title=le}function O(){const le=this.resume(),he=this.stack[this.stack.length-1];he.url=le}function H(le){const he=this.stack[this.stack.length-1];if(!he.depth){const ae=this.sliceSerialize(le).length;he.depth=ae}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function R(le){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(le).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function B(le){const ae=this.stack[this.stack.length-1].children;let pe=ae[ae.length-1];(!pe||pe.type!=="text")&&(pe=ci(),pe.position={start:tr(le.start),end:void 0},ae.push(pe)),this.stack.push(pe)}function W(le){const he=this.stack.pop();he.value+=this.sliceSerialize(le),he.position.end=tr(le.end)}function G(le){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ae=he.children[he.children.length-1];ae.position.end=tr(le.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(he.type)&&(B.call(this,le),W.call(this,le))}function J(){this.data.atHardBreak=!0}function z(){const le=this.resume(),he=this.stack[this.stack.length-1];he.value=le}function $(){const le=this.resume(),he=this.stack[this.stack.length-1];he.value=le}function Y(){const le=this.resume(),he=this.stack[this.stack.length-1];he.value=le}function P(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=he,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function Z(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=he,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function fe(le){const he=this.sliceSerialize(le),ae=this.stack[this.stack.length-2];ae.label=OM(he),ae.identifier=Ls(he).toLowerCase()}function Q(){const le=this.stack[this.stack.length-1],he=this.resume(),ae=this.stack[this.stack.length-1];if(this.data.inReference=!0,ae.type==="link"){const pe=le.children;ae.children=pe}else ae.alt=he}function C(){const le=this.resume(),he=this.stack[this.stack.length-1];he.url=le}function V(){const le=this.resume(),he=this.stack[this.stack.length-1];he.title=le}function ee(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function ge(le){const he=this.resume(),ae=this.stack[this.stack.length-1];ae.label=he,ae.identifier=Ls(this.sliceSerialize(le)).toLowerCase(),this.data.referenceType="full"}function we(le){this.data.characterReferenceType=le.type}function ne(le){const he=this.sliceSerialize(le),ae=this.data.characterReferenceType;let pe;ae?(pe=ib(he,ae==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):pe=Im(he);const Ee=this.stack[this.stack.length-1];Ee.value+=pe}function me(le){const he=this.stack.pop();he.position.end=tr(le.end)}function ue(le){W.call(this,le);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(le)}function Ne(le){W.call(this,le);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(le)}function Je(){return{type:"blockquote",children:[]}}function Xe(){return{type:"code",lang:null,meta:null,value:""}}function ht(){return{type:"inlineCode",value:""}}function wt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ot(){return{type:"emphasis",children:[]}}function Xt(){return{type:"heading",depth:0,children:[]}}function Cn(){return{type:"break"}}function Bt(){return{type:"html",value:""}}function Mi(){return{type:"image",title:null,url:"",alt:null}}function Fn(){return{type:"link",title:null,url:"",children:[]}}function oi(le){return{type:"list",ordered:le.type==="listOrdered",start:null,spread:le._spread,children:[]}}function Hn(le){return{type:"listItem",spread:le._spread,checked:null,children:[]}}function or(){return{type:"paragraph",children:[]}}function Pn(){return{type:"strong",children:[]}}function ci(){return{type:"text",value:""}}function cr(){return{type:"thematicBreak"}}}function tr(t){return{line:t.line,column:t.column,offset:t.offset}}function hb(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?hb(t,i):VM(t,i)}}function VM(t,e){let n;for(n in e)if(mb.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function y1(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+al({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+al({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+al({start:e.start,end:e.end})+") is still open")}function $M(t){const e=this;e.parser=n;function n(i){return UM(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qM(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function FM(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function HM(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let l={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(l.data={meta:e.meta}),t.patch(e,l),l=t.applyData(e,l),l={type:"element",tagName:"pre",properties:{},children:[l]},t.patch(e,l),l}function GM(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function JM(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YM(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),l=Zs(i.toLowerCase()),o=t.footnoteOrder.indexOf(i);let u,f=t.footnoteCounts.get(i);f===void 0?(f=0,t.footnoteOrder.push(i),u=t.footnoteOrder.length):u=o+1,f+=1,t.footnoteCounts.set(i,f);const g={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,g);const m={type:"element",tagName:"sup",properties:{},children:[g]};return t.patch(e,m),t.applyData(e,m)}function ZM(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QM(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function pb(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const l=t.all(e),o=l[0];o&&o.type==="text"?o.value="["+o.value:l.unshift({type:"text",value:"["});const u=l[l.length-1];return u&&u.type==="text"?u.value+=i:l.push({type:"text",value:i}),l}function KM(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return pb(t,e);const l={src:Zs(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(l.title=i.title);const o={type:"element",tagName:"img",properties:l,children:[]};return t.patch(e,o),t.applyData(e,o)}function WM(t,e){const n={src:Zs(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function XM(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function e8(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return pb(t,e);const l={href:Zs(i.url||"")};i.title!==null&&i.title!==void 0&&(l.title=i.title);const o={type:"element",tagName:"a",properties:l,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function t8(t,e){const n={href:Zs(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function n8(t,e,n){const i=t.all(e),l=n?i8(n):gb(e),o={},u=[];if(typeof e.checked=="boolean"){const x=i[0];let v;x&&x.type==="element"&&x.tagName==="p"?v=x:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let f=-1;for(;++f<i.length;){const x=i[f];(l||f!==0||x.type!=="element"||x.tagName!=="p")&&u.push({type:"text",value:`
`}),x.type==="element"&&x.tagName==="p"&&!l?u.push(...x.children):u.push(x)}const g=i[i.length-1];g&&(l||g.type!=="element"||g.tagName!=="p")&&u.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,m),t.applyData(e,m)}function i8(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=gb(n[i])}return e}function gb(t){const e=t.spread;return e??t.children.length>1}function r8(t,e){const n={},i=t.all(e);let l=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++l<i.length;){const u=i[l];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function s8(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function a8(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function l8(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function o8(t,e){const n=t.all(e),i=n.shift(),l=[];if(i){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],u),l.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},f=Am(e.children[1]),g=Qv(e.children[e.children.length-1]);f&&g&&(u.position={start:f,end:g}),l.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(l,!0)};return t.patch(e,o),t.applyData(e,o)}function c8(t,e,n){const i=n?n.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,f=u?u.length:e.children.length;let g=-1;const m=[];for(;++g<f;){const v=e.children[g],N={},w=u?u[g]:void 0;w&&(N.align=w);let S={type:"element",tagName:o,properties:N,children:[]};v&&(S.children=t.all(v),t.patch(v,S),S=t.applyData(v,S)),m.push(S)}const x={type:"element",tagName:"tr",properties:{},children:t.wrap(m,!0)};return t.patch(e,x),t.applyData(e,x)}function u8(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const v1=9,b1=32;function d8(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),l=0;const o=[];for(;i;)o.push(w1(e.slice(l,i.index),l>0,!0),i[0]),l=i.index+i[0].length,i=n.exec(e);return o.push(w1(e.slice(l),l>0,!1)),o.join("")}function w1(t,e,n){let i=0,l=t.length;if(e){let o=t.codePointAt(i);for(;o===v1||o===b1;)i++,o=t.codePointAt(i)}if(n){let o=t.codePointAt(l-1);for(;o===v1||o===b1;)l--,o=t.codePointAt(l-1)}return l>i?t.slice(i,l):""}function f8(t,e){const n={type:"text",value:d8(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function m8(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const h8={blockquote:qM,break:FM,code:HM,delete:GM,emphasis:JM,footnoteReference:YM,heading:ZM,html:QM,imageReference:KM,image:WM,inlineCode:XM,linkReference:e8,link:t8,listItem:n8,list:r8,paragraph:s8,root:a8,strong:l8,table:o8,tableCell:u8,tableRow:c8,text:f8,thematicBreak:m8,toml:Oo,yaml:Oo,definition:Oo,footnoteDefinition:Oo};function Oo(){}const xb=-1,Cc=0,ol=1,dc=2,Pm=3,Om=4,Bm=5,Um=6,yb=7,vb=8,N1=typeof self=="object"?self:globalThis,p8=(t,e)=>{const n=(l,o)=>(t.set(o,l),l),i=l=>{if(t.has(l))return t.get(l);const[o,u]=e[l];switch(o){case Cc:case xb:return n(u,l);case ol:{const f=n([],l);for(const g of u)f.push(i(g));return f}case dc:{const f=n({},l);for(const[g,m]of u)f[i(g)]=i(m);return f}case Pm:return n(new Date(u),l);case Om:{const{source:f,flags:g}=u;return n(new RegExp(f,g),l)}case Bm:{const f=n(new Map,l);for(const[g,m]of u)f.set(i(g),i(m));return f}case Um:{const f=n(new Set,l);for(const g of u)f.add(i(g));return f}case yb:{const{name:f,message:g}=u;return n(new N1[f](g),l)}case vb:return n(BigInt(u),l);case"BigInt":return n(Object(BigInt(u)),l);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:f}=new Uint8Array(u);return n(new DataView(f),u)}}return n(new N1[o](u),l)};return i},C1=t=>p8(new Map,t)(0),ks="",{toString:g8}={},{keys:x8}=Object,tl=t=>{const e=typeof t;if(e!=="object"||!t)return[Cc,e];const n=g8.call(t).slice(8,-1);switch(n){case"Array":return[ol,ks];case"Object":return[dc,ks];case"Date":return[Pm,ks];case"RegExp":return[Om,ks];case"Map":return[Bm,ks];case"Set":return[Um,ks];case"DataView":return[ol,n]}return n.includes("Array")?[ol,n]:n.includes("Error")?[yb,n]:[dc,n]},Bo=([t,e])=>t===Cc&&(e==="function"||e==="symbol"),y8=(t,e,n,i)=>{const l=(u,f)=>{const g=i.push(u)-1;return n.set(f,g),g},o=u=>{if(n.has(u))return n.get(u);let[f,g]=tl(u);switch(f){case Cc:{let x=u;switch(g){case"bigint":f=vb,x=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+g);x=null;break;case"undefined":return l([xb],u)}return l([f,x],u)}case ol:{if(g){let N=u;return g==="DataView"?N=new Uint8Array(u.buffer):g==="ArrayBuffer"&&(N=new Uint8Array(u)),l([g,[...N]],u)}const x=[],v=l([f,x],u);for(const N of u)x.push(o(N));return v}case dc:{if(g)switch(g){case"BigInt":return l([g,u.toString()],u);case"Boolean":case"Number":case"String":return l([g,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const x=[],v=l([f,x],u);for(const N of x8(u))(t||!Bo(tl(u[N])))&&x.push([o(N),o(u[N])]);return v}case Pm:return l([f,u.toISOString()],u);case Om:{const{source:x,flags:v}=u;return l([f,{source:x,flags:v}],u)}case Bm:{const x=[],v=l([f,x],u);for(const[N,w]of u)(t||!(Bo(tl(N))||Bo(tl(w))))&&x.push([o(N),o(w)]);return v}case Um:{const x=[],v=l([f,x],u);for(const N of u)(t||!Bo(tl(N)))&&x.push(o(N));return v}}const{message:m}=u;return l([f,{name:g,message:m}],u)};return o},S1=(t,{json:e,lossy:n}={})=>{const i=[];return y8(!(e||n),!!e,new Map,i)(t),i},fc=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?C1(S1(t,e)):structuredClone(t):(t,e)=>C1(S1(t,e));function v8(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function b8(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function w8(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||v8,i=t.options.footnoteBackLabel||b8,l=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let g=-1;for(;++g<t.footnoteOrder.length;){const m=t.footnoteById.get(t.footnoteOrder[g]);if(!m)continue;const x=t.all(m),v=String(m.identifier).toUpperCase(),N=Zs(v.toLowerCase());let w=0;const S=[],j=t.footnoteCounts.get(v);for(;j!==void 0&&++w<=j;){S.length>0&&S.push({type:"text",value:" "});let L=typeof n=="string"?n:n(g,w);typeof L=="string"&&(L={type:"text",value:L}),S.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+N+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(g,w),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const k=x[x.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const L=k.children[k.children.length-1];L&&L.type==="text"?L.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...S)}else x.push(...S);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+N},children:t.wrap(x,!0)};t.patch(m,E),f.push(E)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...fc(u),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(f,!0)},{type:"text",value:`
`}]}}const bb=function(t){if(t==null)return T8;if(typeof t=="function")return Sc(t);if(typeof t=="object")return Array.isArray(t)?N8(t):C8(t);if(typeof t=="string")return S8(t);throw new Error("Expected function, string, or object as test")};function N8(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=bb(t[n]);return Sc(i);function i(...l){let o=-1;for(;++o<e.length;)if(e[o].apply(this,l))return!0;return!1}}function C8(t){const e=t;return Sc(n);function n(i){const l=i;let o;for(o in t)if(l[o]!==e[o])return!1;return!0}}function S8(t){return Sc(e);function e(n){return n&&n.type===t}}function Sc(t){return e;function e(n,i,l){return!!(j8(n)&&t.call(this,n,typeof i=="number"?i:void 0,l||void 0))}}function T8(){return!0}function j8(t){return t!==null&&typeof t=="object"&&"type"in t}const wb=[],k8=!0,T1=!1,E8="skip";function A8(t,e,n,i){let l;typeof e=="function"&&typeof n!="function"?(i=n,n=e):l=e;const o=bb(l),u=i?-1:1;f(t,void 0,[])();function f(g,m,x){const v=g&&typeof g=="object"?g:{};if(typeof v.type=="string"){const w=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(N,"name",{value:"node ("+(g.type+(w?"<"+w+">":""))+")"})}return N;function N(){let w=wb,S,j,k;if((!e||o(g,m,x[x.length-1]||void 0))&&(w=_8(n(g,x)),w[0]===T1))return w;if("children"in g&&g.children){const E=g;if(E.children&&w[0]!==E8)for(j=(i?E.children.length:-1)+u,k=x.concat(E);j>-1&&j<E.children.length;){const L=E.children[j];if(S=f(L,j,k)(),S[0]===T1)return S;j=typeof S[1]=="number"?S[1]:j+u}}return w}}}function _8(t){return Array.isArray(t)?t:typeof t=="number"?[k8,t]:t==null?wb:[t]}function Nb(t,e,n,i){let l,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,l=n):(o=e,u=n,l=i),A8(t,o,f,l);function f(g,m){const x=m[m.length-1],v=x?x.children.indexOf(g):void 0;return u(g,v,x)}}const rm={}.hasOwnProperty,M8={};function R8(t,e){const n=e||M8,i=new Map,l=new Map,o=new Map,u={...h8,...n.handlers},f={all:m,applyData:D8,definitionById:i,footnoteById:l,footnoteCounts:o,footnoteOrder:[],handlers:u,one:g,options:n,patch:I8,wrap:P8};return Nb(t,function(x){if(x.type==="definition"||x.type==="footnoteDefinition"){const v=x.type==="definition"?i:l,N=String(x.identifier).toUpperCase();v.has(N)||v.set(N,x)}}),f;function g(x,v){const N=x.type,w=f.handlers[N];if(rm.call(f.handlers,N)&&w)return w(f,x,v);if(f.options.passThrough&&f.options.passThrough.includes(N)){if("children"in x){const{children:j,...k}=x,E=fc(k);return E.children=f.all(x),E}return fc(x)}return(f.options.unknownHandler||L8)(f,x,v)}function m(x){const v=[];if("children"in x){const N=x.children;let w=-1;for(;++w<N.length;){const S=f.one(N[w],x);if(S){if(w&&N[w-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=j1(S.value)),!Array.isArray(S)&&S.type==="element")){const j=S.children[0];j&&j.type==="text"&&(j.value=j1(j.value))}Array.isArray(S)?v.push(...S):v.push(S)}}}return v}}function I8(t,e){t.position&&(e.position=g_(t))}function D8(t,e){let n=e;if(t&&t.data){const i=t.data.hName,l=t.data.hChildren,o=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const u="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,fc(o)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function L8(t,e){const n=e.data||{},i="value"in e&&!(rm.call(n,"hProperties")||rm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function P8(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function j1(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function k1(t,e){const n=R8(t,e),i=n.one(t,void 0),l=w8(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return l&&o.children.push({type:"text",value:`
`},l),o}function O8(t,e){return t&&"run"in t?async function(n,i){const l=k1(n,{file:i,...e});await t.run(l,i)}:function(n,i){return k1(n,{file:i,...t||e})}}function E1(t){if(t)throw t}var bf,A1;function B8(){if(A1)return bf;A1=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=function(m){return typeof Array.isArray=="function"?Array.isArray(m):e.call(m)==="[object Array]"},o=function(m){if(!m||e.call(m)!=="[object Object]")return!1;var x=t.call(m,"constructor"),v=m.constructor&&m.constructor.prototype&&t.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!x&&!v)return!1;var N;for(N in m);return typeof N>"u"||t.call(m,N)},u=function(m,x){n&&x.name==="__proto__"?n(m,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):m[x.name]=x.newValue},f=function(m,x){if(x==="__proto__")if(t.call(m,x)){if(i)return i(m,x).value}else return;return m[x]};return bf=function g(){var m,x,v,N,w,S,j=arguments[0],k=1,E=arguments.length,L=!1;for(typeof j=="boolean"&&(L=j,j=arguments[1]||{},k=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});k<E;++k)if(m=arguments[k],m!=null)for(x in m)v=f(j,x),N=f(m,x),j!==N&&(L&&N&&(o(N)||(w=l(N)))?(w?(w=!1,S=v&&l(v)?v:[]):S=v&&o(v)?v:{},u(j,{name:x,newValue:g(L,S,N)})):typeof N<"u"&&u(j,{name:x,newValue:N}));return j},bf}var U8=B8();const wf=ml(U8);function sm(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function z8(){const t=[],e={run:n,use:i};return e;function n(...l){let o=-1;const u=l.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);f(null,...l);function f(g,...m){const x=t[++o];let v=-1;if(g){u(g);return}for(;++v<l.length;)(m[v]===null||m[v]===void 0)&&(m[v]=l[v]);l=m,x?V8(x,f)(...m):u(null,...m)}}function i(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return t.push(l),e}}function V8(t,e){let n;return i;function i(...u){const f=t.length>u.length;let g;f&&u.push(l);try{g=t.apply(this,u)}catch(m){const x=m;if(f&&n)throw x;return l(x)}f||(g&&g.then&&typeof g.then=="function"?g.then(o,l):g instanceof Error?l(g):o(g))}function l(u,...f){n||(n=!0,e(u,...f))}function o(u){l(null,u)}}const Wn={basename:$8,dirname:q8,extname:F8,join:H8,sep:"/"};function $8(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');wl(t);let n=0,i=-1,l=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;l--;)if(t.codePointAt(l)===47){if(o){n=l+1;break}}else i<0&&(o=!0,i=l+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let u=-1,f=e.length-1;for(;l--;)if(t.codePointAt(l)===47){if(o){n=l+1;break}}else u<0&&(o=!0,u=l+1),f>-1&&(t.codePointAt(l)===e.codePointAt(f--)?f<0&&(i=l):(f=-1,i=u));return n===i?i=u:i<0&&(i=t.length),t.slice(n,i)}function q8(t){if(wl(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function F8(t){wl(t);let e=t.length,n=-1,i=0,l=-1,o=0,u;for(;e--;){const f=t.codePointAt(e);if(f===47){if(u){i=e+1;break}continue}n<0&&(u=!0,n=e+1),f===46?l<0?l=e:o!==1&&(o=1):l>-1&&(o=-1)}return l<0||n<0||o===0||o===1&&l===n-1&&l===i+1?"":t.slice(l,n)}function H8(...t){let e=-1,n;for(;++e<t.length;)wl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":G8(n)}function G8(t){wl(t);const e=t.codePointAt(0)===47;let n=J8(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function J8(t,e){let n="",i=0,l=-1,o=0,u=-1,f,g;for(;++u<=t.length;){if(u<t.length)f=t.codePointAt(u);else{if(f===47)break;f=47}if(f===47){if(!(l===u-1||o===1))if(l!==u-1&&o===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(g=n.lastIndexOf("/"),g!==n.length-1){g<0?(n="",i=0):(n=n.slice(0,g),i=n.length-1-n.lastIndexOf("/")),l=u,o=0;continue}}else if(n.length>0){n="",i=0,l=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(l+1,u):n=t.slice(l+1,u),i=u-l-1;l=u,o=0}else f===46&&o>-1?o++:o=-1}return n}function wl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Y8={cwd:Z8};function Z8(){return"/"}function am(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Q8(t){if(typeof t=="string")t=new URL(t);else if(!am(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return K8(t)}function K8(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(e)}const Nf=["history","path","basename","stem","extname","dirname"];class Cb{constructor(e){let n;e?am(e)?n={path:e}:typeof e=="string"||W8(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Y8.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Nf.length;){const o=Nf[i];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let l;for(l in n)Nf.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?Wn.basename(this.path):void 0}set basename(e){Sf(e,"basename"),Cf(e,"basename"),this.path=Wn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Wn.dirname(this.path):void 0}set dirname(e){_1(this.basename,"dirname"),this.path=Wn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Wn.extname(this.path):void 0}set extname(e){if(Cf(e,"extname"),_1(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){am(e)&&(e=Q8(e)),Sf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Wn.basename(this.path,this.extname):void 0}set stem(e){Sf(e,"stem"),Cf(e,"stem"),this.path=Wn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const l=this.message(e,n,i);throw l.fatal=!0,l}info(e,n,i){const l=this.message(e,n,i);return l.fatal=void 0,l}message(e,n,i){const l=new Wt(e,n,i);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Cf(t,e){if(t&&t.includes(Wn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Wn.sep+"`")}function Sf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function _1(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function W8(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const X8=function(t){const i=this.constructor.prototype,l=i[t],o=function(){return l.apply(o,arguments)};return Object.setPrototypeOf(o,i),o},eR={}.hasOwnProperty;class zm extends X8{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=z8()}copy(){const e=new zm;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(wf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(kf("data",this.frozen),this.namespace[e]=n,this):eR.call(this.namespace,e)&&this.namespace[e]||void 0:e?(kf("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const l=n.call(e,...i);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Uo(e),i=this.parser||this.Parser;return Tf("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),Tf("process",this.parser||this.Parser),jf("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(o,u){const f=Uo(e),g=i.parse(f);i.run(g,f,function(x,v,N){if(x||!v||!N)return m(x);const w=v,S=i.stringify(w,N);iR(S)?N.value=S:N.result=S,m(x,N)});function m(x,v){x||!v?u(x):o?o(v):n(void 0,v)}}}processSync(e){let n=!1,i;return this.freeze(),Tf("processSync",this.parser||this.Parser),jf("processSync",this.compiler||this.Compiler),this.process(e,l),R1("processSync","process",n),i;function l(o,u){n=!0,E1(o),i=u}}run(e,n,i){M1(e),this.freeze();const l=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?o(void 0,i):new Promise(o);function o(u,f){const g=Uo(n);l.run(e,g,m);function m(x,v,N){const w=v||e;x?f(x):u?u(w):i(void 0,w,N)}}}runSync(e,n){let i=!1,l;return this.run(e,n,o),R1("runSync","run",i),l;function o(u,f){E1(u),l=f,i=!0}}stringify(e,n){this.freeze();const i=Uo(n),l=this.compiler||this.Compiler;return jf("stringify",l),M1(e),l(e,i)}use(e,...n){const i=this.attachers,l=this.namespace;if(kf("use",this.frozen),e!=null)if(typeof e=="function")g(e,n);else if(typeof e=="object")Array.isArray(e)?f(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(m){if(typeof m=="function")g(m,[]);else if(typeof m=="object")if(Array.isArray(m)){const[x,...v]=m;g(x,v)}else u(m);else throw new TypeError("Expected usable value, not `"+m+"`")}function u(m){if(!("plugins"in m)&&!("settings"in m))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(m.plugins),m.settings&&(l.settings=wf(!0,l.settings,m.settings))}function f(m){let x=-1;if(m!=null)if(Array.isArray(m))for(;++x<m.length;){const v=m[x];o(v)}else throw new TypeError("Expected a list of plugins, not `"+m+"`")}function g(m,x){let v=-1,N=-1;for(;++v<i.length;)if(i[v][0]===m){N=v;break}if(N===-1)i.push([m,...x]);else if(x.length>0){let[w,...S]=x;const j=i[N][1];sm(j)&&sm(w)&&(w=wf(!0,j,w)),i[N]=[m,w,...S]}}}}const tR=new zm().freeze();function Tf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function jf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function kf(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function M1(t){if(!sm(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function R1(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Uo(t){return nR(t)?t:new Cb(t)}function nR(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function iR(t){return typeof t=="string"||rR(t)}function rR(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sR="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",I1=[],D1={allowDangerousHtml:!0},aR=/^(https?|ircs?|mailto|xmpp)$/i,lR=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function oR(t){const e=cR(t),n=uR(t);return dR(e.runSync(e.parse(n),n),t)}function cR(t){const e=t.rehypePlugins||I1,n=t.remarkPlugins||I1,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...D1}:D1;return tR().use($M).use(n).use(O8,i).use(e)}function uR(t){const e=t.children||"",n=new Cb;return typeof e=="string"&&(n.value=e),n}function dR(t,e){const n=e.allowedElements,i=e.allowElement,l=e.components,o=e.disallowedElements,u=e.skipHtml,f=e.unwrapDisallowed,g=e.urlTransform||fR;for(const x of lR)Object.hasOwn(e,x.from)&&(""+x.from+(x.to?"use `"+x.to+"` instead":"remove it")+sR+x.id,void 0);return Nb(t,m),w_(t,{Fragment:s.Fragment,components:l,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function m(x,v,N){if(x.type==="raw"&&N&&typeof v=="number")return u?N.children.splice(v,1):N.children[v]={type:"text",value:x.value},v;if(x.type==="element"){let w;for(w in xf)if(Object.hasOwn(xf,w)&&Object.hasOwn(x.properties,w)){const S=x.properties[w],j=xf[w];(j===null||j.includes(x.tagName))&&(x.properties[w]=g(String(S||""),w,x))}}if(x.type==="element"){let w=n?!n.includes(x.tagName):o?o.includes(x.tagName):!1;if(!w&&i&&typeof v=="number"&&(w=!i(x,v,N)),w&&N&&typeof v=="number")return f&&x.children?N.children.splice(v,1,...x.children):N.children.splice(v,1),v}}}function fR(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),l=t.indexOf("/");return e===-1||l!==-1&&e>l||n!==-1&&e>n||i!==-1&&e>i||aR.test(t.slice(0,e))?t:""}const Vm=({content:t,className:e=""})=>s.jsx("div",{className:`prose prose-slate max-w-none ${e}`,children:s.jsx(oR,{components:{h1:({children:n})=>s.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4 mt-6 leading-tight",children:n}),h2:({children:n})=>s.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-3 mt-5 leading-tight",children:n}),h3:({children:n})=>s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-3 mt-4 leading-tight",children:n}),h4:({children:n})=>s.jsx("h4",{className:"text-base font-semibold text-slate-700 mb-2 mt-3 leading-tight",children:n}),p:({children:n})=>s.jsx("p",{className:"text-base leading-relaxed mb-4 text-slate-700",children:n}),ul:({children:n})=>s.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2 text-slate-700",children:n}),ol:({children:n})=>s.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-slate-700",children:n}),li:({children:n})=>s.jsx("li",{className:"leading-relaxed ml-4",children:n}),strong:({children:n})=>s.jsx("strong",{className:"font-bold text-slate-800",children:n}),em:({children:n})=>s.jsx("em",{className:"italic text-slate-700",children:n}),code:({className:n,children:i,...l})=>n?s.jsx("code",{className:"block bg-slate-100 text-slate-800 p-4 rounded-lg text-sm font-mono overflow-x-auto mb-4",...l,children:i}):s.jsx("code",{className:"bg-slate-100 text-slate-800 px-2 py-1 rounded text-sm font-mono",...l,children:i}),blockquote:({children:n})=>s.jsx("blockquote",{className:"border-l-4 border-indigo-300 pl-4 my-4 italic text-slate-600 bg-indigo-50 py-2 rounded-r",children:n}),hr:()=>s.jsx("hr",{className:"my-6 border-slate-300"}),a:({href:n,children:i})=>s.jsx("a",{href:n,className:"text-indigo-600 hover:text-indigo-800 underline font-medium",target:"_blank",rel:"noopener noreferrer",children:i}),table:({children:n})=>s.jsx("div",{className:"overflow-x-auto mb-4",children:s.jsx("table",{className:"w-full border-collapse border border-slate-300 rounded-lg",children:n})}),thead:({children:n})=>s.jsx("thead",{className:"bg-slate-100",children:n}),tbody:({children:n})=>s.jsx("tbody",{children:n}),tr:({children:n})=>s.jsx("tr",{className:"border-b border-slate-200",children:n}),th:({children:n})=>s.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left font-semibold text-slate-700",children:n}),td:({children:n})=>s.jsx("td",{className:"border border-slate-300 px-4 py-2 text-slate-700",children:n})},children:t})}),mR=()=>{const[t]=Pr(),e=t.get("contentId"),n=t.get("binId"),[i,l]=_.useState(null),[o,u]=_.useState(!0),[f,g]=_.useState(null),[m,x]=_.useState(null),[v,N]=_.useState(0),[w,S]=_.useState([]),[j,k]=_.useState({}),[E,L]=_.useState({});_.useEffect(()=>{D()},[e,n]);const D=async()=>{try{u(!0),g(null);let Q;if(n)Q=await vc(n);else if(e){await Zt.init();const C=await Zt.getLessonPlan(e);if(!C)throw new Error("");Q={topic:C.topic,learningObjectives:C.content.learningObjectives,contentBreakdown:C.content.contentBreakdown,confusingPoints:C.content.confusingPoints,classroomActivities:C.content.classroomActivities,onlineInteractiveQuiz:C.content.quiz,writingPractice:C.content.writingPractice}}else throw new Error("contentId  binId");l(Q),O(Q),await H(Q)}catch(Q){console.error(":",Q),g(Q.message||"")}finally{u(!1)}},O=Q=>{const C=[];Q.learningObjectives&&Q.learningObjectives.length>0&&Q.learningObjectives.forEach((V,ee)=>{C.push({id:`objective_${ee}`,title:`  ${ee+1}`,type:"objective",icon:"",description:V.objective.length>50?`${V.objective.substring(0,50)}...`:V.objective,data:V,index:ee})}),Q.contentBreakdown&&Q.contentBreakdown.length>0&&Q.contentBreakdown.forEach((V,ee)=>{C.push({id:`breakdown_${ee}`,title:`  ${ee+1}`,type:"breakdown",icon:"",description:V.topic.length>50?`${V.topic.substring(0,50)}...`:V.topic,data:V,index:ee})}),Q.confusingPoints&&Q.confusingPoints.length>0&&Q.confusingPoints.forEach((V,ee)=>{C.push({id:`confusing_${ee}`,title:`  ${ee+1}`,type:"confusing",icon:"",description:V.point.length>50?`${V.point.substring(0,50)}...`:V.point,data:V,index:ee})}),C.push({id:"summary",title:" ",type:"summary",icon:"",description:""}),S(C)},H=async Q=>{const C=e||n||"unknown",V=`interactive_learning_${C}`;try{const ee=localStorage.getItem(V);if(ee){const M=JSON.parse(ee);x(M)}else{const M={contentId:C,topic:Q.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};x(M),localStorage.setItem(V,JSON.stringify(M))}}catch(ee){console.error(":",ee);const M={contentId:C,topic:Q.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};x(M)}},I=Q=>{const C=`interactive_learning_${m==null?void 0:m.contentId}`;Q.updatedAt=Date.now(),Q.progress.lastUpdateTime=Date.now(),x(Q),localStorage.setItem(C,JSON.stringify(Q))},R=Q=>{Q>=0&&Q<w.length&&N(Q)},q=()=>{v<w.length-1&&N(v+1)},B=()=>{v>0&&N(v-1)},W=()=>localStorage.getItem("gemini_api_key")||"",G=async Q=>{const C=W();if(!C)return console.warn(" API "),null;const V=`${Q.type}_${Q.index||0}`;if(j[V]||E[V])return j[V]||null;try{L(M=>({...M,[V]:!0}));let ee=null;switch(Q.type){case"objective":ee=await qo(Q.data,C);break;case"breakdown":ee=await Fo(Q.data,C);break;case"confusing":ee=await Ho(Q.data,C);break;default:return null}return k(M=>({...M,[V]:ee})),ee}catch(ee){return console.error(":",ee),null}finally{L(ee=>({...ee,[V]:!1}))}},J=Q=>{const C=`${Q.type}_${Q.index||0}`;return!!j[C]},z=Q=>{const C=`${Q.type}_${Q.index||0}`;return!!E[C]},$=Q=>{const C=`${Q.type}_${Q.index||0}`;return j[C]||null},Y=Q=>Q?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(V=>V.test(Q)):!1,P=(Q,C)=>Y(Q)?s.jsx(Vm,{content:Q,className:C}):s.jsx("span",{className:C,children:Q});if(o)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsx(dn,{})})});if(f)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),s.jsx("p",{children:f})]})})});if(!i||!m||w.length===0)return null;const Z=w[v],fe=()=>{const Q=$(Z),C=J(Z),V=z(Z),ee=!!W();switch(Z.type){case"objective":const M=Z.data,ge=Z.index||0,we=Q||M;return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[ee&&Z.type!=="summary"&&s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800",children:C?"":""}),s.jsx("p",{className:"text-sm text-slate-600",children:C?"":""})]})]}),!C&&s.jsx("button",{onClick:()=>G(Z),disabled:V,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:V?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),C&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-sky-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:P(we.objective,"text-4xl font-bold leading-tight")}),we.description&&s.jsx("div",{className:"text-xl text-indigo-100 leading-relaxed max-w-3xl mx-auto",children:P(we.description,"text-xl text-indigo-100 leading-relaxed")})]}),C&&Q?s.jsxs("div",{className:"space-y-8 mb-8",children:[Q.personalRelevance&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:P(Q.personalRelevance,"text-lg leading-relaxed text-purple-900")})]}),Q.teachingExample&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:P(Q.teachingExample,"text-lg leading-relaxed text-green-900")})]}),Q.encouragement&&s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:P(Q.encouragement,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}):we.teachingExample&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed",children:P(we.teachingExample,"text-lg leading-relaxed")})]}),s.jsx("div",{className:"text-center",children:m.progress.completedObjectives.includes(`objective_${ge}`)?s.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),s.jsx("p",{className:"text-green-600",children:""})]}):s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),s.jsxs("button",{onClick:()=>{var Je;const ue=`objective_${ge}`,Ne={...m};if(!Ne.progress.completedObjectives.includes(ue)){Ne.progress.completedObjectives.push(ue),Ne.progress.interactionCount+=1;const Xe=(Je=i.learningObjectives)==null?void 0:Je.findIndex((ht,wt)=>!Ne.progress.completedObjectives.includes(`objective_${wt}`)&&wt>ge);Xe!==void 0&&Xe!==-1&&(Ne.progress.currentObjectiveIndex=Xe)}I(Ne)},className:"px-8 py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})})]});case"breakdown":const ne=Z.data;return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[ee&&Z.type!=="summary"&&s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800",children:C?"":""}),s.jsx("p",{className:"text-sm text-slate-600",children:C?"":""})]})]}),!C&&s.jsx("button",{onClick:()=>G(Z),disabled:V,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:V?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),C&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:C&&(Q!=null&&Q.title)?P(Q.title,"text-4xl font-bold leading-tight"):P(ne.topic,"text-4xl font-bold leading-tight")}),C&&(Q==null?void 0:Q.introduction)&&s.jsx("div",{className:"text-xl text-sky-100 leading-relaxed max-w-3xl mx-auto",children:P(Q.introduction,"text-xl text-sky-100 leading-relaxed")})]}),C&&Q?s.jsxs("div",{className:"space-y-8 mb-8",children:[Q.keyPoints&&Q.keyPoints.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Q.keyPoints.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:P(ue,"text-lg text-indigo-900 leading-relaxed")})]},Ne))})})]}),Q.realLifeExamples&&Q.realLifeExamples.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Q.realLifeExamples.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-green-900 leading-relaxed",children:P(ue,"text-lg text-green-900 leading-relaxed")})]},Ne))})})]}),Q.learningTips&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:P(Q.learningTips,"text-lg leading-relaxed text-purple-900")})]}),Q.nextSteps&&s.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-2xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-cyan-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-cyan-900",children:P(Q.nextSteps,"text-lg leading-relaxed text-cyan-900")})]}),Q.encouragement&&s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:Q.encouragement})]})]}):s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-slate-700 bg-slate-50 rounded-xl p-6",children:P(ne.details,"text-lg leading-relaxed text-slate-700")})]}),!C&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[ne.coreConcept&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-sky-50 rounded-xl p-6 text-lg leading-relaxed text-sky-900",children:P(ne.coreConcept,"text-lg leading-relaxed text-sky-900")})]}),ne.teachingExample&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:P(ne.teachingExample,"text-lg leading-relaxed text-green-900")})]})]}),ne.teachingSentences&&ne.teachingSentences.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:ne.teachingSentences.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:P(ue,"text-lg text-indigo-900 leading-relaxed")})]},Ne))})})]}),ne.teachingTips&&s.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-8 mt-8",children:[s.jsxs("h4",{className:"text-xl font-bold text-amber-700 mb-4 flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg text-amber-800 leading-relaxed",children:P(ne.teachingTips,"text-lg text-amber-800 leading-relaxed")})]})]})]});case"confusing":const me=Z.data;return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[ee&&Z.type!=="summary"&&s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800",children:C?"":""}),s.jsx("p",{className:"text-sm text-slate-600",children:C?"":""})]})]}),!C&&s.jsx("button",{onClick:()=>G(Z),disabled:V,className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:V?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),""]})}),C&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-3xl shadow-2xl p-12 text-white text-center mb-8",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:C&&(Q!=null&&Q.title)?P(Q.title,"text-4xl font-bold leading-tight"):P(me.point,"text-4xl font-bold leading-tight")}),s.jsx("p",{className:"text-xl text-amber-100 leading-relaxed max-w-3xl mx-auto",children:C&&(Q!=null&&Q.normalizeConfusion)?Q.normalizeConfusion:""})]}),C&&Q?s.jsxs("div",{className:"space-y-8 mb-8",children:[Q.whyItHappens&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-amber-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-amber-50 rounded-xl p-6 text-lg leading-relaxed text-amber-900",children:P(Q.whyItHappens,"text-lg leading-relaxed text-amber-900")})]}),Q.clearExplanation&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:P(Q.clearExplanation,"text-lg leading-relaxed text-green-900")})]}),Q.rememberingTricks&&Q.rememberingTricks.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Q.rememberingTricks.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-purple-900 leading-relaxed",children:P(ue,"text-lg text-purple-900 leading-relaxed")})]},Ne))})})]}),Q.practiceExamples&&Q.practiceExamples.length>0&&s.jsx("div",{className:"space-y-6",children:Q.practiceExamples.map((ue,Ne)=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:[" ",Ne+1]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 mb-6",children:[s.jsx("h5",{className:"text-lg font-bold text-slate-700 mb-3",children:""}),s.jsx("div",{className:"text-lg text-slate-800",children:P(ue.situation,"text-lg text-slate-800")})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-red-50 border-3 border-red-300 rounded-2xl p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),s.jsx("h5",{className:"text-xl font-bold text-red-700",children:""})]}),s.jsx("div",{className:"text-lg text-red-900 bg-white rounded-lg p-4",children:P(ue.wrongThinking,"text-lg text-red-900")})]}),s.jsxs("div",{className:"bg-green-50 border-3 border-green-300 rounded-2xl p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),s.jsx("h5",{className:"text-xl font-bold text-green-700",children:""})]}),s.jsx("div",{className:"text-lg text-green-900 bg-white rounded-lg p-4",children:P(ue.rightThinking,"text-lg text-green-900")})]})]}),s.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[s.jsx("h5",{className:"text-lg font-bold text-blue-700 mb-3",children:""}),s.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:P(ue.explanation,"text-lg text-blue-900 leading-relaxed")})]})]},Ne))}),Q.confidenceBooster&&s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:P(Q.confidenceBooster,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}):s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-amber-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-slate-700 bg-amber-50 rounded-xl p-6",children:P(me.clarification,"text-lg leading-relaxed text-slate-700")})]}),me.errorType&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-orange-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-orange-50 rounded-xl p-6 text-lg leading-relaxed text-orange-900",children:P(me.errorType,"text-lg leading-relaxed text-orange-900")})]}),me.correctVsWrong&&me.correctVsWrong.length>0&&s.jsx("div",{className:"space-y-8 mb-8",children:me.correctVsWrong.map((ue,Ne)=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:[" ",Ne+1]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-green-50 border-3 border-green-300 rounded-2xl p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),s.jsx("h5",{className:"text-xl font-bold text-green-700",children:""})]}),s.jsx("div",{className:"text-xl font-semibold text-green-900 bg-white rounded-lg p-4",children:P(ue.correct,"text-xl font-semibold text-green-900")})]}),s.jsxs("div",{className:"bg-red-50 border-3 border-red-300 rounded-2xl p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold mr-3",children:""}),s.jsx("h5",{className:"text-xl font-bold text-red-700",children:""})]}),s.jsx("div",{className:"text-xl font-semibold text-red-900 bg-white rounded-lg p-4",children:P(ue.wrong,"text-xl font-semibold text-red-900")})]})]}),s.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[s.jsxs("h5",{className:"text-lg font-bold text-blue-700 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""}),""]}),s.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:P(ue.explanation,"text-lg text-blue-900 leading-relaxed")})]})]},Ne))}),me.commonErrors&&me.commonErrors.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-red-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-red-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-3",children:me.commonErrors.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-red-900 leading-relaxed",children:P(ue,"text-lg text-red-900 leading-relaxed")})]},Ne))})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[me.preventionStrategy&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:P(me.preventionStrategy,"text-lg leading-relaxed text-purple-900")})]}),me.correctionMethod&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-indigo-50 rounded-xl p-6 text-lg leading-relaxed text-indigo-900",children:P(me.correctionMethod,"text-lg leading-relaxed text-indigo-900")})]})]}),me.practiceActivities&&me.practiceActivities.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mt-8",children:[s.jsxs("h4",{className:"text-2xl font-bold text-cyan-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-cyan-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:me.practiceActivities.map((ue,Ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-cyan-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:Ne+1}),s.jsx("div",{className:"text-lg text-cyan-900 leading-relaxed",children:P(ue,"text-lg text-cyan-900 leading-relaxed")})]},Ne))})})]})]});case"summary":return s.jsxs("div",{className:"text-center space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-12",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-3xl font-bold text-green-700 mb-4",children:""}),s.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["",i.topic,""]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-indigo-600 mb-2",children:""}),s.jsx("div",{className:"text-2xl font-bold text-slate-800",children:m.progress.completedObjectives.length}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-sky-600 mb-2",children:""}),s.jsx("div",{className:"text-2xl font-bold text-slate-800",children:Math.round((Date.now()-m.progress.startTime)/6e4)}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-green-600 mb-2",children:""}),s.jsx("div",{className:"text-2xl font-bold text-slate-800",children:m.progress.interactionCount}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-2xl font-semibold text-purple-700 mb-6",children:" "}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[i.onlineInteractiveQuiz&&s.jsxs("a",{href:n?`/ai-page-gen/quiz?binId=${n}`:`/ai-page-gen/quiz?contentId=${e}`,className:"px-8 py-4 bg-orange-500 text-white font-medium rounded-xl hover:bg-orange-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]}),i.writingPractice&&s.jsxs("a",{href:n?`/ai-page-gen/writing?binId=${n}`:`/ai-page-gen/writing?contentId=${e}`,className:"px-8 py-4 bg-purple-500 text-white font-medium rounded-xl hover:bg-purple-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})]});default:return s.jsx("div",{children:""})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-sm border-b border-slate-200",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-slate-800",children:i.topic}),s.jsxs("p",{className:"text-sm text-slate-600",children:["   ",v+1,"  ",w.length," "]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Math.round((Date.now()-m.progress.startTime)/6e4)," "]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(v+1)/w.length*100}%`}})}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:w.map((Q,C)=>{const V=Q.type==="objective",ee=Q.type==="breakdown",M=Q.type==="confusing",ge=Q.type==="summary";return s.jsx("button",{onClick:()=>R(C),className:`
                      flex-shrink-0 w-8 h-8 rounded-full text-xs font-bold transition-all duration-200
                      ${C===v?"bg-indigo-500 text-white shadow-lg scale-110":C<v?"bg-green-400 text-white hover:bg-green-500":"bg-slate-300 text-slate-600 hover:bg-slate-400"}
                    `,title:Q.title,children:V?(Q.index||0)+1:ee?"":M?"":ge?"":C+1},Q.id)})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-xs text-slate-500",children:[Z.type==="objective"&&" ",Z.type==="breakdown"&&" ",Z.type==="confusing"&&" ",Z.type==="summary"&&" "]})})]})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:Z.icon}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:Z.title}),s.jsx("div",{className:"text-lg text-slate-600",children:P(Z.description,"text-lg text-slate-600")})]}),s.jsx("div",{className:"mb-8",children:fe()}),s.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[s.jsxs("button",{onClick:B,disabled:v===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-slate-600",children:[v+1," / ",w.length]})}),s.jsxs("button",{onClick:q,disabled:v===w.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})};class hR{constructor(){this.dbName="InteractiveContentDB",this.version=1,this.db=null}async init(){if(!this.db)return new Promise((e,n)=>{const i=indexedDB.open(this.dbName,this.version);i.onerror=()=>{n(new Error("Failed to open InteractiveContent database"))},i.onsuccess=()=>{this.db=i.result,e()},i.onupgradeneeded=l=>{const o=l.target.result;if(!o.objectStoreNames.contains("interactiveContent")){const u=o.createObjectStore("interactiveContent",{keyPath:"lessonPlanId"});u.createIndex("topic","topic",{unique:!1}),u.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1})}}})}ensureDB(){if(!this.db)throw new Error("Database not initialized. Call init() first.");return this.db}async saveVersion(e,n,i,l,o,u){console.log("=== interactiveContentStorage.saveVersion  ==="),console.log(":",{lessonPlanId:e,topic:n,transformedData:i,selectedSteps:l,versionName:o,description:u});try{const f=this.ensureDB();console.log(" ");const g=`version_${Date.now()}`,m=new Date().toISOString();return console.log("ID:",g),new Promise((x,v)=>{const N=f.transaction(["interactiveContent"],"readwrite"),w=N.objectStore("interactiveContent");console.log(" ");const S=w.get(e);console.log(":",e),S.onsuccess=()=>{console.log(" ");const j=S.result;console.log(":",j?` ${j.versions.length} `:"");const k={id:g,name:o||` ${m.slice(0,19).replace("T"," ")}`,description:u,createdAt:m,lastModifiedAt:m,transformedData:i,selectedSteps:l};console.log(":",k);const E={lessonPlanId:e,topic:n,versions:j?[...j.versions,k]:[k],lastAccessedAt:m};console.log(":",E);const L=w.put(E);L.onsuccess=()=>{console.log(" "),x(g)},L.onerror=D=>{var O;console.error(" :",D),console.error("putRequest.error:",L.error),v(new Error(`Failed to save interactive content version: ${((O=L.error)==null?void 0:O.message)||"Unknown error"}`))}},S.onerror=j=>{var k;console.error(" :",j),console.error("getRequest.error:",S.error),v(new Error(`Failed to get existing interactive content: ${((k=S.error)==null?void 0:k.message)||"Unknown error"}`))},N.onerror=j=>{var k;console.error(" :",j),v(new Error(`Database transaction failed: ${((k=N.error)==null?void 0:k.message)||"Unknown error"}`))}})}catch(f){throw console.error(" interactiveContentStorage.saveVersion :",f),f}}async getVersions(e){const n=this.ensureDB();return new Promise((i,l)=>{const f=n.transaction(["interactiveContent"],"readonly").objectStore("interactiveContent").get(e);f.onsuccess=()=>{const g=f.result;i(g?g.versions:[])},f.onerror=()=>{l(new Error("Failed to get interactive content versions"))}})}async getVersion(e,n){return(await this.getVersions(e)).find(l=>l.id===n)||null}async updateVersion(e,n,i){const l=this.ensureDB();return new Promise((o,u)=>{const g=l.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),m=g.get(e);m.onsuccess=()=>{const x=m.result;if(!x){u(new Error("Interactive content record not found"));return}const v=x.versions.findIndex(w=>w.id===n);if(v===-1){u(new Error("Version not found"));return}x.versions[v]={...x.versions[v],...i,lastModifiedAt:new Date().toISOString()};const N=g.put(x);N.onsuccess=()=>o(),N.onerror=()=>u(new Error("Failed to update version"))},m.onerror=()=>{u(new Error("Failed to get interactive content"))}})}async deleteVersion(e,n){const i=this.ensureDB();return new Promise((l,o)=>{const f=i.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),g=f.get(e);g.onsuccess=()=>{const m=g.result;if(!m){o(new Error("Interactive content record not found"));return}if(m.versions=m.versions.filter(x=>x.id!==n),m.versions.length===0){const x=f.delete(e);x.onsuccess=()=>l(),x.onerror=()=>o(new Error("Failed to delete record"))}else{const x=f.put(m);x.onsuccess=()=>l(),x.onerror=()=>o(new Error("Failed to update record"))}},g.onerror=()=>{o(new Error("Failed to get interactive content"))}})}async getAllRecords(){const e=this.ensureDB();return new Promise((n,i)=>{const u=e.transaction(["interactiveContent"],"readonly").objectStore("interactiveContent").getAll();u.onsuccess=()=>{n(u.result)},u.onerror=()=>{i(new Error("Failed to get all interactive content records"))}})}async updateLastAccessed(e){const n=this.ensureDB();return new Promise((i,l)=>{const u=n.transaction(["interactiveContent"],"readwrite").objectStore("interactiveContent"),f=u.get(e);f.onsuccess=()=>{const g=f.result;if(g){g.lastAccessedAt=new Date().toISOString();const m=u.put(g);m.onsuccess=()=>i(),m.onerror=()=>l(new Error("Failed to update last accessed time"))}else i()},f.onerror=()=>{l(new Error("Failed to get interactive content"))}})}}const ji=new hR,pR=()=>{var Qs,Ks,Br;const[t]=Pr(),e=t.get("contentId"),n=t.get("binId"),[i,l]=_.useState(null),[o,u]=_.useState(!0),[f,g]=_.useState(null),[m,x]=_.useState(0),[v,N]=_.useState([]),[w,S]=_.useState({}),[j,k]=_.useState("idle"),[E,L]=_.useState(""),[D,O]=_.useState("idle"),[H,I]=_.useState({current:0,total:0}),[R,q]=_.useState(new Set),[B,W]=_.useState([]),[G,J]=_.useState(null),[z,$]=_.useState(!1),[Y,P]=_.useState(""),[Z,fe]=_.useState(!1),[Q,C]=_.useState(""),[V,ee]=_.useState({trueFalse:3,multipleChoice:3,memoryCardGame:1}),[M,ge]=_.useState(!1),[we,ne]=_.useState(null),[me,ue]=_.useState("");_.useEffect(()=>{Ne()},[e,n]);const Ne=async()=>{try{u(!0),g(null);let se;if(n)se=await vc(n);else if(e){await Zt.init();const ve=await Zt.getLessonPlan(e);if(!ve)throw new Error("");se={topic:ve.topic,learningObjectives:ve.content.learningObjectives,contentBreakdown:ve.content.contentBreakdown,confusingPoints:ve.content.confusingPoints,classroomActivities:ve.content.classroomActivities,onlineInteractiveQuiz:ve.content.quiz,writingPractice:ve.content.writingPractice}}else throw new Error("contentId  binId");l(se),Je(se);const be=Pn();be&&await ci(be)}catch(se){console.error(":",se),g(se.message||"")}finally{u(!1)}},Je=se=>{const be=[],ve={};se.learningObjectives&&se.learningObjectives.length>0&&se.learningObjectives.forEach((Se,ke)=>{const Ie=`objective_${ke}`;be.push({id:Ie,title:` ${ke+1}`,type:"objective",icon:"",data:Se,index:ke}),ve[Ie]={original:Se,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),se.contentBreakdown&&se.contentBreakdown.length>0&&se.contentBreakdown.forEach((Se,ke)=>{const Ie=`breakdown_${ke}`;be.push({id:Ie,title:` ${ke+1}`,type:"breakdown",icon:"",data:Se,index:ke}),ve[Ie]={original:Se,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),se.confusingPoints&&se.confusingPoints.length>0&&se.confusingPoints.forEach((Se,ke)=>{const Ie=`confusing_${ke}`;be.push({id:Ie,title:` ${ke+1}`,type:"confusing",icon:"",data:Se,index:ke}),ve[Ie]={original:Se,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}}),N(be),S(ve)},Xe=()=>localStorage.getItem("gemini_api_key")||"",ht=async se=>{const be=Xe();if(!be){alert(" Gemini API ");return}const ve=v.find(Se=>Se.id===se);if(ve){S(Se=>({...Se,[se]:{...Se[se],isTransforming:!0}}));try{let Se=null;switch(ve.type){case"objective":Se=await qo(ve.data,be);break;case"breakdown":Se=await Fo(ve.data,be);break;case"confusing":Se=await Ho(ve.data,be);break}S(ke=>({...ke,[se]:{...ke[se],transformed:Se,isTransformed:!0,isTransforming:!1}}))}catch(Se){console.error(":",Se),S(ke=>({...ke,[se]:{...ke[se],isTransforming:!1}})),alert("")}}},wt=se=>{S(be=>({...be,[se]:{...be[se],transformed:null,isTransformed:!1,quiz:null,hasQuiz:!1}}))},Ot=se=>{C(se),fe(!0)},Xt=async(se,be)=>{const ve=Xe();if(!ve){alert(" Gemini API ");return}const Se=parseInt(se.replace("step_","")),ke=v[Se],Ie=w[se];if(!ke||!(Ie!=null&&Ie.isTransformed)||!Ie.transformed){alert("");return}S(He=>({...He,[se]:{...He[se],isGeneratingQuiz:!0}}));try{const He=be||V,Ke=await ik(Ie.transformed,ke.type,ve,He);S(nt=>({...nt,[se]:{...nt[se],quiz:Ke,hasQuiz:!0,isGeneratingQuiz:!1}})),fe(!1)}catch(He){console.error(":",He),S(Ke=>({...Ke,[se]:{...Ke[se],isGeneratingQuiz:!1}})),alert("")}},Cn=se=>{const be=w[se];be!=null&&be.hasQuiz&&be.quiz&&(ne(be.quiz),ue(se),ge(!0))},Bt=se=>{S(be=>({...be,[se]:{...be[se],quiz:null,hasQuiz:!1}}))},Mi=async()=>{var ve;if(!i)return;const se=localStorage.getItem("gemini_api_key");if(!se){alert(" Gemini API Key");return}O("running");const be=v.length;I({current:0,total:be});try{for(let Se=0;Se<v.length;Se++){const ke=v[Se],Ie=`step_${Se}`;if(I({current:Se+1,total:be,currentStep:ke.title}),!((ve=w[Ie])!=null&&ve.isTransformed)){S(He=>({...He,[Ie]:{...He[Ie],isTransforming:!0}}));try{let He;switch(ke.type){case"objective":He=await qo(ke.data,se);break;case"breakdown":He=await Fo(ke.data,se);break;case"confusing":He=await Ho(ke.data,se);break}S(Ke=>({...Ke,[Ie]:{...Ke[Ie],transformed:He,isTransformed:!0,isTransforming:!1}}))}catch(He){console.error(` ${ke.title} :`,He),S(Ke=>({...Ke,[Ie]:{...Ke[Ie],isTransforming:!1}}))}await new Promise(He=>setTimeout(He,500))}}O("completed")}catch(Se){console.error(":",Se),O("error")}},Fn=se=>{q(be=>{const ve=new Set(be);return ve.has(se)?ve.delete(se):ve.add(se),ve})},oi=()=>{const se=v.map((be,ve)=>`step_${ve}`);q(new Set(se))},Hn=()=>{q(new Set)},or=async()=>{var ve;if(!i||R.size===0){alert("");return}const se=localStorage.getItem("gemini_api_key");if(!se){alert(" Gemini API Key");return}O("running");const be=R.size;I({current:0,total:be});try{let Se=0;for(let ke=0;ke<v.length;ke++){const Ie=v[ke],He=`step_${ke}`;if(R.has(He)&&(Se++,I({current:Se,total:be,currentStep:Ie.title}),!((ve=w[He])!=null&&ve.isTransformed))){S(Ke=>({...Ke,[He]:{...Ke[He],isTransforming:!0}}));try{let Ke;switch(Ie.type){case"objective":Ke=await qo(Ie.data,se);break;case"breakdown":Ke=await Fo(Ie.data,se);break;case"confusing":Ke=await Ho(Ie.data,se);break}S(nt=>({...nt,[He]:{...nt[He],transformed:Ke,isTransformed:!0,isTransforming:!1}}))}catch(Ke){console.error(` ${Ie.title} :`,Ke),S(nt=>({...nt,[He]:{...nt[He],isTransforming:!1}}))}await new Promise(Ke=>setTimeout(Ke,500))}}O("completed")}catch(Se){console.error(":",Se),O("error")}},Pn=()=>e||n,ci=async se=>{try{await ji.init();const be=await ji.getVersions(se);W(be)}catch(be){console.error(":",be)}},cr=async()=>{if(console.log("===  ==="),console.log("content:",!!i),console.log("contentId:",e),console.log("transformations:",w),!i){console.log("  content"),alert("");return}const se=Pn();if(!se){console.log("  contentId"),alert("");return}console.log(" contentId:",se);const be={},ve={};if(Object.entries(w).forEach(([Se,ke])=>{console.log(` ${Se}:`,{isTransformed:ke.isTransformed,hasTransformed:!!ke.transformed,hasQuiz:ke.hasQuiz,hasQuizData:!!ke.quiz}),ke.isTransformed&&ke.transformed&&(be[Se]=ke.transformed),ke.hasQuiz&&ke.quiz&&(ve[Se]=ke.quiz)}),console.log(":",{transformedDataCount:Object.keys(be).length,quizDataCount:Object.keys(ve).length,selectedStepsCount:R.size}),Object.keys(be).length===0){console.log(" "),alert("");return}try{console.log(" interactiveContentStorage..."),await ji.init(),console.log(" ");const Se=Y||` ${new Date().toLocaleString("zh-TW")}`,ke={transformedData:be,quizData:ve};console.log(":",{actualContentId:se,topic:i.topic||"",versionName:Se,versionData:ke,selectedSteps:Array.from(R)});const Ie=await ji.saveVersion(se,i.topic||"",ke,Array.from(R),Se,` ${Object.keys(be).length} ${Object.keys(ve).length} `);console.log(" ID:",Ie),P(""),await ci(se),alert("")}catch(Se){console.error(" :",Se),console.error(":",Se.stack),alert(`${Se.message||Se}`)}console.log("===  ===")},le=async se=>{var ve,Se;const be=Pn();if(be)try{await ji.init();const ke=await ji.getVersion(be,se);if(ke){S({});const Ie={};v.forEach((nt,st)=>{const It=`step_${st}`;Ie[It]={original:nt.data,transformed:null,isTransformed:!1,isTransforming:!1,quiz:null,hasQuiz:!1,isGeneratingQuiz:!1}});const He=((ve=ke.transformedData)==null?void 0:ve.transformedData)||ke.transformedData,Ke=((Se=ke.transformedData)==null?void 0:Se.quizData)||{};Object.entries(He||{}).forEach(([nt,st])=>{Ie[nt]&&(Ie[nt]={...Ie[nt],transformed:st,isTransformed:!0})}),Object.entries(Ke||{}).forEach(([nt,st])=>{Ie[nt]&&(Ie[nt]={...Ie[nt],quiz:st,hasQuiz:!0})}),S(Ie),q(new Set(ke.selectedSteps)),J(se),$(!1),await ji.updateLastAccessed(be)}}catch(ke){console.error(":",ke),alert("")}},he=async se=>{const be=Pn();if(!be)return;const ve=B.find(Se=>Se.id===se);if(ve&&confirm(`${ve.name}`))try{await ji.init(),await ji.deleteVersion(be,se),await ci(be),G===se&&J(null)}catch(Se){console.error(":",Se),alert("")}},ae=se=>se?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(ve=>ve.test(se)):!1,pe=(se,be)=>ae(se)?s.jsx(Vm,{content:se,className:be}):s.jsx("span",{className:be,children:se}),Ee=async()=>{if(i){k("publishing");try{const se={},be={},ve={};if(Object.entries(w).forEach(([He,Ke])=>{if(Ke.isTransformed&&Ke.transformed){se[He]=Ke.transformed,Ke.hasQuiz&&Ke.quiz&&(be[He]=Ke.quiz);const nt=parseInt(He.replace("step_","")),st=v[nt];if(st)switch(st.type){case"objective":ve.learningObjectives||(ve.learningObjectives=[]),ve.learningObjectives.push(st.data);break;case"breakdown":ve.contentBreakdown||(ve.contentBreakdown=[]),ve.contentBreakdown.push(st.data);break;case"confusing":ve.confusingPoints||(ve.confusingPoints=[]),ve.confusingPoints.push(st.data);break}}}),Object.keys(se).length===0){alert(""),k("idle");return}const Se={...ve,topic:i.topic,isInteractive:!0,transformedData:se,stepQuizData:be,includedSteps:Object.keys(se)},ke=await cc(Se),Ie=`${window.location.origin}/ai-page-gen/student-interactive?binId=${ke}`;L(Ie),k("published")}catch(se){console.error(":",se),k("error")}}},tt=se=>{x(se)},mn=()=>{m<v.length-1&&x(m+1)},Ut=()=>{m>0&&x(m-1)};if(o)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsx(dn,{})})});if(f)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),s.jsx("p",{children:f})]})})});if(!i||v.length===0)return null;const Oe=v[m],en=`step_${m}`,ze=w[en]||{original:Oe==null?void 0:Oe.data,transformed:null,isTransformed:!1},Ht=Object.values(w).filter(se=>se.isTransformed).length,zt=v.length;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-sm border-b border-slate-200",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-slate-800",children:""}),s.jsx("h2",{className:"text-lg font-semibold text-indigo-600",children:i.topic}),s.jsxs("p",{className:"text-sm text-slate-600",children:[" ",m+1,"  ",zt,"   ",Ht,"/",zt]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[D==="running"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{className:"text-blue-800 font-medium",children:"..."})]}),s.jsx("div",{className:"text-xs text-blue-700",children:H.currentStep&&`${H.currentStep}`}),s.jsx("div",{className:"mt-1 bg-blue-200 rounded-full h-1",children:s.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${H.current/H.total*100}%`}})})]}),D==="completed"&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),s.jsx("span",{className:"text-green-800 font-medium text-sm",children:""})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:or,disabled:D==="running"||R.size===0,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:D==="running"?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})," (",R.size,")"]})}),s.jsx("button",{onClick:Mi,disabled:D==="running"||Ht===zt,className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2 text-sm",children:Ht===zt?"":""})]}),j==="published"&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),s.jsx("span",{className:"text-green-800 font-medium",children:""})]}),s.jsx("div",{className:"text-xs text-green-700",children:s.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:""})})]}),s.jsx("button",{onClick:Ee,disabled:j==="publishing"||Ht===0,className:"px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:j==="publishing"?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),""]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(m+1)/zt*100}%`}})}),s.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:oi,className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:""}),s.jsx("span",{className:"text-slate-300",children:"|"}),s.jsx("button",{onClick:Hn,className:"text-xs text-slate-600 hover:text-slate-800 font-medium",children:""})]}),s.jsxs("div",{className:"text-xs text-slate-500",children:[" ",R.size," / ",v.length," "]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[B.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-500",children:":"}),s.jsx("button",{onClick:()=>$(!z),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:G?((Qs=B.find(se=>se.id===G))==null?void 0:Qs.name)||"":`${B.length} `})]}),s.jsx("input",{type:"text",placeholder:"",value:Y,onChange:se=>P(se.target.value),className:"px-2 py-1 text-xs border border-slate-300 rounded w-20"}),s.jsx("button",{onClick:()=>{console.log(" "),cr()},className:"text-green-600 hover:text-green-800 font-medium",children:""})]})]}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:v.map((se,be)=>{var Se,ke,Ie,He,Ke,nt,st,It,ui,Ur;const ve=`step_${be}`;return s.jsx("div",{className:`
                      flex-shrink-0 p-2 rounded-lg border transition-all duration-200 bg-white
                      ${be===m?"border-indigo-500 bg-indigo-50":(Se=w[ve])!=null&&Se.isTransformed?"border-green-200 bg-green-50":"border-slate-200"}
                    `,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:R.has(ve),onChange:()=>Fn(ve),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s.jsxs("button",{onClick:()=>tt(be),className:"flex items-center gap-1 text-xs font-medium hover:text-indigo-600 transition-colors",children:[s.jsx("span",{children:se.icon}),s.jsx("span",{children:se.title}),((ke=w[ve])==null?void 0:ke.isTransformed)&&s.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),(Ie=w[ve])!=null&&Ie.isTransformed?s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[s.jsx("button",{onClick:()=>ht(ve),className:"text-xs text-blue-600 hover:text-blue-800 font-medium px-1 py-0.5 rounded hover:bg-blue-50",title:"",children:""}),s.jsx("button",{onClick:()=>wt(ve),className:"text-xs text-red-600 hover:text-red-800 font-medium px-1 py-0.5 rounded hover:bg-red-50",title:"",children:""}),(He=w[ve])!=null&&He.hasQuiz?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-orange-600",title:"",children:""}),s.jsx("button",{onClick:()=>Cn(ve),className:"text-xs text-blue-600 hover:text-blue-800 font-medium px-1 py-0.5 rounded hover:bg-blue-50",title:"",children:""}),s.jsx("button",{onClick:()=>Ot(ve),disabled:(Ke=w[ve])==null?void 0:Ke.isGeneratingQuiz,className:"text-xs text-orange-600 hover:text-orange-800 font-medium px-1 py-0.5 rounded hover:bg-orange-50",title:"",children:(nt=w[ve])!=null&&nt.isGeneratingQuiz?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"}),s.jsx("span",{children:""})]}):""}),s.jsx("button",{onClick:()=>Bt(ve),className:"text-xs text-red-600 hover:text-red-800 font-medium px-1 py-0.5 rounded hover:bg-red-50",title:"",children:""})]}):s.jsx("button",{onClick:()=>Ot(ve),disabled:(st=w[ve])==null?void 0:st.isGeneratingQuiz,className:"text-xs text-orange-600 hover:text-orange-800 font-medium px-1 py-0.5 rounded hover:bg-orange-50 disabled:opacity-50",title:"",children:(It=w[ve])!=null&&It.isGeneratingQuiz?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs",children:""})]}):""})]}):s.jsx("button",{onClick:()=>ht(ve),disabled:(ui=w[ve])==null?void 0:ui.isTransforming,className:"text-xs text-green-600 hover:text-green-800 font-medium px-2 py-0.5 rounded hover:bg-green-50 disabled:opacity-50 ml-2",children:(Ur=w[ve])!=null&&Ur.isTransforming?"":""})]})},se.id)})}),z&&B.length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-800 mb-3",children:""}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:B.map(se=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border hover:bg-slate-50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:se.name}),G===se.id&&s.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded",children:""})]}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[se.description,"  ",new Date(se.createdAt).toLocaleString("zh-TW")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>le(se.id),className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:""}),s.jsx("button",{onClick:()=>he(se.id),className:"text-xs text-red-600 hover:text-red-800 font-medium",children:""})]})]},se.id))}),s.jsx("button",{onClick:()=>$(!1),className:"mt-3 text-xs text-slate-600 hover:text-slate-800",children:""})]})]})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:Oe.icon}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:Oe.title}),s.jsxs("p",{className:"text-lg text-slate-600",children:[Oe.type==="objective"&&"",Oe.type==="breakdown"&&"",Oe.type==="confusing"&&""]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:ze.isTransformed?"":""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800",children:ze.isTransformed?"":""}),s.jsx("p",{className:"text-sm text-slate-600",children:ze.isTransformed?"":""})]})]}),s.jsx("div",{className:"text-sm text-slate-500",children:""})]})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),""]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-sm text-slate-700 max-h-96 overflow-y-auto",children:[Oe.type==="objective"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.objective)]}),Oe.data.description&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.description)]}),Oe.data.teachingExample&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.teachingExample)]})]}),Oe.type==="breakdown"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.topic)]}),Oe.data.details&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.details)]}),Oe.data.teachingExample&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.teachingExample)]})]}),Oe.type==="confusing"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.point)]}),Oe.data.clarification&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.clarification)]}),Oe.data.teachingExample&&s.jsxs("div",{children:[s.jsx("strong",{children:""})," ",pe(Oe.data.teachingExample)]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),""]}),s.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-4 text-sm max-h-96 overflow-y-auto",children:ze.isTransformed&&ze.transformed?s.jsxs("div",{className:"space-y-4",children:[Oe.type==="objective"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-green-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.objective)})]}),ze.transformed.description&&s.jsxs("div",{className:"text-blue-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.description)})]}),ze.transformed.personalRelevance&&s.jsxs("div",{className:"text-purple-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.personalRelevance)})]}),ze.transformed.encouragement&&s.jsxs("div",{className:"text-sky-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.encouragement)})]})]}),Oe.type==="breakdown"&&s.jsxs(s.Fragment,{children:[ze.transformed.title&&s.jsxs("div",{className:"text-green-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.title)})]}),ze.transformed.introduction&&s.jsxs("div",{className:"text-blue-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.introduction)})]}),ze.transformed.keyPoints&&s.jsxs("div",{className:"text-indigo-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1 space-y-1",children:ze.transformed.keyPoints.map((se,be)=>s.jsxs("div",{children:[" ",pe(se)]},be))})]})]}),Oe.type==="confusing"&&s.jsxs(s.Fragment,{children:[ze.transformed.title&&s.jsxs("div",{className:"text-amber-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.title)})]}),ze.transformed.normalizeConfusion&&s.jsxs("div",{className:"text-green-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.normalizeConfusion)})]}),ze.transformed.clearExplanation&&s.jsxs("div",{className:"text-blue-800",children:[s.jsx("strong",{children:""}),s.jsx("div",{className:"mt-1",children:pe(ze.transformed.clearExplanation)})]})]})]}):s.jsxs("div",{className:"text-slate-500 text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{children:"  "})]})})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[s.jsxs("button",{onClick:Ut,disabled:m===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-slate-600",children:[m+1," / ",zt]})}),s.jsxs("button",{onClick:mn,disabled:m===v.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),Z&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800",children:""}),s.jsx("button",{onClick:()=>fe(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("input",{type:"number",min:"1",max:"10",value:V.trueFalse,onChange:se=>ee(be=>({...be,trueFalse:parseInt(se.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("input",{type:"number",min:"1",max:"10",value:V.multipleChoice,onChange:se=>ee(be=>({...be,multipleChoice:parseInt(se.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("input",{type:"number",min:"1",max:"3",value:V.memoryCardGame,onChange:se=>ee(be=>({...be,memoryCardGame:parseInt(se.target.value)||1})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),s.jsx("div",{className:"p-6 border-t bg-slate-50 rounded-b-2xl",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>fe(!1),className:"flex-1 px-4 py-2 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors",children:""}),s.jsx("button",{onClick:()=>Xt(Q,V),disabled:(Ks=w[Q])==null?void 0:Ks.isGeneratingQuiz,className:"flex-1 px-4 py-2 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:(Br=w[Q])!=null&&Br.isGeneratingQuiz?s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):""})]})})]})}),M&&we&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between rounded-t-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800",children:" "}),s.jsx("button",{onClick:()=>ge(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[we._validationWarnings&&we._validationWarnings.length>0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:" "}),s.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[s.jsx("ul",{className:"list-disc list-inside space-y-1",children:we._validationWarnings.map((se,be)=>s.jsx("li",{children:se},be))}),s.jsx("p",{className:"mt-2 font-medium",children:""})]})]})]})}),we.trueFalse&&we.trueFalse.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),"  (",we.trueFalse.length," )"]}),s.jsx("div",{className:"space-y-3",children:we.trueFalse.map((se,be)=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[be+1,". ",se.statement]}),s.jsxs("div",{className:"text-sm text-slate-600",children:[s.jsx("strong",{children:""})," ",se.isTrue?"":""]}),se.explanation&&s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[s.jsx("strong",{children:""})," ",se.explanation]})]},be))})]}),we.multipleChoice&&we.multipleChoice.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),"  (",we.multipleChoice.length," )"]}),s.jsx("div",{className:"space-y-3",children:we.multipleChoice.map((se,be)=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[be+1,". ",se.question]}),s.jsx("div",{className:"ml-4 space-y-1",children:se.options.map((ve,Se)=>s.jsxs("div",{className:`text-sm ${Se===se.correctAnswerIndex?"text-green-700 font-medium":"text-slate-600"}`,children:[String.fromCharCode(65+Se),". ",ve,Se===se.correctAnswerIndex&&" "]},Se))}),se.explanation&&s.jsxs("div",{className:"text-sm text-slate-600 mt-2",children:[s.jsx("strong",{children:""})," ",se.explanation]})]},be))})]}),we.memoryCardGame&&we.memoryCardGame.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),"  (",we.memoryCardGame.length," )"]}),s.jsx("div",{className:"space-y-3",children:we.memoryCardGame.map((se,be)=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"font-medium text-slate-800 mb-3",children:[" ",be+1," ",se.title||""]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:se.pairs.map((ve,Se)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"bg-blue-100 px-2 py-1 rounded flex-1",children:ve.left}),s.jsx("div",{className:"text-slate-400",children:""}),s.jsx("div",{className:"bg-green-100 px-2 py-1 rounded flex-1",children:ve.right})]},Se))})]},be))})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-slate-50 p-6 border-t rounded-b-2xl",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>ge(!1),className:"flex-1 px-4 py-2 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors",children:""}),s.jsx("button",{onClick:()=>{ge(!1),Ot(me)},className:"flex-1 px-4 py-2 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors",children:""})]})})]})})]})},gR=()=>{const[t]=Pr(),e=t.get("binId"),[n,i]=_.useState(null),[l,o]=_.useState(!0),[u,f]=_.useState(null),[g,m]=_.useState(null),[x,v]=_.useState(0),[N,w]=_.useState([]),[S,j]=_.useState(!1),[k,E]=_.useState(null);_.useEffect(()=>{e?L():(f("binId"),o(!1))},[e]),_.useEffect(()=>{n&&N.length>0&&O(n)},[n,N,e]);const L=async()=>{try{o(!0),f(null);const C=await vc(e);if(!C.isInteractive)throw new Error("");i(C),D(C)}catch(C){console.error(":",C),f(C.message||"")}finally{o(!1)}},D=C=>{const V=[],ee=C.transformedData||{};console.log("Initial content:",C),console.log("Transformed data keys:",Object.keys(ee)),console.log("Transformed data:",ee),C.originalContent&&console.log("Original content from JSON:",C.originalContent);const M=Object.keys(ee).sort((ne,me)=>{const ue=parseInt(ne.replace("step_","")),Ne=parseInt(me.replace("step_",""));return ue-Ne});console.log("Sorted step IDs:",M);const ge=C.includedSteps||Object.keys(ee);console.log("Included steps:",ge);const we={};if(C.originalContent)console.log("Using originalContent from JSON for mapping"),Object.keys(C.originalContent).forEach(ne=>{const me=C.originalContent[ne];me&&ge.includes(ne)&&(we[ne]={content:me.content,type:me.type,index:me.index||0})});else{console.log("Using fallback method to build original content mapping");const ne=[];C.learningObjectives&&C.learningObjectives.forEach((me,ue)=>{ne.push({content:me,type:"objective",typeIndex:ue})}),C.contentBreakdown&&C.contentBreakdown.forEach((me,ue)=>{ne.push({content:me,type:"breakdown",typeIndex:ue})}),C.confusingPoints&&C.confusingPoints.forEach((me,ue)=>{ne.push({content:me,type:"confusing",typeIndex:ue})}),console.log("All original content (fallback):",ne),ge.forEach((me,ue)=>{if(ue<ne.length){const Ne=ne[ue];we[me]={content:Ne.content,type:Ne.type,index:Ne.typeIndex},console.log(`Mapping ${me} to original content at index ${ue}:`,Ne)}})}console.log("Original lookup:",we),M.forEach(ne=>{var Ne,Je,Xe;const me=ee[ne],ue=we[ne];if(me&&ue){let ht="",wt="",Ot="";switch(ue.type){case"objective":ht=`  ${ue.index+1}`,wt="",Ot=((Ne=me.objective)==null?void 0:Ne.length)>50?`${me.objective.substring(0,50)}...`:me.objective||ue.content.objective;break;case"breakdown":ht=`  ${ue.index+1}`,wt="",Ot=((Je=me.title)==null?void 0:Je.length)>50?`${me.title.substring(0,50)}...`:me.title||ue.content.topic;break;case"confusing":ht=`  ${ue.index+1}`,wt="",Ot=((Xe=me.title)==null?void 0:Xe.length)>50?`${me.title.substring(0,50)}...`:me.title||ue.content.point;break}console.log(`Creating step: ${ne}, type: ${ue.type}, title: ${ht}`),V.push({id:ne,title:ht,type:ue.type,icon:wt,description:Ot,content:me,originalIndex:ue.index})}}),V.length>0&&V.push({id:"summary",title:" ",type:"summary",icon:"",description:"",content:null}),console.log("Final steps:",V),w(V)},O=C=>{const V=`student_interactive_${e}`;try{const ee=localStorage.getItem(V);if(ee){const M=JSON.parse(ee);m(M);const ge=M.progress.currentObjectiveIndex||0,we=Math.min(Math.max(0,ge),N.length-1);v(we)}else{const M={contentId:e||"unknown",topic:C.topic||"",progress:{currentObjectiveIndex:0,completedObjectives:[],timeSpent:0,interactionCount:0,startTime:Date.now(),lastUpdateTime:Date.now(),completedActivities:[]},interactions:[],createdAt:Date.now(),updatedAt:Date.now()};m(M),localStorage.setItem(V,JSON.stringify(M))}}catch(ee){console.error(":",ee)}},H=C=>{const V=`student_interactive_${e}`;C.updatedAt=Date.now(),C.progress.lastUpdateTime=Date.now(),m(C),localStorage.setItem(V,JSON.stringify(C))},I=C=>{if(!g)return;const V={...g};V.progress.completedObjectives.includes(C)||(V.progress.completedObjectives.push(C),V.progress.interactionCount+=1),H(V)},R=C=>{if(C>=0&&C<N.length&&N[C]&&(v(C),window.scrollTo({top:0,behavior:"smooth"}),g)){const V={...g};V.progress.currentObjectiveIndex=C,H(V)}},q=()=>{x<N.length-1&&R(x+1)},B=()=>{x>0&&R(x-1)},W=()=>{const C=N[x];if(!C||!(n!=null&&n.stepQuizData))return;const V=n.stepQuizData[C.id];V&&(E(V),j(!0))},G=()=>{j(!1),E(null)},J=()=>{const C=N[x];return C&&(n==null?void 0:n.stepQuizData)&&n.stepQuizData[C.id]},z=C=>C?[/#+\s/,/\*\*.*\*\*/,/\*.*\*/,/`.*`/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[.*\]\(.*\)/,/^\s*>/m,/```[\s\S]*?```/,/\n\s*\n/].some(ee=>ee.test(C)):!1,$=(C,V)=>z(C)?s.jsx(Vm,{content:C,className:V}):s.jsx("span",{className:V,children:C});if(l)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsx(dn,{})})});if(u)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),s.jsx("p",{children:u})]})})});if(!n||!g||N.length===0)return null;const Y=N[x];if(!Y)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded-lg shadow-md",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),s.jsx("p",{children:""}),s.jsx("p",{className:"mt-2 text-sm",children:""})]})})});const P=g.progress.completedObjectives.length,Z=N.length-1,fe=Z>0?P/Z*100:0,Q=()=>{const C=g.progress.completedObjectives.includes(Y.id);switch(Y.type){case"objective":return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-sky-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:$(Y.content.objective,"text-4xl font-bold leading-tight text-white")}),Y.content.description&&s.jsx("div",{className:"text-xl text-indigo-100 leading-relaxed max-w-3xl mx-auto",children:$(Y.content.description,"text-xl text-indigo-100 leading-relaxed")})]}),s.jsxs("div",{className:"space-y-6",children:[Y.content.personalRelevance&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:$(Y.content.personalRelevance,"text-lg leading-relaxed text-purple-900")})]}),Y.content.teachingExample&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:$(Y.content.teachingExample,"text-lg leading-relaxed text-green-900")})]}),Y.content.encouragement&&s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:$(Y.content.encouragement,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[C?s.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),s.jsx("p",{className:"text-green-600",children:""})]}):s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),s.jsxs("button",{onClick:()=>I(Y.id),className:"px-8 py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),J()&&s.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),s.jsxs("button",{onClick:W,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"breakdown":return s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:$(Y.content.title||Y.content.topic,"text-4xl font-bold leading-tight text-white")}),Y.content.introduction&&s.jsx("div",{className:"text-xl text-sky-100 leading-relaxed max-w-3xl mx-auto",children:$(Y.content.introduction,"text-xl text-sky-100 leading-relaxed")})]}),s.jsxs("div",{className:"space-y-6",children:[Y.content.keyPoints&&Y.content.keyPoints.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-indigo-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-indigo-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Y.content.keyPoints.map((V,ee)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:ee+1}),s.jsx("div",{className:"text-lg text-indigo-900 leading-relaxed",children:$(V,"text-lg text-indigo-900 leading-relaxed")})]},ee))})})]}),Y.content.realLifeExamples&&Y.content.realLifeExamples.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Y.content.realLifeExamples.map((V,ee)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:ee+1}),s.jsx("div",{className:"text-lg text-green-900 leading-relaxed",children:$(V,"text-lg text-green-900 leading-relaxed")})]},ee))})})]}),Y.content.learningTips&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6 text-lg leading-relaxed text-purple-900",children:$(Y.content.learningTips,"text-lg leading-relaxed text-purple-900")})]}),Y.content.nextSteps&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-orange-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-orange-50 rounded-xl p-6 text-lg leading-relaxed text-orange-900",children:$(Y.content.nextSteps,"text-lg leading-relaxed text-orange-900")})]}),Y.content.encouragement&&s.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-2xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-pink-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-pink-900 font-medium",children:$(Y.content.encouragement,"text-lg leading-relaxed text-pink-900 font-medium")})]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[C?s.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),s.jsx("p",{className:"text-green-600",children:""})]}):s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),s.jsxs("button",{onClick:()=>I(Y.id),className:"px-8 py-4 bg-blue-500 hover:bg-blue-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),J()&&s.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),s.jsxs("button",{onClick:W,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"confusing":return s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-3xl shadow-2xl p-12 text-white text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("div",{className:"text-4xl font-bold mb-6 leading-tight",children:$(Y.content.title||Y.content.point,"text-4xl font-bold leading-tight text-white")}),Y.content.normalizeConfusion&&s.jsx("div",{className:"text-xl text-amber-100 leading-relaxed max-w-3xl mx-auto",children:$(Y.content.normalizeConfusion,"text-xl text-amber-100 leading-relaxed")})]}),s.jsxs("div",{className:"space-y-6",children:[Y.content.commonMistake&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-red-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-red-50 rounded-xl p-6 text-lg leading-relaxed text-red-900",children:$(Y.content.commonMistake,"text-lg leading-relaxed text-red-900")})]}),Y.content.whyItHappens&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-amber-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-amber-50 rounded-xl p-6 text-lg leading-relaxed text-amber-900",children:$(Y.content.whyItHappens,"text-lg leading-relaxed text-amber-900")})]}),Y.content.clearExplanation&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-green-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-green-50 rounded-xl p-6 text-lg leading-relaxed text-green-900",children:$(Y.content.clearExplanation,"text-lg leading-relaxed text-green-900")})]}),Y.content.practiceExamples&&Y.content.practiceExamples.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-blue-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-blue-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-6",children:Y.content.practiceExamples.map((V,ee)=>s.jsx("div",{className:"border-l-4 border-blue-400 pl-4",children:s.jsxs("div",{className:"flex items-start mb-3",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:ee+1}),s.jsx("div",{className:"flex-1",children:typeof V=="string"?s.jsx("div",{className:"text-lg text-blue-900 leading-relaxed",children:$(V,"text-lg text-blue-900 leading-relaxed")}):s.jsxs("div",{className:"space-y-3",children:[V.situation&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-blue-800",children:""}),s.jsx("span",{className:"text-blue-900 ml-2",children:$(V.situation,"text-blue-900")})]}),V.wrongThinking&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-red-600",children:" "}),s.jsx("span",{className:"text-red-700 ml-2",children:$(V.wrongThinking,"text-red-700")})]}),V.rightThinking&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-green-600",children:" "}),s.jsx("span",{className:"text-green-700 ml-2",children:$(V.rightThinking,"text-green-700")})]}),V.explanation&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-purple-600",children:" "}),s.jsx("span",{className:"text-purple-700 ml-2",children:$(V.explanation,"text-purple-700")})]})]})})]})},ee))})})]}),Y.content.rememberingTricks&&Y.content.rememberingTricks.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-purple-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"bg-purple-50 rounded-xl p-6",children:s.jsx("div",{className:"space-y-4",children:Y.content.rememberingTricks.map((V,ee)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-4",children:ee+1}),s.jsx("div",{className:"text-lg text-purple-900 leading-relaxed",children:$(V,"text-lg text-purple-900 leading-relaxed")})]},ee))})})]}),Y.content.confidenceBooster&&s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-indigo-50 rounded-2xl p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-sky-700 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:""}),""]}),s.jsx("div",{className:"text-lg leading-relaxed text-sky-900 font-medium",children:$(Y.content.confidenceBooster,"text-lg leading-relaxed text-sky-900 font-medium")})]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[C?s.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-2",children:""}),s.jsx("p",{className:"text-green-600",children:""})]}):s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-xl font-semibold text-slate-700 mb-4",children:""}),s.jsxs("button",{onClick:()=>I(Y.id),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white font-bold text-lg rounded-xl transition-colors flex items-center gap-3 mx-auto",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),""]})]}),J()&&s.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-2xl p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-orange-700 mb-3",children:""}),s.jsxs("button",{onClick:W,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium text-lg rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]})]})]})]});case"summary":return s.jsxs("div",{className:"text-center space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-12",children:[s.jsx("div",{className:"text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-3xl font-bold text-green-700 mb-4",children:""}),s.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["",n.topic,""]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-indigo-600 mb-2",children:""}),s.jsx("div",{className:"text-2xl font-bold text-slate-800",children:P}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-sky-600 mb-2",children:""}),s.jsx("div",{className:"text-2xl font-bold text-slate-800",children:Math.round((Date.now()-g.progress.startTime)/6e4)}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[s.jsx("div",{className:"text-3xl text-green-600 mb-2",children:""}),s.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[Math.round(fe),"%"]}),s.jsx("div",{className:"text-sm text-slate-600",children:""})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-8",children:[s.jsx("h4",{className:"text-2xl font-semibold text-purple-700 mb-6",children:" "}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[n.onlineInteractiveQuiz&&s.jsxs("a",{href:`/ai-page-gen/quiz?binId=${e}`,className:"px-8 py-4 bg-orange-500 text-white font-medium rounded-xl hover:bg-orange-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),""]}),n.writingPractice&&s.jsxs("a",{href:`/ai-page-gen/writing?binId=${e}`,className:"px-8 py-4 bg-purple-500 text-white font-medium rounded-xl hover:bg-purple-600 transition-colors flex items-center gap-3 text-lg",target:"_blank",rel:"noopener noreferrer",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})]});default:return s.jsx("div",{children:""})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b border-slate-200 shadow-sm",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:n.topic}),s.jsxs("p",{className:"text-xs text-slate-500",children:[" ",x+1,"  ",N.length," "]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Math.round((Date.now()-g.progress.startTime)/6e4)," "]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-1",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-sky-500 h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${(x+1)/N.length*100}%`}})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-xs text-slate-400",children:[" ",P,"/",Z,"  ",Math.round(fe),"%"]})})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"text-5xl mb-4",children:Y.icon}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:Y.title}),s.jsx("div",{className:"text-lg text-slate-600",children:$(Y.description,"text-lg text-slate-600")})]}),s.jsx("div",{className:"mb-8",children:Q()}),s.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-slate-200",children:[s.jsxs("button",{onClick:B,disabled:x===0,className:"flex items-center gap-2 px-6 py-3 bg-slate-500 text-white font-medium rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),""]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-slate-600",children:[x+1," / ",N.length]})}),s.jsxs("button",{onClick:q,disabled:x===N.length-1,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["",s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),S&&k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between rounded-t-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:" "}),s.jsx("button",{onClick:G,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-8",children:[k.trueFalse&&k.trueFalse.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," "]}),s.jsx("div",{className:"space-y-4",children:k.trueFalse.map((C,V)=>s.jsx(hm,{question:C,questionIndex:V,showExplanations:!0},`tf-${V}`))})]}),k.multipleChoice&&k.multipleChoice.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," "]}),s.jsx("div",{className:"space-y-4",children:k.multipleChoice.map((C,V)=>s.jsx(pm,{question:C,questionIndex:V,showExplanations:!0},`mc-${V}`))})]}),k.memoryCardGame&&k.memoryCardGame.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," "]}),s.jsx("div",{className:"space-y-4",children:k.memoryCardGame.map((C,V)=>s.jsx(gm,{question:C,itemNumber:V+1},`mcg-${V}`))})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-slate-50 p-6 border-t rounded-b-2xl",children:s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:G,className:"px-8 py-3 bg-indigo-500 hover:bg-indigo-600 text-white font-medium rounded-xl transition-colors",children:""})})})]})})]})};class xR{constructor(){this.synthesis=null,this.recognition=null,this.isRecording=!1,this.initializeSpeechSynthesis(),this.initializeSpeechRecognition()}initializeSpeechSynthesis(){"speechSynthesis"in window&&(this.synthesis=window.speechSynthesis)}isTTSSupported(){return this.synthesis!==null}getAvailableVoices(){return this.synthesis?this.synthesis.getVoices().filter(e=>e.lang.startsWith("en")):[]}speak(e,n={},i,l,o){return new Promise((u,f)=>{if(!this.synthesis){f(new Error("Text-to-Speech not supported in this browser"));return}this.synthesis.cancel();const g=new SpeechSynthesisUtterance(e),x={...{lang:"en-US",rate:1,pitch:1,volume:1},...n};g.lang=x.lang,g.rate=x.rate,g.pitch=x.pitch,g.volume=x.volume;const v=this.getAvailableVoices(),N=v.find(w=>w.lang===x.lang&&!w.name.includes("Google"))||v.find(w=>w.lang===x.lang)||v[0];N&&(g.voice=N),g.onstart=()=>{i==null||i()},g.onend=()=>{l==null||l(),u()},g.onerror=w=>{o==null||o(w),f(w)},this.synthesis.speak(g)})}stopSpeaking(){this.synthesis&&this.synthesis.cancel()}pauseSpeaking(){this.synthesis&&this.synthesis.pause()}resumeSpeaking(){this.synthesis&&this.synthesis.resume()}isSpeaking(){var e;return((e=this.synthesis)==null?void 0:e.speaking)||!1}initializeSpeechRecognition(){const e=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition;e&&(this.recognition=new e)}isSTTSupported(){return this.recognition!==null}startRecording(e={},n,i,l,o){return new Promise((u,f)=>{if(!this.recognition){f(new Error("Speech recognition not supported in this browser"));return}if(this.isRecording){f(new Error("Already recording"));return}const m={...{lang:"en-US",continuous:!1,interimResults:!0,maxAlternatives:3},...e};this.recognition.lang=m.lang,this.recognition.continuous=m.continuous,this.recognition.interimResults=m.interimResults,this.recognition.maxAlternatives=m.maxAlternatives,this.recognition.onstart=()=>{this.isRecording=!0,l==null||l()},this.recognition.onresult=x=>{for(let v=x.resultIndex;v<x.results.length;v++){const N=x.results[v][0].transcript,w=x.results[v][0].confidence;x.results[v].isFinal,n==null||n({text:N,confidence:w||.8,isFinal:x.results[v].isFinal})}},this.recognition.onerror=x=>{this.isRecording=!1,i==null||i(x),f(x)},this.recognition.onend=()=>{this.isRecording=!1,o==null||o(),u()};try{this.recognition.start()}catch(x){this.isRecording=!1,f(x)}})}stopRecording(){this.recognition&&this.isRecording&&this.recognition.stop()}isCurrentlyRecording(){return this.isRecording}analyzePronunciation(e,n){const i=e.toLowerCase().split(/\s+/),l=n.toLowerCase().split(/\s+/),o=[],u=[];i.forEach(m=>{const x=m.replace(/[.,!?;:]/g,"");l.some(v=>v.replace(/[.,!?;:]/g,"").includes(x)||x.includes(v.replace(/[.,!?;:]/g,"")))?o.push(m):u.push(m)});const f=i.length>0?o.length/i.length*100:0,g=[];return f<70&&g.push("Try speaking more slowly and clearly"),u.length>0&&g.push(`Practice these words: ${u.slice(0,3).join(", ")}`),n.length<e.length*.5&&g.push("Speak louder and closer to the microphone"),{accuracy:Math.round(f),suggestions:g,matchedWords:o,missedWords:u}}getSupportStatus(){const e=navigator.userAgent;let n="Unknown browser";return e.includes("Chrome")?n="Chrome":e.includes("Firefox")?n="Firefox":e.includes("Safari")?n="Safari":e.includes("Edge")&&(n="Edge"),{ttsSupported:this.isTTSSupported(),sttSupported:this.isSTTSupported(),browserInfo:n}}}const Ps=new xR,Sb=({turn:t,isCurrentTurn:e,isStudentTurn:n,studentRole:i,onPlayComplete:l,showTranslation:o=!1,showHints:u=!1,voiceSettings:f={}})=>{const[g,m]=_.useState(!1),[x,v]=_.useState(!1),[N,w]=_.useState(o),[S,j]=_.useState(u),k=_.useCallback(async()=>{if(g){Ps.stopSpeaking();return}try{m(!0),await Ps.speak(t.text,{lang:"en-US",rate:.9,...f},void 0,()=>{m(!1),l==null||l()},D=>{console.error("Speech playback error:",D),m(!1)})}catch(D){console.error("Failed to play speech:",D),m(!1)}},[t.text,g,f,l]),E=D=>{switch(D){case"easy":return"text-green-600 bg-green-50 border-green-200";case"normal":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"hard":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},L=(D,O)=>{let H=D;return O.forEach(I=>{const R=new RegExp(`\\b(${I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})\\b`,"gi");H=H.replace(R,'<mark class="bg-yellow-200 px-1 rounded">$1</mark>')}),H};return s.jsxs("div",{className:`
      relative rounded-lg border-2 transition-all duration-300 mb-4
      ${e?"border-blue-400 shadow-lg bg-blue-50":"border-gray-200 bg-white"}
      ${n&&e?"border-green-400 bg-green-50":""}
    `,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`
            w-10 h-10 rounded-full flex items-center justify-center text-white font-medium
            ${n?"bg-green-500":t.speaker==="Teacher"||t.speaker===""?"bg-blue-500":"bg-gray-500"}
          `,children:t.speaker.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[t.speaker,n&&s.jsx("span",{className:"ml-2 text-sm text-green-600 font-normal",children:"(Your turn)"})]}),e&&s.jsx("div",{className:"text-sm text-blue-600",children:"Current conversation turn"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`
            px-2 py-1 text-xs font-medium rounded-full border
            ${E(t.difficulty)}
          `,children:t.difficulty}),s.jsx("button",{onClick:k,disabled:n,className:`
              p-2 rounded-full transition-colors
              ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":g?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"}
            `,title:n?"It's your turn to speak":g?"Stop":"Play audio",children:g?s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),s.jsx("button",{onClick:()=>v(!x),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",title:"Show/hide details",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-lg text-gray-900 leading-relaxed mb-3",children:t.keyWords.length>0?s.jsx("div",{dangerouslySetInnerHTML:{__html:L(t.text,t.keyWords)}}):t.text}),s.jsx("div",{className:"flex items-center space-x-2 mb-3",children:s.jsx("button",{onClick:()=>w(!N),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:N?"":""})}),N&&s.jsx("div",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg mb-3 border border-gray-200",children:t.translation}),n&&t.expectedResponseHints&&t.expectedResponseHints.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("button",{onClick:()=>j(!S),className:"text-sm text-green-600 hover:text-green-800 font-medium mb-2",children:S?"":""}),S&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:" Response hints:"}),s.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:t.expectedResponseHints.map((D,O)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:D})]},O))})]})]}),x&&s.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Practice Point:"}),s.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 p-2 rounded border border-blue-200",children:t.practicePoint})]}),t.keyWords.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Key Words:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keyWords.map((D,O)=>s.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-full border border-yellow-300",children:D},O))})]}),t.pronunciation&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:" Pronunciation:"}),s.jsx("div",{className:"text-sm text-gray-600 font-mono bg-gray-50 p-2 rounded border border-gray-200",children:t.pronunciation})]})]})]}),e&&s.jsx("div",{className:"absolute -left-1 top-1/2 transform -translate-y-1/2",children:s.jsx("div",{className:"w-2 h-8 bg-blue-400 rounded-r"})}),n&&e&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"})})]})},yR=()=>{var I;const[t,e]=_.useState({topic:"",scenario:"",difficulty:"normal",participantCount:2,duration:10,focusAreas:[],culturalContext:""}),[n,i]=_.useState(""),[l,o]=_.useState(!1),[u,f]=_.useState(null),[g,m]=_.useState(null),[x,v]=_.useState(!1),[N,w]=_.useState(""),[S,j]=_.useState(0),k=Jo.getConversationTemplates(),E=Jo.getDifficultyLevels();_.useEffect(()=>{const R=localStorage.getItem("gemini_api_key");R&&i(R)},[]);const L=R=>{e({...t,topic:R.title,scenario:R.scenario,difficulty:R.suggestedDifficulty,participantCount:R.participants.length})},D=async()=>{if(!n.trim()){f("Please enter your Gemini API key");return}if(!t.topic.trim()||!t.scenario.trim()){f("Please provide both topic and scenario");return}o(!0),f(null);try{localStorage.setItem("gemini_api_key",n);const R=await Jo.generateConversationPractice(t,n);m(R),j(0)}catch(R){console.error("Failed to generate conversation:",R),f("Failed to generate conversation. Please check your API key and try again.")}finally{o(!1)}},O=async()=>{if(g){v(!0),f(null);try{const R={practice:g,metadata:{createdBy:"AI Page Gen",generatedAt:new Date().toISOString()}},q=await gv(R),B=`${window.location.origin}/ai-page-gen/conversation-practice/${q}`;w(B)}catch(R){console.error("Failed to share conversation:",R),f("Failed to create shareable link")}finally{v(!1)}}},H=()=>{navigator.clipboard.writeText(N)};return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:"Create interactive English conversation practices for your students"})]}),s.jsxs("a",{href:"/ai-page-gen/",className:"flex items-center gap-2 px-4 py-2 text-indigo-600 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Configuration"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gemini API Key"}),s.jsx("input",{type:"password",value:n,onChange:R=>i(R.target.value),placeholder:"Enter your Gemini API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Templates"}),s.jsx("div",{className:"space-y-4",children:k.map(R=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:R.category}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:R.scenarios.slice(0,2).map((q,B)=>s.jsxs("button",{onClick:()=>L(q),className:"text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors",children:[s.jsx("div",{className:"font-medium text-gray-900 text-sm",children:q.title}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[q.scenario.substring(0,60),"..."]})]},B))})]},R.category))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conversation Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic *"}),s.jsx("input",{type:"text",value:t.topic,onChange:R=>e({...t,topic:R.target.value}),placeholder:"e.g., Ordering food at a restaurant",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scenario *"}),s.jsx("textarea",{value:t.scenario,onChange:R=>e({...t,scenario:R.target.value}),placeholder:"Detailed description of the conversation context",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:E.map(R=>s.jsxs("button",{onClick:()=>e({...t,difficulty:R.level}),className:`p-3 rounded-lg border text-sm transition-colors ${t.difficulty===R.level?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[s.jsx("div",{className:"font-medium",children:R.level}),s.jsx("div",{className:"text-xs opacity-75 mt-1",children:R.description.split(" - ")[0]})]},R.level))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Participants"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:()=>e({...t,participantCount:2}),className:`px-4 py-2 rounded-lg border transition-colors ${t.participantCount===2?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"2 People"}),s.jsx("button",{onClick:()=>e({...t,participantCount:3}),className:`px-4 py-2 rounded-lg border transition-colors ${t.participantCount===3?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white hover:bg-gray-50"}`,children:"3 People"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Duration (minutes)"}),s.jsx("input",{type:"number",min:"5",max:"30",value:t.duration,onChange:R=>e({...t,duration:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Areas (optional)"}),s.jsx("input",{type:"text",value:((I=t.focusAreas)==null?void 0:I.join(", "))||"",onChange:R=>e({...t,focusAreas:R.target.value.split(",").map(q=>q.trim()).filter(q=>q)}),placeholder:"e.g., pronunciation, grammar, vocabulary",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:D,disabled:l||!n.trim(),className:"w-full px-4 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx(dn,{size:"sm"}),s.jsx("span",{children:"Generating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),s.jsx("span",{children:"Generate Conversation"})]})})})]}),u&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsx("div",{className:"text-sm text-red-700 mt-1",children:u})]})]})})]}),s.jsx("div",{className:"space-y-6",children:g?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generated Conversation"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Title"}),s.jsx("div",{className:"text-blue-700",children:g.title})]}),s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-sm font-medium text-green-800",children:"Difficulty"}),s.jsx("div",{className:"text-green-700",children:g.difficulty})]}),s.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[s.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Duration"}),s.jsxs("div",{className:"text-purple-700",children:[g.duration," min"]})]}),s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Turns"}),s.jsx("div",{className:"text-orange-700",children:g.dialogue.length})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Participants"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:g.participants.map((R,q)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:R},q))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("div",{className:"text-gray-600 text-sm",children:g.description})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preview"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>j(Math.max(0,S-1)),disabled:S===0,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[S+1," / ",g.dialogue.length]}),s.jsx("button",{onClick:()=>j(Math.min(g.dialogue.length-1,S+1)),disabled:S===g.dialogue.length-1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:text-gray-300 disabled:cursor-not-allowed",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})})]})]}),s.jsx(Sb,{turn:g.dialogue[S],isCurrentTurn:!0,isStudentTurn:!1,studentRole:"",showTranslation:!0,showHints:!0})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share with Students"}),N?s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Shareable Link"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:"text",value:N,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-gray-50"}),s.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-r-lg",children:"Copy"})]}),s.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Students can use this link to practice the conversation"})]}):s.jsx("button",{onClick:O,disabled:x,className:"w-full px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-medium rounded-lg transition-colors flex items-center justify-center space-x-2",children:x?s.jsxs(s.Fragment,{children:[s.jsx(dn,{size:"sm"}),s.jsx("span",{children:"Creating Share Link..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"})}),s.jsx("span",{children:"Create Share Link"})]})})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),s.jsx("div",{className:"text-gray-600",children:"Generate a conversation to see the preview"})]})})]})]})})},vR=({targetText:t,onRecordingComplete:e,onRecordingStart:n,onRecordingStop:i,disabled:l=!1,language:o="en-US",placeholder:u="Click to start recording..."})=>{const[f,g]=_.useState(!1),[m,x]=_.useState(""),[v,N]=_.useState(0),[w,S]=_.useState(!0),[j,k]=_.useState(null),[E,L]=_.useState(0),D=_.useRef(null),O=_.useRef([]),H=_.useRef(),I=_.useRef({text:"",confidence:0});_.useEffect(()=>{const G=Ps.getSupportStatus();return S(G.sttSupported),G.sttSupported||k("Your browser does not support speech recognition"),()=>{H.current&&cancelAnimationFrame(H.current)}},[]);const R=async()=>{if(!(!w||l))try{k(null),x(""),N(0),O.current=[];const G=await navigator.mediaDevices.getUserMedia({audio:!0}),J=new MediaRecorder(G);D.current=J,J.ondataavailable=z=>{z.data.size>0&&O.current.push(z.data)},J.start(),await Ps.startRecording({lang:o,continuous:!1,interimResults:!0},z=>{x(z.text),N(z.confidence),I.current={text:z.text,confidence:z.confidence},console.log("VoiceRecorder: Speech recognition result:",z)},z=>{console.error("Speech recognition error:",z),k("Speech recognition failed. Please try again."),q()},()=>{n==null||n(),g(!0)},()=>{g(!1),i==null||i(),setTimeout(()=>{const z=I.current.text,$=I.current.confidence;console.log(" VoiceRecorder: Preparing callback with:",{finalText:z,finalConfidence:$}),console.log(" VoiceRecorder: About to call onRecordingComplete"),console.log(" VoiceRecorder: Triggering onRecordingComplete NOW"),e({text:z,confidence:$,audioBlob:void 0}),D.current&&D.current.state!=="inactive"&&(D.current.stop(),D.current.onstop=()=>{const Y=O.current.length>0?new Blob(O.current,{type:"audio/wav"}):void 0;Y&&(console.log("VoiceRecorder: Updating with audio blob"),e({text:z,confidence:$,audioBlob:Y}))})},200)}),B(G)}catch(G){console.error("Failed to start recording:",G),k("Failed to access microphone. Please check permissions.")}},q=()=>{f&&(Ps.stopRecording(),L(0),H.current&&cancelAnimationFrame(H.current))},B=G=>{const J=new AudioContext,z=J.createAnalyser();J.createMediaStreamSource(G).connect(z),z.fftSize=256;const Y=z.frequencyBinCount,P=new Uint8Array(Y),Z=()=>{if(!f)return;z.getByteFrequencyData(P);const fe=P.reduce((Q,C)=>Q+C,0)/Y;L(fe/255),H.current=requestAnimationFrame(Z)};Z()},W=()=>{const G="relative flex items-center justify-center w-16 h-16 rounded-full transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-offset-2";return l?s.jsx("button",{className:`${G} bg-gray-300 cursor-not-allowed`,disabled:!0,children:s.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})}):f?s.jsxs("button",{onClick:q,className:`${G} bg-red-500 hover:bg-red-600 text-white focus:ring-red-300 animate-pulse`,style:{transform:`scale(${1+E*.3})`},children:[s.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-red-300",style:{transform:`scale(${1.2+E*.5})`,opacity:E*.7}})]}):s.jsx("button",{onClick:R,className:`${G} bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-300`,children:s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})})};return w?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[W(),s.jsx("div",{className:"text-sm text-gray-600 text-center",children:f?s.jsx("span",{className:"text-red-600 font-medium",children:"Recording..."}):u})]}),m&&s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"You said:"}),s.jsxs("div",{className:"text-gray-900",children:['"',m,'"']}),v>0&&s.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Confidence:"}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v>.8?"bg-green-500":v>.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${v*100}%`}})}),s.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(v*100),"%"]})]})]})}),j&&s.jsx("div",{className:"text-red-600 text-sm bg-red-50 px-3 py-2 rounded-lg border border-red-200",children:j}),t&&m&&s.jsxs("div",{className:"w-full max-w-md text-xs text-gray-500 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"font-medium mb-1",children:"Expected:"}),s.jsxs("div",{className:"text-blue-700",children:['"',t,'"']})]})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-2 p-4 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("div",{className:"text-red-600 text-sm font-medium",children:"Speech recognition not supported"}),s.jsx("div",{className:"text-red-500 text-xs text-center",children:"Please use Chrome, Edge, or Safari for voice recording"})]})},bR=()=>{const{binId:t}=$E(),e=Nm(),[n,i]=_.useState(null),[l,o]=_.useState(null),[u,f]=_.useState(!0),[g,m]=_.useState(null),[x,v]=_.useState(0),[N,w]=_.useState(!1),[S,j]=_.useState(null),[k,E]=_.useState(!1),[L,D]=_.useState(""),[O,H]=_.useState(""),[I,R]=_.useState(null),[q,B]=_.useState([]),[W,G]=_.useState(0),J=(ne,me)=>{const ue=Xt=>Xt.toLowerCase().replace(/[^\w\s]/g,"").trim(),Ne=ue(ne).split(/\s+/),Je=ue(me).split(/\s+/);if(Ne.length===0||Je.length===0)return 0;let Xe=0;const ht=new Set(Ne);Je.forEach(Xt=>{ht.has(Xt)?Xe++:Ne.forEach(Cn=>{Cn.length>=3&&Xt.length>=3&&(Cn.includes(Xt)||Xt.includes(Cn))&&(Xe+=.5)})});const wt=Math.max(Ne.length,Je.length);return Math.min(Xe/wt,1)},z=async ne=>{try{await Ps.speak(ne,{lang:"en-US",rate:.8,pitch:1,volume:1})}catch(me){console.error("Failed to play demonstration:",me)}},$=()=>{I!=null&&I.audioBlob&&new Audio(URL.createObjectURL(I.audioBlob)).play().catch(me=>{console.error("Failed to play recording:",me)})},Y=ne=>ne>=.8?"text-green-600":ne>=.6?"text-yellow-600":"text-red-600",P=ne=>{const me=ne.split(/[.!?]+/).filter(Je=>Je.trim().length>0),ue=[];for(let Je of me){const Xe=Je.trim();if(Xe.length>50){const ht=Xe.split(",").filter(wt=>wt.trim().length>0);ht.length>1?ue.push(...ht.map(wt=>wt.trim())):ue.push(Xe)}else Xe.length>0&&ue.push(Xe)}return ue.length>0?ue:[ne.trim()]},Z=ne=>{if(!n||!l)return;const me=n.dialogue[ne];if(!me||me.speaker!==l.studentRole)return;const ue=P(me.text),Ne=q.length===0||JSON.stringify(ue)!==JSON.stringify(q);B(ue),Ne&&(G(0),ue.length>0&&H(ue[0]))},fe=_.useCallback(async()=>{if(!t){m("No practice ID provided"),f(!1);return}try{const ne=await jk(t);if(ne.type!=="conversation-practice"){m("This is not a conversation practice link"),f(!1);return}i(ne.practice),ne.practice.participants.length>0&&D(ne.practice.participants[0]),f(!1)}catch(ne){console.error("Failed to load conversation practice:",ne),m("Failed to load conversation practice"),f(!1)}},[t]);_.useEffect(()=>{fe()},[fe]),_.useEffect(()=>{if(l&&n&&n.dialogue.length>0){const ne=n.dialogue[x];ne&&ne.speaker===l.studentRole?Z(x):(B([]),G(0),H(""))}},[l,n,x]),_.useEffect(()=>{},[O,W,q]);const Q=()=>{if(!n||!L)return;const ne={practiceId:n.id,startTime:Date.now(),currentTurnIndex:0,studentRole:L,responses:[],completed:!1};o(ne),v(0),w(!1)},C=ne=>{if(!n||!l)return!1;const me=n.dialogue[ne];return(me==null?void 0:me.speaker)===l.studentRole},V=async ne=>{const me=q.length>0?q[W]:O;if(!(!n||!l||!me)){E(!0);try{const ue=J(me,ne.text),Ne={text:ne.text,audioBlob:ne.audioBlob,similarity:ue};R(Ne);const Xe={turnId:n.dialogue[x].id,text:ne.text,confidence:ne.confidence,audioBlob:ne.audioBlob,timestamp:Date.now()},ht={...l,responses:[...l.responses,Xe]};o(ht)}catch(ue){console.error("Failed to process student response:",ue)}finally{E(!1)}}},ee=()=>{if(!(!n||!l)){if(w(!1),j(null),W<q.length-1){const ne=W+1,me=q[ne];R(null),G(ne),H(me);return}if(x<n.dialogue.length-1){const ne=x+1;R(null),B([]),G(0),H(""),v(ne)}else M()}},M=()=>{if(!l)return;const ne={...l,completed:!0};o(ne)};if(u)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dn,{}),s.jsx("div",{className:"mt-4 text-gray-600",children:"Loading conversation practice..."})]})});if(g)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx("div",{className:"text-red-600 text-lg font-medium mb-2",children:"Error"}),s.jsx("div",{className:"text-gray-600 mb-4",children:g}),s.jsx("button",{onClick:()=>e("/"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Home"})]})});if(!n)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-gray-600",children:"No conversation found"})})});if(!l)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.title}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["",n.difficulty==="easy"?"":n.difficulty==="normal"?"":""]}),s.jsxs("span",{children:[n.duration," "]}),s.jsxs("span",{children:[n.dialogue.length," "]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),s.jsx("p",{className:"text-gray-700 mb-4",children:n.scenario}),s.jsx("p",{className:"text-gray-600",children:n.description})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.participants.map(ne=>s.jsxs("button",{onClick:()=>D(ne),className:`p-4 border rounded-lg text-left transition-all ${L===ne?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("div",{className:"font-medium text-gray-900",children:ne}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[" ",ne," "]})]},ne))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:" "}),s.jsx("ul",{className:"space-y-2",children:n.practiceGoals.map((ne,me)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2 mt-0.5",children:""}),s.jsx("span",{className:"text-gray-700",children:ne})]},me))})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:Q,disabled:!L,className:`px-8 py-3 rounded-lg font-medium transition-colors ${L?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:""})})]})});if(l.completed)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:""}),s.jsx("p",{className:"text-gray-600 mb-6",children:""}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.responses.length}),s.jsx("div",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Math.round((Date.now()-l.startTime)/1e3/60)}),s.jsx("div",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.difficulty==="easy"?"":n.difficulty==="normal"?"":""}),s.jsx("div",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.studentRole}),s.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsx("button",{onClick:()=>{o(null),v(0)},className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:""}),s.jsx("button",{onClick:()=>e("/"),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium",children:""})]})]})})});const ge=n.dialogue[x],we=C(x);return s.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"font-semibold text-gray-900",children:n.title}),s.jsxs("span",{className:"text-sm text-gray-600",children:[x+1," / ",n.dialogue.length]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(x+1)/n.dialogue.length*100}%`}})})]}),s.jsx(Sb,{turn:ge,isCurrentTurn:!0,isStudentTurn:we,studentRole:l.studentRole,showTranslation:!1,showHints:we}),we?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" "}),q.length>1&&s.jsxs("p",{className:"text-blue-600 text-sm mb-2",children:[" ",W+1,"  /  ",q.length," "]}),s.jsx("p",{className:"text-gray-600",children:""})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" "}),q.length>1&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-700 mb-1",children:""}),s.jsx("div",{className:"text-blue-900",children:ge.text})]}),O?s.jsx("div",{className:"p-4 border-2 border-green-500 bg-green-50 rounded-lg cursor-pointer transition-colors",onClick:()=>H(O),children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-900 text-lg font-medium",children:O}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:ne=>{ne.stopPropagation(),z(O)},className:"p-2 text-blue-500 hover:bg-blue-100 rounded-full transition-colors",title:"",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})})})]})}):s.jsx("div",{className:"p-4 border-2 border-gray-300 bg-gray-50 rounded-lg",children:s.jsx("div",{className:"text-gray-500 text-center",children:"..."})}),ge.translation&&s.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("div",{className:"text-sm text-yellow-700 mb-1",children:" "}),s.jsx("div",{className:"text-yellow-900",children:ge.translation})]})]}),O&&s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:" "}),s.jsx(vR,{targetText:q.length>0?q[W]:O,onRecordingComplete:V,onRecordingStart:()=>{},onRecordingStop:()=>{},disabled:k,language:"en-US",placeholder:""})]}),I&&s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),I.audioBlob&&s.jsxs("button",{onClick:$,className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})}),""]})]}),s.jsxs("div",{className:"text-gray-800 mb-3 p-2 bg-white rounded border",children:['"',I.text,'"']}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600 mr-2",children:""}),s.jsxs("span",{className:`font-medium ${Y(I.similarity||0)}`,children:[Math.round((I.similarity||0)*100),"%"]}),(I.similarity||0)>=.8&&s.jsx("span",{className:"ml-2",children:" "}),(I.similarity||0)>=.6&&(I.similarity||0)<.8&&s.jsx("span",{className:"ml-2",children:" "}),(I.similarity||0)<.6&&s.jsx("span",{className:"ml-2",children:" "})]}),!I.audioBlob&&s.jsx("div",{className:"text-xs text-red-500 mt-2",children:""})]}),I&&(I.similarity||0)>=.6&&s.jsx("div",{className:"mt-4",children:s.jsxs("button",{onClick:ee,className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[s.jsx("span",{children:" "}),s.jsx("span",{children:(()=>{const ne=W>=q.length-1,me=x>=((n==null?void 0:n.dialogue.length)||0)-1;return ne?me?"":"":` (${W+2}/${q.length})`})()})]})}),I&&(I.similarity||0)<.6&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("div",{className:"text-sm text-yellow-800 mb-3",children:" "}),s.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white text-sm rounded transition-colors",children:" "})]})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["  ",ge.speaker," "]}),s.jsx("p",{className:"text-gray-600 mb-4",children:""}),s.jsxs("button",{onClick:ee,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium flex items-center gap-2 mx-auto",children:[s.jsx("span",{children:" "}),s.jsx("span",{children:""}),s.jsx("span",{children:""})]})]}),k&&s.jsxs("div",{className:"text-center mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx(dn,{}),s.jsx("div",{className:"text-sm text-blue-600 mt-2",children:" ..."})]})]})})},cl="gemini_api_key",wR=()=>{const[t]=Pr(),e=t.get("binId"),[n,i]=qe.useState(null),[l,o]=qe.useState(!1),[u,f]=qe.useState(""),[g,m]=qe.useState(null),[x,v]=qe.useState(!1);qe.useEffect(()=>{if(!e){f(" binId");return}o(!0),vc(e).then(S=>{i(S),N(S,e)}).catch(S=>f(S.message||"")).finally(()=>o(!1))},[e]);const N=async(S,j)=>{try{if(await Zt.init(),await Zt.getLessonPlan(`shared_${j}`)){await Zt.updateLastAccessed(`shared_${j}`);return}const E={id:`shared_${j}`,topic:S.topic||"",createdAt:new Date().toISOString(),lastAccessedAt:new Date().toISOString(),content:{learningObjectives:S.learningObjectives,contentBreakdown:S.contentBreakdown,confusingPoints:S.confusingPoints,classroomActivities:S.classroomActivities,quiz:S.onlineInteractiveQuiz,writingPractice:S.writingPractice},metadata:{totalSections:[S.learningObjectives,S.contentBreakdown,S.confusingPoints,S.classroomActivities,S.onlineInteractiveQuiz,S.writingPractice].filter(Boolean).length,hasQuiz:!!S.onlineInteractiveQuiz,hasWriting:!!S.writingPractice,isShared:!0,sharedBinId:j}};await Zt.saveLessonPlan(E),console.log(`: ${S.topic||""} (${j})`)}catch(k){console.error(":",k)}};qe.useEffect(()=>{const S=localStorage.getItem(cl);S?m(S):v(!0)},[]);const w=S=>{localStorage.setItem(cl,S),m(S),v(!1)};return l?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex justify-center my-10",children:s.jsx(dn,{})})}):u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:u})})}):n?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:[s.jsx(Tv,{isOpen:x,onSave:w}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("a",{href:"/ai-page-gen/",className:"inline-flex items-center gap-2 px-4 py-2 text-indigo-600 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm",children:[s.jsx(Rr,{className:"w-4 h-4"}),""]})}),!g&&!x&&s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-yellow-600 mt-0.5 flex-shrink-0",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0 0c.652-.286 1.323-.443 2.25-.443 1.38 0 2.652.24 3.75.697v-6a6 6 0 0 0-6 2.243M12 15.75V21m0-5.25c1.38 0 2.652-.24 3.75-.697v6a6 6 0 0 1-3.75-2.243M12 15.75L9 12"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:" API Key "}),s.jsx("p",{className:"text-yellow-700 text-xs mt-1",children:" AI "})]})]}),s.jsx("button",{onClick:()=>v(!0),className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" API Key"})]})}),s.jsx(bm,{content:n,topic:n.topic||"",selectedLevel:n.selectedLevel||null,selectedVocabularyLevel:n.selectedVocabularyLevel||null,apiKey:g||void 0,onContentUpdate:i})]})]}):null},NR=()=>{const[t,e]=_.useState(""),[n,i]=_.useState(null),[l,o]=_.useState(!1),[u,f]=_.useState(null),[g,m]=_.useState(null),[x,v]=_.useState(!1),[N,w]=_.useState(null),[S,j]=_.useState(null),[k,E]=_.useState(null),[L,D]=_.useState(!1),[O,H]=_.useState(null),[I,R]=_.useState(!1),[q,B]=_.useState(!1);qe.useEffect(()=>{const Z=new URLSearchParams(window.location.search).get("apikey");if(Z){localStorage.setItem(cl,Z),m(Z),v(!1);const Q=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,Q);return}const fe=localStorage.getItem(cl);fe?m(fe):v(!0)},[]);const W=P=>{localStorage.setItem(cl,P),m(P),v(!1)},G=async(P,Z)=>{try{await Zt.init();const fe=zA(Z,P);await Zt.saveLessonPlan(fe)}catch(fe){console.error(":",fe)}},J=_.useCallback(async()=>{if(!t.trim()){f("");return}if(!g){f(" Gemini API "),v(!0);return}o(!0),f(null),j(null),i(null),E(null),H(null),R(!1);const P=Vj(t);B(P);try{const Z=await $j(t,g);j(Z),D(!0),P&&R(!0)}catch(Z){console.error(Z),f(Z.message||"")}finally{o(!1)}},[t,g]),z=_.useCallback(async P=>{if(!g){f(" Gemini API "),v(!0);return}if(q&&!O){f("");return}o(!0),f(null),E(P),i(null);try{let Z;q&&O?Z=await Fj(t,P,O,g):Z=await qj(t,P,g),i(Z),D(!1),R(!1),await G(Z,t)}catch(Z){console.error(Z),f(Z.message||"")}finally{o(!1)}},[t,g,q,O]),$=_.useCallback(async()=>{if(!t.trim()){f("");return}if(!g){f(" Gemini API "),v(!0);return}o(!0),f(null),i(null),D(!1),R(!1),B(!1);try{const P=await Kj(t,g);i(P),await G(P,t)}catch(P){console.error(P),f(P.message||""),i(null)}finally{o(!1)}},[t,g]),Y=async()=>{if(!g){w(" API ");return}const P=`${window.location.origin}/ai-page-gen/?apikey=${encodeURIComponent(g)}`;try{await navigator.clipboard.writeText(P),w("")}catch{w("")}setTimeout(()=>w(null),2e3)};return s.jsx(EA,{basename:"/ai-page-gen/",children:s.jsxs(iA,{children:[s.jsx(In,{path:"share",element:s.jsx(wR,{})}),s.jsx(In,{path:"quiz",element:s.jsx($A,{})}),s.jsx(In,{path:"writing",element:s.jsx(qA,{})}),s.jsx(In,{path:"student-results",element:s.jsx(HA,{})}),s.jsx(In,{path:"lesson-plans",element:s.jsx(GA,{})}),s.jsx(In,{path:"interactive-learning",element:s.jsx(mR,{})}),s.jsx(In,{path:"teacher-interactive-prep",element:s.jsx(pR,{})}),s.jsx(In,{path:"student-interactive",element:s.jsx(gR,{})}),s.jsx(In,{path:"conversation-prep",element:s.jsx(yR,{})}),s.jsx(In,{path:"conversation-practice/:binId",element:s.jsx(bR,{})}),s.jsx(In,{path:"/",element:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-sky-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:[s.jsx(Tv,{isOpen:x,onSave:W}),s.jsxs("header",{className:"text-center mb-10",children:[s.jsxs("h1",{className:"text-4xl sm:text-5xl font-extrabold text-sky-700 tracking-tight",children:["AI  ",s.jsx("span",{className:"text-indigo-600",children:""})]}),s.jsx("p",{className:"mt-3 text-lg text-slate-600 max-w-2xl mx-auto",children:" AI "}),s.jsxs("div",{className:"mt-6 max-w-2xl mx-auto bg-yellow-50 border-l-4 border-yellow-400 rounded-lg p-4 text-left shadow-sm",children:[s.jsxs("div",{className:"flex items-start mb-2",children:[s.jsx("svg",{className:"w-6 h-6 text-yellow-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z"})}),s.jsx("span",{className:"font-semibold text-yellow-800 text-base",children:""})]}),s.jsxs("ul",{className:"list-disc pl-8 text-yellow-900 text-sm space-y-1",children:[s.jsx("li",{children:"AI"}),s.jsx("li",{children:""})]})]})]}),s.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(dE,{compact:!0})})}),s.jsxs("div",{className:"max-w-6xl mx-auto mb-8",children:[s.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[s.jsxs("a",{href:"/ai-page-gen/lesson-plans",className:"flex items-center gap-2 px-4 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-lg",children:[s.jsx($n,{className:"w-5 h-5"}),""]}),s.jsxs("a",{href:"/ai-page-gen/conversation-prep",className:"flex items-center gap-2 px-4 py-3 bg-emerald-600 text-white font-medium rounded-lg hover:bg-emerald-700 transition-colors shadow-lg",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),""]}),s.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors shadow-lg",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-11.314a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"})}),""]})]}),N&&s.jsx("div",{className:"mt-3 text-center",children:s.jsx("p",{className:`text-sm ${N.includes("")?"text-red-600":"text-green-600"}`,children:N})})]}),s.jsxs("main",{className:"max-w-4xl mx-auto",children:[s.jsx(rk,{topic:t,setTopic:e,onGenerate:$,onGenerateWithLevels:J,isLoading:l}),u&&!l&&s.jsxs("div",{className:"my-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md",children:[s.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center",children:[s.jsx(Ff,{className:"w-6 h-6 mr-2 text-red-600"}),""]}),s.jsx("p",{children:u}),s.jsx("p",{className:"mt-2 text-sm",children:"AI  API "})]}),l&&s.jsx("div",{className:"flex justify-center my-10",children:s.jsx(dn,{})}),L&&S&&!l&&!u&&s.jsx(cE,{learningLevels:S,onLevelSelect:E,onGenerateWithLevel:z,selectedLevelId:k==null?void 0:k.id,isLoading:l}),I&&q&&!l&&!u&&s.jsx(uE,{onVocabularyLevelSelect:H,selectedLevel:O,isVisible:!0}),n&&!l&&!u&&!L&&!I&&s.jsx(bm,{content:n,topic:t,selectedLevel:k,selectedVocabularyLevel:O,apiKey:g||void 0,onContentUpdate:i})]}),s.jsxs("footer",{className:"text-center mt-12 py-6 border-t border-slate-300",children:[s.jsx("p",{className:"text-sm text-slate-500",children:" Gemini API AI "}),s.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded shadow transition",onClick:Y,disabled:!g,children:""}),N&&s.jsx("div",{className:"mt-2 text-green-600 text-sm",children:N})]})]})})]})})},Tb=document.getElementById("root");if(!Tb)throw new Error("Could not find root element to mount to");const CR=Gw.createRoot(Tb);CR.render(s.jsx(qe.StrictMode,{children:s.jsx(NR,{})}));
